[
  {
    "discussion_id": "2137541943",
    "pr_number": 54040,
    "pr_file": ".dumi/scripts/mirror-notify.js",
    "created_at": "2025-06-10T10:46:00+00:00",
    "commented_code": "});\n   }\n \n+  function checkMirrorAvailable(timeout = 1500) {\n+    return new Promise((resolve) => {\n+      const img = new Image();\n+      let done = false;\n+      img.onload = () => {\n+        if (!done) {\n+          done = true;\n+          resolve(true);\n+        }\n+      };\n+      img.onerror = () => {\n+        if (!done) {\n+          done = true;\n+          resolve(false);\n+        }\n+      };\n+      img.src = `https://render.alipay.com/p/h5data/antd4-config_website-h5data.json?_t=${Date.now()}`;\n+      setTimeout(() => {\n+        if (!done) {\n+          done = true;\n+          resolve(false);\n+        }\n+      }, timeout);\n+    });\n+  }",
    "repo_full_name": "ant-design/ant-design",
    "discussion_comments": [
      {
        "comment_id": "2137541943",
        "repo_full_name": "ant-design/ant-design",
        "pr_number": 54040,
        "pr_file": ".dumi/scripts/mirror-notify.js",
        "discussion_id": "2137541943",
        "commented_code": "@@ -215,6 +218,32 @@\n     });\n   }\n \n+  function checkMirrorAvailable(timeout = 1500) {\n+    return new Promise((resolve) => {\n+      const img = new Image();\n+      let done = false;\n+      img.onload = () => {\n+        if (!done) {\n+          done = true;\n+          resolve(true);\n+        }\n+      };\n+      img.onerror = () => {\n+        if (!done) {\n+          done = true;\n+          resolve(false);\n+        }\n+      };\n+      img.src = `https://render.alipay.com/p/h5data/antd4-config_website-h5data.json?_t=${Date.now()}`;\n+      setTimeout(() => {\n+        if (!done) {\n+          done = true;\n+          resolve(false);\n+        }\n+      }, timeout);\n+    });\n+  }",
        "comment_created_at": "2025-06-10T10:46:00+00:00",
        "comment_author": "afc163",
        "comment_body": "\u8fd9\u91cc\u8981\u5224\u65ad\u4e00\u4e0b\u56fd\u5185\u955c\u50cf\u5feb\u4e0d\u5feb\u3002\u5426\u5219\u7528\u6237\u5982\u679c\u662f\u6d77\u5916\u7684\uff0c\u8bbf\u95ee ant.design \u867d\u7136\u6162\uff0c\u4f46\u56fd\u5185\u955c\u50cf\u5bf9\u4ed6\u6765\u8bf4\u53ef\u80fd\u66f4\u6162",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2078834878",
    "pr_number": 53760,
    "pr_file": ".dumi/scripts/mirror-modal.js",
    "created_at": "2025-05-08T03:47:35+00:00",
    "commented_code": "(function createMirrorModal() {\n-  if (\n-    (navigator.languages.includes('zh') || navigator.languages.includes('zh-CN')) &&\n-    /-cn\\/?$/.test(window.location.pathname) &&\n-    !['ant-design.gitee.io', 'ant-design.antgroup.com'].includes(window.location.hostname) &&\n-    !window.location.host.includes('surge') &&\n-    window.location.hostname !== 'localhost'\n-  ) {\n-    const ANTD_DOT_NOT_SHOW_MIRROR_MODAL = 'ANT_DESIGN_DO_NOT_OPEN_MIRROR_MODAL';\n-\n-    const lastShowTime = window.localStorage.getItem(ANTD_DOT_NOT_SHOW_MIRROR_MODAL);\n-    if (\n-      lastShowTime &&\n-      lastShowTime !== 'true' &&\n-      Date.now() - new Date(lastShowTime).getTime() < 7 * 24 * 60 * 60 * 1000\n-    ) {\n-      return;\n-    }\n+  const isDebug = window.localStorage.getItem('DEBUG') === 'antd';\n+  const ANTD_DOT_NOT_SHOW_MIRROR_MODAL = 'ANT_DESIGN_DO_NOT_OPEN_MIRROR_MODAL';\n+  /**\n+   * If you do not wish to be prompted by the modal again,\n+   * you can set the next display timestamp manually to a future date.\n+   * @see https://github.com/ant-design/ant-design/issues/53759\n+   * For example, the line below sets it to 6 months from now.\n+   */\n+  // window.localStorage.setItem(\"ANT_DESIGN_DO_NOT_OPEN_MIRROR_MODAL\", Date.now() + 6 * 30 * 24 * 60 * 60 * 1000);\n+  let nextShowTimestamp = window.localStorage.getItem(ANTD_DOT_NOT_SHOW_MIRROR_MODAL);\n+\n+  if (nextShowTimestamp === null) {\n+    nextShowTimestamp = Date.now() - 0.5 * 60 * 1000; // Set to 30 seconds ago\n+    window.localStorage.setItem(ANTD_DOT_NOT_SHOW_MIRROR_MODAL, nextShowTimestamp);\n+  }\n+\n+  const condition = [",
    "repo_full_name": "ant-design/ant-design",
    "discussion_comments": [
      {
        "comment_id": "2078834878",
        "repo_full_name": "ant-design/ant-design",
        "pr_number": 53760,
        "pr_file": ".dumi/scripts/mirror-modal.js",
        "discussion_id": "2078834878",
        "commented_code": "@@ -1,22 +1,44 @@\n (function createMirrorModal() {\n-  if (\n-    (navigator.languages.includes('zh') || navigator.languages.includes('zh-CN')) &&\n-    /-cn\\/?$/.test(window.location.pathname) &&\n-    !['ant-design.gitee.io', 'ant-design.antgroup.com'].includes(window.location.hostname) &&\n-    !window.location.host.includes('surge') &&\n-    window.location.hostname !== 'localhost'\n-  ) {\n-    const ANTD_DOT_NOT_SHOW_MIRROR_MODAL = 'ANT_DESIGN_DO_NOT_OPEN_MIRROR_MODAL';\n-\n-    const lastShowTime = window.localStorage.getItem(ANTD_DOT_NOT_SHOW_MIRROR_MODAL);\n-    if (\n-      lastShowTime &&\n-      lastShowTime !== 'true' &&\n-      Date.now() - new Date(lastShowTime).getTime() < 7 * 24 * 60 * 60 * 1000\n-    ) {\n-      return;\n-    }\n+  const isDebug = window.localStorage.getItem('DEBUG') === 'antd';\n+  const ANTD_DOT_NOT_SHOW_MIRROR_MODAL = 'ANT_DESIGN_DO_NOT_OPEN_MIRROR_MODAL';\n+  /**\n+   * If you do not wish to be prompted by the modal again,\n+   * you can set the next display timestamp manually to a future date.\n+   * @see https://github.com/ant-design/ant-design/issues/53759\n+   * For example, the line below sets it to 6 months from now.\n+   */\n+  // window.localStorage.setItem(\"ANT_DESIGN_DO_NOT_OPEN_MIRROR_MODAL\", Date.now() + 6 * 30 * 24 * 60 * 60 * 1000);\n+  let nextShowTimestamp = window.localStorage.getItem(ANTD_DOT_NOT_SHOW_MIRROR_MODAL);\n+\n+  if (nextShowTimestamp === null) {\n+    nextShowTimestamp = Date.now() - 0.5 * 60 * 1000; // Set to 30 seconds ago\n+    window.localStorage.setItem(ANTD_DOT_NOT_SHOW_MIRROR_MODAL, nextShowTimestamp);\n+  }\n+\n+  const condition = [",
        "comment_created_at": "2025-05-08T03:47:35+00:00",
        "comment_author": "zombieJ",
        "comment_body": "\u6761\u4ef6\u91cc\u8fd8\u9700\u8981\u5224\u65ad\u7528\u6237\u5f53\u524d\u7f51\u7edc\u662f\u5426\u6210\u529f\u6253\u5f00\u5b98\u7f51\u4e86\uff0c\u5982\u679c\u6162\u7684\u8bdd\u624d\u5f39\u51fa\u63d0\u793a\u3002",
        "pr_file_module": null
      }
    ]
  }
]