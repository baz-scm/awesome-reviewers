[
  {
    "discussion_id": "2094516026",
    "pr_number": 9796,
    "pr_file": "app/config/specs/swagger2-latest-client.json",
    "created_at": "2025-05-18T12:53:02+00:00",
    "commented_code": "\"documentId\": {\n                                     \"type\": \"string\",\n                                     \"description\": \"Document ID. Choose a custom ID or generate a random ID with `ID.unique()`. Valid chars are a-z, A-Z, 0-9, period, hyphen, and underscore. Can't start with a special char. Max length is 36 chars.\",\n-                                    \"default\": null,\n+                                    \"default\": \"\",\n                                     \"x-example\": \"<DOCUMENT_ID>\"\n                                 },\n                                 \"data\": {\n                                     \"type\": \"object\",\n                                     \"description\": \"Document data as JSON object.\",\n-                                    \"default\": {},\n+                                    \"default\": [],",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2094516026",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9796,
        "pr_file": "app/config/specs/swagger2-latest-client.json",
        "discussion_id": "2094516026",
        "commented_code": "@@ -4636,13 +4664,13 @@\n                                 \"documentId\": {\n                                     \"type\": \"string\",\n                                     \"description\": \"Document ID. Choose a custom ID or generate a random ID with `ID.unique()`. Valid chars are a-z, A-Z, 0-9, period, hyphen, and underscore. Can't start with a special char. Max length is 36 chars.\",\n-                                    \"default\": null,\n+                                    \"default\": \"\",\n                                     \"x-example\": \"<DOCUMENT_ID>\"\n                                 },\n                                 \"data\": {\n                                     \"type\": \"object\",\n                                     \"description\": \"Document data as JSON object.\",\n-                                    \"default\": {},\n+                                    \"default\": [],",
        "comment_created_at": "2025-05-18T12:53:02+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Critical: Mismatched default type for `data`.**\n\nThe schema defines `\"data\"` as an `object`, yet the default value is set to an array (`[]`). This is a type violation and will break schema validation in clients.  \n\n\nPlease apply:\n```diff\n \"data\": {\n   \"type\": \"object\",\n   \"description\": \"Document data as JSON object.\",\n-  \"default\": [],\n+  \"default\": {},\n   \"x-example\": \"{}\"\n },\n```\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n                                \"data\": {\n                                    \"type\": \"object\",\n                                    \"description\": \"Document data as JSON object.\",\n-                                   \"default\": [],\n+                                   \"default\": {},\n+                                   \"x-example\": \"{}\"\n                                },\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn app/config/specs/swagger2-latest-client.json around lines 4667 to 4673, the\n\"data\" property is defined as an object but its default value is incorrectly set\nto an empty array. Change the default value from [] to an empty object {} to\nmatch the declared type and ensure schema validation passes.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2094516042",
    "pr_number": 9796,
    "pr_file": "app/config/specs/swagger2-1.6.x-server.json",
    "created_at": "2025-05-18T12:53:02+00:00",
    "commented_code": "\"server\"\n                     ],\n                     \"packaging\": false,\n+                    \"methods\": [\n+                        {\n+                            \"name\": \"createDocument\",\n+                            \"parameters\": [\n+                                \"databaseId\",\n+                                \"collectionId\",\n+                                \"documentId\",\n+                                \"data\",\n+                                \"permissions\"\n+                            ],\n+                            \"required\": [\n+                                \"databaseId\",\n+                                \"collectionId\",\n+                                \"documentId\",\n+                                \"data\"\n+                            ],\n+                            \"responses\": [\n+                                {\n+                                    \"code\": 201,\n+                                    \"model\": \"#\\/definitions\\/document\"\n+                                }\n+                            ],\n+                            \"description\": \"Create a new Document. Before using this route, you should create a new collection resource using either a [server integration](https:\\/\\/appwrite.io\\/docs\\/server\\/databases#databasesCreateCollection) API or directly from your database console.\"\n+                        }\n+                    ],",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2094516042",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9796,
        "pr_file": "app/config/specs/swagger2-1.6.x-server.json",
        "discussion_id": "2094516042",
        "commented_code": "@@ -7618,6 +7621,31 @@\n                         \"server\"\n                     ],\n                     \"packaging\": false,\n+                    \"methods\": [\n+                        {\n+                            \"name\": \"createDocument\",\n+                            \"parameters\": [\n+                                \"databaseId\",\n+                                \"collectionId\",\n+                                \"documentId\",\n+                                \"data\",\n+                                \"permissions\"\n+                            ],\n+                            \"required\": [\n+                                \"databaseId\",\n+                                \"collectionId\",\n+                                \"documentId\",\n+                                \"data\"\n+                            ],\n+                            \"responses\": [\n+                                {\n+                                    \"code\": 201,\n+                                    \"model\": \"#\\/definitions\\/document\"\n+                                }\n+                            ],\n+                            \"description\": \"Create a new Document. Before using this route, you should create a new collection resource using either a [server integration](https:\\/\\/appwrite.io\\/docs\\/server\\/databases#databasesCreateCollection) API or directly from your database console.\"\n+                        }\n+                    ],",
        "comment_created_at": "2025-05-18T12:53:02+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Vendor extension placement for `methods`**  \nThe `methods` array is not a standard OpenAPI property and currently lives at the root of the operation object. To ensure the spec remains valid, move this under a vendor extension (for example, as `x-appwrite-methods` or inside the existing `x-appwrite` object).\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn app/config/specs/swagger2-1.6.x-server.json between lines 7624 and 7648, the\n`methods` array is incorrectly placed at the root of the operation object, which\nis not valid in OpenAPI. To fix this, move the `methods` array into a vendor\nextension property such as `x-appwrite-methods` or nest it inside the existing\n`x-appwrite` object to maintain spec validity.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2087814652",
    "pr_number": 9755,
    "pr_file": "app/config/specs/open-api3-latest-client.json",
    "created_at": "2025-05-14T00:14:36+00:00",
    "commented_code": "\"servers\": [\n         {\n             \"url\": \"https:\\/\\/cloud.appwrite.io\\/v1\"\n+        },\n+        {\n+            \"url\": \"https:\\/\\/<REGION>.cloud.appwrite.io\\/v1\"\n         }",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2087814652",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9755,
        "pr_file": "app/config/specs/open-api3-latest-client.json",
        "discussion_id": "2087814652",
        "commented_code": "@@ -18,6 +18,9 @@\n     \"servers\": [\n         {\n             \"url\": \"https:\\/\\/cloud.appwrite.io\\/v1\"\n+        },\n+        {\n+            \"url\": \"https:\\/\\/<REGION>.cloud.appwrite.io\\/v1\"\n         }",
        "comment_created_at": "2025-05-14T00:14:36+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\ud83d\udee0\ufe0f Refactor suggestion_\n\n**Use OpenAPI variables for regional server URLs**  \nThe placeholder `<REGION>` is not a valid OpenAPI URL template. Replace it with `{region}` and define a corresponding `variables` object to specify allowed regions and defaults.  \n  \nExample diff:\n```diff\n \"servers\": [\n     {\n         \"url\": \"https://cloud.appwrite.io/v1\"\n     },\n-    {\n-        \"url\": \"https://<REGION>.cloud.appwrite.io/v1\"\n-    }\n+    {\n+        \"url\": \"https://{region}.cloud.appwrite.io/v1\",\n+        \"variables\": {\n+            \"region\": {\n+                \"description\": \"Regional subdomain (e.g., us-east-1, eu-west-1)\",\n+                \"default\": \"us-east-1\"\n+            }\n+        }\n+    }\n ]\n```\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n        },\n        {\n            \"url\": \"https://{region}.cloud.appwrite.io/v1\",\n            \"variables\": {\n                \"region\": {\n                    \"description\": \"Regional subdomain (e.g., us-east-1, eu-west-1)\",\n                    \"default\": \"us-east-1\"\n                }\n            }\n        }\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  }
]