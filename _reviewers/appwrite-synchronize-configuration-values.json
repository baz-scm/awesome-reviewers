[
  {
    "discussion_id": "2106241586",
    "pr_number": 9647,
    "pr_file": "app/views/install/compose.phtml",
    "created_at": "2025-05-25T16:00:44+00:00",
    "commented_code": "- appwrite\n     environment:\n       - _APP_ASSISTANT_OPENAI_API_KEY\n+      \n+  appwrite-browser:\n+    image: appwrite/browser:0.2.4\n+    container_name: appwrite-browser\n+    <<: *x-logging\n+    restart: unless-stopped\n+    networks:\n+      - appwrite\n \n   openruntimes-executor:\n     container_name: openruntimes-executor\n     hostname: exc1\n     <<: *x-logging\n     restart: unless-stopped\n     stop_signal: SIGINT\n-    image: openruntimes/executor:0.6.11\n+    image: openruntimes/executor:0.7.14",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2106241586",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9647,
        "pr_file": "app/views/install/compose.phtml",
        "discussion_id": "2106241586",
        "commented_code": "@@ -829,33 +849,43 @@ $image = $this->getParam('image', '');\n       - appwrite\n     environment:\n       - _APP_ASSISTANT_OPENAI_API_KEY\n+      \n+  appwrite-browser:\n+    image: appwrite/browser:0.2.4\n+    container_name: appwrite-browser\n+    <<: *x-logging\n+    restart: unless-stopped\n+    networks:\n+      - appwrite\n \n   openruntimes-executor:\n     container_name: openruntimes-executor\n     hostname: exc1\n     <<: *x-logging\n     restart: unless-stopped\n     stop_signal: SIGINT\n-    image: openruntimes/executor:0.6.11\n+    image: openruntimes/executor:0.7.14",
        "comment_created_at": "2025-05-25T16:00:44+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Version mismatch with docker-compose.yml.**\n\nThe OpenRuntimes executor version here is `0.7.14` while `docker-compose.yml` uses `0.7.16`. This inconsistency between development and production configurations could lead to environment-specific issues.\n\nPlease synchronize the versions:\n```diff\n-    image: openruntimes/executor:0.7.14\n+    image: openruntimes/executor:0.7.16\n```\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n    image: openruntimes/executor:0.7.16\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn app/views/install/compose.phtml at line 867, the OpenRuntimes executor\nversion is set to 0.7.14, which does not match the version 0.7.16 used in\ndocker-compose.yml. Update the version here to 0.7.16 to ensure consistency\nbetween development and production environments.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->\n\n\u2705 Addressed in commits c4f1a68 to d98c06a",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2106241588",
    "pr_number": 9647,
    "pr_file": "app/views/install/compose.phtml",
    "created_at": "2025-05-25T16:00:44+00:00",
    "commented_code": "- appwrite\n     environment:\n       - _APP_ASSISTANT_OPENAI_API_KEY\n+      \n+  appwrite-browser:\n+    image: appwrite/browser:0.2.4\n+    container_name: appwrite-browser\n+    <<: *x-logging\n+    restart: unless-stopped\n+    networks:\n+      - appwrite\n \n   openruntimes-executor:\n     container_name: openruntimes-executor\n     hostname: exc1\n     <<: *x-logging\n     restart: unless-stopped\n     stop_signal: SIGINT\n-    image: openruntimes/executor:0.6.11\n+    image: openruntimes/executor:0.7.14\n     networks:\n       - appwrite\n       - runtimes\n     volumes:\n       - /var/run/docker.sock:/var/run/docker.sock\n       - appwrite-builds:/storage/builds:rw\n       - appwrite-functions:/storage/functions:rw\n+      - appwrite-sites:/storage/sites:rw\n       # Host mount nessessary to share files between executor and runtimes.\n       # It's not possible to share mount file between 2 containers without host mount (copying is too slow)\n       - /tmp:/tmp:rw\n     environment:\n-      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_FUNCTIONS_INACTIVE_THRESHOLD\n-      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_FUNCTIONS_MAINTENANCE_INTERVAL\n-      - OPR_EXECUTOR_NETWORK=$_APP_FUNCTIONS_RUNTIMES_NETWORK\n+      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_COMPUTE_INACTIVE_THRESHOLD\n+      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_COMPUTE_MAINTENANCE_INTERVAL\n+      - OPR_EXECUTOR_NETWORK=$_APP_COMPUTE_RUNTIMES_NETWORK\n       - OPR_EXECUTOR_DOCKER_HUB_USERNAME=$_APP_DOCKER_HUB_USERNAME\n       - OPR_EXECUTOR_DOCKER_HUB_PASSWORD=$_APP_DOCKER_HUB_PASSWORD\n       - OPR_EXECUTOR_ENV=$_APP_ENV\n-      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES\n+      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES,$_APP_SITES_RUNTIMES\n       - OPR_EXECUTOR_SECRET=$_APP_EXECUTOR_SECRET\n+      - OPR_EXECUTOR_RUNTIME_VERSIONS=v5",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2106241588",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9647,
        "pr_file": "app/views/install/compose.phtml",
        "discussion_id": "2106241588",
        "commented_code": "@@ -829,33 +849,43 @@\n       - appwrite\n     environment:\n       - _APP_ASSISTANT_OPENAI_API_KEY\n+      \n+  appwrite-browser:\n+    image: appwrite/browser:0.2.4\n+    container_name: appwrite-browser\n+    <<: *x-logging\n+    restart: unless-stopped\n+    networks:\n+      - appwrite\n \n   openruntimes-executor:\n     container_name: openruntimes-executor\n     hostname: exc1\n     <<: *x-logging\n     restart: unless-stopped\n     stop_signal: SIGINT\n-    image: openruntimes/executor:0.6.11\n+    image: openruntimes/executor:0.7.14\n     networks:\n       - appwrite\n       - runtimes\n     volumes:\n       - /var/run/docker.sock:/var/run/docker.sock\n       - appwrite-builds:/storage/builds:rw\n       - appwrite-functions:/storage/functions:rw\n+      - appwrite-sites:/storage/sites:rw\n       # Host mount nessessary to share files between executor and runtimes.\n       # It's not possible to share mount file between 2 containers without host mount (copying is too slow)\n       - /tmp:/tmp:rw\n     environment:\n-      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_FUNCTIONS_INACTIVE_THRESHOLD\n-      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_FUNCTIONS_MAINTENANCE_INTERVAL\n-      - OPR_EXECUTOR_NETWORK=$_APP_FUNCTIONS_RUNTIMES_NETWORK\n+      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_COMPUTE_INACTIVE_THRESHOLD\n+      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_COMPUTE_MAINTENANCE_INTERVAL\n+      - OPR_EXECUTOR_NETWORK=$_APP_COMPUTE_RUNTIMES_NETWORK\n       - OPR_EXECUTOR_DOCKER_HUB_USERNAME=$_APP_DOCKER_HUB_USERNAME\n       - OPR_EXECUTOR_DOCKER_HUB_PASSWORD=$_APP_DOCKER_HUB_PASSWORD\n       - OPR_EXECUTOR_ENV=$_APP_ENV\n-      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES\n+      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES,$_APP_SITES_RUNTIMES\n       - OPR_EXECUTOR_SECRET=$_APP_EXECUTOR_SECRET\n+      - OPR_EXECUTOR_RUNTIME_VERSIONS=v5",
        "comment_created_at": "2025-05-25T16:00:44+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Runtime versions mismatch with docker-compose.yml.**\n\nThe runtime versions here only include `v5` while `docker-compose.yml` includes `v2,v5`. This could cause compatibility issues in production.\n\nPlease synchronize the runtime versions:\n```diff\n-      - OPR_EXECUTOR_RUNTIME_VERSIONS=v5\n+      - OPR_EXECUTOR_RUNTIME_VERSIONS=v2,v5\n```\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n      - OPR_EXECUTOR_RUNTIME_VERSIONS=v2,v5\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn app/views/install/compose.phtml at line 888, the runtime versions are set\nonly to 'v5', but the docker-compose.yml file includes both 'v2' and 'v5'.\nUpdate the OPR_EXECUTOR_RUNTIME_VERSIONS value to include both 'v2' and 'v5' to\nensure consistency and avoid compatibility issues.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2094519302",
    "pr_number": 9649,
    "pr_file": "app/views/install/compose.phtml",
    "created_at": "2025-05-18T13:06:37+00:00",
    "commented_code": "- _APP_OPTIONS_ABUSE\n       - _APP_OPTIONS_ROUTER_PROTECTION\n       - _APP_OPTIONS_FORCE_HTTPS\n-      - _APP_OPTIONS_FUNCTIONS_FORCE_HTTPS\n+      - _APP_OPTIONS_ROUTER_FORCE_HTTPS\n       - _APP_OPENSSL_KEY_V1",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2094519302",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9649,
        "pr_file": "app/views/install/compose.phtml",
        "discussion_id": "2094519302",
        "commented_code": "@@ -86,10 +89,12 @@ $image = $this->getParam('image', '');\n       - _APP_OPTIONS_ABUSE\n       - _APP_OPTIONS_ROUTER_PROTECTION\n       - _APP_OPTIONS_FORCE_HTTPS\n-      - _APP_OPTIONS_FUNCTIONS_FORCE_HTTPS\n+      - _APP_OPTIONS_ROUTER_FORCE_HTTPS\n       - _APP_OPENSSL_KEY_V1",
        "comment_created_at": "2025-05-18T13:06:37+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Duplicate HTTPS-related environment flags can cause configuration drift**\n\nBoth `_APP_OPTIONS_FORCE_HTTPS` and `_APP_OPTIONS_ROUTER_FORCE_HTTPS` are declared for the `appwrite` and `appwrite-worker-builds` services.  \nOnly one of them is honoured by the codebase after the refactor; leaving the deprecated flag in place risks administrators setting the wrong one and silently disabling the protection.\n\n```diff\n-      - _APP_OPTIONS_FORCE_HTTPS\n-      - _APP_OPTIONS_ROUTER_FORCE_HTTPS\n+      # Use the new flag only\n+      - _APP_OPTIONS_ROUTER_FORCE_HTTPS\n```\n\nApply the same clean-up wherever this pair appears.  \n<!-- review_comment_end -->\n\n\n\nAlso applies to: 426-429\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn app/views/install/compose.phtml around lines 90 to 93 and also lines 426 to\n429, there are duplicate HTTPS-related environment flags\n_APP_OPTIONS_FORCE_HTTPS and _APP_OPTIONS_ROUTER_FORCE_HTTPS declared for the\nappwrite and appwrite-worker-builds services. Remove the deprecated flag\n_APP_OPTIONS_ROUTER_FORCE_HTTPS from all occurrences to avoid configuration\ndrift and ensure only the supported flag _APP_OPTIONS_FORCE_HTTPS is used\nconsistently.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2094519303",
    "pr_number": 9649,
    "pr_file": "app/views/install/compose.phtml",
    "created_at": "2025-05-18T13:06:37+00:00",
    "commented_code": "- _APP_STORAGE_WASABI_SECRET\n       - _APP_STORAGE_WASABI_REGION\n       - _APP_STORAGE_WASABI_BUCKET\n-      - _APP_FUNCTIONS_SIZE_LIMIT\n+      - _APP_COMPUTE_SIZE_LIMIT\n       - _APP_FUNCTIONS_TIMEOUT\n-      - _APP_FUNCTIONS_BUILD_TIMEOUT\n-      - _APP_FUNCTIONS_CPUS\n-      - _APP_FUNCTIONS_MEMORY\n+      - _APP_SITES_TIMEOUT\n+      - _APP_COMPUTE_BUILD_TIMEOUT\n+      - _APP_COMPUTE_CPUS\n+      - _APP_COMPUTE_MEMORY\n       - _APP_FUNCTIONS_RUNTIMES\n+      - _APP_SITES_RUNTIMES\n+      - _APP_DOMAIN_SITES\n       - _APP_EXECUTOR_SECRET\n       - _APP_EXECUTOR_HOST\n       - _APP_LOGGING_CONFIG\n       - _APP_MAINTENANCE_INTERVAL\n       - _APP_MAINTENANCE_DELAY\n+      - _APP_MAINTENANCE_START_TIME\n       - _APP_MAINTENANCE_RETENTION_EXECUTION",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2094519303",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9649,
        "pr_file": "app/views/install/compose.phtml",
        "discussion_id": "2094519303",
        "commented_code": "@@ -133,17 +138,21 @@\n       - _APP_STORAGE_WASABI_SECRET\n       - _APP_STORAGE_WASABI_REGION\n       - _APP_STORAGE_WASABI_BUCKET\n-      - _APP_FUNCTIONS_SIZE_LIMIT\n+      - _APP_COMPUTE_SIZE_LIMIT\n       - _APP_FUNCTIONS_TIMEOUT\n-      - _APP_FUNCTIONS_BUILD_TIMEOUT\n-      - _APP_FUNCTIONS_CPUS\n-      - _APP_FUNCTIONS_MEMORY\n+      - _APP_SITES_TIMEOUT\n+      - _APP_COMPUTE_BUILD_TIMEOUT\n+      - _APP_COMPUTE_CPUS\n+      - _APP_COMPUTE_MEMORY\n       - _APP_FUNCTIONS_RUNTIMES\n+      - _APP_SITES_RUNTIMES\n+      - _APP_DOMAIN_SITES\n       - _APP_EXECUTOR_SECRET\n       - _APP_EXECUTOR_HOST\n       - _APP_LOGGING_CONFIG\n       - _APP_MAINTENANCE_INTERVAL\n       - _APP_MAINTENANCE_DELAY\n+      - _APP_MAINTENANCE_START_TIME\n       - _APP_MAINTENANCE_RETENTION_EXECUTION",
        "comment_created_at": "2025-05-18T13:06:37+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Legacy maintenance variable left behind**\n\n`_APP_MAINTENANCE_DELAY` was renamed to `_APP_MAINTENANCE_START_TIME`, but the old variable is still exported.  \nKeeping both variables makes it unclear which one wins and may break future clean-ups.\n\n```diff\n-      - _APP_MAINTENANCE_DELAY\n       - _APP_MAINTENANCE_START_TIME\n```\n\nRemove the obsolete line from every service block.  \n<!-- review_comment_end -->\n\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n      - _APP_MAINTENANCE_START_TIME\n      - _APP_MAINTENANCE_RETENTION_EXECUTION\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn app/views/install/compose.phtml around lines 154 to 156, the legacy variable\n_APP_MAINTENANCE_DELAY is still being exported alongside the renamed\n_APP_MAINTENANCE_START_TIME. Remove all occurrences of _APP_MAINTENANCE_DELAY\nfrom every service block to avoid confusion and potential conflicts, ensuring\nonly the updated variable _APP_MAINTENANCE_START_TIME remains exported.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2094519305",
    "pr_number": 9649,
    "pr_file": "app/views/install/compose.phtml",
    "created_at": "2025-05-18T13:06:37+00:00",
    "commented_code": "- appwrite\n     environment:\n       - _APP_ASSISTANT_OPENAI_API_KEY\n+      \n+  appwrite-browser:\n+    image: appwrite/browser:0.2.4\n+    container_name: appwrite-browser\n+    <<: *x-logging\n+    restart: unless-stopped\n+    networks:\n+      - appwrite\n \n   openruntimes-executor:\n     container_name: openruntimes-executor\n     hostname: exc1\n     <<: *x-logging\n     restart: unless-stopped\n     stop_signal: SIGINT\n-    image: openruntimes/executor:0.6.11\n+    image: openruntimes/executor:0.7.14\n     networks:\n       - appwrite\n       - runtimes\n     volumes:\n       - /var/run/docker.sock:/var/run/docker.sock\n       - appwrite-builds:/storage/builds:rw\n       - appwrite-functions:/storage/functions:rw\n+      - appwrite-sites:/storage/sites:rw\n       # Host mount nessessary to share files between executor and runtimes.\n       # It's not possible to share mount file between 2 containers without host mount (copying is too slow)\n       - /tmp:/tmp:rw\n     environment:\n-      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_FUNCTIONS_INACTIVE_THRESHOLD\n-      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_FUNCTIONS_MAINTENANCE_INTERVAL\n-      - OPR_EXECUTOR_NETWORK=$_APP_FUNCTIONS_RUNTIMES_NETWORK\n+      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_COMPUTE_INACTIVE_THRESHOLD\n+      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_COMPUTE_MAINTENANCE_INTERVAL\n+      - OPR_EXECUTOR_NETWORK=$_APP_COMPUTE_RUNTIMES_NETWORK\n       - OPR_EXECUTOR_DOCKER_HUB_USERNAME=$_APP_DOCKER_HUB_USERNAME\n       - OPR_EXECUTOR_DOCKER_HUB_PASSWORD=$_APP_DOCKER_HUB_PASSWORD\n       - OPR_EXECUTOR_ENV=$_APP_ENV\n-      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES\n+      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES,$_APP_SITES_RUNTIMES\n       - OPR_EXECUTOR_SECRET=$_APP_EXECUTOR_SECRET\n+      - OPR_EXECUTOR_RUNTIME_VERSIONS=v5\n       - OPR_EXECUTOR_LOGGING_CONFIG=$_APP_LOGGING_CONFIG",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2094519305",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9649,
        "pr_file": "app/views/install/compose.phtml",
        "discussion_id": "2094519305",
        "commented_code": "@@ -828,33 +849,43 @@\n       - appwrite\n     environment:\n       - _APP_ASSISTANT_OPENAI_API_KEY\n+      \n+  appwrite-browser:\n+    image: appwrite/browser:0.2.4\n+    container_name: appwrite-browser\n+    <<: *x-logging\n+    restart: unless-stopped\n+    networks:\n+      - appwrite\n \n   openruntimes-executor:\n     container_name: openruntimes-executor\n     hostname: exc1\n     <<: *x-logging\n     restart: unless-stopped\n     stop_signal: SIGINT\n-    image: openruntimes/executor:0.6.11\n+    image: openruntimes/executor:0.7.14\n     networks:\n       - appwrite\n       - runtimes\n     volumes:\n       - /var/run/docker.sock:/var/run/docker.sock\n       - appwrite-builds:/storage/builds:rw\n       - appwrite-functions:/storage/functions:rw\n+      - appwrite-sites:/storage/sites:rw\n       # Host mount nessessary to share files between executor and runtimes.\n       # It's not possible to share mount file between 2 containers without host mount (copying is too slow)\n       - /tmp:/tmp:rw\n     environment:\n-      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_FUNCTIONS_INACTIVE_THRESHOLD\n-      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_FUNCTIONS_MAINTENANCE_INTERVAL\n-      - OPR_EXECUTOR_NETWORK=$_APP_FUNCTIONS_RUNTIMES_NETWORK\n+      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_COMPUTE_INACTIVE_THRESHOLD\n+      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_COMPUTE_MAINTENANCE_INTERVAL\n+      - OPR_EXECUTOR_NETWORK=$_APP_COMPUTE_RUNTIMES_NETWORK\n       - OPR_EXECUTOR_DOCKER_HUB_USERNAME=$_APP_DOCKER_HUB_USERNAME\n       - OPR_EXECUTOR_DOCKER_HUB_PASSWORD=$_APP_DOCKER_HUB_PASSWORD\n       - OPR_EXECUTOR_ENV=$_APP_ENV\n-      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES\n+      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES,$_APP_SITES_RUNTIMES\n       - OPR_EXECUTOR_SECRET=$_APP_EXECUTOR_SECRET\n+      - OPR_EXECUTOR_RUNTIME_VERSIONS=v5\n       - OPR_EXECUTOR_LOGGING_CONFIG=$_APP_LOGGING_CONFIG",
        "comment_created_at": "2025-05-18T13:06:37+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\ud83d\udca1 Verification agent_\n\n<details>\n<summary>\ud83e\udde9 Analysis chain</summary>\n\n**Runtime filter too restrictive \u2013 functions using v2 will fail to start**\n\n`OPR_EXECUTOR_RUNTIME_VERSIONS` is pinned to `v5`, while earlier you pass both `_APP_FUNCTIONS_RUNTIMES` and `_APP_SITES_RUNTIMES` (which usually include `v2,v5`).  \nIf a project still uses a v2 function, the executor will refuse to pull the image and all invocations will 500.\n\n```diff\n-      - OPR_EXECUTOR_RUNTIME_VERSIONS=v5\n+      # Allow both legacy (v2) and current (v5) runtimes\n+      - OPR_EXECUTOR_RUNTIME_VERSIONS=v2,v5\n```\n\nDouble-check that the value matches the list returned by `/v1/health` in your control-plane.  \n<!-- review_comment_end -->\n\n---\n\n\ud83c\udfc1 Script executed:\n\n```shell\n#!/bin/bash\n# Search for where the function and site runtimes are defined and their default values\nrg \"APP_FUNCTIONS_RUNTIMES\" -n .\nrg \"APP_SITES_RUNTIMES\" -n .\nrg \"RUNTIMES=\" -n .env* || true\n\n# Confirm usage in the compose template\ngrep -R \"\\$_APP_FUNCTIONS_RUNTIMES\" -n app/views/install/compose.phtml\ngrep -R \"\\$_APP_SITES_RUNTIMES\" -n app/views/install/compose.phtml\n```\n\nLength of output: 2499\n\n---\n\n\n\n</details>\n\n**Include legacy (v2) runtimes in executor configuration**\n\nYour current snippet pins the executor to v5 only, which will break any existing v2-based functions. Update the `OPR_EXECUTOR_RUNTIME_VERSIONS` setting to allow both versions:\n\n\u2022 File: `app/views/install/compose.phtml`  \n\u2022 Lines: ~880\u2013889  \n\n```diff\n-      - OPR_EXECUTOR_RUNTIME_VERSIONS=v5\n+      # Support both legacy (v2) and current (v5) runtimes\n+      - OPR_EXECUTOR_RUNTIME_VERSIONS=v2,v5\n```\n\nDouble-check that these identifiers exactly match the versions returned by your control-plane\u2019s `GET /v1/health` endpoint.  \n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n      - OPR_EXECUTOR_INACTIVE_TRESHOLD=$_APP_COMPUTE_INACTIVE_THRESHOLD\n      - OPR_EXECUTOR_MAINTENANCE_INTERVAL=$_APP_COMPUTE_MAINTENANCE_INTERVAL\n      - OPR_EXECUTOR_NETWORK=$_APP_COMPUTE_RUNTIMES_NETWORK\n      - OPR_EXECUTOR_DOCKER_HUB_USERNAME=$_APP_DOCKER_HUB_USERNAME\n      - OPR_EXECUTOR_DOCKER_HUB_PASSWORD=$_APP_DOCKER_HUB_PASSWORD\n      - OPR_EXECUTOR_ENV=$_APP_ENV\n      - OPR_EXECUTOR_RUNTIMES=$_APP_FUNCTIONS_RUNTIMES,$_APP_SITES_RUNTIMES\n      - OPR_EXECUTOR_SECRET=$_APP_EXECUTOR_SECRET\n      # Support both legacy (v2) and current (v5) runtimes\n      - OPR_EXECUTOR_RUNTIME_VERSIONS=v2,v5\n      - OPR_EXECUTOR_LOGGING_CONFIG=$_APP_LOGGING_CONFIG\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn app/views/install/compose.phtml around lines 880 to 889, the environment\nvariable OPR_EXECUTOR_RUNTIME_VERSIONS is hardcoded to \"v5\", which excludes\nlegacy v2 runtimes and will cause functions using v2 to fail. Update this\nvariable to include both \"v2\" and \"v5\" versions, matching the runtime versions\nlisted in _APP_FUNCTIONS_RUNTIMES and _APP_SITES_RUNTIMES. Verify that the\ncombined runtime versions exactly match those returned by the control-plane's\n/v1/health endpoint to ensure compatibility.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2094494972",
    "pr_number": 9792,
    "pr_file": "app/views/install/compose.phtml",
    "created_at": "2025-05-18T11:28:16+00:00",
    "commented_code": "appwrite-console:\n     <<: *x-logging\n     container_name: appwrite-console\n-    image: <?php echo $organization; ?>/console:5.3.0-sites-rc.51\n+    image: <?php echo $organization; ?>/console:6.0.0\n     restart: unless-stopped",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2094494972",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 9792,
        "pr_file": "app/views/install/compose.phtml",
        "discussion_id": "2094494972",
        "commented_code": "@@ -177,7 +177,7 @@ $image = $this->getParam('image', '');\n   appwrite-console:\n     <<: *x-logging\n     container_name: appwrite-console\n-    image: <?php echo $organization; ?>/console:5.3.0-sites-rc.51\n+    image: <?php echo $organization; ?>/console:6.0.0\n     restart: unless-stopped",
        "comment_created_at": "2025-05-18T11:28:16+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\ud83d\udee0\ufe0f Refactor suggestion_\n\n**Use dynamic version parameter for console image**  \nThe console service currently hardcodes `6.0.0`. To maintain consistency with other services and leverage the `$version` parameter provided by the installer, refactor this to:\n```diff\n-    image: <?php echo $organization; ?>/console:6.0.0\n+    image: <?php echo $organization; ?>/console:<?php echo $version; ?>\n```\nThis change ensures the template picks up the correct release tag automatically.  \n\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n    <<: *x-logging\n    container_name: appwrite-console\n    image: <?php echo $organization; ?>/console:<?php echo $version; ?>\n    restart: unless-stopped\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn app/views/install/compose.phtml around lines 178 to 181, the console image\nversion is hardcoded as \"6.0.0\". Replace this static version with the dynamic\n$version parameter used elsewhere in the installer to ensure the image tag\nupdates automatically with the release version. Modify the image line to use the\n$version variable instead of the fixed string.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  }
]