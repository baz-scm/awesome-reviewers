[
  {
    "discussion_id": "2191271047",
    "pr_number": 10119,
    "pr_file": "app/controllers/api/account.php",
    "created_at": "2025-07-08T01:04:23+00:00",
    "commented_code": "throw new Exception(Exception::PROJECT_PROVIDER_UNSUPPORTED);\n         }\n \n+        $host = System::getEnv('_APP_CONSOLE_DOMAIN', System::getEnv('_APP_DOMAIN', ''));\n+        $redirectBase = $protocol . '://' . $host;\n+        if ($protocol === 'https' && $port !== '443') {\n+            $redirectBase .= ':' . $port;\n+        } elseif ($protocol === 'http' && $port !== '80') {\n+            $redirectBase .= ':' . $port;\n+        }",
    "repo_full_name": "appwrite/appwrite",
    "discussion_comments": [
      {
        "comment_id": "2191285208",
        "repo_full_name": "appwrite/appwrite",
        "pr_number": 10119,
        "pr_file": "app/controllers/api/account.php",
        "discussion_id": "2191271047",
        "commented_code": "@@ -1216,12 +1223,20 @@ function sendSessionAlert(Locale $locale, Document $user, Document $project, Doc\n             throw new Exception(Exception::PROJECT_PROVIDER_UNSUPPORTED);\n         }\n \n+        $host = System::getEnv('_APP_CONSOLE_DOMAIN', System::getEnv('_APP_DOMAIN', ''));\n+        $redirectBase = $protocol . '://' . $host;\n+        if ($protocol === 'https' && $port !== '443') {\n+            $redirectBase .= ':' . $port;\n+        } elseif ($protocol === 'http' && $port !== '80') {\n+            $redirectBase .= ':' . $port;\n+        }",
        "comment_created_at": "2025-07-08T01:19:40+00:00",
        "comment_author": "stnguyen90",
        "comment_body": "`_APP_DOMAIN` is required",
        "pr_file_module": null
      }
    ]
  }
]