[
  {
    "discussion_id": "1751864888",
    "pr_number": 19863,
    "pr_file": "hack/start-redis-with-password.sh",
    "created_at": "2024-09-10T12:34:32+00:00",
    "commented_code": "+#!/bin/bash\n+\n+# Default values for environment variables\n+REDIS_PORT=\"${ARGOCD_E2E_REDIS_PORT:-6379}\"\n+REDIS_IMAGE_TAG=$(grep 'image: redis' manifests/base/redis/argocd-redis-deployment.yaml | cut -d':' -f3)\n+",
    "repo_full_name": "argoproj/argo-cd",
    "discussion_comments": [
      {
        "comment_id": "1751864888",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 19863,
        "pr_file": "hack/start-redis-with-password.sh",
        "discussion_id": "1751864888",
        "commented_code": "@@ -0,0 +1,26 @@\n+#!/bin/bash\n+\n+# Default values for environment variables\n+REDIS_PORT=\"${ARGOCD_E2E_REDIS_PORT:-6379}\"\n+REDIS_IMAGE_TAG=$(grep 'image: redis' manifests/base/redis/argocd-redis-deployment.yaml | cut -d':' -f3)\n+",
        "comment_created_at": "2024-09-10T12:34:32+00:00",
        "comment_author": "nitishfy",
        "comment_body": "```suggestion\r\nif [ \"$ARGOCD_REDIS_LOCAL\" = 'true' ] && ! command -v redis-server &>/dev/null; then\r\n    echo \"Redis server is not installed locally. Please install Redis or set ARGOCD_REDIS_LOCAL to false.\"\r\n    exit 1\r\nfi\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "1751866259",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 19863,
        "pr_file": "hack/start-redis-with-password.sh",
        "discussion_id": "1751864888",
        "commented_code": "@@ -0,0 +1,26 @@\n+#!/bin/bash\n+\n+# Default values for environment variables\n+REDIS_PORT=\"${ARGOCD_E2E_REDIS_PORT:-6379}\"\n+REDIS_IMAGE_TAG=$(grep 'image: redis' manifests/base/redis/argocd-redis-deployment.yaml | cut -d':' -f3)\n+",
        "comment_created_at": "2024-09-10T12:35:22+00:00",
        "comment_author": "nitishfy",
        "comment_body": "not necessary, but a slightly better message.",
        "pr_file_module": null
      },
      {
        "comment_id": "1751898979",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 19863,
        "pr_file": "hack/start-redis-with-password.sh",
        "discussion_id": "1751864888",
        "commented_code": "@@ -0,0 +1,26 @@\n+#!/bin/bash\n+\n+# Default values for environment variables\n+REDIS_PORT=\"${ARGOCD_E2E_REDIS_PORT:-6379}\"\n+REDIS_IMAGE_TAG=$(grep 'image: redis' manifests/base/redis/argocd-redis-deployment.yaml | cut -d':' -f3)\n+",
        "comment_created_at": "2024-09-10T12:57:03+00:00",
        "comment_author": "reggie-k",
        "comment_body": "Thanks @nitishfy ,this is a nice addition! ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1751973196",
    "pr_number": 19863,
    "pr_file": "hack/start-redis-with-password.sh",
    "created_at": "2024-09-10T13:29:06+00:00",
    "commented_code": "+#!/bin/bash\n+\n+# Default values for environment variables\n+REDIS_PORT=\"${ARGOCD_E2E_REDIS_PORT:-6379}\"\n+REDIS_IMAGE_TAG=$(grep 'image: redis' manifests/base/redis/argocd-redis-deployment.yaml | cut -d':' -f3)\n+\n+# Check if ARGOCD_REDIS_LOCAL is 'true'\n+if [ \"$ARGOCD_REDIS_LOCAL\" = 'true' ] && ! command -v redis-server &>/dev/null; then",
    "repo_full_name": "argoproj/argo-cd",
    "discussion_comments": [
      {
        "comment_id": "1751973196",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 19863,
        "pr_file": "hack/start-redis-with-password.sh",
        "discussion_id": "1751973196",
        "commented_code": "@@ -0,0 +1,28 @@\n+#!/bin/bash\n+\n+# Default values for environment variables\n+REDIS_PORT=\"${ARGOCD_E2E_REDIS_PORT:-6379}\"\n+REDIS_IMAGE_TAG=$(grep 'image: redis' manifests/base/redis/argocd-redis-deployment.yaml | cut -d':' -f3)\n+\n+# Check if ARGOCD_REDIS_LOCAL is 'true'\n+if [ \"$ARGOCD_REDIS_LOCAL\" = 'true' ] && ! command -v redis-server &>/dev/null; then",
        "comment_created_at": "2024-09-10T13:29:06+00:00",
        "comment_author": "nitishfy",
        "comment_body": "```suggestion\r\nif [ \"$ARGOCD_REDIS_LOCAL\" = 'true' ]; then\r\n    if ! command -v redis-server &>/dev/null; then\r\n        echo \"Redis server is not installed locally. Please install Redis or set ARGOCD_REDIS_LOCAL to false.\"\r\n        exit 1\r\n    fi\r\n\r\n    # Start local Redis server with or without password\r\n```\r\n\r\nif the env is set to true and the command is installed locally, the local redis server should be used. However, the `exit 1`  statement makes the following code block for starting the local Redis server unreachable. ",
        "pr_file_module": null
      }
    ]
  }
]