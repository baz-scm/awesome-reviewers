[
  {
    "discussion_id": "2203673772",
    "pr_number": 23661,
    "pr_file": "ui/src/app/app.tsx",
    "created_at": "2025-07-14T01:19:48+00:00",
    "commented_code": "return false;\n }\n \n-export class App extends React.Component<{}, {popupProps: PopupProps; showVersionPanel: boolean; error: Error; navItems: NavItem[]; routes: Routes; authSettings: AuthSettings}> {\n-    public static childContextTypes = {",
    "repo_full_name": "argoproj/argo-cd",
    "discussion_comments": [
      {
        "comment_id": "2203673772",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 23661,
        "pr_file": "ui/src/app/app.tsx",
        "discussion_id": "2203673772",
        "commented_code": "@@ -85,153 +84,59 @@ async function isExpiredSSO() {\n     return false;\n }\n \n-export class App extends React.Component<{}, {popupProps: PopupProps; showVersionPanel: boolean; error: Error; navItems: NavItem[]; routes: Routes; authSettings: AuthSettings}> {\n-    public static childContextTypes = {",
        "comment_created_at": "2025-07-14T01:19:48+00:00",
        "comment_author": "linghaoSu",
        "comment_body": "`App.tsx` is the source of the `contextTypes`, so it probably makes sense to leave it until the end.\n\nIn my recent migration work, I noticed that `contextTypes` dependencies could become a blocker when upgrading to a more modern version of React.\n\nSo, if we plan to migrate these class components, we might want to deprecate `contextTypes` first.\n\nHowever, if we do deprecate `contextTypes`, we’ll also need to refactor all components that rely on it. That’s why I think it might be better to just draft this PR for now.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2176202310",
    "pr_number": 23606,
    "pr_file": "ui/src/app/settings/components/projects-list/projects-list.tsx",
    "created_at": "2025-07-01T01:00:27+00:00",
    "commented_code": "import {FormField, NotificationType, SlidingPanel} from 'argo-ui';\n-import * as React from 'react';\n+import React, {FC, useRef} from 'react';\n import {Form, FormApi, Text} from 'react-form';\n \n import {DataLoader, EmptyState, ErrorNotification, Page, Query} from '../../../shared/components';\n import {Consumer} from '../../../shared/context';\n import {Project} from '../../../shared/models';\n import {services} from '../../../shared/services';\n \n-export class ProjectsList extends React.Component {\n-    private formApi: FormApi;\n+export const ProjectsList: FC = () => {\n+    const formApiRef = useRef<FormApi | null>(null);\n \n-    public render() {\n-        return (\n-            <Consumer>\n-                {ctx => (\n-                    <Page\n-                        title='Projects'\n-                        toolbar={{\n-                            breadcrumbs: [{title: 'Settings', path: '/settings'}, {title: 'Projects'}],\n-                            actionMenu: {\n-                                className: 'fa fa-plus',\n-                                items: [{title: 'New Project', iconClassName: 'fa fa-plus', action: () => ctx.navigation.goto('.', {add: true}, {replace: true})}]\n-                            }\n-                        }}>\n-                        <div className='projects argo-container'>\n-                            <DataLoader load={() => services.projects.list()}>\n-                                {projects =>\n-                                    (projects.length > 0 && (\n-                                        <div className='argo-table-list argo-table-list--clickable'>\n-                                            <div className='argo-table-list__head'>\n+    return (\n+        <Consumer>",
    "repo_full_name": "argoproj/argo-cd",
    "discussion_comments": [
      {
        "comment_id": "2176202310",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 23606,
        "pr_file": "ui/src/app/settings/components/projects-list/projects-list.tsx",
        "discussion_id": "2176202310",
        "commented_code": "@@ -1,115 +1,113 @@\n import {FormField, NotificationType, SlidingPanel} from 'argo-ui';\n-import * as React from 'react';\n+import React, {FC, useRef} from 'react';\n import {Form, FormApi, Text} from 'react-form';\n \n import {DataLoader, EmptyState, ErrorNotification, Page, Query} from '../../../shared/components';\n import {Consumer} from '../../../shared/context';\n import {Project} from '../../../shared/models';\n import {services} from '../../../shared/services';\n \n-export class ProjectsList extends React.Component {\n-    private formApi: FormApi;\n+export const ProjectsList: FC = () => {\n+    const formApiRef = useRef<FormApi | null>(null);\n \n-    public render() {\n-        return (\n-            <Consumer>\n-                {ctx => (\n-                    <Page\n-                        title='Projects'\n-                        toolbar={{\n-                            breadcrumbs: [{title: 'Settings', path: '/settings'}, {title: 'Projects'}],\n-                            actionMenu: {\n-                                className: 'fa fa-plus',\n-                                items: [{title: 'New Project', iconClassName: 'fa fa-plus', action: () => ctx.navigation.goto('.', {add: true}, {replace: true})}]\n-                            }\n-                        }}>\n-                        <div className='projects argo-container'>\n-                            <DataLoader load={() => services.projects.list()}>\n-                                {projects =>\n-                                    (projects.length > 0 && (\n-                                        <div className='argo-table-list argo-table-list--clickable'>\n-                                            <div className='argo-table-list__head'>\n+    return (\n+        <Consumer>",
        "comment_created_at": "2025-07-01T01:00:27+00:00",
        "comment_author": "linghaoSu",
        "comment_body": "Since we're currently using React 16.14.0 (as confirmed in yarn.lock), we can safely use `React.useContext` instead of `<Context.Consumer>`.\r\n\r\nThis would help reduce JSX nesting and make the code easier to read and maintain.",
        "pr_file_module": null
      },
      {
        "comment_id": "2182919707",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 23606,
        "pr_file": "ui/src/app/settings/components/projects-list/projects-list.tsx",
        "discussion_id": "2176202310",
        "commented_code": "@@ -1,115 +1,113 @@\n import {FormField, NotificationType, SlidingPanel} from 'argo-ui';\n-import * as React from 'react';\n+import React, {FC, useRef} from 'react';\n import {Form, FormApi, Text} from 'react-form';\n \n import {DataLoader, EmptyState, ErrorNotification, Page, Query} from '../../../shared/components';\n import {Consumer} from '../../../shared/context';\n import {Project} from '../../../shared/models';\n import {services} from '../../../shared/services';\n \n-export class ProjectsList extends React.Component {\n-    private formApi: FormApi;\n+export const ProjectsList: FC = () => {\n+    const formApiRef = useRef<FormApi | null>(null);\n \n-    public render() {\n-        return (\n-            <Consumer>\n-                {ctx => (\n-                    <Page\n-                        title='Projects'\n-                        toolbar={{\n-                            breadcrumbs: [{title: 'Settings', path: '/settings'}, {title: 'Projects'}],\n-                            actionMenu: {\n-                                className: 'fa fa-plus',\n-                                items: [{title: 'New Project', iconClassName: 'fa fa-plus', action: () => ctx.navigation.goto('.', {add: true}, {replace: true})}]\n-                            }\n-                        }}>\n-                        <div className='projects argo-container'>\n-                            <DataLoader load={() => services.projects.list()}>\n-                                {projects =>\n-                                    (projects.length > 0 && (\n-                                        <div className='argo-table-list argo-table-list--clickable'>\n-                                            <div className='argo-table-list__head'>\n+    return (\n+        <Consumer>",
        "comment_created_at": "2025-07-03T14:19:21+00:00",
        "comment_author": "crenshaw-dev",
        "comment_body": "Should we have a linter for this? I see we use `<Consumer>` a lot.",
        "pr_file_module": null
      },
      {
        "comment_id": "2187014724",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 23606,
        "pr_file": "ui/src/app/settings/components/projects-list/projects-list.tsx",
        "discussion_id": "2176202310",
        "commented_code": "@@ -1,115 +1,113 @@\n import {FormField, NotificationType, SlidingPanel} from 'argo-ui';\n-import * as React from 'react';\n+import React, {FC, useRef} from 'react';\n import {Form, FormApi, Text} from 'react-form';\n \n import {DataLoader, EmptyState, ErrorNotification, Page, Query} from '../../../shared/components';\n import {Consumer} from '../../../shared/context';\n import {Project} from '../../../shared/models';\n import {services} from '../../../shared/services';\n \n-export class ProjectsList extends React.Component {\n-    private formApi: FormApi;\n+export const ProjectsList: FC = () => {\n+    const formApiRef = useRef<FormApi | null>(null);\n \n-    public render() {\n-        return (\n-            <Consumer>\n-                {ctx => (\n-                    <Page\n-                        title='Projects'\n-                        toolbar={{\n-                            breadcrumbs: [{title: 'Settings', path: '/settings'}, {title: 'Projects'}],\n-                            actionMenu: {\n-                                className: 'fa fa-plus',\n-                                items: [{title: 'New Project', iconClassName: 'fa fa-plus', action: () => ctx.navigation.goto('.', {add: true}, {replace: true})}]\n-                            }\n-                        }}>\n-                        <div className='projects argo-container'>\n-                            <DataLoader load={() => services.projects.list()}>\n-                                {projects =>\n-                                    (projects.length > 0 && (\n-                                        <div className='argo-table-list argo-table-list--clickable'>\n-                                            <div className='argo-table-list__head'>\n+    return (\n+        <Consumer>",
        "comment_created_at": "2025-07-05T09:28:43+00:00",
        "comment_author": "chansuke",
        "comment_body": "@crenshaw-dev @linghaoSu \r\nI agree setting the linting rule will benefit the code base. Can I set:\r\n\r\n- React.useContext instead of Context.Consumer\r\n- use <></> instead of <Fragment>",
        "pr_file_module": null
      },
      {
        "comment_id": "2188308265",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 23606,
        "pr_file": "ui/src/app/settings/components/projects-list/projects-list.tsx",
        "discussion_id": "2176202310",
        "commented_code": "@@ -1,115 +1,113 @@\n import {FormField, NotificationType, SlidingPanel} from 'argo-ui';\n-import * as React from 'react';\n+import React, {FC, useRef} from 'react';\n import {Form, FormApi, Text} from 'react-form';\n \n import {DataLoader, EmptyState, ErrorNotification, Page, Query} from '../../../shared/components';\n import {Consumer} from '../../../shared/context';\n import {Project} from '../../../shared/models';\n import {services} from '../../../shared/services';\n \n-export class ProjectsList extends React.Component {\n-    private formApi: FormApi;\n+export const ProjectsList: FC = () => {\n+    const formApiRef = useRef<FormApi | null>(null);\n \n-    public render() {\n-        return (\n-            <Consumer>\n-                {ctx => (\n-                    <Page\n-                        title='Projects'\n-                        toolbar={{\n-                            breadcrumbs: [{title: 'Settings', path: '/settings'}, {title: 'Projects'}],\n-                            actionMenu: {\n-                                className: 'fa fa-plus',\n-                                items: [{title: 'New Project', iconClassName: 'fa fa-plus', action: () => ctx.navigation.goto('.', {add: true}, {replace: true})}]\n-                            }\n-                        }}>\n-                        <div className='projects argo-container'>\n-                            <DataLoader load={() => services.projects.list()}>\n-                                {projects =>\n-                                    (projects.length > 0 && (\n-                                        <div className='argo-table-list argo-table-list--clickable'>\n-                                            <div className='argo-table-list__head'>\n+    return (\n+        <Consumer>",
        "comment_created_at": "2025-07-06T13:52:13+00:00",
        "comment_author": "linghaoSu",
        "comment_body": "@chansuke  I’m only aware of the lint rules for fragments and named functions.\r\nIf you know of any lint rules related to consumers, feel free to add them.",
        "pr_file_module": null
      },
      {
        "comment_id": "2197656564",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 23606,
        "pr_file": "ui/src/app/settings/components/projects-list/projects-list.tsx",
        "discussion_id": "2176202310",
        "commented_code": "@@ -1,115 +1,113 @@\n import {FormField, NotificationType, SlidingPanel} from 'argo-ui';\n-import * as React from 'react';\n+import React, {FC, useRef} from 'react';\n import {Form, FormApi, Text} from 'react-form';\n \n import {DataLoader, EmptyState, ErrorNotification, Page, Query} from '../../../shared/components';\n import {Consumer} from '../../../shared/context';\n import {Project} from '../../../shared/models';\n import {services} from '../../../shared/services';\n \n-export class ProjectsList extends React.Component {\n-    private formApi: FormApi;\n+export const ProjectsList: FC = () => {\n+    const formApiRef = useRef<FormApi | null>(null);\n \n-    public render() {\n-        return (\n-            <Consumer>\n-                {ctx => (\n-                    <Page\n-                        title='Projects'\n-                        toolbar={{\n-                            breadcrumbs: [{title: 'Settings', path: '/settings'}, {title: 'Projects'}],\n-                            actionMenu: {\n-                                className: 'fa fa-plus',\n-                                items: [{title: 'New Project', iconClassName: 'fa fa-plus', action: () => ctx.navigation.goto('.', {add: true}, {replace: true})}]\n-                            }\n-                        }}>\n-                        <div className='projects argo-container'>\n-                            <DataLoader load={() => services.projects.list()}>\n-                                {projects =>\n-                                    (projects.length > 0 && (\n-                                        <div className='argo-table-list argo-table-list--clickable'>\n-                                            <div className='argo-table-list__head'>\n+    return (\n+        <Consumer>",
        "comment_created_at": "2025-07-10T12:53:47+00:00",
        "comment_author": "chansuke",
        "comment_body": "@linghaoSu \r\nThank you so much for your comment",
        "pr_file_module": null
      }
    ]
  }
]