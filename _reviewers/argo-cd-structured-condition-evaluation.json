[
  {
    "discussion_id": "1920727090",
    "pr_number": 21552,
    "pr_file": "resource_customizations/kyverno.io/Policy/health.lua",
    "created_at": "2025-01-17T20:57:06+00:00",
    "commented_code": "+local hs = {}\n+if obj.status ~= nil then\n+  if obj.status.ready == \"true\" then",
    "repo_full_name": "argoproj/argo-cd",
    "discussion_comments": [
      {
        "comment_id": "1920727090",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 21552,
        "pr_file": "resource_customizations/kyverno.io/Policy/health.lua",
        "discussion_id": "1920727090",
        "commented_code": "@@ -0,0 +1,11 @@\n+local hs = {}\n+if obj.status ~= nil then\n+  if obj.status.ready == \"true\" then",
        "comment_created_at": "2025-01-17T20:57:06+00:00",
        "comment_author": "marckhair",
        "comment_body": "```suggestion\r\n  if obj.status.ready then\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1925871550",
    "pr_number": 21552,
    "pr_file": "resource_customizations/kyverno.io/Policy/health.lua",
    "created_at": "2025-01-22T19:42:39+00:00",
    "commented_code": "+local hs = {}\n+if obj.status ~= nil then\n+  if obj.status.ready then\n+    hs.status = \"Healthy\"\n+    hs.message = \"Policy is ready\"\n+    return hs\n+  end\n+end\n+hs.status = \"Progressing\"\n+hs.message = \"Waiting for Policy to be ready\"\n+return hs",
    "repo_full_name": "argoproj/argo-cd",
    "discussion_comments": [
      {
        "comment_id": "1925871550",
        "repo_full_name": "argoproj/argo-cd",
        "pr_number": 21552,
        "pr_file": "resource_customizations/kyverno.io/Policy/health.lua",
        "discussion_id": "1925871550",
        "commented_code": "@@ -0,0 +1,11 @@\n+local hs = {}\n+if obj.status ~= nil then\n+  if obj.status.ready then\n+    hs.status = \"Healthy\"\n+    hs.message = \"Policy is ready\"\n+    return hs\n+  end\n+end\n+hs.status = \"Progressing\"\n+hs.message = \"Waiting for Policy to be ready\"\n+return hs",
        "comment_created_at": "2025-01-22T19:42:39+00:00",
        "comment_author": "marckhair",
        "comment_body": "```suggestion\r\nlocal hs = {}\r\n\r\nif obj.status ~= nil and obj.status.conditions ~= nil then\r\n  for _, condition in ipairs(obj.status.conditions) do\r\n    if condition.type == \"Ready\" and condition.status == \"True\" and condition.reason == \"Succeeded\" and condition.message == \"Ready\" then\r\n      hs.status = \"Healthy\"\r\n      hs.message = \"Policy is ready\"\r\n      return hs\r\n    end\r\n  end\r\nend\r\n\r\nhs.status = \"Progressing\"\r\nhs.message = \"Waiting for Policy to be ready\"\r\nreturn hs\r\n```",
        "pr_file_module": null
      }
    ]
  }
]