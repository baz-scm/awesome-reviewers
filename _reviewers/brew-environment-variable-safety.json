[
  {
    "discussion_id": "2060582175",
    "pr_number": 19038,
    "pr_file": "Library/Homebrew/brew.sh",
    "created_at": "2025-04-25T16:55:22+00:00",
    "commented_code": "CACHE_HOME=\"${HOMEBREW_XDG_CACHE_HOME:-${HOME}/.cache}\"\n   HOMEBREW_DEFAULT_CACHE=\"${CACHE_HOME}/Homebrew\"\n   HOMEBREW_DEFAULT_LOGS=\"${CACHE_HOME}/Homebrew/Logs\"\n-  HOMEBREW_DEFAULT_TEMP=\"/tmp\"\n+  HOMEBREW_DEFAULT_TEMP=\"/var/tmp\"",
    "repo_full_name": "Homebrew/brew",
    "discussion_comments": [
      {
        "comment_id": "2060582175",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 19038,
        "pr_file": "Library/Homebrew/brew.sh",
        "discussion_id": "2060582175",
        "commented_code": "@@ -65,7 +65,7 @@ else\n   CACHE_HOME=\"${HOMEBREW_XDG_CACHE_HOME:-${HOME}/.cache}\"\n   HOMEBREW_DEFAULT_CACHE=\"${CACHE_HOME}/Homebrew\"\n   HOMEBREW_DEFAULT_LOGS=\"${CACHE_HOME}/Homebrew/Logs\"\n-  HOMEBREW_DEFAULT_TEMP=\"/tmp\"\n+  HOMEBREW_DEFAULT_TEMP=\"/var/tmp\"",
        "comment_created_at": "2025-04-25T16:55:22+00:00",
        "comment_author": "MikeMcQuaid",
        "comment_body": "```suggestion\r\n  if [[ -r \"/var/tmp\" && -w \"/var/tmp\" ]]\r\n  then\r\n    HOMEBREW_DEFAULT_TEMP=\"/var/tmp\"\r\n  else\r\n    HOMEBREW_DEFAULT_TEMP=\"/tmp\"\r\n  fi\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1946454383",
    "pr_number": 19257,
    "pr_file": "Library/Homebrew/brew.sh",
    "created_at": "2025-02-07T12:28:05+00:00",
    "commented_code": "if [[ -z \"${HOMEBREW_BREW_WRAPPER:-}\" ]]\n   then\n     odie <<EOS\n-HOMEBREW_FORCE_BREW_WRAPPER was set to\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n-but HOMEBREW_BREW_WRAPPER was unset. This indicates that you are running\n-  ${HOMEBREW_BREW_FILE}\n-directly but should instead run\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n+conflicting Homebrew wrapper configuration!\n+HOMEBREW_FORCE_BREW_WRAPPER was set to ${HOMEBREW_FORCE_BREW_WRAPPER}\n+but HOMEBREW_BREW_WRAPPER was unset.\n+\n+Ensure you run $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") directly (not ${HOMEBREW_BREW_FILE})\n+\n+Manually setting your PATH can interfere with Homebrew wrappers.\n+Ensure your shell configuration contains:\n+  eval \"\\$(${HOMEBREW_BREW_FILE} shellenv)\"\n+or that $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") comes before ${HOMEBREW_BREW_FILE} in your PATH.\n EOS\n   elif [[ \"${HOMEBREW_FORCE_BREW_WRAPPER}\" != \"${HOMEBREW_BREW_WRAPPER}\" ]]\n   then\n     odie <<EOS\n-HOMEBREW_FORCE_BREW_WRAPPER was set to\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n-but HOMEBREW_BREW_WRAPPER was set to\n-  ${HOMEBREW_BREW_WRAPPER}\n-This indicates that you are running\n-  ${HOMEBREW_BREW_FILE}\n-directly but should instead run:\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n+conflicting Homebrew wrapper configuration!\n+HOMEBREW_FORCE_BREW_WRAPPER was set to ${HOMEBREW_FORCE_BREW_WRAPPER}\n+but HOMEBREW_BREW_WRAPPER   was set to ${HOMEBREW_BREW_WRAPPER}\n+\n+Ensure you run $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") directly (not ${HOMEBREW_BREW_FILE})\n+\n+Manually setting your PATH can interfere with Homebrew wrappers.\n+Ensure your shell configuration contains:\n+  eval \"\\$(${HOMEBREW_BREW_FILE} shellenv)\"\n+or that $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") comes before ${HOMEBREW_BREW_FILE} in your PATH.",
    "repo_full_name": "Homebrew/brew",
    "discussion_comments": [
      {
        "comment_id": "1946454383",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 19257,
        "pr_file": "Library/Homebrew/brew.sh",
        "discussion_id": "1946454383",
        "commented_code": "@@ -189,24 +189,30 @@ then\n   if [[ -z \"${HOMEBREW_BREW_WRAPPER:-}\" ]]\n   then\n     odie <<EOS\n-HOMEBREW_FORCE_BREW_WRAPPER was set to\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n-but HOMEBREW_BREW_WRAPPER was unset. This indicates that you are running\n-  ${HOMEBREW_BREW_FILE}\n-directly but should instead run\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n+conflicting Homebrew wrapper configuration!\n+HOMEBREW_FORCE_BREW_WRAPPER was set to ${HOMEBREW_FORCE_BREW_WRAPPER}\n+but HOMEBREW_BREW_WRAPPER was unset.\n+\n+Ensure you run $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") directly (not ${HOMEBREW_BREW_FILE})\n+\n+Manually setting your PATH can interfere with Homebrew wrappers.\n+Ensure your shell configuration contains:\n+  eval \"\\$(${HOMEBREW_BREW_FILE} shellenv)\"\n+or that $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") comes before ${HOMEBREW_BREW_FILE} in your PATH.\n EOS\n   elif [[ \"${HOMEBREW_FORCE_BREW_WRAPPER}\" != \"${HOMEBREW_BREW_WRAPPER}\" ]]\n   then\n     odie <<EOS\n-HOMEBREW_FORCE_BREW_WRAPPER was set to\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n-but HOMEBREW_BREW_WRAPPER was set to\n-  ${HOMEBREW_BREW_WRAPPER}\n-This indicates that you are running\n-  ${HOMEBREW_BREW_FILE}\n-directly but should instead run:\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n+conflicting Homebrew wrapper configuration!\n+HOMEBREW_FORCE_BREW_WRAPPER was set to ${HOMEBREW_FORCE_BREW_WRAPPER}\n+but HOMEBREW_BREW_WRAPPER   was set to ${HOMEBREW_BREW_WRAPPER}\n+\n+Ensure you run $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") directly (not ${HOMEBREW_BREW_FILE})\n+\n+Manually setting your PATH can interfere with Homebrew wrappers.\n+Ensure your shell configuration contains:\n+  eval \"\\$(${HOMEBREW_BREW_FILE} shellenv)\"\n+or that $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") comes before ${HOMEBREW_BREW_FILE} in your PATH.",
        "comment_created_at": "2025-02-07T12:28:05+00:00",
        "comment_author": "carlocab",
        "comment_body": "Should these be directories, instead of paths to executables? I worry a user may try to do something like\r\n```sh\r\nexport PATH=\"/opt/homebrew/bin/brew:$PATH\"\r\n```\r\ngiven this advice.",
        "pr_file_module": null
      },
      {
        "comment_id": "1946456890",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 19257,
        "pr_file": "Library/Homebrew/brew.sh",
        "discussion_id": "1946454383",
        "commented_code": "@@ -189,24 +189,30 @@ then\n   if [[ -z \"${HOMEBREW_BREW_WRAPPER:-}\" ]]\n   then\n     odie <<EOS\n-HOMEBREW_FORCE_BREW_WRAPPER was set to\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n-but HOMEBREW_BREW_WRAPPER was unset. This indicates that you are running\n-  ${HOMEBREW_BREW_FILE}\n-directly but should instead run\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n+conflicting Homebrew wrapper configuration!\n+HOMEBREW_FORCE_BREW_WRAPPER was set to ${HOMEBREW_FORCE_BREW_WRAPPER}\n+but HOMEBREW_BREW_WRAPPER was unset.\n+\n+Ensure you run $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") directly (not ${HOMEBREW_BREW_FILE})\n+\n+Manually setting your PATH can interfere with Homebrew wrappers.\n+Ensure your shell configuration contains:\n+  eval \"\\$(${HOMEBREW_BREW_FILE} shellenv)\"\n+or that $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") comes before ${HOMEBREW_BREW_FILE} in your PATH.\n EOS\n   elif [[ \"${HOMEBREW_FORCE_BREW_WRAPPER}\" != \"${HOMEBREW_BREW_WRAPPER}\" ]]\n   then\n     odie <<EOS\n-HOMEBREW_FORCE_BREW_WRAPPER was set to\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n-but HOMEBREW_BREW_WRAPPER was set to\n-  ${HOMEBREW_BREW_WRAPPER}\n-This indicates that you are running\n-  ${HOMEBREW_BREW_FILE}\n-directly but should instead run:\n-  ${HOMEBREW_FORCE_BREW_WRAPPER}\n+conflicting Homebrew wrapper configuration!\n+HOMEBREW_FORCE_BREW_WRAPPER was set to ${HOMEBREW_FORCE_BREW_WRAPPER}\n+but HOMEBREW_BREW_WRAPPER   was set to ${HOMEBREW_BREW_WRAPPER}\n+\n+Ensure you run $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") directly (not ${HOMEBREW_BREW_FILE})\n+\n+Manually setting your PATH can interfere with Homebrew wrappers.\n+Ensure your shell configuration contains:\n+  eval \"\\$(${HOMEBREW_BREW_FILE} shellenv)\"\n+or that $(bold \"${HOMEBREW_FORCE_BREW_WRAPPER}\") comes before ${HOMEBREW_BREW_FILE} in your PATH.",
        "comment_created_at": "2025-02-07T12:30:20+00:00",
        "comment_author": "MikeMcQuaid",
        "comment_body": "@carlocab great point, will adjust and add an explicit `PATH` suggestion",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1768825416",
    "pr_number": 18366,
    "pr_file": "Library/Homebrew/cmd/shellenv.sh",
    "created_at": "2024-09-20T15:33:55+00:00",
    "commented_code": "then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
    "repo_full_name": "Homebrew/brew",
    "discussion_comments": [
      {
        "comment_id": "1768825416",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T15:33:55+00:00",
        "comment_author": "carlocab",
        "comment_body": "Not necessarily opposed to this change, but I'm not convinced that this is the fix for the issues you're having since this line has been around for about three years now: 67c5006b0a9747876fcaafbe44493f16ef4bf57e",
        "pr_file_module": null
      },
      {
        "comment_id": "1768829117",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T15:37:18+00:00",
        "comment_author": "Bo98",
        "comment_body": "Yeah I think the case being hit here is not this line, it's the `/usr/libexec/path_helper` line above which is new. This also eplxains why it only affects `macos-14` (`path_helper` isn't used on `macos-13`).\r\n\r\nThe reason the issue has only been seen in GitHub Actions is because of https://github.com/actions/runner-images/blob/d1db39831d5ff8fe7737d54e947bc54a1b125c31/images/macos/scripts/build/configure-shell.sh#L17 which would take the path at the time of the image build. We normally recommend `echo 'eval \"$(/opt/homebrew/bin/brew shellenv)\"' > ~/.bashrc` instead, which most users use and is thus why we haven't had any other reports on this so far.",
        "pr_file_module": null
      },
      {
        "comment_id": "1768835230",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T15:42:23+00:00",
        "comment_author": "carlocab",
        "comment_body": "Ah, yes. Instead of doing\r\n```sh\r\n/opt/homebrew/bin/brew shellenv >> ~/.bashrc\r\n```\r\nyou should be doing\r\n```sh\r\necho 'eval \"$(/opt/homebrew/bin/brew shellenv)\"' > ~/.bashrc\r\n```\r\ninstead. (This is the same as what Bo said above; I just thought I'd make it more explicit.)",
        "pr_file_module": null
      },
      {
        "comment_id": "1768838835",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T15:43:03+00:00",
        "comment_author": "erik-bershel",
        "comment_body": "> `echo 'eval \"$(/opt/homebrew/bin/brew shellenv)\"' > ~/.bashrc`\r\n\r\nLooks valid - pretty sure it will solve the issue too, but why do we need the interpreted PATH construct at all if we can use containment with the original variable by default?",
        "pr_file_module": null
      },
      {
        "comment_id": "1768846014",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T15:46:06+00:00",
        "comment_author": "carlocab",
        "comment_body": "> why do we need the interpreted PATH construct at all if we can use containment with the original variable by default?\r\n\r\nCould you clarify what you mean by this? What is \"the interpreted PATH construct\"? How would we use \"containment with the original variable\"?",
        "pr_file_module": null
      },
      {
        "comment_id": "1768847435",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T15:46:47+00:00",
        "comment_author": "erik-bershel",
        "comment_body": "> This also eplxains why it only affects macos-14 (path_helper isn't used on macos-13)\r\n\r\nLet's say it affects `arm64`-based runners only. 😄 `macos-13` YAML label is Intel/amd64 based, so we don't use explicit `.bashrc` modifying there.",
        "pr_file_module": null
      },
      {
        "comment_id": "1768850628",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T15:49:07+00:00",
        "comment_author": "Bo98",
        "comment_body": "For the specific line you modified: it was added for people who run with `bash -u`: https://github.com/Homebrew/brew/commit/59866d25ea39e4c5d25eb7cf78089d39752d88c3.\r\n\r\nFor the general behaviour of not using `$PATH` with `path_helper`: I agree it's not ideal. Just seems to be what Apple's `path_helper` tool outputs with no exceptions. The reason we're using `path_helper` is to support a new feature we added where people can add paths to `$(brew --prefix)/etc/paths`. I guess ideally we'd have something else that works on Linux too - we just prioritised the largest user share group for now.",
        "pr_file_module": null
      },
      {
        "comment_id": "1768859738",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T15:56:44+00:00",
        "comment_author": "erik-bershel",
        "comment_body": "> Could you clarify what you mean by this? What is \"the interpreted PATH construct\"? How would we use \"containment with the original variable\"?\r\n\r\nYeah, sure. Now when you run `shellenv` you'll get something like this:\r\n\r\n```\r\nexport HOMEBREW_CELLAR=\"/opt/homebrew/Cellar\";\r\nexport HOMEBREW_REPOSITORY=\"/opt/homebrew\";\r\nPATH=\"/opt/homebrew/bin:/opt/homebrew/sbin:/Users/runner/.cargo/~~~~~~sr/appleinternal/bin\"; export PATH;\r\n[ -z \"${MANPATH-}\" ] || export MANPATH=\":${MANPATH#:}\";\r\nexport INFOPATH=\"/opt/homebrew/share/info:${INFOPATH:-}\";\r\n```\r\n\r\nWhile more common way is to use next:\r\n```\r\nexport HOMEBREW_CELLAR=\"/opt/homebrew/Cellar\";\r\nexport HOMEBREW_REPOSITORY=\"/opt/homebrew\";\r\nexport PATH=\"/opt/homebrew/bin:/opt/homebrew/sbin:$PATH\"\r\n```\r\n\r\nBut as @Bo98 described here we hit users of `bash -u` somehow this way.",
        "pr_file_module": null
      },
      {
        "comment_id": "1768865078",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T16:01:27+00:00",
        "comment_author": "erik-bershel",
        "comment_body": "Anyway. You already sent a solution with `echo 'eval \"$(/opt/homebrew/bin/brew shellenv)\"' > ~/.bashrc`. Which is quite okay. I think we can drop this PR.",
        "pr_file_module": null
      },
      {
        "comment_id": "1768879402",
        "repo_full_name": "Homebrew/brew",
        "pr_number": 18366,
        "pr_file": "Library/Homebrew/cmd/shellenv.sh",
        "discussion_id": "1768825416",
        "commented_code": "@@ -85,7 +85,7 @@ homebrew-shellenv() {\n       then\n         PATH_HELPER_ROOT=\"${PATH_HELPER_ROOT}\" PATH=\"${HOMEBREW_PATH}\" /usr/libexec/path_helper -s\n       else\n-        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin\\${PATH+:\\$PATH}\\\";\"\n+        echo \"export PATH=\\\"${HOMEBREW_PREFIX}/bin:${HOMEBREW_PREFIX}/sbin:\\$PATH\\\";\"",
        "comment_created_at": "2024-09-20T16:14:32+00:00",
        "comment_author": "carlocab",
        "comment_body": "> While more common way is to use next:\r\n> \r\n> ```\r\n> export HOMEBREW_CELLAR=\"/opt/homebrew/Cellar\";\r\n> export HOMEBREW_REPOSITORY=\"/opt/homebrew\";\r\n> export PATH=\"/opt/homebrew/bin:/opt/homebrew/sbin:$PATH\"\r\n> ```\r\n> \r\n> But as @Bo98 described here we hit users of `bash -u` somehow this way.\r\n\r\nYes, this does hit users of `bash -u`. Moreover, doing\r\n```\r\nPATH=\"/foo/bar:/baz:/random/path\"; export PATH;\r\n```\r\nis the output of `/usr/libexec/path_helper`, which we don't control. (Try running `/usr/libexec/path_helper -s` on a Mac to see.)",
        "pr_file_module": null
      }
    ]
  }
]