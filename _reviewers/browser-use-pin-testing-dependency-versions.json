[
  {
    "discussion_id": "2087722347",
    "pr_number": 1579,
    "pr_file": "Dockerfile",
    "created_at": "2025-05-13T22:31:14+00:00",
    "commented_code": "-# Use a specific Python 3.11 slim image as the base\n-FROM python:3.11.3-slim\n-\n-# Set environment variables\n-ENV PYTHONDONTWRITEBYTECODE=1 \\\n-    PYTHONUNBUFFERED=1\n-\n-# Install system dependencies\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-    git \\\n-    curl \\\n-    unzip \\\n-    xvfb \\\n-    libnss3 \\\n-    libatk-bridge2.0-0 \\\n-    libgtk-3-0 \\\n-    libxss1 \\\n-    libasound2 \\\n-    libx11-xcb1 \\\n-    libxcb-dri3-0 \\\n-    libdrm2 \\\n-    libgbm1 \\\n-    libxcomposite1 \\\n-    libxdamage1 \\\n-    libxrandr2 \\\n-    libxinerama1 \\\n-    libxcursor1 \\\n-    libxi6 \\\n-    libgl1-mesa-glx \\\n-    && rm -rf /var/lib/apt/lists/*\n-\n-# Create a non-root user\n-RUN addgroup --system appgroup && adduser --system --ingroup appgroup appuser\n-\n-# Set work directory\n+# 1. Base image\n+FROM python:3.11-slim\n+\n+# 2. Create a non-root user (don\u2019t switch yet)\n+RUN groupadd appgroup \\\n+ && useradd -m -g appgroup appuser\n+\n+# 3. Install base APT packages\n+RUN apt-get update -qq \\\n+ && apt-get install -y --no-install-recommends -qq \\\n+      unzip libnss3 libxss1 libasound2 libx11-xcb1 \\\n+      curl git \\\n+ && rm -rf /var/lib/apt/lists/*\n+\n+# 4. Set working directory\n WORKDIR /app\n \n-# Copy project files\n-COPY . /app/\n+# 5. Copy only dependency manifest\n+COPY pyproject.toml /app/\n \n-# Change ownership to the non-root user\n-RUN chown -R appuser:appgroup /app\n+# 6. Install patchright (version from pyproject.toml)\n+RUN python3 -m pip install --upgrade pip --quiet \\\n+ && python3 -m pip install patchright --quiet",
    "repo_full_name": "browser-use/browser-use",
    "discussion_comments": [
      {
        "comment_id": "2087722347",
        "repo_full_name": "browser-use/browser-use",
        "pr_number": 1579,
        "pr_file": "Dockerfile",
        "discussion_id": "2087722347",
        "commented_code": "@@ -1,56 +1,38 @@\n-# Use a specific Python 3.11 slim image as the base\n-FROM python:3.11.3-slim\n-\n-# Set environment variables\n-ENV PYTHONDONTWRITEBYTECODE=1 \\\n-    PYTHONUNBUFFERED=1\n-\n-# Install system dependencies\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-    git \\\n-    curl \\\n-    unzip \\\n-    xvfb \\\n-    libnss3 \\\n-    libatk-bridge2.0-0 \\\n-    libgtk-3-0 \\\n-    libxss1 \\\n-    libasound2 \\\n-    libx11-xcb1 \\\n-    libxcb-dri3-0 \\\n-    libdrm2 \\\n-    libgbm1 \\\n-    libxcomposite1 \\\n-    libxdamage1 \\\n-    libxrandr2 \\\n-    libxinerama1 \\\n-    libxcursor1 \\\n-    libxi6 \\\n-    libgl1-mesa-glx \\\n-    && rm -rf /var/lib/apt/lists/*\n-\n-# Create a non-root user\n-RUN addgroup --system appgroup && adduser --system --ingroup appgroup appuser\n-\n-# Set work directory\n+# 1. Base image\n+FROM python:3.11-slim\n+\n+# 2. Create a non-root user (don\u2019t switch yet)\n+RUN groupadd appgroup \\\n+ && useradd -m -g appgroup appuser\n+\n+# 3. Install base APT packages\n+RUN apt-get update -qq \\\n+ && apt-get install -y --no-install-recommends -qq \\\n+      unzip libnss3 libxss1 libasound2 libx11-xcb1 \\\n+      curl git \\\n+ && rm -rf /var/lib/apt/lists/*\n+\n+# 4. Set working directory\n WORKDIR /app\n \n-# Copy project files\n-COPY . /app/\n+# 5. Copy only dependency manifest\n+COPY pyproject.toml /app/\n \n-# Change ownership to the non-root user\n-RUN chown -R appuser:appgroup /app\n+# 6. Install patchright (version from pyproject.toml)\n+RUN python3 -m pip install --upgrade pip --quiet \\\n+ && python3 -m pip install patchright --quiet",
        "comment_created_at": "2025-05-13T22:31:14+00:00",
        "comment_author": "pirate",
        "comment_body": "```suggestion\r\nRUN pip install --upgrade playwright==$PLAYWRIGHT_VERSION\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2087723435",
    "pr_number": 1579,
    "pr_file": "Dockerfile",
    "created_at": "2025-05-13T22:32:40+00:00",
    "commented_code": "-# Use a specific Python 3.11 slim image as the base\n-FROM python:3.11.3-slim\n-\n-# Set environment variables\n-ENV PYTHONDONTWRITEBYTECODE=1 \\\n-    PYTHONUNBUFFERED=1\n-\n-# Install system dependencies\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-    git \\\n-    curl \\\n-    unzip \\\n-    xvfb \\\n-    libnss3 \\\n-    libatk-bridge2.0-0 \\\n-    libgtk-3-0 \\\n-    libxss1 \\\n-    libasound2 \\\n-    libx11-xcb1 \\\n-    libxcb-dri3-0 \\\n-    libdrm2 \\\n-    libgbm1 \\\n-    libxcomposite1 \\\n-    libxdamage1 \\\n-    libxrandr2 \\\n-    libxinerama1 \\\n-    libxcursor1 \\\n-    libxi6 \\\n-    libgl1-mesa-glx \\\n-    && rm -rf /var/lib/apt/lists/*\n-\n-# Create a non-root user\n-RUN addgroup --system appgroup && adduser --system --ingroup appgroup appuser\n-\n-# Set work directory\n+# 1. Base image\n+FROM python:3.11-slim\n+\n+# 2. Create a non-root user (don\u2019t switch yet)\n+RUN groupadd appgroup \\\n+ && useradd -m -g appgroup appuser\n+\n+# 3. Install base APT packages\n+RUN apt-get update -qq \\\n+ && apt-get install -y --no-install-recommends -qq \\\n+      unzip libnss3 libxss1 libasound2 libx11-xcb1 \\\n+      curl git \\\n+ && rm -rf /var/lib/apt/lists/*\n+\n+# 4. Set working directory\n WORKDIR /app\n \n-# Copy project files\n-COPY . /app/\n+# 5. Copy only dependency manifest\n+COPY pyproject.toml /app/\n \n-# Change ownership to the non-root user\n-RUN chown -R appuser:appgroup /app\n+# 6. Install patchright (version from pyproject.toml)\n+RUN python3 -m pip install --upgrade pip --quiet \\\n+ && python3 -m pip install patchright --quiet",
    "repo_full_name": "browser-use/browser-use",
    "discussion_comments": [
      {
        "comment_id": "2087723435",
        "repo_full_name": "browser-use/browser-use",
        "pr_number": 1579,
        "pr_file": "Dockerfile",
        "discussion_id": "2087723435",
        "commented_code": "@@ -1,56 +1,38 @@\n-# Use a specific Python 3.11 slim image as the base\n-FROM python:3.11.3-slim\n-\n-# Set environment variables\n-ENV PYTHONDONTWRITEBYTECODE=1 \\\n-    PYTHONUNBUFFERED=1\n-\n-# Install system dependencies\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-    git \\\n-    curl \\\n-    unzip \\\n-    xvfb \\\n-    libnss3 \\\n-    libatk-bridge2.0-0 \\\n-    libgtk-3-0 \\\n-    libxss1 \\\n-    libasound2 \\\n-    libx11-xcb1 \\\n-    libxcb-dri3-0 \\\n-    libdrm2 \\\n-    libgbm1 \\\n-    libxcomposite1 \\\n-    libxdamage1 \\\n-    libxrandr2 \\\n-    libxinerama1 \\\n-    libxcursor1 \\\n-    libxi6 \\\n-    libgl1-mesa-glx \\\n-    && rm -rf /var/lib/apt/lists/*\n-\n-# Create a non-root user\n-RUN addgroup --system appgroup && adduser --system --ingroup appgroup appuser\n-\n-# Set work directory\n+# 1. Base image\n+FROM python:3.11-slim\n+\n+# 2. Create a non-root user (don\u2019t switch yet)\n+RUN groupadd appgroup \\\n+ && useradd -m -g appgroup appuser\n+\n+# 3. Install base APT packages\n+RUN apt-get update -qq \\\n+ && apt-get install -y --no-install-recommends -qq \\\n+      unzip libnss3 libxss1 libasound2 libx11-xcb1 \\\n+      curl git \\\n+ && rm -rf /var/lib/apt/lists/*\n+\n+# 4. Set working directory\n WORKDIR /app\n \n-# Copy project files\n-COPY . /app/\n+# 5. Copy only dependency manifest\n+COPY pyproject.toml /app/\n \n-# Change ownership to the non-root user\n-RUN chown -R appuser:appgroup /app\n+# 6. Install patchright (version from pyproject.toml)\n+RUN python3 -m pip install --upgrade pip --quiet \\\n+ && python3 -m pip install patchright --quiet",
        "comment_created_at": "2025-05-13T22:32:40+00:00",
        "comment_author": "pirate",
        "comment_body": "```suggestion\r\nRUN pip install playwright==$PLAYWRIGHT_VERSION\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2087724065",
    "pr_number": 1579,
    "pr_file": "Dockerfile",
    "created_at": "2025-05-13T22:33:30+00:00",
    "commented_code": "-# Use a specific Python 3.11 slim image as the base\n-FROM python:3.11.3-slim\n-\n-# Set environment variables\n-ENV PYTHONDONTWRITEBYTECODE=1 \\\n-    PYTHONUNBUFFERED=1\n-\n-# Install system dependencies\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-    git \\\n-    curl \\\n-    unzip \\\n-    xvfb \\\n-    libnss3 \\\n-    libatk-bridge2.0-0 \\\n-    libgtk-3-0 \\\n-    libxss1 \\\n-    libasound2 \\\n-    libx11-xcb1 \\\n-    libxcb-dri3-0 \\\n-    libdrm2 \\\n-    libgbm1 \\\n-    libxcomposite1 \\\n-    libxdamage1 \\\n-    libxrandr2 \\\n-    libxinerama1 \\\n-    libxcursor1 \\\n-    libxi6 \\\n-    libgl1-mesa-glx \\\n-    && rm -rf /var/lib/apt/lists/*\n-\n-# Create a non-root user\n-RUN addgroup --system appgroup && adduser --system --ingroup appgroup appuser\n-\n-# Set work directory\n+# 1. Base image\n+FROM python:3.11-slim\n+\n+# 2. Create a non-root user (don\u2019t switch yet)\n+RUN groupadd appgroup \\\n+ && useradd -m -g appgroup appuser\n+\n+# 3. Install base APT packages\n+RUN apt-get update -qq \\\n+ && apt-get install -y --no-install-recommends -qq \\\n+      unzip libnss3 libxss1 libasound2 libx11-xcb1 \\\n+      curl git \\\n+ && rm -rf /var/lib/apt/lists/*\n+\n+# 4. Set working directory\n WORKDIR /app\n \n-# Copy project files\n-COPY . /app/\n+# 5. Copy only dependency manifest\n+COPY pyproject.toml /app/\n \n-# Change ownership to the non-root user\n-RUN chown -R appuser:appgroup /app\n+# 6. Install patchright (version from pyproject.toml)\n+RUN pip install playwright==$PLAYWRIGHT_VERSION",
    "repo_full_name": "browser-use/browser-use",
    "discussion_comments": [
      {
        "comment_id": "2087724065",
        "repo_full_name": "browser-use/browser-use",
        "pr_number": 1579,
        "pr_file": "Dockerfile",
        "discussion_id": "2087724065",
        "commented_code": "@@ -1,56 +1,37 @@\n-# Use a specific Python 3.11 slim image as the base\n-FROM python:3.11.3-slim\n-\n-# Set environment variables\n-ENV PYTHONDONTWRITEBYTECODE=1 \\\n-    PYTHONUNBUFFERED=1\n-\n-# Install system dependencies\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-    git \\\n-    curl \\\n-    unzip \\\n-    xvfb \\\n-    libnss3 \\\n-    libatk-bridge2.0-0 \\\n-    libgtk-3-0 \\\n-    libxss1 \\\n-    libasound2 \\\n-    libx11-xcb1 \\\n-    libxcb-dri3-0 \\\n-    libdrm2 \\\n-    libgbm1 \\\n-    libxcomposite1 \\\n-    libxdamage1 \\\n-    libxrandr2 \\\n-    libxinerama1 \\\n-    libxcursor1 \\\n-    libxi6 \\\n-    libgl1-mesa-glx \\\n-    && rm -rf /var/lib/apt/lists/*\n-\n-# Create a non-root user\n-RUN addgroup --system appgroup && adduser --system --ingroup appgroup appuser\n-\n-# Set work directory\n+# 1. Base image\n+FROM python:3.11-slim\n+\n+# 2. Create a non-root user (don\u2019t switch yet)\n+RUN groupadd appgroup \\\n+ && useradd -m -g appgroup appuser\n+\n+# 3. Install base APT packages\n+RUN apt-get update -qq \\\n+ && apt-get install -y --no-install-recommends -qq \\\n+      unzip libnss3 libxss1 libasound2 libx11-xcb1 \\\n+      curl git \\\n+ && rm -rf /var/lib/apt/lists/*\n+\n+# 4. Set working directory\n WORKDIR /app\n \n-# Copy project files\n-COPY . /app/\n+# 5. Copy only dependency manifest\n+COPY pyproject.toml /app/\n \n-# Change ownership to the non-root user\n-RUN chown -R appuser:appgroup /app\n+# 6. Install patchright (version from pyproject.toml)\n+RUN pip install playwright==$PLAYWRIGHT_VERSION",
        "comment_created_at": "2025-05-13T22:33:30+00:00",
        "comment_author": "pirate",
        "comment_body": "```suggestion\r\n# 6. Install playwright (version from pyproject.toml)\r\nRUN PLAYWRIGHT_VERSION=$(grep -oP '(p....right>=\\K[0-9.]+' pyproject.toml)\\\r\n\t&& pip install playwright==$PLAYWRIGHT_VERSION\r\n```",
        "pr_file_module": null
      }
    ]
  }
]