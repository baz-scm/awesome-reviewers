[
  {
    "discussion_id": "2249994665",
    "pr_number": 2583,
    "pr_file": "browser_use/agent/service.py",
    "created_at": "2025-08-03T14:13:59+00:00",
    "commented_code": "agent_run_error = 'Agent stopped programmatically'\n \t\t\t\t\tbreak\n \n-\t\t\t\twhile self.state.paused:",
    "repo_full_name": "browser-use/browser-use",
    "discussion_comments": [
      {
        "comment_id": "2249994665",
        "repo_full_name": "browser-use/browser-use",
        "pr_number": 2583,
        "pr_file": "browser_use/agent/service.py",
        "discussion_id": "2249994665",
        "commented_code": "@@ -1259,12 +1264,6 @@ def on_force_exit_log_telemetry():\n \t\t\t\t\tagent_run_error = 'Agent stopped programmatically'\n \t\t\t\t\tbreak\n \n-\t\t\t\twhile self.state.paused:",
        "comment_created_at": "2025-08-03T14:13:59+00:00",
        "comment_author": "mertunsall",
        "comment_body": "why is this removed btw?",
        "pr_file_module": null
      },
      {
        "comment_id": "2250012305",
        "repo_full_name": "browser-use/browser-use",
        "pr_number": 2583,
        "pr_file": "browser_use/agent/service.py",
        "discussion_id": "2249994665",
        "commented_code": "@@ -1259,12 +1264,6 @@ def on_force_exit_log_telemetry():\n \t\t\t\t\tagent_run_error = 'Agent stopped programmatically'\n \t\t\t\t\tbreak\n \n-\t\t\t\twhile self.state.paused:",
        "comment_created_at": "2025-08-03T15:03:12+00:00",
        "comment_author": "MagellaX",
        "comment_body": "Yeah... So the busy-wait loop is no longer needed because pause handling is now event-driven:\r\n\u201cpython while self.state.paused: ... ``\r\nwas polling every iteration.\r\nSince the main run-loop now blocks on await self._pause_event.wait(), the agent can\u2019t reach this telemetry block until it\u2019s already resumed (or stopping), so the extra loop would never be entered and would only risk hanging if someone called the method directly. Removing it lets the method finish immediately and keeps pause logic in a single place.\u201d",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2057935297",
    "pr_number": 1466,
    "pr_file": "browser_use/agent/service.py",
    "created_at": "2025-04-24T12:42:52+00:00",
    "commented_code": "self.state.last_result = result\n \n \t\t\tfor step in range(max_steps):\n-\t\t\t\t# Check if waiting for user input after Ctrl+C\n+\t\t\t\t# Replace the polling with clean pause-wait",
    "repo_full_name": "browser-use/browser-use",
    "discussion_comments": [
      {
        "comment_id": "2058335190",
        "repo_full_name": "browser-use/browser-use",
        "pr_number": 1466,
        "pr_file": "browser_use/agent/service.py",
        "discussion_id": "2057935297",
        "commented_code": "@@ -799,9 +796,9 @@ async def run(\n \t\t\t\tself.state.last_result = result\n \n \t\t\tfor step in range(max_steps):\n-\t\t\t\t# Check if waiting for user input after Ctrl+C\n+\t\t\t\t# Replace the polling with clean pause-wait",
        "comment_created_at": "2025-04-24T12:42:52+00:00",
        "comment_author": "dharam1291",
        "comment_body": "It\u2019s brilliant to use _external_pause_event = asyncio.Event() since it doesn\u2019t block the thread.\r\n\r\nMy idea is to run each agent as a separate task using asyncio.create_task(agent.run()). That way, if I pause task t1, only the agent associated with t1 should pause, while agents for other tasks continue running normally.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2072530716",
    "pr_number": 1466,
    "pr_file": "browser_use/agent/service.py",
    "created_at": "2025-05-04T06:17:21+00:00",
    "commented_code": "file_path = 'AgentHistory.json'\n \t\tself.state.history.save_to_file(file_path)\n \n+\tasync def wait_until_resumed(self):\n+\t\tawait self._external_pause_event.wait()\n+\n \tdef pause(self) -> None:\n \t\t\"\"\"Pause the agent before the next step\"\"\"\n \t\tprint('\n\n\u23f8\ufe0f  Got Ctrl+C, paused the agent and left the browser open.')\n \t\tself.state.paused = True",
    "repo_full_name": "browser-use/browser-use",
    "discussion_comments": [
      {
        "comment_id": "2072530716",
        "repo_full_name": "browser-use/browser-use",
        "pr_number": 1466,
        "pr_file": "browser_use/agent/service.py",
        "discussion_id": "2072530716",
        "commented_code": "@@ -1197,10 +1194,14 @@ def save_history(self, file_path: str | Path | None = None) -> None:\n \t\t\tfile_path = 'AgentHistory.json'\n \t\tself.state.history.save_to_file(file_path)\n \n+\tasync def wait_until_resumed(self):\n+\t\tawait self._external_pause_event.wait()\n+\n \tdef pause(self) -> None:\n \t\t\"\"\"Pause the agent before the next step\"\"\"\n \t\tprint('\\n\\n\u23f8\ufe0f  Got Ctrl+C, paused the agent and left the browser open.')\n \t\tself.state.paused = True",
        "comment_created_at": "2025-05-04T06:17:21+00:00",
        "comment_author": "pirate",
        "comment_body": "do we even need `self.state.paused` anymore if we are using `self._external_pause_event` as the semaphore? I think we should remove it if it's not needed",
        "pr_file_module": null
      }
    ]
  }
]