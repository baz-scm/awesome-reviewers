[
  {
    "discussion_id": "2132956136",
    "pr_number": 20088,
    "pr_file": "test/js/node/test/parallel/test-vm-context-dont-contextify.js",
    "created_at": "2025-06-06T22:01:16+00:00",
    "commented_code": "+'use strict';\n+\n+// Check vm.constants.DONT_CONTEXTIFY works.\n+\n+const common = require('../common');\n+\n+const assert = require('assert');\n+const vm = require('vm');\n+const fixtures = require('../common/fixtures');\n+\n+{\n+  // Check identity of the returned object.\n+  const context = vm.createContext(vm.constants.DONT_CONTEXTIFY);\n+  // The globalThis in the new context should be reference equal to the returned object.\n+  assert.strictEqual(vm.runInContext('globalThis', context), context);\n+  assert(vm.isContext(context));\n+  assert.strictEqual(typeof context.Array, 'function');  // Can access builtins directly.\n+  assert.deepStrictEqual(Object.keys(context), []);  // Properties on the global proxy are not enumerable\n+}\n+\n+{\n+  // Check that vm.createContext can return the original context if re-passed.\n+  const context = vm.createContext(vm.constants.DONT_CONTEXTIFY);\n+  const context2 = new vm.createContext(context);",
    "repo_full_name": "oven-sh/bun",
    "discussion_comments": [
      {
        "comment_id": "2132960634",
        "repo_full_name": "oven-sh/bun",
        "pr_number": 20088,
        "pr_file": "test/js/node/test/parallel/test-vm-context-dont-contextify.js",
        "discussion_id": "2132956136",
        "commented_code": "@@ -0,0 +1,185 @@\n+'use strict';\n+\n+// Check vm.constants.DONT_CONTEXTIFY works.\n+\n+const common = require('../common');\n+\n+const assert = require('assert');\n+const vm = require('vm');\n+const fixtures = require('../common/fixtures');\n+\n+{\n+  // Check identity of the returned object.\n+  const context = vm.createContext(vm.constants.DONT_CONTEXTIFY);\n+  // The globalThis in the new context should be reference equal to the returned object.\n+  assert.strictEqual(vm.runInContext('globalThis', context), context);\n+  assert(vm.isContext(context));\n+  assert.strictEqual(typeof context.Array, 'function');  // Can access builtins directly.\n+  assert.deepStrictEqual(Object.keys(context), []);  // Properties on the global proxy are not enumerable\n+}\n+\n+{\n+  // Check that vm.createContext can return the original context if re-passed.\n+  const context = vm.createContext(vm.constants.DONT_CONTEXTIFY);\n+  const context2 = new vm.createContext(context);",
        "comment_created_at": "2025-06-06T22:07:57+00:00",
        "comment_author": "heimskr",
        "comment_body": "This is a Node.js test. It's testing strange behaviors.",
        "pr_file_module": null
      }
    ]
  }
]