[
  {
    "discussion_id": "2131062172",
    "pr_number": 20198,
    "pr_file": "src/bun.js/bindings/WTF.zig",
    "created_at": "2025-06-06T00:19:28+00:00",
    "commented_code": "return error.InvalidCharacter;\n         return res;\n     }\n+\n+    extern fn Bun__writeHTTPDate(buffer: *[32]u8, timestampMs: u64) c_int;\n+\n+    pub fn writeHTTPDate(buffer: *[32]u8, timestampMs: u64) []u8 {\n+        if (timestampMs == 0) {\n+            return buffer[0..0];\n+        }\n+\n+        const res = Bun__writeHTTPDate(buffer, timestampMs);",
    "repo_full_name": "oven-sh/bun",
    "discussion_comments": [
      {
        "comment_id": "2131062172",
        "repo_full_name": "oven-sh/bun",
        "pr_number": 20198,
        "pr_file": "src/bun.js/bindings/WTF.zig",
        "discussion_id": "2131062172",
        "commented_code": "@@ -17,4 +17,19 @@ pub const WTF = struct {\n             return error.InvalidCharacter;\n         return res;\n     }\n+\n+    extern fn Bun__writeHTTPDate(buffer: *[32]u8, timestampMs: u64) c_int;\n+\n+    pub fn writeHTTPDate(buffer: *[32]u8, timestampMs: u64) []u8 {\n+        if (timestampMs == 0) {\n+            return buffer[0..0];\n+        }\n+\n+        const res = Bun__writeHTTPDate(buffer, timestampMs);",
        "comment_created_at": "2025-06-06T00:19:28+00:00",
        "comment_author": "graphite-app[bot]",
        "comment_body": "The C function `Bun__writeHTTPDate` appears to expect three parameters (buffer, length, timestampMs) based on its implementation in HTTPParsers.cpp, but only two arguments are provided in this call. Consider updating the call to include the buffer length:\n\n```zig\nconst res = Bun__writeHTTPDate(buffer, buffer.len, timestampMs);\n```\n\nThis will ensure the C function has the correct information about the buffer size to prevent potential buffer overflows.\n```suggestion\n        const res = Bun__writeHTTPDate(buffer, buffer.len, timestampMs);\n```\n  \n\n*Spotted by [Diamond](https://app.graphite.dev/diamond/?org=oven-sh&ref=ai-review-comment)*<i class='graphite__hidden'><br /><br />Is this helpful? React \ud83d\udc4d or \ud83d\udc4e to let us know.</i>",
        "pr_file_module": null
      }
    ]
  }
]