[
  {
    "discussion_id": "2316643125",
    "pr_number": 143,
    "pr_file": "src/claude_code_sdk/types.py",
    "created_at": "2025-09-02T16:45:48+00:00",
    "commented_code": "default_factory=dict\n     )  # Pass arbitrary CLI flags\n \n+    # Tool permission callback\n+    tool_permission_callback: ToolPermissionCallback | None = None",
    "repo_full_name": "anthropics/claude-agent-sdk-python",
    "discussion_comments": [
      {
        "comment_id": "2316643125",
        "repo_full_name": "anthropics/claude-agent-sdk-python",
        "pr_number": 143,
        "pr_file": "src/claude_code_sdk/types.py",
        "discussion_id": "2316643125",
        "commented_code": "@@ -142,6 +193,12 @@ class ClaudeCodeOptions:\n         default_factory=dict\n     )  # Pass arbitrary CLI flags\n \n+    # Tool permission callback\n+    tool_permission_callback: ToolPermissionCallback | None = None",
        "comment_created_at": "2025-09-02T16:45:48+00:00",
        "comment_author": "ashwin-ant",
        "comment_body": "Thoughts on calling it `can_use_tool` to align with TS?",
        "pr_file_module": null
      },
      {
        "comment_id": "2317417714",
        "repo_full_name": "anthropics/claude-agent-sdk-python",
        "pr_number": 143,
        "pr_file": "src/claude_code_sdk/types.py",
        "discussion_id": "2316643125",
        "commented_code": "@@ -142,6 +193,12 @@ class ClaudeCodeOptions:\n         default_factory=dict\n     )  # Pass arbitrary CLI flags\n \n+    # Tool permission callback\n+    tool_permission_callback: ToolPermissionCallback | None = None",
        "comment_created_at": "2025-09-02T23:36:39+00:00",
        "comment_author": "km-anthropic",
        "comment_body": "easy enough yeah. Let me see if there's anything else I can do to align it more with ts sdk",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2153236354",
    "pr_number": 17,
    "pr_file": "src/claude_code_sdk/_internal/client.py",
    "created_at": "2025-06-17T21:55:58+00:00",
    "commented_code": "case \"system\":\n                 return SystemMessage(\n                     subtype=data[\"subtype\"],\n-                    data=data,  # Pass through all data\n+                    data=data,\n                 )\n \n             case \"result\":\n-                # Map total_cost to total_cost_usd for consistency\n                 return ResultMessage(\n                     subtype=data[\"subtype\"],\n-                    cost_usd=data[\"cost_usd\"],\n                     duration_ms=data[\"duration_ms\"],\n                     duration_api_ms=data[\"duration_api_ms\"],\n                     is_error=data[\"is_error\"],\n                     num_turns=data[\"num_turns\"],\n                     session_id=data[\"session_id\"],\n-                    total_cost_usd=data[\"total_cost\"],\n+                    cost_usd=data.get(\"cost_usd\"),",
    "repo_full_name": "anthropics/claude-agent-sdk-python",
    "discussion_comments": [
      {
        "comment_id": "2153236354",
        "repo_full_name": "anthropics/claude-agent-sdk-python",
        "pr_number": 17,
        "pr_file": "src/claude_code_sdk/_internal/client.py",
        "discussion_id": "2153236354",
        "commented_code": "@@ -79,20 +77,19 @@ def _parse_message(self, data: dict[str, Any]) -> Message | None:\n             case \"system\":\n                 return SystemMessage(\n                     subtype=data[\"subtype\"],\n-                    data=data,  # Pass through all data\n+                    data=data,\n                 )\n \n             case \"result\":\n-                # Map total_cost to total_cost_usd for consistency\n                 return ResultMessage(\n                     subtype=data[\"subtype\"],\n-                    cost_usd=data[\"cost_usd\"],\n                     duration_ms=data[\"duration_ms\"],\n                     duration_api_ms=data[\"duration_api_ms\"],\n                     is_error=data[\"is_error\"],\n                     num_turns=data[\"num_turns\"],\n                     session_id=data[\"session_id\"],\n-                    total_cost_usd=data[\"total_cost\"],\n+                    cost_usd=data.get(\"cost_usd\"),",
        "comment_created_at": "2025-06-17T21:55:58+00:00",
        "comment_author": "bcherny",
        "comment_body": "This isn't a thing anymore -- the field is `total_cost_usd`",
        "pr_file_module": null
      },
      {
        "comment_id": "2153237050",
        "repo_full_name": "anthropics/claude-agent-sdk-python",
        "pr_number": 17,
        "pr_file": "src/claude_code_sdk/_internal/client.py",
        "discussion_id": "2153236354",
        "commented_code": "@@ -79,20 +77,19 @@ def _parse_message(self, data: dict[str, Any]) -> Message | None:\n             case \"system\":\n                 return SystemMessage(\n                     subtype=data[\"subtype\"],\n-                    data=data,  # Pass through all data\n+                    data=data,\n                 )\n \n             case \"result\":\n-                # Map total_cost to total_cost_usd for consistency\n                 return ResultMessage(\n                     subtype=data[\"subtype\"],\n-                    cost_usd=data[\"cost_usd\"],\n                     duration_ms=data[\"duration_ms\"],\n                     duration_api_ms=data[\"duration_api_ms\"],\n                     is_error=data[\"is_error\"],\n                     num_turns=data[\"num_turns\"],\n                     session_id=data[\"session_id\"],\n-                    total_cost_usd=data[\"total_cost\"],\n+                    cost_usd=data.get(\"cost_usd\"),",
        "comment_created_at": "2025-06-17T21:56:37+00:00",
        "comment_author": "bcherny",
        "comment_body": "@claude can you kill the `cost_usd` fields and replace them with `total_cost_usd`?",
        "pr_file_module": null
      }
    ]
  }
]