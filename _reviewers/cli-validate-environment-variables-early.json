[
  {
    "discussion_id": "2022760256",
    "pr_number": 5730,
    "pr_file": "cliv2/Makefile",
    "created_at": "2025-04-01T12:30:16+00:00",
    "commented_code": "@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
    "repo_full_name": "snyk/cli",
    "discussion_comments": [
      {
        "comment_id": "2022760256",
        "repo_full_name": "snyk/cli",
        "pr_number": 5730,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "2022760256",
        "commented_code": "@@ -151,7 +151,8 @@ $(BUILD_DIR)/$(V2_EXECUTABLE_NAME): $(BUILD_DIR) $(SRCS) generate-ls-protocol-me\n \t@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
        "comment_created_at": "2025-04-01T12:30:16+00:00",
        "comment_author": "PeterSchafer",
        "comment_body": "Question: What is the developer experience when this Environment Variable is not specified? Is it worth to explicitly warn when it is empty?\r\n\r\nNitpick: Maybe move this to where `LS version:` is printed \ud83d\ude04 ",
        "pr_file_module": null
      },
      {
        "comment_id": "2022774074",
        "repo_full_name": "snyk/cli",
        "pr_number": 5730,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "2022760256",
        "commented_code": "@@ -151,7 +151,8 @@ $(BUILD_DIR)/$(V2_EXECUTABLE_NAME): $(BUILD_DIR) $(SRCS) generate-ls-protocol-me\n \t@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
        "comment_created_at": "2025-04-01T12:39:12+00:00",
        "comment_author": "PeterSchafer",
        "comment_body": "This is the error I see, right now. \r\n<img width=\"613\" alt=\"image\" src=\"https://github.com/user-attachments/assets/05a0cb4b-3219-487a-8b4a-ba2a93529b31\" />\r\n\r\nCan we make the test a bit more descriptive and actionable? I'm worried about all the asks we will be getting because someone is using a dev CLI without the URL set.\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "2022785946",
        "repo_full_name": "snyk/cli",
        "pr_number": 5730,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "2022760256",
        "commented_code": "@@ -151,7 +151,8 @@ $(BUILD_DIR)/$(V2_EXECUTABLE_NAME): $(BUILD_DIR) $(SRCS) generate-ls-protocol-me\n \t@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
        "comment_created_at": "2025-04-01T12:46:51+00:00",
        "comment_author": "sergiu-snyk",
        "comment_body": "Yes, good points. I think we should actually fail the build if that bundle is not provided, wdyt?",
        "pr_file_module": null
      },
      {
        "comment_id": "2022877956",
        "repo_full_name": "snyk/cli",
        "pr_number": 5730,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "2022760256",
        "commented_code": "@@ -151,7 +151,8 @@ $(BUILD_DIR)/$(V2_EXECUTABLE_NAME): $(BUILD_DIR) $(SRCS) generate-ls-protocol-me\n \t@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
        "comment_created_at": "2025-04-01T13:38:01+00:00",
        "comment_author": "PeterSchafer",
        "comment_body": "Maybe we fail the command execution instead?!",
        "pr_file_module": null
      },
      {
        "comment_id": "2022892460",
        "repo_full_name": "snyk/cli",
        "pr_number": 5730,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "2022760256",
        "commented_code": "@@ -151,7 +151,8 @@ $(BUILD_DIR)/$(V2_EXECUTABLE_NAME): $(BUILD_DIR) $(SRCS) generate-ls-protocol-me\n \t@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
        "comment_created_at": "2025-04-01T13:45:29+00:00",
        "comment_author": "sergiu-snyk",
        "comment_body": "It fails right now, doesn't it? Just that the message is not very actionable. like you said.",
        "pr_file_module": null
      },
      {
        "comment_id": "2022895792",
        "repo_full_name": "snyk/cli",
        "pr_number": 5730,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "2022760256",
        "commented_code": "@@ -151,7 +151,8 @@ $(BUILD_DIR)/$(V2_EXECUTABLE_NAME): $(BUILD_DIR) $(SRCS) generate-ls-protocol-me\n \t@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
        "comment_created_at": "2025-04-01T13:47:20+00:00",
        "comment_author": "PeterSchafer",
        "comment_body": "yes, it fails, but it seems to do a lot of things until it fails with the message right now. So a proposal could be to do a check for the variable and fail early and actionable. Does this make sense?",
        "pr_file_module": null
      },
      {
        "comment_id": "2022908876",
        "repo_full_name": "snyk/cli",
        "pr_number": 5730,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "2022760256",
        "commented_code": "@@ -151,7 +151,8 @@ $(BUILD_DIR)/$(V2_EXECUTABLE_NAME): $(BUILD_DIR) $(SRCS) generate-ls-protocol-me\n \t@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
        "comment_created_at": "2025-04-01T13:54:05+00:00",
        "comment_author": "PeterSchafer",
        "comment_body": "for example [here](https://github.com/snyk/cli-extension-iac/blob/0a63172561937695026101838e018d5574618785/internal/commands/iactest/iactest.go#L69)",
        "pr_file_module": null
      },
      {
        "comment_id": "2022948368",
        "repo_full_name": "snyk/cli",
        "pr_number": 5730,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "2022760256",
        "commented_code": "@@ -151,7 +151,8 @@ $(BUILD_DIR)/$(V2_EXECUTABLE_NAME): $(BUILD_DIR) $(SRCS) generate-ls-protocol-me\n \t@echo \"$(LOG_PREFIX) Building ( $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) )\"\n \t@echo \"$(LOG_PREFIX)  LDFLAGS:     $(LDFLAGS)\"\n \t@echo \"$(LOG_PREFIX)  GCFLAGS:     $(GCFLAGS)\"\n-\t@GOEXPERIMENT=$(FIPS_CRYPTO_BACKEND) GOOS=$(_GO_OS) GOARCH=$(GOARCH) $(GOCMD) build -tags=application -ldflags=\"$(LDFLAGS) -X github.com/snyk/snyk-ls/application/config.Version=$(LS_COMMIT_HASH) -X github.com/snyk/snyk-ls/application/config.LsProtocolVersion=$(LS_PROTOCOL_VERSION)  -X main.internalOS=$(GOOS) -X github.com/snyk/cli/cliv2/internal/embedded/cliv1.snykCLIVersion=$(CLI_V1_VERSION_TAG)\" $(GCFLAGS) -o $(BUILD_DIR)/$(V2_EXECUTABLE_NAME) $(WORKING_DIR)/cmd/cliv2/*.go\n+\t@echo \"$(LOG_PREFIX)  IAC_RULES_URL:     $(IAC_RULES_URL)\"",
        "comment_created_at": "2025-04-01T14:11:17+00:00",
        "comment_author": "sergiu-snyk",
        "comment_body": "Gotcha! Makes sense!",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1618858820",
    "pr_number": 5271,
    "pr_file": "cliv2/Makefile",
    "created_at": "2024-05-29T13:09:40+00:00",
    "commented_code": "_GO_OS = linux\n endif\n \n+ifeq ($(DEBUG), 1)",
    "repo_full_name": "snyk/cli",
    "discussion_comments": [
      {
        "comment_id": "1618858820",
        "repo_full_name": "snyk/cli",
        "pr_number": 5271,
        "pr_file": "cliv2/Makefile",
        "discussion_id": "1618858820",
        "commented_code": "@@ -66,6 +66,11 @@ ifeq ($(_GO_OS), alpine)\n \t_GO_OS = linux\n endif\n \n+ifeq ($(DEBUG), 1)",
        "comment_created_at": "2024-05-29T13:09:40+00:00",
        "comment_author": "PeterSchafer",
        "comment_body": "Question: DEBUG is a very generic environment variable name. There are good chances to have this conflicting somewhere for example in our CI/CD. Should we maybe solve enabling the debug build via an explicit target?",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1340193153",
    "pr_number": 4882,
    "pr_file": "Makefile",
    "created_at": "2023-09-28T13:52:10+00:00",
    "commented_code": "mv $(shell npm pack --workspace '@snyk/protect') $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-protect.tgz\n \n $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine: prepack | $(BINARY_RELEASES_FOLDER_TS_CLI)\n-\t$(PKG) -t node16-alpine-x64 -o $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine\n+\t$(PKG) -t node18-alpine-x64 -o $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine",
    "repo_full_name": "snyk/cli",
    "discussion_comments": [
      {
        "comment_id": "1340193153",
        "repo_full_name": "snyk/cli",
        "pr_number": 4882,
        "pr_file": "Makefile",
        "discussion_id": "1340193153",
        "commented_code": "@@ -114,27 +114,27 @@ $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-protect.tgz: prepack | $(BINARY_RELEASES_F\n \tmv $(shell npm pack --workspace '@snyk/protect') $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-protect.tgz\n \n $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine: prepack | $(BINARY_RELEASES_FOLDER_TS_CLI)\n-\t$(PKG) -t node16-alpine-x64 -o $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine\n+\t$(PKG) -t node18-alpine-x64 -o $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine",
        "comment_created_at": "2023-09-28T13:52:10+00:00",
        "comment_author": "PeterSchafer",
        "comment_body": "Suggestion: How about using the `.mvnrc` file to determine the major version, instead of having it hardcoded here. Take a look at https://github.com/snyk/cli/blob/master/scripts/create-build-image.sh#L9C3-L9C32 for example",
        "pr_file_module": null
      },
      {
        "comment_id": "1341343430",
        "repo_full_name": "snyk/cli",
        "pr_number": 4882,
        "pr_file": "Makefile",
        "discussion_id": "1340193153",
        "commented_code": "@@ -114,27 +114,27 @@ $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-protect.tgz: prepack | $(BINARY_RELEASES_F\n \tmv $(shell npm pack --workspace '@snyk/protect') $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-protect.tgz\n \n $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine: prepack | $(BINARY_RELEASES_FOLDER_TS_CLI)\n-\t$(PKG) -t node16-alpine-x64 -o $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine\n+\t$(PKG) -t node18-alpine-x64 -o $(BINARY_RELEASES_FOLDER_TS_CLI)/snyk-alpine",
        "comment_created_at": "2023-09-29T13:08:11+00:00",
        "comment_author": "cat2608",
        "comment_body": "Updated, thanks for the suggestion \ud83d\ude4f \r\n",
        "pr_file_module": null
      }
    ]
  }
]