[
  {
    "discussion_id": "2086733453",
    "pr_number": 3275,
    "pr_file": "webview-ui/src/components/settings/__tests__/APIOptions.spec.tsx",
    "created_at": "2025-05-13T12:44:47+00:00",
    "commented_code": null,
    "repo_full_name": "cline/cline",
    "discussion_comments": [
      {
        "comment_id": "2086733453",
        "repo_full_name": "cline/cline",
        "pr_number": 3275,
        "pr_file": "webview-ui/src/components/settings/__tests__/APIOptions.spec.tsx",
        "discussion_id": "2086733453",
        "commented_code": null,
        "comment_created_at": "2025-05-13T12:44:47+00:00",
        "comment_author": "BarreiroT",
        "comment_body": "These tests are broken because `vi.mock` calls are [hoisted](https://vitest.dev/guide/mocking.html#mock-an-exported-function), so it doesn't really work to do multiple calls to change the returned value.\r\n\r\nI am updating it to change the `useExtensionState` return value instead.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1960616807",
    "pr_number": 1816,
    "pr_file": "webview-ui/src/components/settings/__tests__/APIOptions.spec.tsx",
    "created_at": "2025-02-18T21:27:53+00:00",
    "commented_code": "}\n })\n \n+vi.mock(\"../../../context/ExtensionStateContext\", async (importOriginal) => {\n+\tconst actual = await importOriginal()\n+\treturn {\n+\t\t...actual,\n+\t\t// your mocked methods\n+\t\tuseExtensionState: vi.fn(() => ({\n+\t\t\tapiConfiguration: {\n+\t\t\t\tapiProvider: \"nebius\",\n+\t\t\t\trequestyApiKey: \"\",\n+\t\t\t\trequestyModelId: \"\",\n+\t\t\t},\n+\t\t\tsetApiConfiguration: vi.fn(),\n+\t\t\turiScheme: \"vscode\",\n+\t\t})),\n+\t}\n+})\n+",
    "repo_full_name": "cline/cline",
    "discussion_comments": [
      {
        "comment_id": "1960616807",
        "repo_full_name": "cline/cline",
        "pr_number": 1816,
        "pr_file": "webview-ui/src/components/settings/__tests__/APIOptions.spec.tsx",
        "discussion_id": "1960616807",
        "commented_code": "@@ -66,6 +66,23 @@ vi.mock(\"../../../context/ExtensionStateContext\", async (importOriginal) => {\n \t}\n })\n \n+vi.mock(\"../../../context/ExtensionStateContext\", async (importOriginal) => {\n+\tconst actual = await importOriginal()\n+\treturn {\n+\t\t...actual,\n+\t\t// your mocked methods\n+\t\tuseExtensionState: vi.fn(() => ({\n+\t\t\tapiConfiguration: {\n+\t\t\t\tapiProvider: \"nebius\",\n+\t\t\t\trequestyApiKey: \"\",\n+\t\t\t\trequestyModelId: \"\",\n+\t\t\t},\n+\t\t\tsetApiConfiguration: vi.fn(),\n+\t\t\turiScheme: \"vscode\",\n+\t\t})),\n+\t}\n+})\n+",
        "comment_created_at": "2025-02-18T21:27:53+00:00",
        "comment_author": "dcbartlett",
        "comment_body": "This will break the Together API tests below.  Please move this and add tests for your API Provider.",
        "pr_file_module": null
      },
      {
        "comment_id": "1961401897",
        "repo_full_name": "cline/cline",
        "pr_number": 1816,
        "pr_file": "webview-ui/src/components/settings/__tests__/APIOptions.spec.tsx",
        "discussion_id": "1960616807",
        "commented_code": "@@ -66,6 +66,23 @@ vi.mock(\"../../../context/ExtensionStateContext\", async (importOriginal) => {\n \t}\n })\n \n+vi.mock(\"../../../context/ExtensionStateContext\", async (importOriginal) => {\n+\tconst actual = await importOriginal()\n+\treturn {\n+\t\t...actual,\n+\t\t// your mocked methods\n+\t\tuseExtensionState: vi.fn(() => ({\n+\t\t\tapiConfiguration: {\n+\t\t\t\tapiProvider: \"nebius\",\n+\t\t\t\trequestyApiKey: \"\",\n+\t\t\t\trequestyModelId: \"\",\n+\t\t\t},\n+\t\t\tsetApiConfiguration: vi.fn(),\n+\t\t\turiScheme: \"vscode\",\n+\t\t})),\n+\t}\n+})\n+",
        "comment_created_at": "2025-02-19T10:33:45+00:00",
        "comment_author": "Aktsvigun",
        "comment_body": "Apologies for the oversight! Fixed",
        "pr_file_module": null
      }
    ]
  }
]