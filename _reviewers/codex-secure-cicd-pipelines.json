[
  {
    "discussion_id": "2087580344",
    "pr_number": 903,
    "pr_file": ".github/workflows/codespell.yml",
    "created_at": "2025-05-13T20:27:32+00:00",
    "commented_code": "+# Codespell configuration is within .codespellrc\n+---\n+name: Codespell\n+\n+on:\n+  push:\n+    branches: [main]\n+  pull_request:\n+    branches: [main]\n+\n+permissions:\n+  contents: read\n+\n+jobs:\n+  codespell:\n+    name: Check for spelling errors\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v4\n+      - name: Annotate locations with typos\n+        uses: codespell-project/codespell-problem-matcher@v1",
    "repo_full_name": "openai/codex",
    "discussion_comments": [
      {
        "comment_id": "2087580344",
        "repo_full_name": "openai/codex",
        "pr_number": 903,
        "pr_file": ".github/workflows/codespell.yml",
        "discussion_id": "2087580344",
        "commented_code": "@@ -0,0 +1,25 @@\n+# Codespell configuration is within .codespellrc\n+---\n+name: Codespell\n+\n+on:\n+  push:\n+    branches: [main]\n+  pull_request:\n+    branches: [main]\n+\n+permissions:\n+  contents: read\n+\n+jobs:\n+  codespell:\n+    name: Check for spelling errors\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v4\n+      - name: Annotate locations with typos\n+        uses: codespell-project/codespell-problem-matcher@v1",
        "comment_created_at": "2025-05-13T20:27:32+00:00",
        "comment_author": "bolinfest",
        "comment_body": "Hmm, this does not appear to have seen much interest or activity:\r\n\r\nhttps://github.com/codespell-project/codespell-problem-matcher\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "2087674593",
        "repo_full_name": "openai/codex",
        "pr_number": 903,
        "pr_file": ".github/workflows/codespell.yml",
        "discussion_id": "2087580344",
        "commented_code": "@@ -0,0 +1,25 @@\n+# Codespell configuration is within .codespellrc\n+---\n+name: Codespell\n+\n+on:\n+  push:\n+    branches: [main]\n+  pull_request:\n+    branches: [main]\n+\n+permissions:\n+  contents: read\n+\n+jobs:\n+  codespell:\n+    name: Check for spelling errors\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v4\n+      - name: Annotate locations with typos\n+        uses: codespell-project/codespell-problem-matcher@v1",
        "comment_created_at": "2025-05-13T21:39:44+00:00",
        "comment_author": "yarikoptic",
        "comment_body": "Yep, but it seems just to work in my experience",
        "pr_file_module": null
      },
      {
        "comment_id": "2087785598",
        "repo_full_name": "openai/codex",
        "pr_number": 903,
        "pr_file": ".github/workflows/codespell.yml",
        "discussion_id": "2087580344",
        "commented_code": "@@ -0,0 +1,25 @@\n+# Codespell configuration is within .codespellrc\n+---\n+name: Codespell\n+\n+on:\n+  push:\n+    branches: [main]\n+  pull_request:\n+    branches: [main]\n+\n+permissions:\n+  contents: read\n+\n+jobs:\n+  codespell:\n+    name: Check for spelling errors\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v4\n+      - name: Annotate locations with typos\n+        uses: codespell-project/codespell-problem-matcher@v1",
        "comment_created_at": "2025-05-13T23:57:13+00:00",
        "comment_author": "bolinfest",
        "comment_body": "Right, I trust that it works today. What I have less confidence in is a bad actor coming in, somehow gaining control of `codespell-problem-matcher`, changing the `v1` tag to point at something else, and anyone noticing.",
        "pr_file_module": null
      },
      {
        "comment_id": "2089322349",
        "repo_full_name": "openai/codex",
        "pr_number": 903,
        "pr_file": ".github/workflows/codespell.yml",
        "discussion_id": "2087580344",
        "commented_code": "@@ -0,0 +1,25 @@\n+# Codespell configuration is within .codespellrc\n+---\n+name: Codespell\n+\n+on:\n+  push:\n+    branches: [main]\n+  pull_request:\n+    branches: [main]\n+\n+permissions:\n+  contents: read\n+\n+jobs:\n+  codespell:\n+    name: Check for spelling errors\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v4\n+      - name: Annotate locations with typos\n+        uses: codespell-project/codespell-problem-matcher@v1",
        "comment_created_at": "2025-05-14T16:28:11+00:00",
        "comment_author": "yarikoptic",
        "comment_body": "yeap, there was a similar concern/practice elsewhere recently (https://github.com/argoproj/argo-workflows/pull/14454) -- I  will change now to current commit hashes...  ran `pin-github-action .github/workflows/codespell.yml` and pushed",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2052754401",
    "pr_number": 366,
    "pr_file": ".github/workflows/ci.yml",
    "created_at": "2025-04-21T17:32:57+00:00",
    "commented_code": "- name: Type-check\n         run: pnpm run typecheck\n \n+      - name: Check formatting (root)\n+        run: npm run format\n+        \n       - name: Build\n         run: pnpm run build\n+        \n+  update-nix-hash:\n+    runs-on: ubuntu-latest\n+    if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n+    permissions:\n+      contents: write  # Needed for push access\n+      pull-requests: write  # Needed for PR creation",
    "repo_full_name": "openai/codex",
    "discussion_comments": [
      {
        "comment_id": "2052754401",
        "repo_full_name": "openai/codex",
        "pr_number": 366,
        "pr_file": ".github/workflows/ci.yml",
        "discussion_id": "2052754401",
        "commented_code": "@@ -65,5 +65,56 @@ jobs:\n       - name: Type-check\n         run: pnpm run typecheck\n \n+      - name: Check formatting (root)\n+        run: npm run format\n+        \n       - name: Build\n         run: pnpm run build\n+        \n+  update-nix-hash:\n+    runs-on: ubuntu-latest\n+    if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n+    permissions:\n+      contents: write  # Needed for push access\n+      pull-requests: write  # Needed for PR creation",
        "comment_created_at": "2025-04-21T17:32:57+00:00",
        "comment_author": "jonchurch",
        "comment_body": "Just flagging this for awareness, this job introduces write access from CI for the first time (excluding the CLA Assistant, which already operates with elevated perms via `pull_request_target`).\r\n\r\nIt\u2019s scoped well (only runs on push to main) so it won\u2019t run on PRs or forks. That said, it does slightly shift the trust boundary, merging into main will now trigger a job that can push branches and open PRs back to the repo.\r\n\r\nNo action needed here, but it might be worth making sure folks reviewing automation changes are aware of that shift. If main isn\u2019t already protected, enabling \u201crequire PRs before merging\u201d and disallowing force-pushes/deletion would be good hardening steps for this kind of setup.",
        "pr_file_module": null
      },
      {
        "comment_id": "2052760932",
        "repo_full_name": "openai/codex",
        "pr_number": 366,
        "pr_file": ".github/workflows/ci.yml",
        "discussion_id": "2052754401",
        "commented_code": "@@ -65,5 +65,56 @@ jobs:\n       - name: Type-check\n         run: pnpm run typecheck\n \n+      - name: Check formatting (root)\n+        run: npm run format\n+        \n       - name: Build\n         run: pnpm run build\n+        \n+  update-nix-hash:\n+    runs-on: ubuntu-latest\n+    if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n+    permissions:\n+      contents: write  # Needed for push access\n+      pull-requests: write  # Needed for PR creation",
        "comment_created_at": "2025-04-21T17:38:54+00:00",
        "comment_author": "jonchurch",
        "comment_body": "since this job is the only one in ci.yml with write permissions, it might be worth considering moving it to a separate workflow file (e.g. `update-nix-hash.yml`). That could make it easier to see at a glance which workflows mutate the repo and which are strictly read-only CI.\r\n\r\nAlso worth noting, the script `update-nix-hash.sh` will be run with elevated permissions and therefore also needs special attention during review to ensure it is not going to smuggle a secret, accidentally commit something, and that it\u2019s not vulnerable to input injection (e.g. using PR metadata like branch names in shell commands without quoting).",
        "pr_file_module": null
      }
    ]
  }
]