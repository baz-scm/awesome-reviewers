[
  {
    "discussion_id": "1665159250",
    "pr_number": 2666,
    "pr_file": "web/scripts/ui.js",
    "created_at": "2024-07-04T05:51:36+00:00",
    "commented_code": "onclick: async () => {\n \t\t\t\t\t\t\t\t\tawait app.loadGraphData(item.prompt[3].extra_pnginfo.workflow, true, false);\n \t\t\t\t\t\t\t\t\tif (item.outputs) {\n-\t\t\t\t\t\t\t\t\t\tapp.nodeOutputs = item.outputs;\n+\t\t\t\t\t\t\t\t\t\tapp.nodeOutputs = {};\n+\t\t\t\t\t\t\t\t\t\tfor (const [key, value] of Object.entries(item.outputs)) {\n+\t\t\t\t\t\t\t\t\t\t\tif (item.meta && item.meta[key] && item.meta[key].display_node) {\n+\t\t\t\t\t\t\t\t\t\t\t\tapp.nodeOutputs[item.meta[key].display_node] = value;\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\tapp.nodeOutputs[key] = value;\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t}",
    "repo_full_name": "comfyanonymous/ComfyUI",
    "discussion_comments": [
      {
        "comment_id": "1665159250",
        "repo_full_name": "comfyanonymous/ComfyUI",
        "pr_number": 2666,
        "pr_file": "web/scripts/ui.js",
        "discussion_id": "1665159250",
        "commented_code": "@@ -230,7 +230,14 @@ class ComfyList {\n \t\t\t\t\t\t\t\tonclick: async () => {\n \t\t\t\t\t\t\t\t\tawait app.loadGraphData(item.prompt[3].extra_pnginfo.workflow, true, false);\n \t\t\t\t\t\t\t\t\tif (item.outputs) {\n-\t\t\t\t\t\t\t\t\t\tapp.nodeOutputs = item.outputs;\n+\t\t\t\t\t\t\t\t\t\tapp.nodeOutputs = {};\n+\t\t\t\t\t\t\t\t\t\tfor (const [key, value] of Object.entries(item.outputs)) {\n+\t\t\t\t\t\t\t\t\t\t\tif (item.meta && item.meta[key] && item.meta[key].display_node) {\n+\t\t\t\t\t\t\t\t\t\t\t\tapp.nodeOutputs[item.meta[key].display_node] = value;\n+\t\t\t\t\t\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\t\t\t\t\t\tapp.nodeOutputs[key] = value;\n+\t\t\t\t\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\t\t\t\t}",
        "comment_created_at": "2024-07-04T05:51:36+00:00",
        "comment_author": "DrJKL",
        "comment_body": "```suggestion\r\n  for (const [key, value] of Object.entries(item.outputs)) {\r\n    const realKey = item?.meta?.[key]?.display_node ?? key;\r\n    app.nodeOutputs[realKey] = value;\r\n  }\r\n```\r\nOne option, if you want to play with optional chaining and nullish coalescing.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1257395217",
    "pr_number": 855,
    "pr_file": "web/extensions/core/widgetInputs.js",
    "created_at": "2023-07-09T01:33:29+00:00",
    "commented_code": "const linkInfo = app.graph.links[l];\n \t\t\t\t\tconst node = this.graph.getNodeById(linkInfo.target_id);\n \t\t\t\t\tconst input = node.inputs[linkInfo.target_slot];\n-\t\t\t\t\tconst widgetName = input.widget.name;\n+\t\t\t\t\tconst widgetName = input.widget?.name;",
    "repo_full_name": "comfyanonymous/ComfyUI",
    "discussion_comments": [
      {
        "comment_id": "1257395217",
        "repo_full_name": "comfyanonymous/ComfyUI",
        "pr_number": 855,
        "pr_file": "web/extensions/core/widgetInputs.js",
        "discussion_id": "1257395217",
        "commented_code": "@@ -228,7 +228,7 @@ app.registerExtension({\n \t\t\t\t\tconst linkInfo = app.graph.links[l];\n \t\t\t\t\tconst node = this.graph.getNodeById(linkInfo.target_id);\n \t\t\t\t\tconst input = node.inputs[linkInfo.target_slot];\n-\t\t\t\t\tconst widgetName = input.widget.name;\n+\t\t\t\t\tconst widgetName = input.widget?.name;",
        "comment_created_at": "2023-07-09T01:33:29+00:00",
        "comment_author": "guill",
        "comment_body": "This fixes a bug in the front-end when an input that would generally have an associated widget is explicitly declared as having a socket.",
        "pr_file_module": null
      }
    ]
  }
]