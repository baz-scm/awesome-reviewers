[
  {
    "discussion_id": "863557729",
    "pr_number": 9033,
    "pr_file": "Makefile",
    "created_at": "2022-05-03T08:11:59+00:00",
    "commented_code": ".PHONY: e2e-compose\n e2e-compose: ## Run end to end local tests in plugin mode. Set E2E_TEST=TestName to run a single test\n+\tdocker compose version\n \tgo test $(TEST_FLAGS) -count=1 ./pkg/e2e\n \n .PHONY: e2e-compose-standalone\n e2e-compose-standalone: ## Run End to end local tests in standalone mode. Set E2E_TEST=TestName to run a single test\n-\tgo test $(TEST_FLAGS) -count=1 --tags=standalone ./pkg/e2e\n+\trm -f /usr/local/bin/docker-compose\n+\tcp bin/docker-compose /usr/local/bin",
    "repo_full_name": "docker/compose",
    "discussion_comments": [
      {
        "comment_id": "863557729",
        "repo_full_name": "docker/compose",
        "pr_number": 9033,
        "pr_file": "Makefile",
        "discussion_id": "863557729",
        "commented_code": "@@ -43,11 +43,15 @@ compose-plugin: ## Compile the compose cli-plugin\n \n .PHONY: e2e-compose\n e2e-compose: ## Run end to end local tests in plugin mode. Set E2E_TEST=TestName to run a single test\n+\tdocker compose version\n \tgo test $(TEST_FLAGS) -count=1 ./pkg/e2e\n \n .PHONY: e2e-compose-standalone\n e2e-compose-standalone: ## Run End to end local tests in standalone mode. Set E2E_TEST=TestName to run a single test\n-\tgo test $(TEST_FLAGS) -count=1 --tags=standalone ./pkg/e2e\n+\trm -f /usr/local/bin/docker-compose\n+\tcp bin/docker-compose /usr/local/bin",
        "comment_created_at": "2022-05-03T08:11:59+00:00",
        "comment_author": "glours",
        "comment_body": "This 2 command make standalone e2e tests not runnable on a local machine, this should be part of the `ci.yml` steps \r\n```console\r\n$ make e2e-compose-standalone\r\nrm -f /usr/local/bin/docker-compose\r\nrm: /usr/local/bin/docker-compose: Permission denied\r\nmake: *** [e2e-compose-standalone] Error 1\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "877060626",
        "repo_full_name": "docker/compose",
        "pr_number": 9033,
        "pr_file": "Makefile",
        "discussion_id": "863557729",
        "commented_code": "@@ -43,11 +43,15 @@ compose-plugin: ## Compile the compose cli-plugin\n \n .PHONY: e2e-compose\n e2e-compose: ## Run end to end local tests in plugin mode. Set E2E_TEST=TestName to run a single test\n+\tdocker compose version\n \tgo test $(TEST_FLAGS) -count=1 ./pkg/e2e\n \n .PHONY: e2e-compose-standalone\n e2e-compose-standalone: ## Run End to end local tests in standalone mode. Set E2E_TEST=TestName to run a single test\n-\tgo test $(TEST_FLAGS) -count=1 --tags=standalone ./pkg/e2e\n+\trm -f /usr/local/bin/docker-compose\n+\tcp bin/docker-compose /usr/local/bin",
        "comment_created_at": "2022-05-19T13:32:08+00:00",
        "comment_author": "glours",
        "comment_body": "@ulyssessouza you didn't move the copy of the compose binary to the CI workflow\r\n",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "565989372",
    "pr_number": 8081,
    "pr_file": "Jenkinsfile",
    "created_at": "2021-01-28T10:39:14+00:00",
    "commented_code": "--privileged \\\\",
    "repo_full_name": "docker/compose",
    "discussion_comments": [
      {
        "comment_id": "565989372",
        "repo_full_name": "docker/compose",
        "pr_number": 8081,
        "pr_file": "Jenkinsfile",
        "discussion_id": "565989372",
        "commented_code": "@@ -99,6 +99,8 @@ def runTests(dockerVersion, pythonVersion, baseImage) {\n                       --privileged \\\\",
        "comment_created_at": "2021-01-28T10:39:14+00:00",
        "comment_author": "thaJeztah",
        "comment_body": "Do we actually need `--privileged` for this container? I see it bind-mounts `docker.sock`, which means that all `docker` commands will actually run against the docker daemon running on the host (not a `dockerd` daemon running inside the container (which _would_ require privileged)",
        "pr_file_module": null
      },
      {
        "comment_id": "565992216",
        "repo_full_name": "docker/compose",
        "pr_number": 8081,
        "pr_file": "Jenkinsfile",
        "discussion_id": "565989372",
        "commented_code": "@@ -99,6 +99,8 @@ def runTests(dockerVersion, pythonVersion, baseImage) {\n                       --privileged \\\\",
        "comment_created_at": "2021-01-28T10:43:35+00:00",
        "comment_author": "thaJeztah",
        "comment_body": "Actually wondering if we need a container here at all, because it's running a container, just to run a script, that uses the `docker` CLI inside the container to start new containers on the host \ud83e\udd14 ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "275720533",
    "pr_number": 6641,
    "pr_file": "script/build/linux",
    "created_at": "2019-04-16T09:56:03+00:00",
    "commented_code": "./script/clean\n \n-TAG=\"docker-compose\"\n-docker build -t \"$TAG\" .\n-docker run \\\n-    --rm --entrypoint=\"script/build/linux-entrypoint\" \\\n-    -v $(pwd)/dist:/code/dist \\\n-    -v $(pwd)/.git:/code/.git \\\n-    \"$TAG\"\n+TMP_CONTAINER=\"tmpcontainer\"",
    "repo_full_name": "docker/compose",
    "discussion_comments": [
      {
        "comment_id": "275720533",
        "repo_full_name": "docker/compose",
        "pr_number": 6641,
        "pr_file": "script/build/linux",
        "discussion_id": "275720533",
        "commented_code": "@@ -4,10 +4,15 @@ set -ex\n \n ./script/clean\n \n-TAG=\"docker-compose\"\n-docker build -t \"$TAG\" .\n-docker run \\\n-    --rm --entrypoint=\"script/build/linux-entrypoint\" \\\n-    -v $(pwd)/dist:/code/dist \\\n-    -v $(pwd)/.git:/code/.git \\\n-    \"$TAG\"\n+TMP_CONTAINER=\"tmpcontainer\"",
        "comment_created_at": "2019-04-16T09:56:03+00:00",
        "comment_author": "chris-crone",
        "comment_body": "If you're sharing a Docker daemon for multiple PRs, this will not work. Would be good to make it unique per run.",
        "pr_file_module": null
      },
      {
        "comment_id": "275852107",
        "repo_full_name": "docker/compose",
        "pr_number": 6641,
        "pr_file": "script/build/linux",
        "discussion_id": "275720533",
        "commented_code": "@@ -4,10 +4,15 @@ set -ex\n \n ./script/clean\n \n-TAG=\"docker-compose\"\n-docker build -t \"$TAG\" .\n-docker run \\\n-    --rm --entrypoint=\"script/build/linux-entrypoint\" \\\n-    -v $(pwd)/dist:/code/dist \\\n-    -v $(pwd)/.git:/code/.git \\\n-    \"$TAG\"\n+TMP_CONTAINER=\"tmpcontainer\"",
        "comment_created_at": "2019-04-16T15:16:05+00:00",
        "comment_author": "ulyssessouza",
        "comment_body": "Done",
        "pr_file_module": null
      }
    ]
  }
]