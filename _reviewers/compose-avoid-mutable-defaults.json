[
  {
    "discussion_id": "532763026",
    "pr_number": 7930,
    "pr_file": "compose/cli/command.py",
    "created_at": "2020-11-30T17:16:27+00:00",
    "commented_code": "return None\n \n \n+def get_profiles_from_options(options, environment):\n+    profile_option = options.get('--profile')\n+    if profile_option:\n+        return profile_option\n+\n+    profiles = environment.get('COMPOSE_PROFILE')\n+    if profiles:\n+        return profiles.split(':')\n+\n+    return []\n+\n+\n def get_project(project_dir, config_path=None, project_name=None, verbose=False,\n                 context=None, environment=None, override_dir=None,\n-                interpolate=True, environment_file=None):\n+                interpolate=True, environment_file=None, enabled_profiles=[]):",
    "repo_full_name": "docker/compose",
    "discussion_comments": [
      {
        "comment_id": "532763026",
        "repo_full_name": "docker/compose",
        "pr_number": 7930,
        "pr_file": "compose/cli/command.py",
        "discussion_id": "532763026",
        "commented_code": "@@ -115,9 +116,21 @@ def unicode_paths(paths):\n     return None\n \n \n+def get_profiles_from_options(options, environment):\n+    profile_option = options.get('--profile')\n+    if profile_option:\n+        return profile_option\n+\n+    profiles = environment.get('COMPOSE_PROFILE')\n+    if profiles:\n+        return profiles.split(':')\n+\n+    return []\n+\n+\n def get_project(project_dir, config_path=None, project_name=None, verbose=False,\n                 context=None, environment=None, override_dir=None,\n-                interpolate=True, environment_file=None):\n+                interpolate=True, environment_file=None, enabled_profiles=[]):",
        "comment_created_at": "2020-11-30T17:16:27+00:00",
        "comment_author": "ulyssessouza",
        "comment_body": "```suggestion\r\n                interpolate=True, environment_file=None, enabled_profiles=None):\r\n    enabled_profiles = enabled_profiles or []\r\n```\r\n\r\nFor more info, https://stackoverflow.com/questions/1132941/least-astonishment-and-the-mutable-default-argument",
        "pr_file_module": null
      },
      {
        "comment_id": "533801818",
        "repo_full_name": "docker/compose",
        "pr_number": 7930,
        "pr_file": "compose/cli/command.py",
        "discussion_id": "532763026",
        "commented_code": "@@ -115,9 +116,21 @@ def unicode_paths(paths):\n     return None\n \n \n+def get_profiles_from_options(options, environment):\n+    profile_option = options.get('--profile')\n+    if profile_option:\n+        return profile_option\n+\n+    profiles = environment.get('COMPOSE_PROFILE')\n+    if profiles:\n+        return profiles.split(':')\n+\n+    return []\n+\n+\n def get_project(project_dir, config_path=None, project_name=None, verbose=False,\n                 context=None, environment=None, override_dir=None,\n-                interpolate=True, environment_file=None):\n+                interpolate=True, environment_file=None, enabled_profiles=[]):",
        "comment_created_at": "2020-12-01T23:56:27+00:00",
        "comment_author": "acran",
        "comment_body": "Thanks for the link / the background on this; this was indeed unexpected behavior for me.\r\n\r\nI updated the default values to `None`, but omitted the assignments to an empty array where the parameter wasn't actually used but only passed around.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "532764274",
    "pr_number": 7930,
    "pr_file": "compose/project.py",
    "created_at": "2020-11-30T17:18:17+00:00",
    "commented_code": "\"\"\"\n     A collection of services.\n     \"\"\"\n-    def __init__(self, name, services, client, networks=None, volumes=None, config_version=None):\n+    def __init__(self, name, services, client, networks=None, volumes=None, config_version=None,\n+                 enabled_profiles=[]):",
    "repo_full_name": "docker/compose",
    "discussion_comments": [
      {
        "comment_id": "532764274",
        "repo_full_name": "docker/compose",
        "pr_number": 7930,
        "pr_file": "compose/project.py",
        "discussion_id": "532764274",
        "commented_code": "@@ -68,13 +68,15 @@ class Project:\n     \"\"\"\n     A collection of services.\n     \"\"\"\n-    def __init__(self, name, services, client, networks=None, volumes=None, config_version=None):\n+    def __init__(self, name, services, client, networks=None, volumes=None, config_version=None,\n+                 enabled_profiles=[]):",
        "comment_created_at": "2020-11-30T17:18:17+00:00",
        "comment_author": "ulyssessouza",
        "comment_body": "```suggestion\r\n    def __init__(self, name, services, client, networks=None, volumes=None, config_version=None,\r\n                 enabled_profiles=None):\r\n        enabled_profiles = enabled_profiles or []\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "366376629",
    "pr_number": 7145,
    "pr_file": "compose/cli/command.py",
    "created_at": "2020-01-14T14:42:52+00:00",
    "commented_code": "}\n \n \n-def project_from_options(project_dir, options, additional_options={}):\n+def project_from_options(project_dir, options, additional_options=None):\n+    if additional_options is None:",
    "repo_full_name": "docker/compose",
    "discussion_comments": [
      {
        "comment_id": "366376629",
        "repo_full_name": "docker/compose",
        "pr_number": 7145,
        "pr_file": "compose/cli/command.py",
        "discussion_id": "366376629",
        "commented_code": "@@ -40,7 +40,9 @@\n }\n \n \n-def project_from_options(project_dir, options, additional_options={}):\n+def project_from_options(project_dir, options, additional_options=None):\n+    if additional_options is None:",
        "comment_created_at": "2020-01-14T14:42:52+00:00",
        "comment_author": "ulyssessouza",
        "comment_body": "```suggestion\r\n    additional_options = additional_options or {}:\r\n```\r\n\r\nSame for the others",
        "pr_file_module": null
      }
    ]
  }
]