[
  {
    "discussion_id": "978005536",
    "pr_number": 9824,
    "pr_file": "go.mod",
    "created_at": "2022-09-22T19:18:46+00:00",
    "commented_code": "go 1.18\n \n+replace github.com/cucumber/godog => github.com/laurazard/godog v0.0.0-20220922095256-4c4b17abdae7",
    "repo_full_name": "docker/compose",
    "discussion_comments": [
      {
        "comment_id": "978005536",
        "repo_full_name": "docker/compose",
        "pr_number": 9824,
        "pr_file": "go.mod",
        "discussion_id": "978005536",
        "commented_code": "@@ -2,6 +2,8 @@ module github.com/docker/compose/v2\n \n go 1.18\n \n+replace github.com/cucumber/godog => github.com/laurazard/godog v0.0.0-20220922095256-4c4b17abdae7",
        "comment_created_at": "2022-09-22T19:18:46+00:00",
        "comment_author": "nicksieger",
        "comment_body": "What's behind the need for this replace, out of curiosity?",
        "pr_file_module": null
      },
      {
        "comment_id": "978053199",
        "repo_full_name": "docker/compose",
        "pr_number": 9824,
        "pr_file": "go.mod",
        "discussion_id": "978005536",
        "commented_code": "@@ -2,6 +2,8 @@ module github.com/docker/compose/v2\n \n go 1.18\n \n+replace github.com/cucumber/godog => github.com/laurazard/godog v0.0.0-20220922095256-4c4b17abdae7",
        "comment_created_at": "2022-09-22T20:23:22+00:00",
        "comment_author": "laurazard",
        "comment_body": "`cucumber/godog` currently allows for passing in a `testing.T` instance to run scenarios as subtests with, but it does not make that `testing.T` instance available to the scenario initializer, which was needed for passing to our `e2e.NewCLI()` that uses some of it's helper functions. I'll make a PR to see if I can contribute that upstream soon :)",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "978066244",
    "pr_number": 9824,
    "pr_file": "go.mod",
    "created_at": "2022-09-22T20:41:35+00:00",
    "commented_code": "require (\n \tgithub.com/cenkalti/backoff/v4 v4.1.2 // indirect\n+\tgithub.com/cucumber/godog v0.12.5",
    "repo_full_name": "docker/compose",
    "discussion_comments": [
      {
        "comment_id": "978066244",
        "repo_full_name": "docker/compose",
        "pr_number": 9824,
        "pr_file": "go.mod",
        "discussion_id": "978066244",
        "commented_code": "@@ -131,6 +133,7 @@ require (\n \n require (\n \tgithub.com/cenkalti/backoff/v4 v4.1.2 // indirect\n+\tgithub.com/cucumber/godog v0.12.5",
        "comment_created_at": "2022-09-22T20:41:35+00:00",
        "comment_author": "thaJeztah",
        "comment_body": "Would it make sense to have a separate module for the e2e tests, so that these test dependencies don't become a dependency for the main module?\r\n\r\nWe took that approach in containerd, where we then replaced the main module  with a path, to make sure we use the code from the branch where it's needed ; https://github.com/containerd/containerd/blob/main/integration/client/go.mod#L79\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "978083584",
        "repo_full_name": "docker/compose",
        "pr_number": 9824,
        "pr_file": "go.mod",
        "discussion_id": "978066244",
        "commented_code": "@@ -131,6 +133,7 @@ require (\n \n require (\n \tgithub.com/cenkalti/backoff/v4 v4.1.2 // indirect\n+\tgithub.com/cucumber/godog v0.12.5",
        "comment_created_at": "2022-09-22T21:03:09+00:00",
        "comment_author": "laurazard",
        "comment_body": "We can! I don't think that would be a large change, and it would allow us to separate test dependencies better. I wonder what the rest of the team thinks about that (cc @glours @ulyssessouza @milas @nicksieger).\r\n\r\nAlso whether we can/should leave splitting that out for another PR or we'd rather do it here.\r\n\r\nI do wish Go had better tooling around that/test dependencies ðŸ˜… ",
        "pr_file_module": null
      },
      {
        "comment_id": "978093916",
        "repo_full_name": "docker/compose",
        "pr_number": 9824,
        "pr_file": "go.mod",
        "discussion_id": "978066244",
        "commented_code": "@@ -131,6 +133,7 @@ require (\n \n require (\n \tgithub.com/cenkalti/backoff/v4 v4.1.2 // indirect\n+\tgithub.com/cucumber/godog v0.12.5",
        "comment_created_at": "2022-09-22T21:19:07+00:00",
        "comment_author": "nicksieger",
        "comment_body": "That occurred to me too, we already did that for dev-envs and it seems to work well. Also would make sense in light of https://github.com/compose-spec/conformance-tests if we decide to consolidate them.",
        "pr_file_module": null
      },
      {
        "comment_id": "978457397",
        "repo_full_name": "docker/compose",
        "pr_number": 9824,
        "pr_file": "go.mod",
        "discussion_id": "978066244",
        "commented_code": "@@ -131,6 +133,7 @@ require (\n \n require (\n \tgithub.com/cenkalti/backoff/v4 v4.1.2 // indirect\n+\tgithub.com/cucumber/godog v0.12.5",
        "comment_created_at": "2022-09-23T09:45:47+00:00",
        "comment_author": "laurazard",
        "comment_body": "Sounds good! I went ahead and moved the new tests into an `e2e` module, and then separately we can move the others there too :)",
        "pr_file_module": null
      },
      {
        "comment_id": "978784862",
        "repo_full_name": "docker/compose",
        "pr_number": 9824,
        "pr_file": "go.mod",
        "discussion_id": "978066244",
        "commented_code": "@@ -131,6 +133,7 @@ require (\n \n require (\n \tgithub.com/cenkalti/backoff/v4 v4.1.2 // indirect\n+\tgithub.com/cucumber/godog v0.12.5",
        "comment_created_at": "2022-09-23T15:08:35+00:00",
        "comment_author": "thaJeztah",
        "comment_body": "Thanks! So, yes, I think the \"ideal\" at some point would be to (e.g) have a docker image with the integration tests compiled in, which could be run with a compose binary and docker socket mounted; this would also allow for (e.g.) https://github.com/moby/moby to run the latest e2e/integration tests as part of CI.",
        "pr_file_module": null
      },
      {
        "comment_id": "979003430",
        "repo_full_name": "docker/compose",
        "pr_number": 9824,
        "pr_file": "go.mod",
        "discussion_id": "978066244",
        "commented_code": "@@ -131,6 +133,7 @@ require (\n \n require (\n \tgithub.com/cenkalti/backoff/v4 v4.1.2 // indirect\n+\tgithub.com/cucumber/godog v0.12.5",
        "comment_created_at": "2022-09-23T19:25:17+00:00",
        "comment_author": "laurazard",
        "comment_body": "Oooh, I like that idea. I'll keep that in mind for an improvement soon.",
        "pr_file_module": null
      }
    ]
  }
]