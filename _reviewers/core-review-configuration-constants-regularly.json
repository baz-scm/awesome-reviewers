[
  {
    "discussion_id": "2200032922",
    "pr_number": 148596,
    "pr_file": "tests/components/tuya/snapshots/test_sensor.ambr",
    "created_at": "2025-07-11T08:23:59+00:00",
    "commented_code": "'device_class': 'current',\n       'friendly_name': '\u4e00\u8def\u5e26\u8ba1\u91cf\u78c1\u4fdd\u6301\u901a\u65ad\u5668 Current',\n       'state_class': <SensorStateClass.MEASUREMENT: 'measurement'>,\n-      'unit_of_measurement': <UnitOfElectricCurrent.AMPERE: 'A'>,\n+      'unit_of_measurement': 'mA',",
    "repo_full_name": "home-assistant/core",
    "discussion_comments": [
      {
        "comment_id": "2200032922",
        "repo_full_name": "home-assistant/core",
        "pr_number": 148596,
        "pr_file": "tests/components/tuya/snapshots/test_sensor.ambr",
        "discussion_id": "2200032922",
        "commented_code": "@@ -574,14 +590,14 @@\n       'device_class': 'current',\n       'friendly_name': '\u4e00\u8def\u5e26\u8ba1\u91cf\u78c1\u4fdd\u6301\u901a\u65ad\u5668 Current',\n       'state_class': <SensorStateClass.MEASUREMENT: 'measurement'>,\n-      'unit_of_measurement': <UnitOfElectricCurrent.AMPERE: 'A'>,\n+      'unit_of_measurement': 'mA',",
        "comment_created_at": "2025-07-11T08:23:59+00:00",
        "comment_author": "epenet",
        "comment_body": "The change of unit (`2.198 A` => `2198 mA`) comes because of manual conversion in\r\nhttps://github.com/home-assistant/core/blob/32121a073c97cc8c95f4d6892d7428c96654e936/homeassistant/components/tuya/const.py#L467-L472\r\n\r\nI think these manual conversions were done in https://github.com/home-assistant/core/pull/57913 before automatic unit conversions got implemented by the base number and sensor platforms, and most could be removed",
        "pr_file_module": null
      },
      {
        "comment_id": "2200105365",
        "repo_full_name": "home-assistant/core",
        "pr_number": 148596,
        "pr_file": "tests/components/tuya/snapshots/test_sensor.ambr",
        "discussion_id": "2200032922",
        "commented_code": "@@ -574,14 +590,14 @@\n       'device_class': 'current',\n       'friendly_name': '\u4e00\u8def\u5e26\u8ba1\u91cf\u78c1\u4fdd\u6301\u901a\u65ad\u5668 Current',\n       'state_class': <SensorStateClass.MEASUREMENT: 'measurement'>,\n-      'unit_of_measurement': <UnitOfElectricCurrent.AMPERE: 'A'>,\n+      'unit_of_measurement': 'mA',",
        "comment_created_at": "2025-07-11T08:48:49+00:00",
        "comment_author": "epenet",
        "comment_body": "I have opened a preliminary PR to remove custom unit conversions: #148599",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2206871852",
    "pr_number": 148596,
    "pr_file": "tests/components/tuya/snapshots/test_sensor.ambr",
    "created_at": "2025-07-15T08:46:41+00:00",
    "commented_code": "}),\n     'name': None,\n     'options': dict({\n+      'sensor': dict({\n+        'suggested_display_precision': 2,\n+      }),\n     }),\n-    'original_device_class': None,\n+    'original_device_class': <SensorDeviceClass.DURATION: 'duration'>,",
    "repo_full_name": "home-assistant/core",
    "discussion_comments": [
      {
        "comment_id": "2206871852",
        "repo_full_name": "home-assistant/core",
        "pr_number": 148596,
        "pr_file": "tests/components/tuya/snapshots/test_sensor.ambr",
        "discussion_id": "2206871852",
        "commented_code": "@@ -128,8 +128,11 @@\n     }),\n     'name': None,\n     'options': dict({\n+      'sensor': dict({\n+        'suggested_display_precision': 2,\n+      }),\n     }),\n-    'original_device_class': None,\n+    'original_device_class': <SensorDeviceClass.DURATION: 'duration'>,",
        "comment_created_at": "2025-07-15T08:46:41+00:00",
        "comment_author": "epenet",
        "comment_body": "This is the bugfix... the device class was being removed because `min` didn't have a custom mapping in Tuya `DEVICE_CLASS_UNITS`, despite the unit already being compatible",
        "pr_file_module": null
      }
    ]
  }
]