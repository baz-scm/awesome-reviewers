[
  {
    "discussion_id": "670211667",
    "pr_number": 17319,
    "pr_file": "packages/server/lib/gui/files.ts",
    "created_at": "2021-07-15T07:36:54+00:00",
    "commented_code": "import { createFile } from '../util/spec_writer'\n import { showSaveDialog } from './dialog'\n \n-export const showDialogAndCreateSpec = () => {",
    "repo_full_name": "cypress-io/cypress",
    "discussion_comments": [
      {
        "comment_id": "670211667",
        "repo_full_name": "cypress-io/cypress",
        "pr_number": 17319,
        "pr_file": "packages/server/lib/gui/files.ts",
        "discussion_id": "670211667",
        "commented_code": "@@ -2,40 +2,30 @@ import openProject from '../open_project'\n import { createFile } from '../util/spec_writer'\n import { showSaveDialog } from './dialog'\n \n-export const showDialogAndCreateSpec = () => {",
        "comment_created_at": "2021-07-15T07:36:54+00:00",
        "comment_author": "lmiller1990",
        "comment_body": "`getConfig` no longer returns a promise..., so no more `then`, and no more `tap`, so I just made it into a regular old function, replacing `then` with `await`. ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "672279031",
    "pr_number": 17319,
    "pr_file": "packages/server/lib/gui/files.ts",
    "created_at": "2021-07-19T13:05:38+00:00",
    "commented_code": "import { createFile } from '../util/spec_writer'\n import { showSaveDialog } from './dialog'\n \n-export const showDialogAndCreateSpec = () => {\n-  return openProject.getConfig()\n-  .then((cfg) => {\n-    return showSaveDialog(cfg.integrationFolder).then((path) => {\n-      return {\n-        cfg,\n-        path,\n-      }\n-    })\n-  })\n-  .tap(({ path }) => {\n-    // only create file if they selected a file\n-    if (path) {\n-      return createFile(path)\n-    }\n+export const showDialogAndCreateSpec = async () => {\n+  const cfg = openProject.getConfig()\n+\n+  const path = await showSaveDialog(cfg.integrationFolder)\n \n-    return\n-  })\n-  .then(({ cfg, path }) => {\n-    if (!path) {\n-      return {\n-        specs: null,\n-        path,\n-      }\n+  if (!path) {\n+    return {\n+      specs: null,\n+      path,\n     }\n+  }\n+\n+  // only create file if they selected a file\n+  if (path) {\n+    createFile(path)",
    "repo_full_name": "cypress-io/cypress",
    "discussion_comments": [
      {
        "comment_id": "672279031",
        "repo_full_name": "cypress-io/cypress",
        "pr_number": 17319,
        "pr_file": "packages/server/lib/gui/files.ts",
        "discussion_id": "672279031",
        "commented_code": "@@ -2,40 +2,30 @@ import openProject from '../open_project'\n import { createFile } from '../util/spec_writer'\n import { showSaveDialog } from './dialog'\n \n-export const showDialogAndCreateSpec = () => {\n-  return openProject.getConfig()\n-  .then((cfg) => {\n-    return showSaveDialog(cfg.integrationFolder).then((path) => {\n-      return {\n-        cfg,\n-        path,\n-      }\n-    })\n-  })\n-  .tap(({ path }) => {\n-    // only create file if they selected a file\n-    if (path) {\n-      return createFile(path)\n-    }\n+export const showDialogAndCreateSpec = async () => {\n+  const cfg = openProject.getConfig()\n+\n+  const path = await showSaveDialog(cfg.integrationFolder)\n \n-    return\n-  })\n-  .then(({ cfg, path }) => {\n-    if (!path) {\n-      return {\n-        specs: null,\n-        path,\n-      }\n+  if (!path) {\n+    return {\n+      specs: null,\n+      path,\n     }\n+  }\n+\n+  // only create file if they selected a file\n+  if (path) {\n+    createFile(path)",
        "comment_created_at": "2021-07-19T13:05:38+00:00",
        "comment_author": "chrisbreiding",
        "comment_body": "`createFile` returns a promise, so this should be awaited, right?",
        "pr_file_module": null
      },
      {
        "comment_id": "672689896",
        "repo_full_name": "cypress-io/cypress",
        "pr_number": 17319,
        "pr_file": "packages/server/lib/gui/files.ts",
        "discussion_id": "672279031",
        "commented_code": "@@ -2,40 +2,30 @@ import openProject from '../open_project'\n import { createFile } from '../util/spec_writer'\n import { showSaveDialog } from './dialog'\n \n-export const showDialogAndCreateSpec = () => {\n-  return openProject.getConfig()\n-  .then((cfg) => {\n-    return showSaveDialog(cfg.integrationFolder).then((path) => {\n-      return {\n-        cfg,\n-        path,\n-      }\n-    })\n-  })\n-  .tap(({ path }) => {\n-    // only create file if they selected a file\n-    if (path) {\n-      return createFile(path)\n-    }\n+export const showDialogAndCreateSpec = async () => {\n+  const cfg = openProject.getConfig()\n+\n+  const path = await showSaveDialog(cfg.integrationFolder)\n \n-    return\n-  })\n-  .then(({ cfg, path }) => {\n-    if (!path) {\n-      return {\n-        specs: null,\n-        path,\n-      }\n+  if (!path) {\n+    return {\n+      specs: null,\n+      path,\n     }\n+  }\n+\n+  // only create file if they selected a file\n+  if (path) {\n+    createFile(path)",
        "comment_created_at": "2021-07-19T23:07:51+00:00",
        "comment_author": "lmiller1990",
        "comment_body": "Right, good catch - I forgot that `fs.writeFile` is actually wrapped with promisify.",
        "pr_file_module": null
      }
    ]
  }
]