[
  {
    "discussion_id": "788152188",
    "pr_number": 19775,
    "pr_file": "packages/driver/cypress/fixtures/nested/3975_a.html",
    "created_at": "2022-01-19T21:27:37+00:00",
    "commented_code": "<html>\n+  <head>\n+    <meta charset=\"utf-8\" />\n+    <!--\n+      Our initial attempts to fix issue 3785 caused issues on pages Disallowing 'unsafe-eval'.\n+      Including this meta tag ensures that #3785 remains fixed without reintroducing #19697.\n+\n+      https://github.com/cypress-io/cypress/issues/19697\n+    !-->\n+    <meta http-equiv=\"Content-Security-Policy\" content=\"script-src 'unsafe-inline'\" />",
    "repo_full_name": "cypress-io/cypress",
    "discussion_comments": [
      {
        "comment_id": "788152188",
        "repo_full_name": "cypress-io/cypress",
        "pr_number": 19775,
        "pr_file": "packages/driver/cypress/fixtures/nested/3975_a.html",
        "discussion_id": "788152188",
        "commented_code": "@@ -1,4 +1,14 @@\n <html>\n+  <head>\n+    <meta charset=\"utf-8\" />\n+    <!--\n+      Our initial attempts to fix issue 3785 caused issues on pages Disallowing 'unsafe-eval'.\n+      Including this meta tag ensures that #3785 remains fixed without reintroducing #19697.\n+\n+      https://github.com/cypress-io/cypress/issues/19697\n+    !-->\n+    <meta http-equiv=\"Content-Security-Policy\" content=\"script-src 'unsafe-inline'\" />",
        "comment_created_at": "2022-01-19T21:27:37+00:00",
        "comment_author": "flotwig",
        "comment_body": "The repro shared in #19697 uses `<meta http-equiv=\"Content-Security-Policy\" content=\"script-src 'self'\" />`, but that didn't actually recreate the issue when we tried it. What's with the change to `script-src 'unsafe-inline'`? Was this the actual repro for #19697 or something?",
        "pr_file_module": null
      },
      {
        "comment_id": "788172529",
        "repo_full_name": "cypress-io/cypress",
        "pr_number": 19775,
        "pr_file": "packages/driver/cypress/fixtures/nested/3975_a.html",
        "discussion_id": "788152188",
        "commented_code": "@@ -1,4 +1,14 @@\n <html>\n+  <head>\n+    <meta charset=\"utf-8\" />\n+    <!--\n+      Our initial attempts to fix issue 3785 caused issues on pages Disallowing 'unsafe-eval'.\n+      Including this meta tag ensures that #3785 remains fixed without reintroducing #19697.\n+\n+      https://github.com/cypress-io/cypress/issues/19697\n+    !-->\n+    <meta http-equiv=\"Content-Security-Policy\" content=\"script-src 'unsafe-inline'\" />",
        "comment_created_at": "2022-01-19T21:49:00+00:00",
        "comment_author": "BlueWinds",
        "comment_body": "Self means \"only allow script tags loaded from this domain\". We need `unsafe-inline` because `self` throws an error for the inline <script>` tag in this fixture.\r\n\r\nI've still been unable to get their test-tiny example to fail - my suspicion is that it has to do with the http headers their server is sending. I did verify that this test fails without the code change and passes with it in-place.\r\n\r\nNow for the extra confusing bit. @pmattj reports \"Incidentally, I'm running 3975_spec.js locally with your updated 3975_a.html on a fresh build of 9.3.1, and it seems to pass without the other changes in your PR.\" - which doesn't match what's going on on my machine.",
        "pr_file_module": null
      }
    ]
  }
]