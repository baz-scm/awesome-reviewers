[
  {
    "discussion_id": "2319324369",
    "pr_number": 32403,
    "pr_file": "packages/network/lib/agent.ts",
    "created_at": "2025-09-03T15:20:41+00:00",
    "commented_code": "}\n }\n \n-const getFirstWorkingFamily = (\n-  { port, host }: http.RequestOptions,\n+export const getFirstWorkingFamily = (\n+  { port, host }: Pick<http.RequestOptions, 'port' | 'host'>,\n   familyCache: FamilyCache,\n-  cb: Function,\n+  cb: (family?: net.family) => void,\n ) => {\n   // this is a workaround for localhost (and potentially others) having invalid\n   // A records but valid AAAA records. here, we just cache the family of the first\n   // returned A/AAAA record for a host that we can establish a connection to.\n   // https://github.com/cypress-io/cypress/issues/112\n \n-  const isIP = net.isIP(host)\n+  const isIP = net.isIP(host) as net.family",
    "repo_full_name": "cypress-io/cypress",
    "discussion_comments": [
      {
        "comment_id": "2319324369",
        "repo_full_name": "cypress-io/cypress",
        "pr_number": 32403,
        "pr_file": "packages/network/lib/agent.ts",
        "discussion_id": "2319324369",
        "commented_code": "@@ -148,17 +148,17 @@ export const regenerateRequestHead = (req: http.ClientRequest) => {\n   }\n }\n \n-const getFirstWorkingFamily = (\n-  { port, host }: http.RequestOptions,\n+export const getFirstWorkingFamily = (\n+  { port, host }: Pick<http.RequestOptions, 'port' | 'host'>,\n   familyCache: FamilyCache,\n-  cb: Function,\n+  cb: (family?: net.family) => void,\n ) => {\n   // this is a workaround for localhost (and potentially others) having invalid\n   // A records but valid AAAA records. here, we just cache the family of the first\n   // returned A/AAAA record for a host that we can establish a connection to.\n   // https://github.com/cypress-io/cypress/issues/112\n \n-  const isIP = net.isIP(host)\n+  const isIP = net.isIP(host) as net.family",
        "comment_created_at": "2025-09-03T15:20:41+00:00",
        "comment_author": "ryanthemanuel",
        "comment_body": "Reading the docs for `net.isIP` this can return 4 | 6 | 0. `net.family` is just 4 | 6. I think this provides clarity and explains why we have the check on 163.\r\n\r\n```suggestion\r\n  const isIP = net.isIP(host) as net.family | 0\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "629297086",
    "pr_number": 16416,
    "pr_file": "npm/webpack-dev-server/src/loader.ts",
    "created_at": "2021-05-10T11:58:14+00:00",
    "commented_code": "const magicComments = chunkName ? `/* webpackChunkName: \"${chunkName}\" */` : ''\n \n   return `\"${filename}\": {\n-    shouldLoad: () => document.location.pathname.includes(\"${file.absolute}\"),\n+    shouldLoad: () => document.location.pathname.includes(\"${encodeURI(file.absolute)}\"),",
    "repo_full_name": "cypress-io/cypress",
    "discussion_comments": [
      {
        "comment_id": "629297086",
        "repo_full_name": "cypress-io/cypress",
        "pr_number": 16416,
        "pr_file": "npm/webpack-dev-server/src/loader.ts",
        "discussion_id": "629297086",
        "commented_code": "@@ -17,7 +17,7 @@ const makeImport = (file: Cypress.Cypress['spec'], filename: string, chunkName:\n   const magicComments = chunkName ? `/* webpackChunkName: \"${chunkName}\" */` : ''\n \n   return `\"${filename}\": {\n-    shouldLoad: () => document.location.pathname.includes(\"${file.absolute}\"),\n+    shouldLoad: () => document.location.pathname.includes(\"${encodeURI(file.absolute)}\"),",
        "comment_created_at": "2021-05-10T11:58:14+00:00",
        "comment_author": "agg23",
        "comment_body": "So the problem was that we weren't validating the URL correctly, but we were properly pushing the encoded URL?",
        "pr_file_module": null
      },
      {
        "comment_id": "629763154",
        "repo_full_name": "cypress-io/cypress",
        "pr_number": 16416,
        "pr_file": "npm/webpack-dev-server/src/loader.ts",
        "discussion_id": "629297086",
        "commented_code": "@@ -17,7 +17,7 @@ const makeImport = (file: Cypress.Cypress['spec'], filename: string, chunkName:\n   const magicComments = chunkName ? `/* webpackChunkName: \"${chunkName}\" */` : ''\n \n   return `\"${filename}\": {\n-    shouldLoad: () => document.location.pathname.includes(\"${file.absolute}\"),\n+    shouldLoad: () => document.location.pathname.includes(\"${encodeURI(file.absolute)}\"),",
        "comment_created_at": "2021-05-11T00:19:59+00:00",
        "comment_author": "lmiller1990",
        "comment_body": "that's right! It was encoded everywhere else correctly except here.",
        "pr_file_module": null
      }
    ]
  }
]