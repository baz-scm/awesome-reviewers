[
  {
    "discussion_id": "2333760435",
    "pr_number": 25126,
    "pr_file": "web/app/components/datasets/documents/list.tsx",
    "created_at": "2025-09-09T14:01:39+00:00",
    "commented_code": "const [e] = await asyncRunSafe<CommonResponse>(opApi({ datasetId, documentId: id }) as Promise<CommonResponse>)\n     if (!e) {\n       notify({ type: 'success', message: t('common.actionMsg.modifiedSuccessfully') })\n+      // If it is a delete operation, need to update the selectedIds state\n+      if (selectedIds && onSelectedIdChange && operationName === 'delete')",
    "repo_full_name": "langgenius/dify",
    "discussion_comments": [
      {
        "comment_id": "2333760435",
        "repo_full_name": "langgenius/dify",
        "pr_number": 25126,
        "pr_file": "web/app/components/datasets/documents/list.tsx",
        "discussion_id": "2333760435",
        "commented_code": "@@ -240,6 +241,10 @@ export const OperationAction: FC<{\n     const [e] = await asyncRunSafe<CommonResponse>(opApi({ datasetId, documentId: id }) as Promise<CommonResponse>)\n     if (!e) {\n       notify({ type: 'success', message: t('common.actionMsg.modifiedSuccessfully') })\n+      // If it is a delete operation, need to update the selectedIds state\n+      if (selectedIds && onSelectedIdChange && operationName === 'delete')",
        "comment_created_at": "2025-09-09T14:01:39+00:00",
        "comment_author": "hyongtao-code",
        "comment_body": "```diff\n- operationName === 'delete'\n+ operationName === DocumentActionType.delete\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2306896239",
    "pr_number": 24696,
    "pr_file": "web/app/components/workflow/block-selector/data-sources.tsx",
    "created_at": "2025-08-28T09:57:07+00:00",
    "commented_code": "const pluginRef = useRef<ListRef>(null)\n   const wrapElemRef = useRef<HTMLDivElement>(null)\n   const handleSelect = useCallback((_: any, toolDefaultValue: ToolDefaultValue) => {\n-    onSelect(BlockEnum.DataSource, toolDefaultValue && {\n+    let defaultValue: DataSourceDefaultValue = {\n       plugin_id: toolDefaultValue?.provider_id,\n       provider_type: toolDefaultValue?.provider_type,\n       provider_name: toolDefaultValue?.provider_name,\n       datasource_name: toolDefaultValue?.tool_name,\n       datasource_label: toolDefaultValue?.tool_label,\n       title: toolDefaultValue?.title,\n-    })\n+    }\n+    // Update defaultValue with fileExtensions if this is the local file data source\n+    if (toolDefaultValue?.provider_id === 'langgenius/file' && toolDefaultValue?.provider_name === 'file') {",
    "repo_full_name": "langgenius/dify",
    "discussion_comments": [
      {
        "comment_id": "2306896239",
        "repo_full_name": "langgenius/dify",
        "pr_number": 24696,
        "pr_file": "web/app/components/workflow/block-selector/data-sources.tsx",
        "discussion_id": "2306896239",
        "commented_code": "@@ -37,14 +38,22 @@ const DataSources = ({\n   const pluginRef = useRef<ListRef>(null)\n   const wrapElemRef = useRef<HTMLDivElement>(null)\n   const handleSelect = useCallback((_: any, toolDefaultValue: ToolDefaultValue) => {\n-    onSelect(BlockEnum.DataSource, toolDefaultValue && {\n+    let defaultValue: DataSourceDefaultValue = {\n       plugin_id: toolDefaultValue?.provider_id,\n       provider_type: toolDefaultValue?.provider_type,\n       provider_name: toolDefaultValue?.provider_name,\n       datasource_name: toolDefaultValue?.tool_name,\n       datasource_label: toolDefaultValue?.tool_label,\n       title: toolDefaultValue?.title,\n-    })\n+    }\n+    // Update defaultValue with fileExtensions if this is the local file data source\n+    if (toolDefaultValue?.provider_id === 'langgenius/file' && toolDefaultValue?.provider_name === 'file') {",
        "comment_created_at": "2025-08-28T09:57:07+00:00",
        "comment_author": "WTW0313",
        "comment_body": "Using `provider_type === 'local_file'` would be more precise here.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1870474080",
    "pr_number": 11356,
    "pr_file": "web/app/components/base/mermaid/index.tsx",
    "created_at": "2024-12-05T01:00:48+00:00",
    "commented_code": "const Flowchart = React.forwardRef((props: {\n   PrimitiveCode: string\n }, ref) => {\n+  const { t } = useTranslation()\n   const [svgCode, setSvgCode] = useState(null)\n+  const [look, setLook] = useState<'classic' | 'handDrawn'>('classic')",
    "repo_full_name": "langgenius/dify",
    "discussion_comments": [
      {
        "comment_id": "1870474080",
        "repo_full_name": "langgenius/dify",
        "pr_number": 11356,
        "pr_file": "web/app/components/base/mermaid/index.tsx",
        "discussion_id": "1870474080",
        "commented_code": "@@ -40,14 +34,21 @@ const svgToBase64 = (svgGraph: string) => {\n const Flowchart = React.forwardRef((props: {\n   PrimitiveCode: string\n }, ref) => {\n+  const { t } = useTranslation()\n   const [svgCode, setSvgCode] = useState(null)\n+  const [look, setLook] = useState<'classic' | 'handDrawn'>('classic')",
        "comment_created_at": "2024-12-05T01:00:48+00:00",
        "comment_author": "crazywoola",
        "comment_body": "handDrawn => sketch\r\nuse a Enum to list these 2 types instead of string.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1743287667",
    "pr_number": 7947,
    "pr_file": "web/app/components/base/app-icon-picker/index.tsx",
    "created_at": "2024-09-04T08:21:24+00:00",
    "commented_code": "},\n   })\n \n-  const [imageCropInfo, setImageCropInfo] = useState<{ tempUrl: string; croppedAreaPixels: Area; fileName: string }>()\n-  const handleImageCropped = async (tempUrl: string, croppedAreaPixels: Area, fileName: string) => {\n-    setImageCropInfo({ tempUrl, croppedAreaPixels, fileName })\n+  const [imageCropInfo, setImageCropInfo] = useState<{ tempUrl: string; croppedAreaPixels: Area; fileName: string; file?: File }>()\n+  const handleImageCropped = async (tempUrl: string, croppedAreaPixels: Area, fileName: string, file?: File) => {\n+    setImageCropInfo({ tempUrl, croppedAreaPixels, fileName, file })\n   }",
    "repo_full_name": "langgenius/dify",
    "discussion_comments": [
      {
        "comment_id": "1743287667",
        "repo_full_name": "langgenius/dify",
        "pr_number": 7947,
        "pr_file": "web/app/components/base/app-icon-picker/index.tsx",
        "discussion_id": "1743287667",
        "commented_code": "@@ -69,9 +69,9 @@ const AppIconPicker: FC<AppIconPickerProps> = ({\n     },\n   })\n \n-  const [imageCropInfo, setImageCropInfo] = useState<{ tempUrl: string; croppedAreaPixels: Area; fileName: string }>()\n-  const handleImageCropped = async (tempUrl: string, croppedAreaPixels: Area, fileName: string) => {\n-    setImageCropInfo({ tempUrl, croppedAreaPixels, fileName })\n+  const [imageCropInfo, setImageCropInfo] = useState<{ tempUrl: string; croppedAreaPixels: Area; fileName: string; file?: File }>()\n+  const handleImageCropped = async (tempUrl: string, croppedAreaPixels: Area, fileName: string, file?: File) => {\n+    setImageCropInfo({ tempUrl, croppedAreaPixels, fileName, file })\n   }",
        "comment_created_at": "2024-09-04T08:21:24+00:00",
        "comment_author": "xuzuodong",
        "comment_body": "`handleImageCropped` could therefore rename to `handleUpload`, and `imageCropInfo` to `uploadImageInfo`",
        "pr_file_module": null
      }
    ]
  }
]