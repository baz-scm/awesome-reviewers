[
  {
    "discussion_id": "2281581750",
    "pr_number": 34354,
    "pr_file": "app/assets/javascripts/discourse/app/modifiers/d-autocomplete.js",
    "created_at": "2025-08-18T07:52:36+00:00",
    "commented_code": "case \"Enter\":\n         case \"Tab\":\n           event.preventDefault();\n+          event.stopImmediatePropagation();",
    "repo_full_name": "discourse/discourse",
    "discussion_comments": [
      {
        "comment_id": "2281581750",
        "repo_full_name": "discourse/discourse",
        "pr_number": 34354,
        "pr_file": "app/assets/javascripts/discourse/app/modifiers/d-autocomplete.js",
        "discussion_id": "2281581750",
        "commented_code": "@@ -122,6 +122,7 @@ export default class DAutocompleteModifier extends Modifier {\n         case \"Enter\":\n         case \"Tab\":\n           event.preventDefault();\n+          event.stopImmediatePropagation();",
        "comment_created_at": "2025-08-18T07:52:36+00:00",
        "comment_author": "tyb-talks",
        "comment_body": "Without this, the AI chat interface submits the entire input on autocompletion of the term (must be some other event listener set on that element/keypress). This does not occur in chat/topic composers, only AI chat interface and full page search.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2143005717",
    "pr_number": 33149,
    "pr_file": "app/assets/javascripts/discourse/app/lib/keyboard-shortcuts.js",
    "created_at": "2025-06-12T15:02:35+00:00",
    "commented_code": "article.setAttribute(\"tabindex\", \"0\");\n     article.focus();\n \n+    if (article.classList.contains(\"topic-list-item\")) {\n+      this.prefetchService.fetch(\n+        article.dataset.topicId,\n+        article.dataset.lastReadPostNumber\n+      );\n+    }",
    "repo_full_name": "discourse/discourse",
    "discussion_comments": [
      {
        "comment_id": "2143005717",
        "repo_full_name": "discourse/discourse",
        "pr_number": 33149,
        "pr_file": "app/assets/javascripts/discourse/app/lib/keyboard-shortcuts.js",
        "discussion_id": "2143005717",
        "commented_code": "@@ -782,6 +781,18 @@ export default {\n     article.setAttribute(\"tabindex\", \"0\");\n     article.focus();\n \n+    if (article.classList.contains(\"topic-list-item\")) {\n+      this.prefetchService.fetch(\n+        article.dataset.topicId,\n+        article.dataset.lastReadPostNumber\n+      );\n+    }",
        "comment_created_at": "2025-06-12T15:02:35+00:00",
        "comment_author": "davidtaylorhq",
        "comment_body": "Seems a bit weird to have this mixed up in keyboard shortcuts. How about making it happen during the `onfocus` event of a topic link?",
        "pr_file_module": null
      },
      {
        "comment_id": "2143250856",
        "repo_full_name": "discourse/discourse",
        "pr_number": 33149,
        "pr_file": "app/assets/javascripts/discourse/app/lib/keyboard-shortcuts.js",
        "discussion_id": "2143005717",
        "commented_code": "@@ -782,6 +781,18 @@ export default {\n     article.setAttribute(\"tabindex\", \"0\");\n     article.focus();\n \n+    if (article.classList.contains(\"topic-list-item\")) {\n+      this.prefetchService.fetch(\n+        article.dataset.topicId,\n+        article.dataset.lastReadPostNumber\n+      );\n+    }",
        "comment_created_at": "2025-06-12T17:11:13+00:00",
        "comment_author": "pmusaraj",
        "comment_body": "J/K doesn't set focus to the link, it sets it to the parent. I guess we could tie this to `onfocus` event on the `article` element. That would work. And set up a clear `onblur`. ",
        "pr_file_module": null
      }
    ]
  }
]