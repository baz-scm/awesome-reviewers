[
  {
    "discussion_id": "2073072365",
    "pr_number": 17360,
    "pr_file": "scripts/format.py",
    "created_at": "2025-05-05T08:47:01+00:00",
    "commented_code": "force = False\n \n \n-def print_usage():\n-    print(\"Usage: python scripts/format.py [revision|--all] [--check|--fix] [--force]\")\n-    print(\n-        \"   [revision]     is an optional revision number, all files that changed since that revision will be formatted (default=HEAD)\"\n-    )\n-    print(\"                  if [revision] is set to --all, all files will be formatted\")\n-    print(\"   --check only prints differences, --fix also fixes the files (--check is default)\")\n+parser = argparse.ArgumentParser(prog=\"python scripts/format.py\", description='Format source directory files')\n+parser.add_argument('--revision', type=str, default='HEAD', help='Revision to format from (default: HEAD)')\n+parser.add_argument('--check', action='store_true', help='Only print differences (default)')\n+parser.add_argument('--fix', action='store_true', help='Fix the files')\n+parser.add_argument(\"--all\", action=\"store_true\", help=\"Format all files\")\n+parser.add_argument(\"--directories\", action=\"store_true\", help=\"Format specified directories\")",
    "repo_full_name": "duckdb/duckdb",
    "discussion_comments": [
      {
        "comment_id": "2073072365",
        "repo_full_name": "duckdb/duckdb",
        "pr_number": 17360,
        "pr_file": "scripts/format.py",
        "discussion_id": "2073072365",
        "commented_code": "@@ -120,51 +121,33 @@\n force = False\n \n \n-def print_usage():\n-    print(\"Usage: python scripts/format.py [revision|--all] [--check|--fix] [--force]\")\n-    print(\n-        \"   [revision]     is an optional revision number, all files that changed since that revision will be formatted (default=HEAD)\"\n-    )\n-    print(\"                  if [revision] is set to --all, all files will be formatted\")\n-    print(\"   --check only prints differences, --fix also fixes the files (--check is default)\")\n+parser = argparse.ArgumentParser(prog=\"python scripts/format.py\", description='Format source directory files')\n+parser.add_argument('--revision', type=str, default='HEAD', help='Revision to format from (default: HEAD)')\n+parser.add_argument('--check', action='store_true', help='Only print differences (default)')\n+parser.add_argument('--fix', action='store_true', help='Fix the files')\n+parser.add_argument(\"--all\", action=\"store_true\", help=\"Format all files\")\n+parser.add_argument(\"--directories\", action=\"store_true\", help=\"Format specified directories\")",
        "comment_created_at": "2025-05-05T08:47:01+00:00",
        "comment_author": "Mytherin",
        "comment_body": "Instead of using `rest` for directories, we can use `nargs='*'`, see [here](https://docs.python.org/3/library/argparse.html#usage). This should also allow the previous usage with revision to remain unchanged. ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2073499591",
    "pr_number": 17360,
    "pr_file": "scripts/format.py",
    "created_at": "2025-05-05T13:55:35+00:00",
    "commented_code": "force = False\n \n \n-def print_usage():\n-    print(\"Usage: python scripts/format.py [revision|--all] [--check|--fix] [--force]\")\n-    print(\n-        \"   [revision]     is an optional revision number, all files that changed since that revision will be formatted (default=HEAD)\"\n-    )\n-    print(\"                  if [revision] is set to --all, all files will be formatted\")\n-    print(\"   --check only prints differences, --fix also fixes the files (--check is default)\")\n+parser = argparse.ArgumentParser(prog=\"python scripts/format.py\", description='Format source directory files')\n+parser.add_argument('--revision', type=str, default='HEAD', help='Revision to format from (default: HEAD)')",
    "repo_full_name": "duckdb/duckdb",
    "discussion_comments": [
      {
        "comment_id": "2073499591",
        "repo_full_name": "duckdb/duckdb",
        "pr_number": 17360,
        "pr_file": "scripts/format.py",
        "discussion_id": "2073499591",
        "commented_code": "@@ -120,51 +121,33 @@\n force = False\n \n \n-def print_usage():\n-    print(\"Usage: python scripts/format.py [revision|--all] [--check|--fix] [--force]\")\n-    print(\n-        \"   [revision]     is an optional revision number, all files that changed since that revision will be formatted (default=HEAD)\"\n-    )\n-    print(\"                  if [revision] is set to --all, all files will be formatted\")\n-    print(\"   --check only prints differences, --fix also fixes the files (--check is default)\")\n+parser = argparse.ArgumentParser(prog=\"python scripts/format.py\", description='Format source directory files')\n+parser.add_argument('--revision', type=str, default='HEAD', help='Revision to format from (default: HEAD)')",
        "comment_created_at": "2025-05-05T13:55:35+00:00",
        "comment_author": "Tishj",
        "comment_body": "```py\r\nparser.add_argument('revision', nargs='?', default='HEAD', help='Git revision to check (default: HEAD)')\r\n```\r\nleaving off the `--` makes it a positional argument, keeping the original behavior.",
        "pr_file_module": null
      }
    ]
  }
]