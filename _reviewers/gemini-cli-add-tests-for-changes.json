[
  {
    "discussion_id": "2237969865",
    "pr_number": 4821,
    "pr_file": "packages/cli/src/ui/utils/updateCheck.test.ts",
    "created_at": "2025-07-28T22:29:36+00:00",
    "commented_code": "version: '1.1.0',\n     });\n     updateNotifier.mockReturnValue({\n-      update: { current: '1.1.0', latest: '1.0.0' },\n+      fetchInfo: vi\n+        .fn()\n+        .mockResolvedValue({ current: '1.1.0', latest: '1.0.0' }),\n     });",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2237969865",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 4821,
        "pr_file": "packages/cli/src/ui/utils/updateCheck.test.ts",
        "discussion_id": "2237969865",
        "commented_code": "@@ -85,7 +93,9 @@ describe('checkForUpdates', () => {\n       version: '1.1.0',\n     });\n     updateNotifier.mockReturnValue({\n-      update: { current: '1.1.0', latest: '1.0.0' },\n+      fetchInfo: vi\n+        .fn()\n+        .mockResolvedValue({ current: '1.1.0', latest: '1.0.0' }),\n     });",
        "comment_created_at": "2025-07-28T22:29:36+00:00",
        "comment_author": "jacob314",
        "comment_body": "please add a test case that verifies the case you fixed is resolved. for example, write a test that would have failed previously due to the race condition you fixed.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2231950723",
    "pr_number": 4828,
    "pr_file": "packages/cli/src/ui/hooks/slashCommandProcessor.ts",
    "created_at": "2025-07-25T20:26:33+00:00",
    "commented_code": null,
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2231950723",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 4828,
        "pr_file": "packages/cli/src/ui/hooks/slashCommandProcessor.ts",
        "discussion_id": "2231950723",
        "commented_code": null,
        "comment_created_at": "2025-07-25T20:26:33+00:00",
        "comment_author": "abhipatel12",
        "comment_body": "Can we add a couple of tests in the test file for this one since we added a new loader. This will also check the precedence that I mentioned in this file.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2220467224",
    "pr_number": 3289,
    "pr_file": "packages/cli/src/ui/components/shared/text-buffer.ts",
    "created_at": "2025-07-21T22:13:58+00:00",
    "commented_code": "if (\n         key.name === 'return' ||\n-        input === '\\r' ||\n-        input === '\n' ||\n-        input === '\\\\\\r' // VSCode terminal represents shift + enter this way\n-      )\n+        (input && NEWLINE_INPUT_SEQUENCES.includes(input))",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2220467224",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 3289,
        "pr_file": "packages/cli/src/ui/components/shared/text-buffer.ts",
        "discussion_id": "2220467224",
        "commented_code": "@@ -1167,42 +1176,55 @@ export function useTextBuffer({\n \n       if (\n         key.name === 'return' ||\n-        input === '\\r' ||\n-        input === '\\n' ||\n-        input === '\\\\\\r' // VSCode terminal represents shift + enter this way\n-      )\n+        (input && NEWLINE_INPUT_SEQUENCES.includes(input))",
        "comment_created_at": "2025-07-21T22:13:58+00:00",
        "comment_author": "jacob314",
        "comment_body": "please add a test for this.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2176367974",
    "pr_number": 2639,
    "pr_file": "packages/cli/src/config/settings.ts",
    "created_at": "2025-07-01T04:13:02+00:00",
    "commented_code": "}\n \n   private computeMergedSettings(): Settings {\n+    const user = this.user.settings;\n+    const workspace = this.workspace.settings;\n+\n     return {\n-      ...this.user.settings,\n-      ...this.workspace.settings,\n+      ...user,\n+      ...workspace,\n+      customThemes: {\n+        ...(user.customThemes || {}),\n+        ...(workspace.customThemes || {}),\n+      },\n+      mcpServers: {\n+        ...(user.mcpServers || {}),",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2176367974",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2639,
        "pr_file": "packages/cli/src/config/settings.ts",
        "discussion_id": "2176367974",
        "commented_code": "@@ -100,9 +103,20 @@ export class LoadedSettings {\n   }\n \n   private computeMergedSettings(): Settings {\n+    const user = this.user.settings;\n+    const workspace = this.workspace.settings;\n+\n     return {\n-      ...this.user.settings,\n-      ...this.workspace.settings,\n+      ...user,\n+      ...workspace,\n+      customThemes: {\n+        ...(user.customThemes || {}),\n+        ...(workspace.customThemes || {}),\n+      },\n+      mcpServers: {\n+        ...(user.mcpServers || {}),",
        "comment_created_at": "2025-07-01T04:13:02+00:00",
        "comment_author": "jacob314",
        "comment_body": "wow good catch that we weren't merging mcp servers correctly previously. please add a test for this to prevent regressions.",
        "pr_file_module": null
      },
      {
        "comment_id": "2176370074",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2639,
        "pr_file": "packages/cli/src/config/settings.ts",
        "discussion_id": "2176367974",
        "commented_code": "@@ -100,9 +103,20 @@ export class LoadedSettings {\n   }\n \n   private computeMergedSettings(): Settings {\n+    const user = this.user.settings;\n+    const workspace = this.workspace.settings;\n+\n     return {\n-      ...this.user.settings,\n-      ...this.workspace.settings,\n+      ...user,\n+      ...workspace,\n+      customThemes: {\n+        ...(user.customThemes || {}),\n+        ...(workspace.customThemes || {}),\n+      },\n+      mcpServers: {\n+        ...(user.mcpServers || {}),",
        "comment_created_at": "2025-07-01T04:15:58+00:00",
        "comment_author": "ali-aljufairi",
        "comment_body": "okay I will add test it for it\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "2176435266",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2639,
        "pr_file": "packages/cli/src/config/settings.ts",
        "discussion_id": "2176367974",
        "commented_code": "@@ -100,9 +103,20 @@ export class LoadedSettings {\n   }\n \n   private computeMergedSettings(): Settings {\n+    const user = this.user.settings;\n+    const workspace = this.workspace.settings;\n+\n     return {\n-      ...this.user.settings,\n-      ...this.workspace.settings,\n+      ...user,\n+      ...workspace,\n+      customThemes: {\n+        ...(user.customThemes || {}),\n+        ...(workspace.customThemes || {}),\n+      },\n+      mcpServers: {\n+        ...(user.mcpServers || {}),",
        "comment_created_at": "2025-07-01T05:09:54+00:00",
        "comment_author": "jacob314",
        "comment_body": "there is another pull request for this but I think your fix is cleaner so lets go with what you are doing.\r\nhttps://github.com/google-gemini/gemini-cli/pull/2231#pullrequestreview-2973500668",
        "pr_file_module": null
      },
      {
        "comment_id": "2176443402",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2639,
        "pr_file": "packages/cli/src/config/settings.ts",
        "discussion_id": "2176367974",
        "commented_code": "@@ -100,9 +103,20 @@ export class LoadedSettings {\n   }\n \n   private computeMergedSettings(): Settings {\n+    const user = this.user.settings;\n+    const workspace = this.workspace.settings;\n+\n     return {\n-      ...this.user.settings,\n-      ...this.workspace.settings,\n+      ...user,\n+      ...workspace,\n+      customThemes: {\n+        ...(user.customThemes || {}),\n+        ...(workspace.customThemes || {}),\n+      },\n+      mcpServers: {\n+        ...(user.mcpServers || {}),",
        "comment_created_at": "2025-07-01T05:14:26+00:00",
        "comment_author": "ali-aljufairi",
        "comment_body": "okay \r\n",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2176408098",
    "pr_number": 2639,
    "pr_file": "packages/cli/src/ui/themes/theme-manager.ts",
    "created_at": "2025-07-01T04:46:42+00:00",
    "commented_code": "this.activeTheme = DEFAULT_THEME;\n   }\n \n+  /**",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2176408098",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2639,
        "pr_file": "packages/cli/src/ui/themes/theme-manager.ts",
        "discussion_id": "2176408098",
        "commented_code": "@@ -51,19 +59,121 @@ class ThemeManager {\n     this.activeTheme = DEFAULT_THEME;\n   }\n \n+  /**",
        "comment_created_at": "2025-07-01T04:46:42+00:00",
        "comment_author": "jacob314",
        "comment_body": "please add tests for this new code in theme manager",
        "pr_file_module": null
      }
    ]
  }
]