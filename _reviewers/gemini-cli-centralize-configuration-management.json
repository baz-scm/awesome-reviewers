[
  {
    "discussion_id": "2223871344",
    "pr_number": 4686,
    "pr_file": "packages/cli/src/ui/App.tsx",
    "created_at": "2025-07-22T21:33:39+00:00",
    "commented_code": "version: string;\n }\n \n+function handleAutoUpdate(\n+  info: UpdateInfo | null,\n+  setUpdateInfo: (info: UpdateInfo | null) => void,\n+  setIsUpdating: (isUpdating: boolean) => void,\n+  addItem: (item: HistoryItem, timestamp: number) => void,\n+) {\n+  if (!info) {\n+    return;\n+  }\n+\n+  setUpdateInfo(info);\n+  if (process.env.GEMINI_CLI_DISABLE_AUTOUPDATER === 'true') {",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2223871344",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 4686,
        "pr_file": "packages/cli/src/ui/App.tsx",
        "discussion_id": "2223871344",
        "commented_code": "@@ -94,6 +95,76 @@ interface AppProps {\n   version: string;\n }\n \n+function handleAutoUpdate(\n+  info: UpdateInfo | null,\n+  setUpdateInfo: (info: UpdateInfo | null) => void,\n+  setIsUpdating: (isUpdating: boolean) => void,\n+  addItem: (item: HistoryItem, timestamp: number) => void,\n+) {\n+  if (!info) {\n+    return;\n+  }\n+\n+  setUpdateInfo(info);\n+  if (process.env.GEMINI_CLI_DISABLE_AUTOUPDATER === 'true') {",
        "comment_created_at": "2025-07-22T21:33:39+00:00",
        "comment_author": "jacob314",
        "comment_body": "can you put this in settings.ts / settings.json rather than adding as an env variable?\nI could also see the case for making this an env variable but would default to just surfacing it in settings.ts as that should be sufficient and it is easier if you don't need to merge settings from multiple sources.\nthe case for why this needs to be settable via settings.json is that some orgs might want to disable this for everyone in their org and that is easiest to accomplish via the existing mechanism for org level settings.json files.",
        "pr_file_module": null
      },
      {
        "comment_id": "2226083540",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 4686,
        "pr_file": "packages/cli/src/ui/App.tsx",
        "discussion_id": "2223871344",
        "commented_code": "@@ -94,6 +95,76 @@ interface AppProps {\n   version: string;\n }\n \n+function handleAutoUpdate(\n+  info: UpdateInfo | null,\n+  setUpdateInfo: (info: UpdateInfo | null) => void,\n+  setIsUpdating: (isUpdating: boolean) => void,\n+  addItem: (item: HistoryItem, timestamp: number) => void,\n+) {\n+  if (!info) {\n+    return;\n+  }\n+\n+  setUpdateInfo(info);\n+  if (process.env.GEMINI_CLI_DISABLE_AUTOUPDATER === 'true') {",
        "comment_created_at": "2025-07-23T16:17:41+00:00",
        "comment_author": "jacob314",
        "comment_body": "nit: still see reading an env variable rather than settings here.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2224985337",
    "pr_number": 4686,
    "pr_file": "packages/cli/src/ui/App.tsx",
    "created_at": "2025-07-23T09:37:45+00:00",
    "commented_code": "version: string;\n }\n \n+function handleAutoUpdate(\n+  info: UpdateInfo | null,\n+  setUpdateInfo: (info: UpdateInfo | null) => void,\n+  setIsUpdating: (isUpdating: boolean) => void,\n+  addItem: (item: HistoryItem, timestamp: number) => void,\n+) {\n+  if (!info) {\n+    return;\n+  }\n+\n+  setUpdateInfo(info);\n+  if (process.env.GEMINI_CLI_DISABLE_AUTOUPDATER === 'true') {\n+    setIsUpdating(false);\n+    return;\n+  }\n+\n+  setIsUpdating(true);\n+\n+  const updateProcess = spawn(\n+    `rm -rf $(npm root -g)/@google/gemini-cli && npm install -g @google/gemini-cli@${info.update.latest}`,",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2224985337",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 4686,
        "pr_file": "packages/cli/src/ui/App.tsx",
        "discussion_id": "2224985337",
        "commented_code": "@@ -94,6 +96,75 @@ interface AppProps {\n   version: string;\n }\n \n+function handleAutoUpdate(\n+  info: UpdateInfo | null,\n+  setUpdateInfo: (info: UpdateInfo | null) => void,\n+  setIsUpdating: (isUpdating: boolean) => void,\n+  addItem: (item: HistoryItem, timestamp: number) => void,\n+) {\n+  if (!info) {\n+    return;\n+  }\n+\n+  setUpdateInfo(info);\n+  if (process.env.GEMINI_CLI_DISABLE_AUTOUPDATER === 'true') {\n+    setIsUpdating(false);\n+    return;\n+  }\n+\n+  setIsUpdating(true);\n+\n+  const updateProcess = spawn(\n+    `rm -rf $(npm root -g)/@google/gemini-cli && npm install -g @google/gemini-cli@${info.update.latest}`,",
        "comment_created_at": "2025-07-23T09:37:45+00:00",
        "comment_author": "swissspidy",
        "comment_body": "This is fragile.\n\nMany people use pnpm, yarn, bun, or even Homebrew (though that uses npm under the hood) to install Gemini CLI. Or maybe even install it as a local package, not globally. Or use `npx` to temporarily use an older version. Or use `nvm`.\n\nIdeally, this detects which package manager is in use and the current location of the Gemini CLI executable.\n\nThe `rm -rf` is dangerous. If the `npm install` fails, you're left with nothing. It should either not do an `rm -rf` (as `npm install` would override the binary) or install to a temporary location before moving the file to the right place.",
        "pr_file_module": null
      },
      {
        "comment_id": "2226062991",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 4686,
        "pr_file": "packages/cli/src/ui/App.tsx",
        "discussion_id": "2224985337",
        "commented_code": "@@ -94,6 +96,75 @@ interface AppProps {\n   version: string;\n }\n \n+function handleAutoUpdate(\n+  info: UpdateInfo | null,\n+  setUpdateInfo: (info: UpdateInfo | null) => void,\n+  setIsUpdating: (isUpdating: boolean) => void,\n+  addItem: (item: HistoryItem, timestamp: number) => void,\n+) {\n+  if (!info) {\n+    return;\n+  }\n+\n+  setUpdateInfo(info);\n+  if (process.env.GEMINI_CLI_DISABLE_AUTOUPDATER === 'true') {\n+    setIsUpdating(false);\n+    return;\n+  }\n+\n+  setIsUpdating(true);\n+\n+  const updateProcess = spawn(\n+    `rm -rf $(npm root -g)/@google/gemini-cli && npm install -g @google/gemini-cli@${info.update.latest}`,",
        "comment_created_at": "2025-07-23T16:07:27+00:00",
        "comment_author": "galz10",
        "comment_body": "I'll remove the `rm -rf` i knew this was dangerous but i know some people are encountering this issue https://github.com/npm/cli/issues/4096 when updating (i encounter it myself sometimes) and the only way to fix it is by removing that directory, i know some claude code users also reported this bug on their auto update feature. ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2229066126",
    "pr_number": 4790,
    "pr_file": "packages/cli/src/ui/App.tsx",
    "created_at": "2025-07-24T16:58:20+00:00",
    "commented_code": "const CTRL_EXIT_PROMPT_DURATION_MS = 1000;\n \n+interface KeystrokeHandler {",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2229066126",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 4790,
        "pr_file": "packages/cli/src/ui/App.tsx",
        "discussion_id": "2229066126",
        "commented_code": "@@ -88,6 +88,13 @@ import { PrivacyNotice } from './privacy/PrivacyNotice.js';\n \n const CTRL_EXIT_PROMPT_DURATION_MS = 1000;\n \n+interface KeystrokeHandler {",
        "comment_created_at": "2025-07-24T16:58:20+00:00",
        "comment_author": "jacob314",
        "comment_body": "this is worth moving to its own file rather than keeping in app.tsx\nI'd like to reuse in InputPrompt and text-buffer.ts as well.\nIn addition, I'm hoping this can also be the basis to in the future configure keyboard shortcuts via a file and surface the up to date keyboard shortcuts in `/help`.",
        "pr_file_module": null
      },
      {
        "comment_id": "2231703286",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 4790,
        "pr_file": "packages/cli/src/ui/App.tsx",
        "discussion_id": "2229066126",
        "commented_code": "@@ -88,6 +88,13 @@ import { PrivacyNotice } from './privacy/PrivacyNotice.js';\n \n const CTRL_EXIT_PROMPT_DURATION_MS = 1000;\n \n+interface KeystrokeHandler {",
        "comment_created_at": "2025-07-25T17:48:35+00:00",
        "comment_author": "chrstnb",
        "comment_body": "that's a great idea! added to parent issue",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2176407555",
    "pr_number": 2639,
    "pr_file": "packages/cli/src/gemini.tsx",
    "created_at": "2025-07-01T04:45:58+00:00",
    "commented_code": "}\n   }\n \n+  // Load custom themes from settings\n+  themeManager.loadCustomThemes(settings.merged.customThemes);",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2176407555",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2639,
        "pr_file": "packages/cli/src/gemini.tsx",
        "discussion_id": "2176407555",
        "commented_code": "@@ -123,6 +123,9 @@ export async function main() {\n     }\n   }\n \n+  // Load custom themes from settings\n+  themeManager.loadCustomThemes(settings.merged.customThemes);",
        "comment_created_at": "2025-07-01T04:45:58+00:00",
        "comment_author": "jacob314",
        "comment_body": "this is a good place to be loading the custom themes. I suspect the call to load in ThemeDialog wasn't needed.",
        "pr_file_module": null
      },
      {
        "comment_id": "2176466333",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2639,
        "pr_file": "packages/cli/src/gemini.tsx",
        "discussion_id": "2176407555",
        "commented_code": "@@ -123,6 +123,9 @@ export async function main() {\n     }\n   }\n \n+  // Load custom themes from settings\n+  themeManager.loadCustomThemes(settings.merged.customThemes);",
        "comment_created_at": "2025-07-01T05:34:31+00:00",
        "comment_author": "ali-aljufairi",
        "comment_body": "Yup I have removed it from theme dialog",
        "pr_file_module": null
      }
    ]
  }
]