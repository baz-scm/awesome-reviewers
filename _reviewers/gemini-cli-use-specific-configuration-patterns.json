[
  {
    "discussion_id": "2173565769",
    "pr_number": 2400,
    "pr_file": "packages/core/package.json",
    "created_at": "2025-06-29T06:00:23+00:00",
    "commented_code": "\"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!**/*.tgz\"",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2173607526",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173565769",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!**/*.tgz\"",
        "comment_created_at": "2025-06-29T06:00:23+00:00",
        "comment_author": "lemanschik",
        "comment_body": "It was never intended to add a any *.tgz files thats why the dist folder is in the package.json files array. Should there be a case where a tgz gets added then a exclude pattern without glob only explicitly for the \r\n\r\n```google-gemini-cli-core-*.tgz``` file is the only possible change that will stay stable for as long as the tgz exists.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2173629164",
    "pr_number": 2400,
    "pr_file": "packages/core/package.json",
    "created_at": "2025-06-29T07:22:22+00:00",
    "commented_code": "\"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2173629574",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173629164",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:22:22+00:00",
        "comment_author": "lemanschik",
        "comment_body": "can you please accept that this fix addresses the issue most best? As:\r\n\r\nWhile this pattern works, it's a bit too broad as it will exclude any .tgz file from anywhere inside the dist directory. This could lead to unexpected issues in the future if a legitimate .tgz file is ever needed as part of the package.\r\n\r\nBased on the PR description and the file path on unpkg, the file being excluded is the packed version of this package itself. A more specific pattern would be safer and more clearly state the intent. I recommend targeting only the package tarball in the root of the dist directory.\r\n\r\n    \"!dist/google-gemini-cli-core-*.tgz\"",
        "pr_file_module": null
      },
      {
        "comment_id": "2173629635",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173629164",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:22:34+00:00",
        "comment_author": "lemanschik",
        "comment_body": "/gemini review",
        "pr_file_module": null
      },
      {
        "comment_id": "2173630403",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173629164",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:25:48+00:00",
        "comment_author": "lemanschik",
        "comment_body": "the failure is that the tgz file gets created this will get fixed else where. Meanwhile this is the pattern that addresses that. We will stop creating the tgz file in that place in future. and then remove the pattern. A more broad pattern would mean a permanent wanted change and that's not correct it fixes only the issue in this package with this name it will never get renamed a new fork will have a new package name.",
        "pr_file_module": null
      },
      {
        "comment_id": "2173630435",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173629164",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:26:00+00:00",
        "comment_author": "lemanschik",
        "comment_body": "/gemini review",
        "pr_file_module": null
      },
      {
        "comment_id": "2173630968",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173629164",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:27:54+00:00",
        "comment_author": "lemanschik",
        "comment_body": "wouldn't be ignoring subdirectorys also a good idea like:\r\n\r\n!dist/**/*.tgz",
        "pr_file_module": null
      },
      {
        "comment_id": "2173631036",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173629164",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:28:06+00:00",
        "comment_author": "lemanschik",
        "comment_body": "/gemini review",
        "pr_file_module": null
      },
      {
        "comment_id": "2173641569",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173629164",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T08:09:44+00:00",
        "comment_author": "lemanschik",
        "comment_body": "To make this more robust and prevent accidental exclusion of other files, I recommend using a more specific pattern that targets only the packaged archive of this project. Based on the package name (@google/gemini-cli-core), the file should be named google-gemini-cli-core-VERSION.tgz.\r\n\r\nA more targeted pattern would be safer and more self-documenting.\r\n\r\nUsing a more specific pattern without the globstar is more robust and prevents accidental exclusion of similarly named files in subdirectories in the future. This makes the exclusion rule more explicit about what it's targeting and avoids potential hard-to-debug issues if a legitimate .tgz file needs to be included in a subdirectory later.\r\n\r\nFor example, if you ever needed to include a file like dist/archives/google-gemini-cli-core-legacy.tgz, the current pattern would exclude it, which might be unintended.\r\n\r\n\"!dist/google-gemini-cli-core-*.tgz\"\r\nthere is no maintenance risk: the new exclusion pattern is tightly coupled to the package name, it will not create a brittle configuration that could lead to silent regressions if the package is ever renamed. It will not get renamed a new Package with a fresh package json would be created in that case\r\n\r\nWe will investigating the build process to find the root cause as a more robust long-term solution.",
        "pr_file_module": null
      },
      {
        "comment_id": "2173641663",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173629164",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T08:10:00+00:00",
        "comment_author": "lemanschik",
        "comment_body": "/gemini review",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2173632631",
    "pr_number": 2400,
    "pr_file": "packages/core/package.json",
    "created_at": "2025-06-29T07:36:06+00:00",
    "commented_code": "\"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/**/google-gemini-cli-core-*.tgz\"",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2173632733",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173632631",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/**/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:36:06+00:00",
        "comment_author": "lemanschik",
        "comment_body": "The glob pattern !dist/**/*.tgz is quite broad. It will exclude any .tgz file from the dist directory and its subdirectories. This could lead to hard-to-debug issues in the future if a legitimate .tgz file needs to be included in the package.\r\n\r\nTo make this more robust and prevent accidental exclusion of other files, I recommend using a more specific pattern that targets only the packaged archive of this project. Based on the package name (@google/gemini-cli-core), the file should be named google-gemini-cli-core-VERSION.tgz.\r\n\r\nA more targeted pattern would be safer and more self-documenting.\r\n\r\n    \"!dist/**/google-gemini-cli-core-*.tgz\"",
        "pr_file_module": null
      },
      {
        "comment_id": "2173632814",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173632631",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/**/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:36:25+00:00",
        "comment_author": "lemanschik",
        "comment_body": "/gemini review",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2173633579",
    "pr_number": 2400,
    "pr_file": "packages/core/package.json",
    "created_at": "2025-06-29T07:43:48+00:00",
    "commented_code": "\"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/**/google-gemini-cli-core-*.tgz\"",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2173634664",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173633579",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/**/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:43:48+00:00",
        "comment_author": "lemanschik",
        "comment_body": "The glob pattern !dist/**/*.tgz is quite broad. It will exclude any .tgz file from the dist directory and its subdirectories. This could lead to hard-to-debug issues in the future if a legitimate .tgz file needs to be included in the package.\r\n\r\nTo make this more robust and prevent accidental exclusion of other files, I recommend using a more specific pattern that targets only the packaged archive of this project. Based on the package name (@google/gemini-cli-core), the file should be named google-gemini-cli-core-VERSION.tgz.\r\n\r\nA more targeted pattern would be safer and more self-documenting.\r\n\r\n    \"!dist/**/google-gemini-cli-core-*.tgz\"",
        "pr_file_module": null
      },
      {
        "comment_id": "2173641915",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173633579",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/**/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T08:11:04+00:00",
        "comment_author": "lemanschik",
        "comment_body": "/gemini review",
        "pr_file_module": null
      },
      {
        "comment_id": "2175693793",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173633579",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/**/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-30T18:53:57+00:00",
        "comment_author": "lemanschik",
        "comment_body": "LGTM+1",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2173635486",
    "pr_number": 2400,
    "pr_file": "packages/core/package.json",
    "created_at": "2025-06-29T07:50:05+00:00",
    "commented_code": "\"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
    "repo_full_name": "google-gemini/gemini-cli",
    "discussion_comments": [
      {
        "comment_id": "2173636029",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173635486",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:50:05+00:00",
        "comment_author": "lemanschik",
        "comment_body": "While this pattern is more specific than excluding all .tgz files, it can be made even more precise. The **/ globstar will match in any subdirectory of dist. Based on the unpkg link in the description, the tarball is located directly in the dist directory, not in a subdirectory.\r\n\r\nUsing a more specific pattern without the globstar is more robust and prevents accidental exclusion of similarly named files in subdirectories in the future. This makes the exclusion rule more explicit about what it's targeting and avoids potential hard-to-debug issues if a legitimate .tgz file needs to be included in a subdirectory later.\r\n\r\nFor example, if you ever needed to include a file like dist/archives/google-gemini-cli-core-legacy.tgz, the current pattern would exclude it, which might be unintended.\r\n\r\n    \"!dist/google-gemini-cli-core-*.tgz\"",
        "pr_file_module": null
      },
      {
        "comment_id": "2173636117",
        "repo_full_name": "google-gemini/gemini-cli",
        "pr_number": 2400,
        "pr_file": "packages/core/package.json",
        "discussion_id": "2173635486",
        "commented_code": "@@ -20,7 +20,8 @@\n     \"prepublishOnly\": \"node ../../scripts/prepublish.js\"\n   },\n   \"files\": [\n-    \"dist\"\n+    \"dist\",\n+    \"!dist/google-gemini-cli-core-*.tgz\"",
        "comment_created_at": "2025-06-29T07:50:24+00:00",
        "comment_author": "lemanschik",
        "comment_body": "/gemini review",
        "pr_file_module": null
      }
    ]
  }
]