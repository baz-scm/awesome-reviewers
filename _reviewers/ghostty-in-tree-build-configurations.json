[
  {
    "discussion_id": "2014602253",
    "pr_number": 6920,
    "pr_file": "snap/snapcraft.yaml",
    "created_at": "2025-03-26T16:52:25+00:00",
    "commented_code": "prime:\n       - -*\n \n+  buildenv:\n+    plugin: nil\n+    build-environment: &buildenv\n+      - ACLOCAL_PATH: $CRAFT_STAGE/usr/share/aclocal\n+      - XDG_DATA_DIRS: $CRAFT_STAGE/usr/share:/usr/share\n+      - LD_LIBRARY_PATH: \"$CRAFT_STAGE/usr/lib:\\\n+                          $CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR\\\n+                          ${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}\"\n+      - PKG_CONFIG_PATH: \"$CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/pkgconfig:\\\n+                          $CRAFT_STAGE/usr/lib/pkgconfig:\\\n+                          $CRAFT_STAGE/usr/share/pkgconfig\\\n+                          ${PKG_CONFIG_PATH:+:$PKG_CONFIG_PATH}\"\n+      - GI_TYPELIB_PATH: \"$CRAFT_STAGE/usr/lib/girepository-1.0:\\\n+                          $CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/girepository-1.0\\\n+                          ${GI_TYPELIB_PATH:+:$GI_TYPELIB_PATH}\"\n+\n+  ninja:\n+    plugin: nil\n+    source: https://github.com/ninja-build/ninja.git\n+    source-tag: 'v1.12.1'\n+    source-depth: 1\n+    override-build: |\n+      rm -rf build\n+      rm -f ninja\n+      rm -f ninja_bootstrap\n+      sed -i 's_^#!/usr/bin/env python$_#!/usr/bin/env python3_g' configure.py\n+      ./configure.py --bootstrap\n+      mv ninja ninja_bootstrap\n+      rm -rf build\n+      ./ninja_bootstrap\n+      rm -f ninja_bootstrap\n+      mkdir -p $CRAFT_PART_INSTALL/usr/bin\n+      mv ninja $CRAFT_PART_INSTALL/usr/bin/\n+    build-environment: *buildenv\n+    build-packages:\n+      - python3\n+    prime:\n+      - -*\n+\n+  meson-deps:\n+    after: [ ninja ]\n+    plugin: nil\n+    source: https://github.com/mesonbuild/meson.git\n+    source-tag: '1.6.0'",
    "repo_full_name": "ghostty-org/ghostty",
    "discussion_comments": [
      {
        "comment_id": "2014602253",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6920,
        "pr_file": "snap/snapcraft.yaml",
        "discussion_id": "2014602253",
        "commented_code": "@@ -64,17 +64,222 @@ parts:\n     prime:\n       - -*\n \n+  buildenv:\n+    plugin: nil\n+    build-environment: &buildenv\n+      - ACLOCAL_PATH: $CRAFT_STAGE/usr/share/aclocal\n+      - XDG_DATA_DIRS: $CRAFT_STAGE/usr/share:/usr/share\n+      - LD_LIBRARY_PATH: \"$CRAFT_STAGE/usr/lib:\\\n+                          $CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR\\\n+                          ${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}\"\n+      - PKG_CONFIG_PATH: \"$CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/pkgconfig:\\\n+                          $CRAFT_STAGE/usr/lib/pkgconfig:\\\n+                          $CRAFT_STAGE/usr/share/pkgconfig\\\n+                          ${PKG_CONFIG_PATH:+:$PKG_CONFIG_PATH}\"\n+      - GI_TYPELIB_PATH: \"$CRAFT_STAGE/usr/lib/girepository-1.0:\\\n+                          $CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/girepository-1.0\\\n+                          ${GI_TYPELIB_PATH:+:$GI_TYPELIB_PATH}\"\n+\n+  ninja:\n+    plugin: nil\n+    source: https://github.com/ninja-build/ninja.git\n+    source-tag: 'v1.12.1'\n+    source-depth: 1\n+    override-build: |\n+      rm -rf build\n+      rm -f ninja\n+      rm -f ninja_bootstrap\n+      sed -i 's_^#!/usr/bin/env python$_#!/usr/bin/env python3_g' configure.py\n+      ./configure.py --bootstrap\n+      mv ninja ninja_bootstrap\n+      rm -rf build\n+      ./ninja_bootstrap\n+      rm -f ninja_bootstrap\n+      mkdir -p $CRAFT_PART_INSTALL/usr/bin\n+      mv ninja $CRAFT_PART_INSTALL/usr/bin/\n+    build-environment: *buildenv\n+    build-packages:\n+      - python3\n+    prime:\n+      - -*\n+\n+  meson-deps:\n+    after: [ ninja ]\n+    plugin: nil\n+    source: https://github.com/mesonbuild/meson.git\n+    source-tag: '1.6.0'",
        "comment_created_at": "2025-03-26T16:52:25+00:00",
        "comment_author": "jnsgruk",
        "comment_body": "Same question, noting that `meson` 1.5 is in `noble-updates`?",
        "pr_file_module": null
      },
      {
        "comment_id": "2014772491",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6920,
        "pr_file": "snap/snapcraft.yaml",
        "discussion_id": "2014602253",
        "commented_code": "@@ -64,17 +64,222 @@ parts:\n     prime:\n       - -*\n \n+  buildenv:\n+    plugin: nil\n+    build-environment: &buildenv\n+      - ACLOCAL_PATH: $CRAFT_STAGE/usr/share/aclocal\n+      - XDG_DATA_DIRS: $CRAFT_STAGE/usr/share:/usr/share\n+      - LD_LIBRARY_PATH: \"$CRAFT_STAGE/usr/lib:\\\n+                          $CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR\\\n+                          ${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}\"\n+      - PKG_CONFIG_PATH: \"$CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/pkgconfig:\\\n+                          $CRAFT_STAGE/usr/lib/pkgconfig:\\\n+                          $CRAFT_STAGE/usr/share/pkgconfig\\\n+                          ${PKG_CONFIG_PATH:+:$PKG_CONFIG_PATH}\"\n+      - GI_TYPELIB_PATH: \"$CRAFT_STAGE/usr/lib/girepository-1.0:\\\n+                          $CRAFT_STAGE/usr/lib/$CRAFT_ARCH_TRIPLET_BUILD_FOR/girepository-1.0\\\n+                          ${GI_TYPELIB_PATH:+:$GI_TYPELIB_PATH}\"\n+\n+  ninja:\n+    plugin: nil\n+    source: https://github.com/ninja-build/ninja.git\n+    source-tag: 'v1.12.1'\n+    source-depth: 1\n+    override-build: |\n+      rm -rf build\n+      rm -f ninja\n+      rm -f ninja_bootstrap\n+      sed -i 's_^#!/usr/bin/env python$_#!/usr/bin/env python3_g' configure.py\n+      ./configure.py --bootstrap\n+      mv ninja ninja_bootstrap\n+      rm -rf build\n+      ./ninja_bootstrap\n+      rm -f ninja_bootstrap\n+      mkdir -p $CRAFT_PART_INSTALL/usr/bin\n+      mv ninja $CRAFT_PART_INSTALL/usr/bin/\n+    build-environment: *buildenv\n+    build-packages:\n+      - python3\n+    prime:\n+      - -*\n+\n+  meson-deps:\n+    after: [ ninja ]\n+    plugin: nil\n+    source: https://github.com/mesonbuild/meson.git\n+    source-tag: '1.6.0'",
        "comment_created_at": "2025-03-26T18:18:13+00:00",
        "comment_author": "kenvandine",
        "comment_body": "it's possible that meson in noble-updates might work today, but it could stop working pretty quickly as gtk updates, so this makes it trivial to build app the components that gtk4 needs just by bumping tags as needed.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1991525122",
    "pr_number": 6678,
    "pr_file": "flatpak/com.mitchellh.ghostty.yml",
    "created_at": "2025-03-12T13:38:26+00:00",
    "commented_code": "+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
    "repo_full_name": "ghostty-org/ghostty",
    "discussion_comments": [
      {
        "comment_id": "1991525122",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T13:38:26+00:00",
        "comment_author": "yorickpeterse",
        "comment_body": "Should this perhaps be `-Doptimize=Debug`, since this is used for testing purposes?",
        "pr_file_module": null
      },
      {
        "comment_id": "1991528218",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T13:40:00+00:00",
        "comment_author": "alaviss",
        "comment_body": "Ideally I hope that one day this can go straight to Flathub like how OBS does it.\r\n\r\nWe can expand and have a `.Devel` variant for debugging then, similar to many GNOME apps.",
        "pr_file_module": null
      },
      {
        "comment_id": "1991586642",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T14:09:08+00:00",
        "comment_author": "yorickpeterse",
        "comment_body": "@alaviss Keeping the manifest in the Ghostty repository would be nice, though this raises some questions:\r\n\r\n- I had to use a bunch of [extra `-fno-sys` flags](https://github.com/yorickpeterse/ghostty-flatpak/blob/2757079ea59656ca8a11874d41245c90166ea54b/com.mitchellh.ghostty.yml#L50-L56) to get things to build. I'm not sure if this is still necessary, or how this applies to test builds, but I don't think Flatpak has a way of dynamically handling that?\r\n- For the Flathub build, emitting docs makes no sense so I have that disabled, but I see it enabled here (or at least Pandoc is being installed). Is that strictly necessary?\r\n- If the data lives in the Ghostty repository, then an actual maintainer of Ghostty would have to also maintain the Flathub package, instead of it being maintained out of tree. This isn't necessarily a problem, but it does require a decision by @mitchellh on the matter",
        "pr_file_module": null
      },
      {
        "comment_id": "1991615064",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T14:22:32+00:00",
        "comment_author": "alaviss",
        "comment_body": "> * I had to use a bunch of [extra `-fno-sys` flags](https://github.com/yorickpeterse/ghostty-flatpak/blob/2757079ea59656ca8a11874d41245c90166ea54b/com.mitchellh.ghostty.yml#L50-L56) to get things to build. I'm not sure if this is still necessary, or how this applies to test builds, but I don't think Flatpak has a way of dynamically handling that?\r\n\r\nI just started with none of them, which ended up with the set of dependencies you see in the manifest. I believe the other ones are not necessary.\r\n\r\n> * For the Flathub build, emitting docs makes no sense so I have that disabled, but I see it enabled here (or at least Pandoc is being installed). Is that strictly necessary?\r\n\r\nI was looking at some macOS code that performs environment setup:\r\n\r\nhttps://github.com/ghostty-org/ghostty/blob/95daca616db5c24d7bb37fd5a3ac2f8762bb4ead/src/termio/Exec.zig#L798-L835\r\n\r\nWe can do the same with Flatpak, which would result in ghostty man pages and certain integrations (i.e. fish) being accessible. But I can disable docs if that's not in scope.\r\n\r\n> * If the data lives in the Ghostty repository, then an actual maintainer of Ghostty would have to also maintain the Flathub package, instead of it being maintained out of tree.\r\n\r\nI think for regression CI to work then at least a working manifest should be in tree.",
        "pr_file_module": null
      },
      {
        "comment_id": "1991631875",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T14:30:24+00:00",
        "comment_author": "yorickpeterse",
        "comment_body": "@alaviss \r\n\r\n> We can do the same with Flatpak, which would result in ghostty man pages and certain integrations (i.e. fish) being accessible. But I can disable docs if that's not in scope.\r\n\r\nAh I forgot about the integrations, I thought it was only for the manual page. In that case we should just generate the documentation :smiley: ",
        "pr_file_module": null
      },
      {
        "comment_id": "1991636104",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T14:32:11+00:00",
        "comment_author": "pluiedev",
        "comment_body": "Honestly for me if the Snap is in-tree then it makes sense for the Flatpak to be included as well. (No offense â€” Flatpak is simply a much more general and less controversial packaging format than Snap) We just need a concrete team of maintainers that would keep it working.",
        "pr_file_module": null
      },
      {
        "comment_id": "1991648344",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T14:37:45+00:00",
        "comment_author": "yorickpeterse",
        "comment_body": "I'd be happy to help out maintaining the build/packaging process, but for the actual Zig integration code we'd need others to help out as that's outside my area of expertise. With that said, if the Flatpak build process becomes part of CI that should be easier to deal with.",
        "pr_file_module": null
      },
      {
        "comment_id": "1991789059",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T15:44:21+00:00",
        "comment_author": "tristan957",
        "comment_body": "> We can expand and have a .Devel variant for debugging then, similar to many GNOME apps.\r\n\r\nI think this is a good idea.",
        "pr_file_module": null
      },
      {
        "comment_id": "1991885401",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 6678,
        "pr_file": "flatpak/com.mitchellh.ghostty.yml",
        "discussion_id": "1991525122",
        "commented_code": "@@ -0,0 +1,113 @@\n+app-id: com.mitchellh.ghostty\n+runtime: org.gnome.Platform\n+runtime-version: \"47\"\n+sdk: org.gnome.Sdk\n+sdk-extensions:\n+  - org.freedesktop.Sdk.Extension.ziglang\n+default-branch: tip\n+command: ghostty\n+finish-args:\n+  # 3D rendering\n+  - --device=dri\n+  # Windowing\n+  - --share=ipc\n+  - --socket=fallback-x11\n+  - --socket=wayland\n+  # Allow user to specify additional config files in home by default\n+  - --filesystem=home:ro\n+  # So we can escape the sandbox\n+  - --talk-name=org.freedesktop.Flatpak\n+cleanup:\n+  - /include\n+  - /lib/girepository-1.0\n+  - /lib/pkgconfig\n+  - /share/gir-1.0\n+  - /share/pkgconfig\n+  - /share/vala\n+  - '*.la'\n+  - '*.a'\n+  - '*.so'\n+\n+modules:\n+  - name: bzip2-redirect\n+    buildsystem: simple\n+    build-commands:\n+      - install -dm755 /app/lib\n+      - echo \"INPUT(libbz2.so)\" > /app/lib/libbzip2.so\n+\n+  - name: blueprint-compiler\n+    buildsystem: meson\n+    cleanup:\n+      - '*'\n+    sources:\n+      - type: git\n+        url: https://gitlab.gnome.org/jwestman/blueprint-compiler.git\n+        tag: v0.16.0\n+        commit: 04ef0944db56ab01307a29aaa7303df6067cb3c0\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: gtk4-layer-shell\n+    buildsystem: meson\n+    sources:\n+      - type: git\n+        url: https://github.com/wmww/gtk4-layer-shell.git\n+        tag: v1.1.0\n+        commit: 93550245220cdc514be4701b517acd374a86acc2\n+        x-checker-data:\n+          type: git\n+          tag-pattern: ^v([\\d.]+)$\n+\n+  - name: pandoc\n+    buildsystem: simple\n+    cleanup:\n+      - '*'\n+    build-commands:\n+      - install -Dm755 bin/pandoc /app/bin/pandoc\n+    sources:\n+      - type: archive\n+        sha256: d04c95c138202f87d6b00ac19aa3dd874c681f60a9feb3b55c74f764d6d1a17d\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-amd64.tar.gz\n+        only-arches: [x86_64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-amd64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+      - type: archive\n+        sha256: 4e774cb1bdb6e56bc55b8eb79200bd9aa6a39905a04ecda7267f5149116f0881\n+        url: https://github.com/jgm/pandoc/releases/download/3.6.3/pandoc-3.6.3-linux-arm64.tar.gz\n+        only-arches: [aarch64]\n+        x-checker-data:\n+          type: json\n+          url: https://api.github.com/repos/jgm/pandoc/releases/latest\n+          url-query: .assets[] | select(.name==\"pandoc-\" + $version + \"-linux-arm64.tar.gz\")\n+            | .browser_download_url\n+          version-query: .tag_name\n+\n+  - name: ghostty\n+    buildsystem: simple\n+    build-options:\n+      append-path: /usr/lib/sdk/ziglang\n+    build-commands:\n+      - zig build\n+        -Doptimize=ReleaseFast",
        "comment_created_at": "2025-03-12T16:35:35+00:00",
        "comment_author": "alaviss",
        "comment_body": "Added `.Devel` variant.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1957211261",
    "pr_number": 5791,
    "pr_file": ".github/workflows/test.yml",
    "created_at": "2025-02-15T23:52:03+00:00",
    "commented_code": "- name: Test ${{ matrix.pkg }} Build\n         run: |\n           nix develop -c sh -c \"cd pkg/${{ matrix.pkg }} ; zig build test\"\n+\n+  test-debian-12:\n+    strategy:\n+      fail-fast: false\n+      matrix:\n+        platform: [\"linux/amd64\", \"linux/arm64\"]",
    "repo_full_name": "ghostty-org/ghostty",
    "discussion_comments": [
      {
        "comment_id": "1957211261",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 5791,
        "pr_file": ".github/workflows/test.yml",
        "discussion_id": "1957211261",
        "commented_code": "@@ -626,3 +626,29 @@ jobs:\n       - name: Test ${{ matrix.pkg }} Build\n         run: |\n           nix develop -c sh -c \"cd pkg/${{ matrix.pkg }} ; zig build test\"\n+\n+  test-debian-12:\n+    strategy:\n+      fail-fast: false\n+      matrix:\n+        platform: [\"linux/amd64\", \"linux/arm64\"]",
        "comment_created_at": "2025-02-15T23:52:03+00:00",
        "comment_author": "mitchellh",
        "comment_body": "We probably only need to test amd64, I can't see a scenario where one works and one fails since what we're really protecting against with this test is package versions.",
        "pr_file_module": null
      },
      {
        "comment_id": "1957211920",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 5791,
        "pr_file": ".github/workflows/test.yml",
        "discussion_id": "1957211261",
        "commented_code": "@@ -626,3 +626,29 @@ jobs:\n       - name: Test ${{ matrix.pkg }} Build\n         run: |\n           nix develop -c sh -c \"cd pkg/${{ matrix.pkg }} ; zig build test\"\n+\n+  test-debian-12:\n+    strategy:\n+      fail-fast: false\n+      matrix:\n+        platform: [\"linux/amd64\", \"linux/arm64\"]",
        "comment_created_at": "2025-02-15T23:57:32+00:00",
        "comment_author": "jcollie",
        "comment_body": "Fixed.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1899200238",
    "pr_number": 3931,
    "pr_file": ".github/workflows/snap.yaml",
    "created_at": "2024-12-29T22:13:20+00:00",
    "commented_code": "+name: Snap\n+\n+on:\n+  push: {}",
    "repo_full_name": "ghostty-org/ghostty",
    "discussion_comments": [
      {
        "comment_id": "1899200238",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 3931,
        "pr_file": ".github/workflows/snap.yaml",
        "discussion_id": "1899200238",
        "commented_code": "@@ -0,0 +1,14 @@\n+name: Snap\n+\n+on:\n+  push: {}",
        "comment_created_at": "2024-12-29T22:13:20+00:00",
        "comment_author": "tristan957",
        "comment_body": "Let's restrict this to certain branches, at least main for now",
        "pr_file_module": null
      },
      {
        "comment_id": "1899739954",
        "repo_full_name": "ghostty-org/ghostty",
        "pr_number": 3931,
        "pr_file": ".github/workflows/snap.yaml",
        "discussion_id": "1899200238",
        "commented_code": "@@ -0,0 +1,14 @@\n+name: Snap\n+\n+on:\n+  push: {}",
        "comment_created_at": "2024-12-30T19:07:33+00:00",
        "comment_author": "kenvandine",
        "comment_body": "Fixed",
        "pr_file_module": null
      }
    ]
  }
]