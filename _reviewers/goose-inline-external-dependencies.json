[
  {
    "discussion_id": "2283456259",
    "pr_number": 4153,
    "pr_file": "crates/goose-mcp/src/autovisualiser/chart_template.html",
    "created_at": "2025-08-18T21:01:24+00:00",
    "commented_code": "+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta charset=\"UTF-8\">\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n+    <title>Interactive Chart</title>\n+\n+    <script>\n+        {{CHART_MIN}}",
    "repo_full_name": "block/goose",
    "discussion_comments": [
      {
        "comment_id": "2283456259",
        "repo_full_name": "block/goose",
        "pr_number": 4153,
        "pr_file": "crates/goose-mcp/src/autovisualiser/chart_template.html",
        "discussion_id": "2283456259",
        "commented_code": "@@ -0,0 +1,334 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta charset=\"UTF-8\">\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n+    <title>Interactive Chart</title>\n+\n+    <script>\n+        {{CHART_MIN}}",
        "comment_created_at": "2025-08-18T21:01:24+00:00",
        "comment_author": "aharvard",
        "comment_body": "Over in https://github.com/block/goose/pull/4164/files#diff-10caa690bbc229198a1a7c3c862db533dcdf27944a4b92931d5c47aabe7fa500R63 I have upgraded MCP-UI and started to experiment with the iframe `sandbox` value by adding `allow-forms` ... \n\nI mention this because I think we might be able to use a `<script src=\"<d3-script-here.js\">` if we adjust the sandbox value to include `allow-same-origin`, and if we don't want to inline it like this.\n\nIDK how insecure the `allow-same-origin` value is. If we needed, we could only set that value when it comes from one of our native tools like this one (and turn it off when we load an MCP UI from an 3rd party extension) \n\nHow do you feel about storing the minified JS in Goose as opposed to getting it from a CDN via `<script src=\"\" />`",
        "pr_file_module": null
      },
      {
        "comment_id": "2283723207",
        "repo_full_name": "block/goose",
        "pr_number": 4153,
        "pr_file": "crates/goose-mcp/src/autovisualiser/chart_template.html",
        "discussion_id": "2283456259",
        "commented_code": "@@ -0,0 +1,334 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta charset=\"UTF-8\">\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n+    <title>Interactive Chart</title>\n+\n+    <script>\n+        {{CHART_MIN}}",
        "comment_created_at": "2025-08-18T23:53:32+00:00",
        "comment_author": "michaelneale",
        "comment_body": "I think for these cases, can go either way, but for now having it served up from goose is very fast and zero risk which I think feels right (for now) but anything more complicated, yeah. ",
        "pr_file_module": null
      },
      {
        "comment_id": "2283741795",
        "repo_full_name": "block/goose",
        "pr_number": 4153,
        "pr_file": "crates/goose-mcp/src/autovisualiser/chart_template.html",
        "discussion_id": "2283456259",
        "commented_code": "@@ -0,0 +1,334 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta charset=\"UTF-8\">\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n+    <title>Interactive Chart</title>\n+\n+    <script>\n+        {{CHART_MIN}}",
        "comment_created_at": "2025-08-19T00:07:51+00:00",
        "comment_author": "michaelneale",
        "comment_body": "for anything recommended/out of the box, would ideally not pull in external deps at display time I think - so as this works is ideal for this case (for an arbitrary MCP that people may or may not use - I think can be more open).",
        "pr_file_module": null
      },
      {
        "comment_id": "2293508623",
        "repo_full_name": "block/goose",
        "pr_number": 4153,
        "pr_file": "crates/goose-mcp/src/autovisualiser/chart_template.html",
        "discussion_id": "2283456259",
        "commented_code": "@@ -0,0 +1,334 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta charset=\"UTF-8\">\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n+    <title>Interactive Chart</title>\n+\n+    <script>\n+        {{CHART_MIN}}",
        "comment_created_at": "2025-08-22T11:47:37+00:00",
        "comment_author": "aharvard",
        "comment_body": "Agreed, inlining the deps feels right ",
        "pr_file_module": null
      }
    ]
  }
]