[
  {
    "discussion_id": "2100598575",
    "pr_number": 105760,
    "pr_file": ".github/workflows/nightly-test-backend.yml",
    "created_at": "2025-05-21T15:33:53+00:00",
    "commented_code": "+name: Nightly Tests BE\n+\n+on:\n+  schedule:\n+    - cron: \"0 1 * * *\"\n+  push:\n+    branches:\n+      - grambbledook/grafana-com-nightly-gha\n+jobs:\n+  backend:\n+    runs-on: ubuntu-latest-8-cores\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+      - name: Setup Go\n+        uses: actions/setup-go@v5\n+        with:\n+          go-version-file: go.mod\n+          cache: true\n+      - name: Verify Gen-Cue\n+        run: |\n+          CODEGEN_VERIFY=1 make gen-cue\n+      - name: Verify Gen Jsonnet\n+        run: |\n+          CODEGEN_VERIFY=1 make gen-jsonnet\n+      - name: Wire install\n+        run: make gen-go\n+      - name: Test Backend\n+        run: go list -f '{{.Dir}}/...' -m | xargs go test -short -covermode=atomic -timeout=5m\n+      - name: Test Backend Integration\n+        run: |",
    "repo_full_name": "grafana/grafana",
    "discussion_comments": [
      {
        "comment_id": "2100598575",
        "repo_full_name": "grafana/grafana",
        "pr_number": 105760,
        "pr_file": ".github/workflows/nightly-test-backend.yml",
        "discussion_id": "2100598575",
        "commented_code": "@@ -0,0 +1,36 @@\n+name: Nightly Tests BE\n+\n+on:\n+  schedule:\n+    - cron: \"0 1 * * *\"\n+  push:\n+    branches:\n+      - grambbledook/grafana-com-nightly-gha\n+jobs:\n+  backend:\n+    runs-on: ubuntu-latest-8-cores\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+      - name: Setup Go\n+        uses: actions/setup-go@v5\n+        with:\n+          go-version-file: go.mod\n+          cache: true\n+      - name: Verify Gen-Cue\n+        run: |\n+          CODEGEN_VERIFY=1 make gen-cue\n+      - name: Verify Gen Jsonnet\n+        run: |\n+          CODEGEN_VERIFY=1 make gen-jsonnet\n+      - name: Wire install\n+        run: make gen-go\n+      - name: Test Backend\n+        run: go list -f '{{.Dir}}/...' -m | xargs go test -short -covermode=atomic -timeout=5m\n+      - name: Test Backend Integration\n+        run: |",
        "comment_created_at": "2025-05-21T15:33:53+00:00",
        "comment_author": "github-advanced-security[bot]",
        "comment_body": "shellcheck reported issue in this script: SC2046:warning:2:1: Quote this to prevent word splitting\n\n[Show more details](https://github.com/grafana/grafana/security/code-scanning/2889)",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2100681901",
    "pr_number": 105760,
    "pr_file": ".github/workflows/grafana-nightly.yml",
    "created_at": "2025-05-21T16:09:47+00:00",
    "commented_code": "+name: Grafana Nightly\n+\n+on:\n+  schedule:\n+    - cron: \"0 2 * * *\"\n+  pull_request:\n+jobs:\n+  test_backend:\n+    runs-on: ubuntu-latest-8-cores\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+      - name: Setup Go\n+        uses: actions/setup-go@v5\n+        with:\n+          go-version-file: go.mod\n+          cache: true\n+      - name: Verify Gen-Cue\n+        run: CODEGEN_VERIFY=1 make gen-cue\n+      - name: Verify Gen Jsonnet\n+        run: CODEGEN_VERIFY=1 make gen-jsonnet\n+      - name: Wire install\n+        run: make gen-go\n+      - name: Test Backend\n+        run: go list -f '{{.Dir}}/...' -m | xargs go test -short -covermode=atomic -timeout=5m\n+      - name: Test Backend Integration\n+        run: |",
    "repo_full_name": "grafana/grafana",
    "discussion_comments": [
      {
        "comment_id": "2100681901",
        "repo_full_name": "grafana/grafana",
        "pr_number": 105760,
        "pr_file": ".github/workflows/grafana-nightly.yml",
        "discussion_id": "2100681901",
        "commented_code": "@@ -0,0 +1,47 @@\n+name: Grafana Nightly\n+\n+on:\n+  schedule:\n+    - cron: \"0 2 * * *\"\n+  pull_request:\n+jobs:\n+  test_backend:\n+    runs-on: ubuntu-latest-8-cores\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+      - name: Setup Go\n+        uses: actions/setup-go@v5\n+        with:\n+          go-version-file: go.mod\n+          cache: true\n+      - name: Verify Gen-Cue\n+        run: CODEGEN_VERIFY=1 make gen-cue\n+      - name: Verify Gen Jsonnet\n+        run: CODEGEN_VERIFY=1 make gen-jsonnet\n+      - name: Wire install\n+        run: make gen-go\n+      - name: Test Backend\n+        run: go list -f '{{.Dir}}/...' -m | xargs go test -short -covermode=atomic -timeout=5m\n+      - name: Test Backend Integration\n+        run: |",
        "comment_created_at": "2025-05-21T16:09:47+00:00",
        "comment_author": "github-advanced-security[bot]",
        "comment_body": "shellcheck reported issue in this script: SC2046:warning:2:1: Quote this to prevent word splitting\n\n[Show more details](https://github.com/grafana/grafana/security/code-scanning/2891)",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2182486917",
    "pr_number": 107322,
    "pr_file": ".github/workflows/deploy-storybook-preview.yml",
    "created_at": "2025-07-03T10:55:46+00:00",
    "commented_code": "+name: Deploy Storybook preview\n+\n+on:\n+  pull_request:\n+    paths:\n+      - 'packages/grafana-ui/**'\n+\n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.ref }}\n+  cancel-in-progress: true\n+\n+permissions: {}\n+\n+jobs:\n+  deploy-storybook-preview:\n+    name: Deploy Storybook preview\n+    runs-on: ubuntu-latest\n+    # Don't run from forks for the moment. If we find this useful we can do the workflow_run dance\n+    # to make it work for forks.\n+    if: github.event.pull_request.head.repo.fork == false\n+    permissions:\n+      contents: read\n+      id-token: write\n+\n+    env:\n+      BUCKET_NAME: grafana-storybook-previews\n+      DEPLOY_NAME: preview-${{ github.run_id }} # TODO: better path prefix - branch name or PR ID?\n+\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+\n+      - name: Setup Node.js\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version-file: '.nvmrc'\n+          cache: 'yarn'\n+\n+      - name: Cache node_modules\n+        uses: actions/cache@v4\n+        with:\n+          path: |\n+            node_modules\n+          key: node_modules-${{ hashFiles('yarn.lock') }}\n+          restore-keys: |\n+            node_modules-\n+\n+      - name: Install dependencies\n+        env:\n+          YARN_ENABLE_HARDENED_MODE: ${{ github.event.pull_request.head.repo.fork == true && '1' || '0' }}\n+        run: yarn install --immutable\n+\n+      - name: Build storybook\n+        run: yarn storybook:build\n+\n+      - name: Upload Storybook\n+        uses: grafana/shared-workflows/actions/push-to-gcs@main\n+        with:\n+          environment: prod\n+          bucket: ${{ env.BUCKET_NAME }}\n+          bucket_path: ${{ env.DEPLOY_NAME }}\n+          path: packages/grafana-ui/dist/storybook\n+          service_account: github-gf-storybook-preview@grafanalabs-workload-identity.iam.gserviceaccount.com\n+          parent: false\n+\n+      - name: Write summary\n+        run: |",
    "repo_full_name": "grafana/grafana",
    "discussion_comments": [
      {
        "comment_id": "2182486917",
        "repo_full_name": "grafana/grafana",
        "pr_number": 107322,
        "pr_file": ".github/workflows/deploy-storybook-preview.yml",
        "discussion_id": "2182486917",
        "commented_code": "@@ -0,0 +1,71 @@\n+name: Deploy Storybook preview\n+\n+on:\n+  pull_request:\n+    paths:\n+      - 'packages/grafana-ui/**'\n+\n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.ref }}\n+  cancel-in-progress: true\n+\n+permissions: {}\n+\n+jobs:\n+  deploy-storybook-preview:\n+    name: Deploy Storybook preview\n+    runs-on: ubuntu-latest\n+    # Don't run from forks for the moment. If we find this useful we can do the workflow_run dance\n+    # to make it work for forks.\n+    if: github.event.pull_request.head.repo.fork == false\n+    permissions:\n+      contents: read\n+      id-token: write\n+\n+    env:\n+      BUCKET_NAME: grafana-storybook-previews\n+      DEPLOY_NAME: preview-${{ github.run_id }} # TODO: better path prefix - branch name or PR ID?\n+\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+\n+      - name: Setup Node.js\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version-file: '.nvmrc'\n+          cache: 'yarn'\n+\n+      - name: Cache node_modules\n+        uses: actions/cache@v4\n+        with:\n+          path: |\n+            node_modules\n+          key: node_modules-${{ hashFiles('yarn.lock') }}\n+          restore-keys: |\n+            node_modules-\n+\n+      - name: Install dependencies\n+        env:\n+          YARN_ENABLE_HARDENED_MODE: ${{ github.event.pull_request.head.repo.fork == true && '1' || '0' }}\n+        run: yarn install --immutable\n+\n+      - name: Build storybook\n+        run: yarn storybook:build\n+\n+      - name: Upload Storybook\n+        uses: grafana/shared-workflows/actions/push-to-gcs@main\n+        with:\n+          environment: prod\n+          bucket: ${{ env.BUCKET_NAME }}\n+          bucket_path: ${{ env.DEPLOY_NAME }}\n+          path: packages/grafana-ui/dist/storybook\n+          service_account: github-gf-storybook-preview@grafanalabs-workload-identity.iam.gserviceaccount.com\n+          parent: false\n+\n+      - name: Write summary\n+        run: |",
        "comment_created_at": "2025-07-03T10:55:46+00:00",
        "comment_author": "github-advanced-security[bot]",
        "comment_body": "shellcheck reported issue in this script: SC2016:info:2:6: Expressions don't expand in single quotes, use double quotes for that\n\n[Show more details](https://github.com/grafana/grafana/security/code-scanning/3206)",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2182495785",
    "pr_number": 107322,
    "pr_file": ".github/workflows/deploy-storybook-preview.yml",
    "created_at": "2025-07-03T11:00:51+00:00",
    "commented_code": "+name: Deploy Storybook preview\n+\n+on:\n+  pull_request:\n+    paths:\n+      - 'packages/grafana-ui/**'\n+\n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.ref }}\n+  cancel-in-progress: true\n+\n+permissions: {}\n+\n+jobs:\n+  deploy-storybook-preview:\n+    name: Deploy Storybook preview\n+    runs-on: ubuntu-latest\n+    # Don't run from forks for the moment. If we find this useful we can do the workflow_run dance\n+    # to make it work for forks.\n+    if: github.event.pull_request.head.repo.fork == false\n+    permissions:\n+      contents: read\n+      id-token: write\n+\n+    env:\n+      BUCKET_NAME: grafana-storybook-previews\n+      DEPLOY_NAME: preview-${{ github.run_id }} # TODO: better path prefix - branch name or PR ID?\n+\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+\n+      - name: Setup Node.js\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version-file: '.nvmrc'\n+          cache: 'yarn'\n+\n+      - name: Cache node_modules\n+        uses: actions/cache@v4\n+        with:\n+          path: |\n+            node_modules\n+          key: node_modules-${{ hashFiles('yarn.lock') }}\n+          restore-keys: |\n+            node_modules-\n+\n+      - name: Install dependencies\n+        env:\n+          YARN_ENABLE_HARDENED_MODE: ${{ github.event.pull_request.head.repo.fork == true && '1' || '0' }}\n+        run: yarn install --immutable\n+\n+      - name: Build storybook\n+        run: yarn storybook:build\n+\n+      - name: Upload Storybook\n+        uses: grafana/shared-workflows/actions/push-to-gcs@main\n+        with:\n+          environment: prod\n+          bucket: ${{ env.BUCKET_NAME }}\n+          bucket_path: ${{ env.DEPLOY_NAME }}\n+          path: packages/grafana-ui/dist/storybook\n+          service_account: github-gf-storybook-preview@grafanalabs-workload-identity.iam.gserviceaccount.com\n+          parent: false\n+\n+      - name: Write summary\n+        run: |",
    "repo_full_name": "grafana/grafana",
    "discussion_comments": [
      {
        "comment_id": "2182495785",
        "repo_full_name": "grafana/grafana",
        "pr_number": 107322,
        "pr_file": ".github/workflows/deploy-storybook-preview.yml",
        "discussion_id": "2182495785",
        "commented_code": "@@ -0,0 +1,71 @@\n+name: Deploy Storybook preview\n+\n+on:\n+  pull_request:\n+    paths:\n+      - 'packages/grafana-ui/**'\n+\n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.ref }}\n+  cancel-in-progress: true\n+\n+permissions: {}\n+\n+jobs:\n+  deploy-storybook-preview:\n+    name: Deploy Storybook preview\n+    runs-on: ubuntu-latest\n+    # Don't run from forks for the moment. If we find this useful we can do the workflow_run dance\n+    # to make it work for forks.\n+    if: github.event.pull_request.head.repo.fork == false\n+    permissions:\n+      contents: read\n+      id-token: write\n+\n+    env:\n+      BUCKET_NAME: grafana-storybook-previews\n+      DEPLOY_NAME: preview-${{ github.run_id }} # TODO: better path prefix - branch name or PR ID?\n+\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+\n+      - name: Setup Node.js\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version-file: '.nvmrc'\n+          cache: 'yarn'\n+\n+      - name: Cache node_modules\n+        uses: actions/cache@v4\n+        with:\n+          path: |\n+            node_modules\n+          key: node_modules-${{ hashFiles('yarn.lock') }}\n+          restore-keys: |\n+            node_modules-\n+\n+      - name: Install dependencies\n+        env:\n+          YARN_ENABLE_HARDENED_MODE: ${{ github.event.pull_request.head.repo.fork == true && '1' || '0' }}\n+        run: yarn install --immutable\n+\n+      - name: Build storybook\n+        run: yarn storybook:build\n+\n+      - name: Upload Storybook\n+        uses: grafana/shared-workflows/actions/push-to-gcs@main\n+        with:\n+          environment: prod\n+          bucket: ${{ env.BUCKET_NAME }}\n+          bucket_path: ${{ env.DEPLOY_NAME }}\n+          path: packages/grafana-ui/dist/storybook\n+          service_account: github-gf-storybook-preview@grafanalabs-workload-identity.iam.gserviceaccount.com\n+          parent: false\n+\n+      - name: Write summary\n+        run: |",
        "comment_created_at": "2025-07-03T11:00:51+00:00",
        "comment_author": "github-advanced-security[bot]",
        "comment_body": "shellcheck reported issue in this script: SC2086:info:2:99: Double quote to prevent globbing and word splitting\n\n[Show more details](https://github.com/grafana/grafana/security/code-scanning/3209)",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2182644303",
    "pr_number": 107322,
    "pr_file": ".github/workflows/deploy-storybook-preview.yml",
    "created_at": "2025-07-03T12:20:06+00:00",
    "commented_code": "+name: Deploy Storybook preview\n+\n+on:\n+  pull_request:\n+    paths:\n+      - 'packages/grafana-ui/**'\n+\n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.ref }}\n+  cancel-in-progress: true\n+\n+permissions: {}\n+\n+jobs:\n+  deploy-storybook-preview:\n+    name: Deploy Storybook preview\n+    runs-on: ubuntu-latest\n+    # Don't run from forks for the moment. If we find this useful we can do the workflow_run dance\n+    # to make it work for forks.\n+    if: github.event.pull_request.head.repo.fork == false\n+    permissions:\n+      contents: read\n+      id-token: write\n+\n+    env:\n+      BUCKET_NAME: grafana-storybook-previews\n+\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+\n+      - name: Setup Node.js\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version-file: '.nvmrc'\n+          cache: 'yarn'\n+\n+      - name: Cache node_modules\n+        uses: actions/cache@v4\n+        with:\n+          path: |\n+            node_modules\n+          key: node_modules-${{ hashFiles('yarn.lock') }}\n+          restore-keys: |\n+            node_modules-\n+\n+      - name: Install dependencies\n+        env:\n+          # If the PR isn't from a fork then don't use the slower yarn checks\n+          YARN_ENABLE_HARDENED_MODE: ${{ github.event.pull_request.head.repo.fork == false && '1' || '0' }}\n+        run: yarn install --immutable\n+\n+      - name: Build storybook\n+        run: yarn storybook:build\n+\n+      # Create the GCS folder name for the preview. Creates a consistent name for all deploys for the PR.\n+      # Matches format of `pr_<PR_NUMBER>_<SANITIZED_BRANCH>`.\n+      # Where `SANITIZED_BRANCH` is the branch name with only alphanumeric and hyphens, limited to 30 characters.\n+      - name: Create deploy name\n+        id: create-deploy-name\n+        env:\n+          BRANCH_NAME: ${{ github.event.pull_request.head.ref }}\n+          PR_NUMBER: ${{ github.event.pull_request.number }}\n+        run: |",
    "repo_full_name": "grafana/grafana",
    "discussion_comments": [
      {
        "comment_id": "2182644303",
        "repo_full_name": "grafana/grafana",
        "pr_number": 107322,
        "pr_file": ".github/workflows/deploy-storybook-preview.yml",
        "discussion_id": "2182644303",
        "commented_code": "@@ -0,0 +1,93 @@\n+name: Deploy Storybook preview\n+\n+on:\n+  pull_request:\n+    paths:\n+      - 'packages/grafana-ui/**'\n+\n+concurrency:\n+  group: ${{ github.workflow }}-${{ github.ref }}\n+  cancel-in-progress: true\n+\n+permissions: {}\n+\n+jobs:\n+  deploy-storybook-preview:\n+    name: Deploy Storybook preview\n+    runs-on: ubuntu-latest\n+    # Don't run from forks for the moment. If we find this useful we can do the workflow_run dance\n+    # to make it work for forks.\n+    if: github.event.pull_request.head.repo.fork == false\n+    permissions:\n+      contents: read\n+      id-token: write\n+\n+    env:\n+      BUCKET_NAME: grafana-storybook-previews\n+\n+    steps:\n+      - name: Checkout code\n+        uses: actions/checkout@v4\n+        with:\n+          persist-credentials: false\n+\n+      - name: Setup Node.js\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version-file: '.nvmrc'\n+          cache: 'yarn'\n+\n+      - name: Cache node_modules\n+        uses: actions/cache@v4\n+        with:\n+          path: |\n+            node_modules\n+          key: node_modules-${{ hashFiles('yarn.lock') }}\n+          restore-keys: |\n+            node_modules-\n+\n+      - name: Install dependencies\n+        env:\n+          # If the PR isn't from a fork then don't use the slower yarn checks\n+          YARN_ENABLE_HARDENED_MODE: ${{ github.event.pull_request.head.repo.fork == false && '1' || '0' }}\n+        run: yarn install --immutable\n+\n+      - name: Build storybook\n+        run: yarn storybook:build\n+\n+      # Create the GCS folder name for the preview. Creates a consistent name for all deploys for the PR.\n+      # Matches format of `pr_<PR_NUMBER>_<SANITIZED_BRANCH>`.\n+      # Where `SANITIZED_BRANCH` is the branch name with only alphanumeric and hyphens, limited to 30 characters.\n+      - name: Create deploy name\n+        id: create-deploy-name\n+        env:\n+          BRANCH_NAME: ${{ github.event.pull_request.head.ref }}\n+          PR_NUMBER: ${{ github.event.pull_request.number }}\n+        run: |",
        "comment_created_at": "2025-07-03T12:20:06+00:00",
        "comment_author": "github-advanced-security[bot]",
        "comment_body": "shellcheck reported issue in this script: SC2086:info:10:64: Double quote to prevent globbing and word splitting\n\n[Show more details](https://github.com/grafana/grafana/security/code-scanning/3212)",
        "pr_file_module": null
      }
    ]
  }
]