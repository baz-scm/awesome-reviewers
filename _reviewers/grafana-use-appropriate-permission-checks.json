[
  {
    "discussion_id": "1458547152",
    "pr_number": 80739,
    "pr_file": "public/app/features/plugins/admin/components/GetStartedWithPlugin/GetStartedWithApp.tsx",
    "created_at": "2024-01-19T08:10:23+00:00",
    "commented_code": "if (!pluginConfig) {\n     return null;\n   }\n-\n   // Enforce RBAC\n-  if (!contextSrv.hasPermissionInMetadata(AccessControlAction.PluginsWrite, plugin)) {\n+  if (!contextSrv.hasPermission(AccessControlAction.PluginsWrite)) {",
    "repo_full_name": "grafana/grafana",
    "discussion_comments": [
      {
        "comment_id": "1458547152",
        "repo_full_name": "grafana/grafana",
        "pr_number": 80739,
        "pr_file": "public/app/features/plugins/admin/components/GetStartedWithPlugin/GetStartedWithApp.tsx",
        "discussion_id": "1458547152",
        "commented_code": "@@ -19,9 +19,8 @@ export function GetStartedWithApp({ plugin }: Props): React.ReactElement | null\n   if (!pluginConfig) {\n     return null;\n   }\n-\n   // Enforce RBAC\n-  if (!contextSrv.hasPermissionInMetadata(AccessControlAction.PluginsWrite, plugin)) {\n+  if (!contextSrv.hasPermission(AccessControlAction.PluginsWrite)) {",
        "comment_created_at": "2024-01-19T08:10:23+00:00",
        "comment_author": "academo",
        "comment_body": "what is the difference in these two methods?",
        "pr_file_module": null
      },
      {
        "comment_id": "1458998894",
        "repo_full_name": "grafana/grafana",
        "pr_number": 80739,
        "pr_file": "public/app/features/plugins/admin/components/GetStartedWithPlugin/GetStartedWithApp.tsx",
        "discussion_id": "1458547152",
        "commented_code": "@@ -19,9 +19,8 @@ export function GetStartedWithApp({ plugin }: Props): React.ReactElement | null\n   if (!pluginConfig) {\n     return null;\n   }\n-\n   // Enforce RBAC\n-  if (!contextSrv.hasPermissionInMetadata(AccessControlAction.PluginsWrite, plugin)) {\n+  if (!contextSrv.hasPermission(AccessControlAction.PluginsWrite)) {",
        "comment_created_at": "2024-01-19T13:22:23+00:00",
        "comment_author": "Ukochka",
        "comment_body": "`hasPermissionInMetadata` checks if the object has specific access in our case plugin should contain PluginWrite access policy\r\n`hasPermission` checks if the current user has a permission, in our case user you are logged in has PluginsWrite permission\r\n\r\nMaybe plugin object was changed or smth else changed, but now plugin does not have any of accessControl in it, that's why I have changed the method",
        "pr_file_module": null
      }
    ]
  }
]