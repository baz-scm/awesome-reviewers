[
  {
    "discussion_id": "2286414321",
    "pr_number": 8831,
    "pr_file": "crates/diesel_models/src/hyperswitch_ai_interaction.rs",
    "created_at": "2025-08-19T21:51:20+00:00",
    "commented_code": "+use common_utils::encryption::Encryption;\n+use diesel::{self, Identifiable, Insertable, Queryable, Selectable};\n+use serde::{Deserialize, Serialize};\n+use time::PrimitiveDateTime;\n+\n+use crate::schema::hyperswitch_ai_interaction;\n+\n+#[derive(\n+    Clone,\n+    Debug,\n+    Deserialize,\n+    Identifiable,\n+    Queryable,\n+    Selectable,\n+    Serialize,\n+    router_derive::DebugAsDisplay,\n+)]\n+#[diesel(table_name = hyperswitch_ai_interaction, primary_key(id), check_for_backend(diesel::pg::Pg))]\n+pub struct HyperswitchAiInteraction {",
    "repo_full_name": "juspay/hyperswitch",
    "discussion_comments": [
      {
        "comment_id": "2286414321",
        "repo_full_name": "juspay/hyperswitch",
        "pr_number": 8831,
        "pr_file": "crates/diesel_models/src/hyperswitch_ai_interaction.rs",
        "discussion_id": "2286414321",
        "commented_code": "@@ -0,0 +1,49 @@\n+use common_utils::encryption::Encryption;\n+use diesel::{self, Identifiable, Insertable, Queryable, Selectable};\n+use serde::{Deserialize, Serialize};\n+use time::PrimitiveDateTime;\n+\n+use crate::schema::hyperswitch_ai_interaction;\n+\n+#[derive(\n+    Clone,\n+    Debug,\n+    Deserialize,\n+    Identifiable,\n+    Queryable,\n+    Selectable,\n+    Serialize,\n+    router_derive::DebugAsDisplay,\n+)]\n+#[diesel(table_name = hyperswitch_ai_interaction, primary_key(id), check_for_backend(diesel::pg::Pg))]\n+pub struct HyperswitchAiInteraction {",
        "comment_created_at": "2025-08-19T21:51:20+00:00",
        "comment_author": "SanchithHegde",
        "comment_body": "The SQL migration specifies that the primary key is `(id, created_at)`, but here we're only specifying `id` in the `diesel` annotation? ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2336473537",
    "pr_number": 9348,
    "pr_file": "crates/diesel_models/src/schema.rs",
    "created_at": "2025-09-10T11:40:29+00:00",
    "commented_code": "}\n }\n \n+diesel::table! {\n+    use diesel::sql_types::*;\n+    use crate::enums::diesel_exports::*;\n+\n+    invoices (invoice_id) {\n+        #[max_length = 255]\n+        invoice_id -> Varchar,\n+        #[max_length = 255]\n+        subscription_id -> Nullable<Varchar>,",
    "repo_full_name": "juspay/hyperswitch",
    "discussion_comments": [
      {
        "comment_id": "2336473537",
        "repo_full_name": "juspay/hyperswitch",
        "pr_number": 9348,
        "pr_file": "crates/diesel_models/src/schema.rs",
        "discussion_id": "2336473537",
        "commented_code": "@@ -657,6 +657,42 @@ diesel::table! {\n     }\n }\n \n+diesel::table! {\n+    use diesel::sql_types::*;\n+    use crate::enums::diesel_exports::*;\n+\n+    invoices (invoice_id) {\n+        #[max_length = 255]\n+        invoice_id -> Varchar,\n+        #[max_length = 255]\n+        subscription_id -> Nullable<Varchar>,",
        "comment_created_at": "2025-09-10T11:40:29+00:00",
        "comment_author": "jagan-jaya",
        "comment_body": "```suggestion\r\n        subscription_id -> Varchar,\r\n```\r\nLet's make it mandatory so that no invoice is created without a subscription id",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2309428917",
    "pr_number": 9075,
    "pr_file": "crates/router/src/db/merchant_connector_account.rs",
    "created_at": "2025-08-29T07:43:29+00:00",
    "commented_code": "delete_call().await\n         }\n     }\n+\n+    #[instrument(skip_all)]\n+    #[cfg(feature = \"v1\")]\n+    async fn find_merchant_connector_account_by_id(",
    "repo_full_name": "juspay/hyperswitch",
    "discussion_comments": [
      {
        "comment_id": "2309428917",
        "repo_full_name": "juspay/hyperswitch",
        "pr_number": 9075,
        "pr_file": "crates/router/src/db/merchant_connector_account.rs",
        "discussion_id": "2309428917",
        "commented_code": "@@ -1010,6 +1009,57 @@ impl MerchantConnectorAccountInterface for Store {\n             delete_call().await\n         }\n     }\n+\n+    #[instrument(skip_all)]\n+    #[cfg(feature = \"v1\")]\n+    async fn find_merchant_connector_account_by_id(",
        "comment_created_at": "2025-08-29T07:43:29+00:00",
        "comment_author": "jagan-jaya",
        "comment_body": "Remove this method and use find_by_merchant_connector_account_merchant_id_merchant_connector_id only, let the user pass the merchant ID in the input params itself, so that we allow only mca_ids belonging to that account",
        "pr_file_module": null
      },
      {
        "comment_id": "2309835629",
        "repo_full_name": "juspay/hyperswitch",
        "pr_number": 9075,
        "pr_file": "crates/router/src/db/merchant_connector_account.rs",
        "discussion_id": "2309428917",
        "commented_code": "@@ -1010,6 +1009,57 @@ impl MerchantConnectorAccountInterface for Store {\n             delete_call().await\n         }\n     }\n+\n+    #[instrument(skip_all)]\n+    #[cfg(feature = \"v1\")]\n+    async fn find_merchant_connector_account_by_id(",
        "comment_created_at": "2025-08-29T10:45:08+00:00",
        "comment_author": "mrudulvajpayee4935",
        "comment_body": "find_by_merchant_connector_account_merchant_id_merchant_connector_id is not present in PaymentMethodsState as it uses PaymentMethodsStorageInterface as store which doesnt has MerchantConnectorAccountInterface",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2310079442",
    "pr_number": 9075,
    "pr_file": "crates/router/src/db/kafka_store.rs",
    "created_at": "2025-08-29T12:48:28+00:00",
    "commented_code": ".delete_merchant_connector_account_by_id(id)\n             .await\n     }\n+\n+    #[cfg(feature = \"v1\")]\n+    async fn find_merchant_connector_account_by_id(",
    "repo_full_name": "juspay/hyperswitch",
    "discussion_comments": [
      {
        "comment_id": "2310079442",
        "repo_full_name": "juspay/hyperswitch",
        "pr_number": 9075,
        "pr_file": "crates/router/src/db/kafka_store.rs",
        "discussion_id": "2310079442",
        "commented_code": "@@ -1418,6 +1418,18 @@ impl MerchantConnectorAccountInterface for KafkaStore {\n             .delete_merchant_connector_account_by_id(id)\n             .await\n     }\n+\n+    #[cfg(feature = \"v1\")]\n+    async fn find_merchant_connector_account_by_id(",
        "comment_created_at": "2025-08-29T12:48:28+00:00",
        "comment_author": "sai-harsha-vardhan",
        "comment_body": "How can we query mca with id alone in V1? It's not globally unique, need to query it along with merchant_id",
        "pr_file_module": null
      }
    ]
  }
]