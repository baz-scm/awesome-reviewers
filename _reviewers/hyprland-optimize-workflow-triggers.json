[
  {
    "discussion_id": "2049212314",
    "pr_number": 10106,
    "pr_file": ".github/workflows/close-issues.yml",
    "created_at": "2025-04-17T15:35:28+00:00",
    "commented_code": "+name: Close Unauthorized Issues\n+\n+on:\n+  workflow_dispatch:\n+  issues:\n+    types: [opened]\n+  schedule:\n+    - cron: '0 0 * * *'  # Run daily at midnight, in case issues were missed due missing workflow runs",
    "repo_full_name": "hyprwm/Hyprland",
    "discussion_comments": [
      {
        "comment_id": "2049212314",
        "repo_full_name": "hyprwm/Hyprland",
        "pr_number": 10106,
        "pr_file": ".github/workflows/close-issues.yml",
        "discussion_id": "2049212314",
        "commented_code": "@@ -0,0 +1,93 @@\n+name: Close Unauthorized Issues\n+\n+on:\n+  workflow_dispatch:\n+  issues:\n+    types: [opened]\n+  schedule:\n+    - cron: '0 0 * * *'  # Run daily at midnight, in case issues were missed due missing workflow runs",
        "comment_created_at": "2025-04-17T15:35:28+00:00",
        "comment_author": "vaxerski",
        "comment_body": "I'd drop the cron. If something is skipped, we can do it manually. Especially when the number of issues grows, this can get ratelimited and slow, etc. I've already seen it with other actions.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1907876744",
    "pr_number": 8955,
    "pr_file": ".github/workflows/ci.yaml",
    "created_at": "2025-01-08T21:19:05+00:00",
    "commented_code": "- name: clang-format check\n         run: ninja -C build clang-format-check\n+\n+      - name: clang-format apply\n+        if: failure()\n+        run: ninja -C build clang-format\n+\n+      - name: Create patch\n+        if: failure()\n+        run: |\n+          echo 'Please fix the formatting issues by running [`clang-format`](https://wiki.hyprland.org/Contributing-and-Debugging/PR-Guidelines/#code-style), or directly apply this patch:' > clang-format.patch\n+          echo '<details>' >> clang-format.patch\n+          echo '<summary>clang-format.patch</summary>' >> clang-format.patch\n+          echo >> clang-format.patch\n+          echo '```diff' >> clang-format.patch\n+          git diff >> clang-format.patch\n+          echo '```' >> clang-format.patch\n+          echo >> clang-format.patch\n+          echo '</details>' >> clang-format.patch\n+\n+      - name: Comment patch\n+        if: failure()\n+        uses: mshick/add-pr-comment@v2",
    "repo_full_name": "hyprwm/Hyprland",
    "discussion_comments": [
      {
        "comment_id": "1907876744",
        "repo_full_name": "hyprwm/Hyprland",
        "pr_number": 8955,
        "pr_file": ".github/workflows/ci.yaml",
        "discussion_id": "1907876744",
        "commented_code": "@@ -126,3 +126,27 @@ jobs:\n \n       - name: clang-format check\n         run: ninja -C build clang-format-check\n+\n+      - name: clang-format apply\n+        if: failure()\n+        run: ninja -C build clang-format\n+\n+      - name: Create patch\n+        if: failure()\n+        run: |\n+          echo 'Please fix the formatting issues by running [`clang-format`](https://wiki.hyprland.org/Contributing-and-Debugging/PR-Guidelines/#code-style), or directly apply this patch:' > clang-format.patch\n+          echo '<details>' >> clang-format.patch\n+          echo '<summary>clang-format.patch</summary>' >> clang-format.patch\n+          echo >> clang-format.patch\n+          echo '```diff' >> clang-format.patch\n+          git diff >> clang-format.patch\n+          echo '```' >> clang-format.patch\n+          echo >> clang-format.patch\n+          echo '</details>' >> clang-format.patch\n+\n+      - name: Comment patch\n+        if: failure()\n+        uses: mshick/add-pr-comment@v2",
        "comment_created_at": "2025-01-08T21:19:05+00:00",
        "comment_author": "vaxerski",
        "comment_body": "will this not just fail on regular commits? Should we just dump this to a separate workflow?",
        "pr_file_module": null
      },
      {
        "comment_id": "1907877105",
        "repo_full_name": "hyprwm/Hyprland",
        "pr_number": 8955,
        "pr_file": ".github/workflows/ci.yaml",
        "discussion_id": "1907876744",
        "commented_code": "@@ -126,3 +126,27 @@ jobs:\n \n       - name: clang-format check\n         run: ninja -C build clang-format-check\n+\n+      - name: clang-format apply\n+        if: failure()\n+        run: ninja -C build clang-format\n+\n+      - name: Create patch\n+        if: failure()\n+        run: |\n+          echo 'Please fix the formatting issues by running [`clang-format`](https://wiki.hyprland.org/Contributing-and-Debugging/PR-Guidelines/#code-style), or directly apply this patch:' > clang-format.patch\n+          echo '<details>' >> clang-format.patch\n+          echo '<summary>clang-format.patch</summary>' >> clang-format.patch\n+          echo >> clang-format.patch\n+          echo '```diff' >> clang-format.patch\n+          git diff >> clang-format.patch\n+          echo '```' >> clang-format.patch\n+          echo >> clang-format.patch\n+          echo '</details>' >> clang-format.patch\n+\n+      - name: Comment patch\n+        if: failure()\n+        uses: mshick/add-pr-comment@v2",
        "comment_created_at": "2025-01-08T21:19:21+00:00",
        "comment_author": "vaxerski",
        "comment_body": "like one that runs only on MRs",
        "pr_file_module": null
      },
      {
        "comment_id": "1908095489",
        "repo_full_name": "hyprwm/Hyprland",
        "pr_number": 8955,
        "pr_file": ".github/workflows/ci.yaml",
        "discussion_id": "1907876744",
        "commented_code": "@@ -126,3 +126,27 @@ jobs:\n \n       - name: clang-format check\n         run: ninja -C build clang-format-check\n+\n+      - name: clang-format apply\n+        if: failure()\n+        run: ninja -C build clang-format\n+\n+      - name: Create patch\n+        if: failure()\n+        run: |\n+          echo 'Please fix the formatting issues by running [`clang-format`](https://wiki.hyprland.org/Contributing-and-Debugging/PR-Guidelines/#code-style), or directly apply this patch:' > clang-format.patch\n+          echo '<details>' >> clang-format.patch\n+          echo '<summary>clang-format.patch</summary>' >> clang-format.patch\n+          echo >> clang-format.patch\n+          echo '```diff' >> clang-format.patch\n+          git diff >> clang-format.patch\n+          echo '```' >> clang-format.patch\n+          echo >> clang-format.patch\n+          echo '</details>' >> clang-format.patch\n+\n+      - name: Comment patch\n+        if: failure()\n+        uses: mshick/add-pr-comment@v2",
        "comment_created_at": "2025-01-09T02:41:39+00:00",
        "comment_author": "littleblack111",
        "comment_body": "`if: github.event_name == 'pull_request'` should work too",
        "pr_file_module": null
      }
    ]
  }
]