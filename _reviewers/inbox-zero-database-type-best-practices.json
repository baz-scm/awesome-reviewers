[
  {
    "discussion_id": "2137576780",
    "pr_number": 497,
    "pr_file": "apps/web/prisma/migrations/20250609204102_rule_history/migration.sql",
    "created_at": "2025-06-10T10:57:41+00:00",
    "commented_code": "+-- AlterTable\n+ALTER TABLE \"Rule\" ADD COLUMN     \"promptText\" TEXT;\n+\n+-- CreateTable\n+CREATE TABLE \"RuleHistory\" (\n+    \"id\" TEXT NOT NULL,\n+    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,",
    "repo_full_name": "elie222/inbox-zero",
    "discussion_comments": [
      {
        "comment_id": "2137576780",
        "repo_full_name": "elie222/inbox-zero",
        "pr_number": 497,
        "pr_file": "apps/web/prisma/migrations/20250609204102_rule_history/migration.sql",
        "discussion_id": "2137576780",
        "commented_code": "@@ -0,0 +1,37 @@\n+-- AlterTable\n+ALTER TABLE \"Rule\" ADD COLUMN     \"promptText\" TEXT;\n+\n+-- CreateTable\n+CREATE TABLE \"RuleHistory\" (\n+    \"id\" TEXT NOT NULL,\n+    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,",
        "comment_created_at": "2025-06-10T10:57:41+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Use timezone-aware timestamps for `createdAt`**  \n`TIMESTAMP(3)` is stored without timezone context. If your application relies on UTC or offsets, switch to `TIMESTAMPTZ(3)`:  \n```diff\n-   \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n+   \"createdAt\" TIMESTAMPTZ(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n```  \n\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\n    \"createdAt\" TIMESTAMPTZ(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn apps/web/prisma/migrations/20250609204102_rule_history/migration.sql at line\n7, the column \"createdAt\" uses TIMESTAMP(3) which lacks timezone awareness.\nChange the data type from TIMESTAMP(3) to TIMESTAMPTZ(3) to ensure the timestamp\nstores timezone information, supporting UTC or offset handling in your\napplication.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2137576812",
    "pr_number": 497,
    "pr_file": "apps/web/prisma/migrations/20250609204102_rule_history/migration.sql",
    "created_at": "2025-06-10T10:57:41+00:00",
    "commented_code": "+-- AlterTable\n+ALTER TABLE \"Rule\" ADD COLUMN     \"promptText\" TEXT;\n+\n+-- CreateTable\n+CREATE TABLE \"RuleHistory\" (\n+    \"id\" TEXT NOT NULL,",
    "repo_full_name": "elie222/inbox-zero",
    "discussion_comments": [
      {
        "comment_id": "2137576812",
        "repo_full_name": "elie222/inbox-zero",
        "pr_number": 497,
        "pr_file": "apps/web/prisma/migrations/20250609204102_rule_history/migration.sql",
        "discussion_id": "2137576812",
        "commented_code": "@@ -0,0 +1,37 @@\n+-- AlterTable\n+ALTER TABLE \"Rule\" ADD COLUMN     \"promptText\" TEXT;\n+\n+-- CreateTable\n+CREATE TABLE \"RuleHistory\" (\n+    \"id\" TEXT NOT NULL,",
        "comment_created_at": "2025-06-10T10:57:41+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\ud83d\udee0\ufe0f Refactor suggestion_\n\n**Add default UUID generation for `id`**  \nDefining `\"id\" TEXT NOT NULL` without a database default forces every insert to supply an ID. Consider using `gen_random_uuid()` (from `pgcrypto`) or `uuid_generate_v4()` to let Postgres generate UUIDs:  \n```diff\n CREATE TABLE \"RuleHistory\" (\n-    \"id\" TEXT NOT NULL,\n+    \"id\" TEXT NOT NULL DEFAULT gen_random_uuid(),\n     ...\n );\n```  \n\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n```suggestion\nCREATE TABLE \"RuleHistory\" (\n    \"id\" TEXT NOT NULL DEFAULT gen_random_uuid(),\n    ...\n);\n```\n\n</details>\n\n<!-- suggestion_end -->\n\n<details>\n<summary>\ud83e\udd16 Prompt for AI Agents</summary>\n\n```\nIn apps/web/prisma/migrations/20250609204102_rule_history/migration.sql at line\n6, the \"id\" column is defined as TEXT NOT NULL without a default UUID\ngeneration, requiring manual ID insertion. Modify the column definition to\ninclude a default value using Postgres's UUID generation function such as\ngen_random_uuid() or uuid_generate_v4() to automatically generate UUIDs on\ninsert.\n```\n\n</details>\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1986321507",
    "pr_number": 370,
    "pr_file": "apps/web/prisma/migrations/20250309095123_cleaner/migration.sql",
    "created_at": "2025-03-09T13:17:20+00:00",
    "commented_code": "+-- CreateTable\n+CREATE TABLE \"CleanupJob\" (\n+    \"id\" TEXT NOT NULL,\n+    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n+    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n+    \"userId\" TEXT NOT NULL,\n+\n+    CONSTRAINT \"CleanupJob_pkey\" PRIMARY KEY (\"id\")\n+);",
    "repo_full_name": "elie222/inbox-zero",
    "discussion_comments": [
      {
        "comment_id": "1986321507",
        "repo_full_name": "elie222/inbox-zero",
        "pr_number": 370,
        "pr_file": "apps/web/prisma/migrations/20250309095123_cleaner/migration.sql",
        "discussion_id": "1986321507",
        "commented_code": "@@ -0,0 +1,31 @@\n+-- CreateTable\n+CREATE TABLE \"CleanupJob\" (\n+    \"id\" TEXT NOT NULL,\n+    \"createdAt\" TIMESTAMP(3) NOT NULL DEFAULT CURRENT_TIMESTAMP,\n+    \"updatedAt\" TIMESTAMP(3) NOT NULL,\n+    \"userId\" TEXT NOT NULL,\n+\n+    CONSTRAINT \"CleanupJob_pkey\" PRIMARY KEY (\"id\")\n+);",
        "comment_created_at": "2025-03-09T13:17:20+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\ud83d\udee0\ufe0f Refactor suggestion_\n\n**Use an auto-generated UUID for IDs.**  \nThe primary keys are currently TEXT. Relying on arbitrary strings can lead to collisions or confusion about generation. Consider using an auto-generated UUID or serial sequence instead. This will ensure unique, self-describing IDs without requiring manual entry.\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  }
]