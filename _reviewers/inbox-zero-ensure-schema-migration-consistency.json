[
  {
    "discussion_id": "2051776823",
    "pr_number": 410,
    "pr_file": "apps/web/prisma/schema.prisma",
    "created_at": "2025-04-20T17:50:21+00:00",
    "commented_code": "// Migrating over to the new settings model. Currently most settings are in the User model, but will be moved to this model in the future.\n model EmailAccount {\n-  id           String   @id @default(cuid())\n+  email        String   @id\n   createdAt    DateTime @default(now())\n   updatedAt    DateTime @updatedAt\n-  email        String   @unique\n   writingStyle String?\n \n+  about                     String?\n+  signature                 String?\n+  watchEmailsExpirationDate DateTime?\n+  lastSyncedHistoryId       String?\n+  behaviorProfile           Json?\n+\n+  aiProvider            String?\n+  aiModel               String?\n+  aiApiKey              String?\n+  statsEmailFrequency   Frequency         @default(WEEKLY)\n+  summaryEmailFrequency Frequency         @default(WEEKLY)\n+  lastSummaryEmailAt    DateTime?\n+  coldEmailBlocker      ColdEmailSetting?\n+  coldEmailPrompt       String?\n+  rulesPrompt           String?\n+  webhookSecret         String?\n+  outboundReplyTracking Boolean           @default(false)\n+  autoCategorizeSenders Boolean           @default(false)\n+\n   // To add at a later date:\n-  // about String?\n   // signature String?\n   // ...\n \n   userId    String\n-  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n-  accountId String   @unique\n-  account   Account?\n+  user      User    @relation(fields: [userId], references: [id], onDelete: Cascade)\n+  accountId String  @unique\n+  account   Account @relation(fields: [accountId], references: [id])\n+",
    "repo_full_name": "elie222/inbox-zero",
    "discussion_comments": [
      {
        "comment_id": "2051776823",
        "repo_full_name": "elie222/inbox-zero",
        "pr_number": 410,
        "pr_file": "apps/web/prisma/schema.prisma",
        "discussion_id": "2051776823",
        "commented_code": "@@ -109,21 +108,42 @@ model User {\n \n // Migrating over to the new settings model. Currently most settings are in the User model, but will be moved to this model in the future.\n model EmailAccount {\n-  id           String   @id @default(cuid())\n+  email        String   @id\n   createdAt    DateTime @default(now())\n   updatedAt    DateTime @updatedAt\n-  email        String   @unique\n   writingStyle String?\n \n+  about                     String?\n+  signature                 String?\n+  watchEmailsExpirationDate DateTime?\n+  lastSyncedHistoryId       String?\n+  behaviorProfile           Json?\n+\n+  aiProvider            String?\n+  aiModel               String?\n+  aiApiKey              String?\n+  statsEmailFrequency   Frequency         @default(WEEKLY)\n+  summaryEmailFrequency Frequency         @default(WEEKLY)\n+  lastSummaryEmailAt    DateTime?\n+  coldEmailBlocker      ColdEmailSetting?\n+  coldEmailPrompt       String?\n+  rulesPrompt           String?\n+  webhookSecret         String?\n+  outboundReplyTracking Boolean           @default(false)\n+  autoCategorizeSenders Boolean           @default(false)\n+\n   // To add at a later date:\n-  // about String?\n   // signature String?\n   // ...\n \n   userId    String\n-  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n-  accountId String   @unique\n-  account   Account?\n+  user      User    @relation(fields: [userId], references: [id], onDelete: Cascade)\n+  accountId String  @unique\n+  account   Account @relation(fields: [accountId], references: [id])\n+",
        "comment_created_at": "2025-04-20T17:50:21+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Missing `userId` and `accountId` in SQL migration**  \nYour schema adds:\n\n```prisma\nuserId    String\naccountId String @unique\n```\n\nYet the migration script neither adds those columns nor backfills them. Ensure you `ADD COLUMN \"userId\"` and `ADD COLUMN \"accountId\"` before applying the foreign key on `accountId`.\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2051776825",
    "pr_number": 410,
    "pr_file": "apps/web/prisma/schema.prisma",
    "created_at": "2025-04-20T17:50:21+00:00",
    "commented_code": "// Migrating over to the new settings model. Currently most settings are in the User model, but will be moved to this model in the future.\n model EmailAccount {\n-  id           String   @id @default(cuid())\n+  email        String   @id\n   createdAt    DateTime @default(now())\n   updatedAt    DateTime @updatedAt\n-  email        String   @unique\n   writingStyle String?",
    "repo_full_name": "elie222/inbox-zero",
    "discussion_comments": [
      {
        "comment_id": "2051776825",
        "repo_full_name": "elie222/inbox-zero",
        "pr_number": 410,
        "pr_file": "apps/web/prisma/schema.prisma",
        "discussion_id": "2051776825",
        "commented_code": "@@ -109,21 +108,42 @@\n \n // Migrating over to the new settings model. Currently most settings are in the User model, but will be moved to this model in the future.\n model EmailAccount {\n-  id           String   @id @default(cuid())\n+  email        String   @id\n   createdAt    DateTime @default(now())\n   updatedAt    DateTime @updatedAt\n-  email        String   @unique\n   writingStyle String?",
        "comment_created_at": "2025-04-20T17:50:21+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\u26a0\ufe0f Potential issue_\n\n**Schema/migration mismatch: `writingStyle` missing from SQL**  \nYou added `writingStyle String?` to `EmailAccount` but your migration script does not `ADD COLUMN \"writingStyle\"`. This discrepancy will cause `prisma migrate` to fail.\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  }
]