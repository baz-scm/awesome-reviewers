[
  {
    "discussion_id": "2083840358",
    "pr_number": 432,
    "pr_file": "docker-compose.yml",
    "created_at": "2025-05-12T05:24:56+00:00",
    "commented_code": "- inbox-zero-network\n \n   web:\n+    image: ghcr.io/elie222/inbox-zero:latest",
    "repo_full_name": "elie222/inbox-zero",
    "discussion_comments": [
      {
        "comment_id": "2083840358",
        "repo_full_name": "elie222/inbox-zero",
        "pr_number": 432,
        "pr_file": "docker-compose.yml",
        "discussion_id": "2083840358",
        "commented_code": "@@ -38,10 +38,11 @@ services:\n       - inbox-zero-network\n \n   web:\n+    image: ghcr.io/elie222/inbox-zero:latest",
        "comment_created_at": "2025-05-12T05:24:56+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\ud83d\udca1 Verification agent_\n\n<details>\n<summary>\ud83e\udde9 Analysis chain</summary>\n\n**Update image repository owner before merging**\n\nAs mentioned in the PR description, the image path should be updated to use the organization's repository owner.\n\n---\n\n\ud83c\udfc1 Script executed:\n\n```shell\n#!/bin/bash\n# Check the repository owner\necho \"Current image path: ghcr.io/elie222/inbox-zero:latest\"\necho \"Repository owner: $(git remote get-url origin | sed -n 's/.*github.com[:\\/]\\([^\\/]*\\)\\/.*/\\1/p')\"\n```\n\nLength of output: 257\n\n---\n\n\ud83c\udfc1 Script executed:\n\n```shell\n#!/bin/bash\n# List all git remotes to identify the organization\u2019s repository owner\ngit remote -v\nif git remote get-url upstream &> /dev/null; then\n  echo \"Upstream remote URL: $(git remote get-url upstream)\"\n  echo \"Upstream owner: $(git remote get-url upstream | sed -n 's/.*github.com[:\\/]\\([^\\/]*\\)\\/.*/\\1/p')\"\nelse\n  echo \"No 'upstream' remote configured\"\nfi\n```\n\nLength of output: 249\n\n---\n\n\n\n</details>\n\n**Update image repository owner in docker-compose.yml**\n\nPlease replace the personal namespace with your organization\u2019s GitHub Container Registry owner before merging.\n\n\u2022 File: `docker-compose.yml`  \n\u2022 Line 41  \n\nDiff suggestion:\n```diff\n-    image: ghcr.io/elie222/inbox-zero:latest\n+    image: ghcr.io/<ORG_OWNER>/inbox-zero:latest\n```\nReplace `<ORG_OWNER>` with your official GitHub organization or team name. \n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n`````suggestion\n    image: ghcr.io/<ORG_OWNER>/inbox-zero:latest\n`````\n\n</details>\n\n<!-- suggestion_end -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2085590928",
    "pr_number": 432,
    "pr_file": ".github/workflows/build_and_publish_docker.yml",
    "created_at": "2025-05-12T21:51:26+00:00",
    "commented_code": "+name: \"Build Inbox Zero Docker Image\"\n+run-name: \"Build Inbox Zero Docker Image\"\n+\n+on:\n+  push:\n+    branches: [\"main\"]\n+\n+permissions:\n+  contents: write # Needed to commit version bump and push tags\n+  packages: write # Needed to push Docker image to GHCR\n+\n+env:\n+  DOCKER_IMAGE_REGISTRY: \"ghcr.io\"\n+  DOCKER_USERNAME: \"elie222\"\n+",
    "repo_full_name": "elie222/inbox-zero",
    "discussion_comments": [
      {
        "comment_id": "2085590928",
        "repo_full_name": "elie222/inbox-zero",
        "pr_number": 432,
        "pr_file": ".github/workflows/build_and_publish_docker.yml",
        "discussion_id": "2085590928",
        "commented_code": "@@ -0,0 +1,114 @@\n+name: \"Build Inbox Zero Docker Image\"\n+run-name: \"Build Inbox Zero Docker Image\"\n+\n+on:\n+  push:\n+    branches: [\"main\"]\n+\n+permissions:\n+  contents: write # Needed to commit version bump and push tags\n+  packages: write # Needed to push Docker image to GHCR\n+\n+env:\n+  DOCKER_IMAGE_REGISTRY: \"ghcr.io\"\n+  DOCKER_USERNAME: \"elie222\"\n+",
        "comment_created_at": "2025-05-12T21:51:26+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_\ud83d\udee0\ufe0f Refactor suggestion_\n\n**Make the Docker username dynamic**\n\nHard-coding `DOCKER_USERNAME: \"elie222\"` forces a manual update after merging. Switch to `github.repository_owner` so it works in both forks and your main repo without edits:\n\n```diff\n env:\n   DOCKER_IMAGE_REGISTRY: \"ghcr.io\"\n-  DOCKER_USERNAME: \"elie222\"\n+  DOCKER_USERNAME: \"${{ github.repository_owner }}\"\n```\n\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n`````suggestion\nenv:\n  DOCKER_IMAGE_REGISTRY: \"ghcr.io\"\n  DOCKER_USERNAME: \"${{ github.repository_owner }}\"\n`````\n\n</details>\n\n<!-- suggestion_end -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1904143127",
    "pr_number": 293,
    "pr_file": "docker-compose.yml",
    "created_at": "2025-01-06T13:19:41+00:00",
    "commented_code": "- ./.env\n     depends_on:\n       - db\n-      # - redis\n+      - redis\n     ports:\n       - 3000:3000\n-    network_mode: host\n+    networks:\n+      - inbox-zero-network\n+    environment:\n+      DATABASE_URL: \"postgresql://postgres:password@db:5432/inboxzero?schema=public\"\n+      DIRECT_URL: \"postgresql://postgres:password@db:5432/inboxzero?schema=public\"\n+      UPSTASH_REDIS_URL: \"redis://redis:6379\"",
    "repo_full_name": "elie222/inbox-zero",
    "discussion_comments": [
      {
        "comment_id": "1904143127",
        "repo_full_name": "elie222/inbox-zero",
        "pr_number": 293,
        "pr_file": "docker-compose.yml",
        "discussion_id": "1904143127",
        "commented_code": "@@ -40,10 +45,18 @@ services:\n       - ./.env\n     depends_on:\n       - db\n-      # - redis\n+      - redis\n     ports:\n       - 3000:3000\n-    network_mode: host\n+    networks:\n+      - inbox-zero-network\n+    environment:\n+      DATABASE_URL: \"postgresql://postgres:password@db:5432/inboxzero?schema=public\"\n+      DIRECT_URL: \"postgresql://postgres:password@db:5432/inboxzero?schema=public\"\n+      UPSTASH_REDIS_URL: \"redis://redis:6379\"",
        "comment_created_at": "2025-01-06T13:19:41+00:00",
        "comment_author": "coderabbitai[bot]",
        "comment_body": "_:warning: Potential issue_\n\n**Externalize sensitive connection strings**\n\nDatabase and Redis connection strings should be moved to environment variables instead of being hardcoded.\n\n```diff\n    environment:\n-      DATABASE_URL: \"postgresql://postgres:password@db:5432/inboxzero?schema=public\"\n-      DIRECT_URL: \"postgresql://postgres:password@db:5432/inboxzero?schema=public\"\n-      UPSTASH_REDIS_URL: \"redis://redis:6379\"\n+      DATABASE_URL: ${DATABASE_URL:-postgresql://${POSTGRES_USER:-postgres}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB:-inboxzero}?schema=public}\n+      DIRECT_URL: ${DIRECT_URL:-${DATABASE_URL}}\n+      UPSTASH_REDIS_URL: ${UPSTASH_REDIS_URL:-redis://redis:6379}\n```\n\n\n<!-- suggestion_start -->\n\n<details>\n<summary>\ud83d\udcdd Committable suggestion</summary>\n\n> \u203c\ufe0f **IMPORTANT**\n> Carefully review the code before committing. Ensure that it accurately replaces the highlighted code, contains no missing lines, and has no issues with indentation. Thoroughly test & benchmark the code to ensure it meets the requirements.\n\n`````suggestion\n      DATABASE_URL: ${DATABASE_URL:-postgresql://${POSTGRES_USER:-postgres}:${POSTGRES_PASSWORD}@db:5432/${POSTGRES_DB:-inboxzero}?schema=public}\n      DIRECT_URL: ${DIRECT_URL:-${DATABASE_URL}}\n      UPSTASH_REDIS_URL: ${UPSTASH_REDIS_URL:-redis://redis:6379}\n`````\n\n</details>\n\n<!-- suggestion_end -->\n\n<!-- This is an auto-generated comment by CodeRabbit -->",
        "pr_file_module": null
      }
    ]
  }
]