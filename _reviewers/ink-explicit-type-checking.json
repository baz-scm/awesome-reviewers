[
  {
    "discussion_id": "2274688700",
    "pr_number": 746,
    "pr_file": "src/renderer.ts",
    "created_at": "2025-08-13T21:30:58+00:00",
    "commented_code": "staticOutput: string;\n };\n \n-const renderer = (node: DOMElement): Result => {\n+const renderer = (node: DOMElement, isScreenReaderEnabled: boolean): Result => {\n \tif (node.yogaNode) {\n+\t\tif (isScreenReaderEnabled) {\n+\t\t\tconst output = renderNodeToScreenReaderOutput(node);\n+\t\t\tconst outputHeight = output.split('\n').length;",
    "repo_full_name": "vadimdemedes/ink",
    "discussion_comments": [
      {
        "comment_id": "2274688700",
        "repo_full_name": "vadimdemedes/ink",
        "pr_number": 746,
        "pr_file": "src/renderer.ts",
        "discussion_id": "2274688700",
        "commented_code": "@@ -8,14 +10,27 @@ type Result = {\n \tstaticOutput: string;\n };\n \n-const renderer = (node: DOMElement): Result => {\n+const renderer = (node: DOMElement, isScreenReaderEnabled: boolean): Result => {\n \tif (node.yogaNode) {\n+\t\tif (isScreenReaderEnabled) {\n+\t\t\tconst output = renderNodeToScreenReaderOutput(node);\n+\t\t\tconst outputHeight = output.split('\\n').length;",
        "comment_created_at": "2025-08-13T21:30:58+00:00",
        "comment_author": "sindresorhus",
        "comment_body": "Should it really be height 1 when empty?\r\n\r\n```suggestion\r\n\t\t\tconst outputHeight = output === '' ? 0 : output.split('\\n').length;\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "399674908",
    "pr_number": 264,
    "pr_file": "src/experimental/reconciler.ts",
    "created_at": "2020-03-28T15:31:53+00:00",
    "commented_code": "// trigger an immediate render to ensure <Static> children are written to output before they get erased\n \t\tif (rootNode.isStaticDirty) {\n \t\t\trootNode.isStaticDirty = false;\n-\t\t\trootNode.onImmediateRender();\n+\t\t\tif (rootNode.onImmediateRender) {",
    "repo_full_name": "vadimdemedes/ink",
    "discussion_comments": [
      {
        "comment_id": "399674908",
        "repo_full_name": "vadimdemedes/ink",
        "pr_number": 264,
        "pr_file": "src/experimental/reconciler.ts",
        "discussion_id": "399674908",
        "commented_code": "@@ -28,15 +52,22 @@ const hostConfig = {\n \t\t// trigger an immediate render to ensure <Static> children are written to output before they get erased\n \t\tif (rootNode.isStaticDirty) {\n \t\t\trootNode.isStaticDirty = false;\n-\t\t\trootNode.onImmediateRender();\n+\t\t\tif (rootNode.onImmediateRender) {",
        "comment_created_at": "2020-03-28T15:31:53+00:00",
        "comment_author": "vadimdemedes",
        "comment_body": "```suggestion\r\n\t\t\tif (typeof rootNode.onImmediateRender === 'function') {\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "399687893",
        "repo_full_name": "vadimdemedes/ink",
        "pr_number": 264,
        "pr_file": "src/experimental/reconciler.ts",
        "discussion_id": "399674908",
        "commented_code": "@@ -28,15 +52,22 @@ const hostConfig = {\n \t\t// trigger an immediate render to ensure <Static> children are written to output before they get erased\n \t\tif (rootNode.isStaticDirty) {\n \t\t\trootNode.isStaticDirty = false;\n-\t\t\trootNode.onImmediateRender();\n+\t\t\tif (rootNode.onImmediateRender) {",
        "comment_created_at": "2020-03-28T17:31:20+00:00",
        "comment_author": "taras",
        "comment_body": "Done in https://github.com/vadimdemedes/ink/pull/264/commits/14805dd8ee591c4fb772877e2a05d7219ea844ee",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "399674921",
    "pr_number": 264,
    "pr_file": "src/experimental/reconciler.ts",
    "created_at": "2020-03-28T15:32:06+00:00",
    "commented_code": "// trigger an immediate render to ensure <Static> children are written to output before they get erased\n \t\tif (rootNode.isStaticDirty) {\n \t\t\trootNode.isStaticDirty = false;\n-\t\t\trootNode.onImmediateRender();\n+\t\t\tif (rootNode.onImmediateRender) {\n+\t\t\t\trootNode.onImmediateRender();\n+\t\t\t}\n+\n \t\t\treturn;\n \t\t}\n \n-\t\trootNode.onRender();\n+\t\tif (rootNode.onRender) {",
    "repo_full_name": "vadimdemedes/ink",
    "discussion_comments": [
      {
        "comment_id": "399674921",
        "repo_full_name": "vadimdemedes/ink",
        "pr_number": 264,
        "pr_file": "src/experimental/reconciler.ts",
        "discussion_id": "399674921",
        "commented_code": "@@ -28,15 +52,22 @@ const hostConfig = {\n \t\t// trigger an immediate render to ensure <Static> children are written to output before they get erased\n \t\tif (rootNode.isStaticDirty) {\n \t\t\trootNode.isStaticDirty = false;\n-\t\t\trootNode.onImmediateRender();\n+\t\t\tif (rootNode.onImmediateRender) {\n+\t\t\t\trootNode.onImmediateRender();\n+\t\t\t}\n+\n \t\t\treturn;\n \t\t}\n \n-\t\trootNode.onRender();\n+\t\tif (rootNode.onRender) {",
        "comment_created_at": "2020-03-28T15:32:06+00:00",
        "comment_author": "vadimdemedes",
        "comment_body": "```suggestion\r\n\t\tif (typeof rootNode.onRender === 'function') {\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "399688081",
        "repo_full_name": "vadimdemedes/ink",
        "pr_number": 264,
        "pr_file": "src/experimental/reconciler.ts",
        "discussion_id": "399674921",
        "commented_code": "@@ -28,15 +52,22 @@ const hostConfig = {\n \t\t// trigger an immediate render to ensure <Static> children are written to output before they get erased\n \t\tif (rootNode.isStaticDirty) {\n \t\t\trootNode.isStaticDirty = false;\n-\t\t\trootNode.onImmediateRender();\n+\t\t\tif (rootNode.onImmediateRender) {\n+\t\t\t\trootNode.onImmediateRender();\n+\t\t\t}\n+\n \t\t\treturn;\n \t\t}\n \n-\t\trootNode.onRender();\n+\t\tif (rootNode.onRender) {",
        "comment_created_at": "2020-03-28T17:32:53+00:00",
        "comment_author": "taras",
        "comment_body": "Done in https://github.com/vadimdemedes/ink/pull/264/commits/4c740b887cb1138d5615076d8c9acea0e266ce32",
        "pr_file_module": null
      }
    ]
  }
]