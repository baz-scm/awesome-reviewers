[
  {
    "discussion_id": "1705709427",
    "pr_number": 52463,
    "pr_file": "manifests/charts/ztunnel/templates/_helpers.tpl",
    "created_at": "2024-08-06T15:08:01+00:00",
    "commented_code": "-{{- define \"istio-labels\" }}\n-    app.kubernetes.io/name: ztunnel\n-    {{- if .Release.Service }}\n-    app.kubernetes.io/managed-by: {{ .Release.Service }}",
    "repo_full_name": "istio/istio",
    "discussion_comments": [
      {
        "comment_id": "1705709427",
        "repo_full_name": "istio/istio",
        "pr_number": 52463,
        "pr_file": "manifests/charts/ztunnel/templates/_helpers.tpl",
        "discussion_id": "1705709427",
        "commented_code": "@@ -1,10 +1,4 @@\n-{{- define \"istio-labels\" }}\n-    app.kubernetes.io/name: ztunnel\n-    {{- if .Release.Service }}\n-    app.kubernetes.io/managed-by: {{ .Release.Service }}",
        "comment_created_at": "2024-08-06T15:08:01+00:00",
        "comment_author": "Stevenjin8",
        "comment_body": "How important are these guards?",
        "pr_file_module": null
      },
      {
        "comment_id": "1705780486",
        "repo_full_name": "istio/istio",
        "pr_number": 52463,
        "pr_file": "manifests/charts/ztunnel/templates/_helpers.tpl",
        "discussion_id": "1705709427",
        "commented_code": "@@ -1,10 +1,4 @@\n-{{- define \"istio-labels\" }}\n-    app.kubernetes.io/name: ztunnel\n-    {{- if .Release.Service }}\n-    app.kubernetes.io/managed-by: {{ .Release.Service }}",
        "comment_created_at": "2024-08-06T15:56:31+00:00",
        "comment_author": "bleggett",
        "comment_body": "`.Release.XXX` props are only set during `helm install` because they are install-time variables (which makes sense).\r\n\r\nSo if you just do `helm template` the values will be unset (unless you do `helm template --release-name MyRelease` of  course - all the Helm install-time vars are stubbable with `template` args if you want).\r\n\r\nI'm not wedded to the guards since the labels should always be there no matter what, and if they are empty because you (or your install tool) didn't set install-time variables, then that seems like the thing to fix.\r\n\r\nI'll defer to @ilrudie tho, he had an opinion on this IIRC.",
        "pr_file_module": null
      },
      {
        "comment_id": "1705788483",
        "repo_full_name": "istio/istio",
        "pr_number": 52463,
        "pr_file": "manifests/charts/ztunnel/templates/_helpers.tpl",
        "discussion_id": "1705709427",
        "commented_code": "@@ -1,10 +1,4 @@\n-{{- define \"istio-labels\" }}\n-    app.kubernetes.io/name: ztunnel\n-    {{- if .Release.Service }}\n-    app.kubernetes.io/managed-by: {{ .Release.Service }}",
        "comment_created_at": "2024-08-06T16:02:22+00:00",
        "comment_author": "ilrudie",
        "comment_body": "They matter mostly outside of helm install contexts iirc. istioctl was failing to produce valid yaml without the guard so I added them.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1495334585",
    "pr_number": 48753,
    "pr_file": "Makefile",
    "created_at": "2024-02-20T07:11:21+00:00",
    "commented_code": "# See the License for the specific language governing permissions and\n # limitations under the License.\n \n-SHELL := /bin/bash\n+SHELL ?= /bin/bash",
    "repo_full_name": "istio/istio",
    "discussion_comments": [
      {
        "comment_id": "1495334585",
        "repo_full_name": "istio/istio",
        "pr_number": 48753,
        "pr_file": "Makefile",
        "discussion_id": "1495334585",
        "commented_code": "@@ -19,7 +19,7 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-SHELL := /bin/bash\n+SHELL ?= /bin/bash",
        "comment_created_at": "2024-02-20T07:11:21+00:00",
        "comment_author": "thedebugger",
        "comment_body": "supports override ",
        "pr_file_module": null
      },
      {
        "comment_id": "1498407616",
        "repo_full_name": "istio/istio",
        "pr_number": 48753,
        "pr_file": "Makefile",
        "discussion_id": "1495334585",
        "commented_code": "@@ -19,7 +19,7 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-SHELL := /bin/bash\n+SHELL ?= /bin/bash",
        "comment_created_at": "2024-02-21T22:49:40+00:00",
        "comment_author": "howardjohn",
        "comment_body": "Its not clear why we need an override, but regardless\r\n1. Please make this in a separate PR\r\n2. These files are synced from https://github.com/istio/common-files/tree/master/files, so they will need to be changed there to have effect (same with the run.sh change)",
        "pr_file_module": null
      },
      {
        "comment_id": "1498731193",
        "repo_full_name": "istio/istio",
        "pr_number": 48753,
        "pr_file": "Makefile",
        "discussion_id": "1495334585",
        "commented_code": "@@ -19,7 +19,7 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-SHELL := /bin/bash\n+SHELL ?= /bin/bash",
        "comment_created_at": "2024-02-22T06:43:55+00:00",
        "comment_author": "thedebugger",
        "comment_body": "I'm on nixos and bin paths are different. I'll just back out these changes for now and open up new PR if needed",
        "pr_file_module": null
      }
    ]
  }
]