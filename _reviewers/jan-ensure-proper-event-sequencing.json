[
  {
    "discussion_id": "1476980792",
    "pr_number": 1712,
    "pr_file": "extensions/inference-nitro-extension/src/index.ts",
    "created_at": "2024-02-03T05:40:12+00:00",
    "commented_code": "thread_id: data.threadId,\n       created: timestamp,\n       updated: timestamp,\n-      status: MessageStatus.Ready,\n+      status: MessageStatus.Pending,\n       id: \"\",\n       role: ChatCompletionRole.Assistant,\n       object: \"thread.message\",\n       content: [],\n     };\n+    events.emit(MessageEvent.OnMessageResponse, message);",
    "repo_full_name": "menloresearch/jan",
    "discussion_comments": [
      {
        "comment_id": "1476980792",
        "repo_full_name": "menloresearch/jan",
        "pr_number": 1712,
        "pr_file": "extensions/inference-nitro-extension/src/index.ts",
        "discussion_id": "1476980792",
        "commented_code": "@@ -195,19 +220,35 @@ export default class JanInferenceNitroExtension extends InferenceExtension {\n       thread_id: data.threadId,\n       created: timestamp,\n       updated: timestamp,\n-      status: MessageStatus.Ready,\n+      status: MessageStatus.Pending,\n       id: \"\",\n       role: ChatCompletionRole.Assistant,\n       object: \"thread.message\",\n       content: [],\n     };\n+    events.emit(MessageEvent.OnMessageResponse, message);",
        "comment_created_at": "2024-02-03T05:40:12+00:00",
        "comment_author": "louis-menlo",
        "comment_body": "This function is defined for a single-response purpose and returns the result in place (the same as stream = false), which means it should not work with event pub-sub. The function would not be used in the chat box, so broadcasting a message event will result in an incorrect message response. E.g. it's used for thread summarization. Currently, the function is deprecated and not being used anywhere. Please revert the irrelevant change.",
        "pr_file_module": null
      },
      {
        "comment_id": "1477010256",
        "repo_full_name": "menloresearch/jan",
        "pr_number": 1712,
        "pr_file": "extensions/inference-nitro-extension/src/index.ts",
        "discussion_id": "1476980792",
        "commented_code": "@@ -195,19 +220,35 @@ export default class JanInferenceNitroExtension extends InferenceExtension {\n       thread_id: data.threadId,\n       created: timestamp,\n       updated: timestamp,\n-      status: MessageStatus.Ready,\n+      status: MessageStatus.Pending,\n       id: \"\",\n       role: ChatCompletionRole.Assistant,\n       object: \"thread.message\",\n       content: [],\n     };\n+    events.emit(MessageEvent.OnMessageResponse, message);",
        "comment_created_at": "2024-02-03T07:49:11+00:00",
        "comment_author": "InNoobWeTrust",
        "comment_body": "Noted, will revert and put a `@Deprecated` tag to this function then.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1484186612",
    "pr_number": 1976,
    "pr_file": "web/hooks/useSendChatMessage.ts",
    "created_at": "2024-02-09T11:20:22+00:00",
    "commented_code": "setReloadModel(false)\n     setEngineParamsUpdate(false)\n+\n+    // If this is the first ever prompt in the thread\n+    if (messages.length == 1) {",
    "repo_full_name": "menloresearch/jan",
    "discussion_comments": [
      {
        "comment_id": "1484186612",
        "repo_full_name": "menloresearch/jan",
        "pr_number": 1976,
        "pr_file": "web/hooks/useSendChatMessage.ts",
        "discussion_id": "1484186612",
        "commented_code": "@@ -295,6 +298,49 @@ export default function useSendChatMessage() {\n \n     setReloadModel(false)\n     setEngineParamsUpdate(false)\n+\n+    // If this is the first ever prompt in the thread\n+    if (messages.length == 1) {",
        "comment_created_at": "2024-02-09T11:20:22+00:00",
        "comment_author": "louis-menlo",
        "comment_body": "nits: should we do it after first message response? (Move to EventHandler > OnMessageResponse) This would lead to a race condition here",
        "pr_file_module": null
      }
    ]
  }
]