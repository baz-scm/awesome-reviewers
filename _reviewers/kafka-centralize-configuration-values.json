[
  {
    "discussion_id": "2209810362",
    "pr_number": 20165,
    "pr_file": "tests/docker/Dockerfile",
    "created_at": "2025-07-16T09:36:04+00:00",
    "commented_code": "# limitations under the License.\n \n # The base image of openjdk:17 is typically oraclelinux:8-slim, which doesn't include apt-get. \n-# Therefore, use openjdk:17-buster instead.\n-ARG jdk_version=openjdk:17-buster\n+# Therefore, use openjdk:17-bullseye instead.\n+ARG jdk_version=openjdk:17-bullseye",
    "repo_full_name": "apache/kafka",
    "discussion_comments": [
      {
        "comment_id": "2209810362",
        "repo_full_name": "apache/kafka",
        "pr_number": 20165,
        "pr_file": "tests/docker/Dockerfile",
        "discussion_id": "2209810362",
        "commented_code": "@@ -14,8 +14,8 @@\n # limitations under the License.\n \n # The base image of openjdk:17 is typically oraclelinux:8-slim, which doesn't include apt-get. \n-# Therefore, use openjdk:17-buster instead.\n-ARG jdk_version=openjdk:17-buster\n+# Therefore, use openjdk:17-bullseye instead.\n+ARG jdk_version=openjdk:17-bullseye",
        "comment_created_at": "2025-07-16T09:36:04+00:00",
        "comment_author": "fvaleri",
        "comment_body": "Should we remove the default value here since we are taking that from the build script where we also have a default value?\r\n\r\nIf we also update the README.md using a placeholder (e.g. <JDK_IMAGE>), in the next base image update we would only need to update the default image name in one place. Wdyt?",
        "pr_file_module": null
      },
      {
        "comment_id": "2210350170",
        "repo_full_name": "apache/kafka",
        "pr_number": 20165,
        "pr_file": "tests/docker/Dockerfile",
        "discussion_id": "2209810362",
        "commented_code": "@@ -14,8 +14,8 @@\n # limitations under the License.\n \n # The base image of openjdk:17 is typically oraclelinux:8-slim, which doesn't include apt-get. \n-# Therefore, use openjdk:17-buster instead.\n-ARG jdk_version=openjdk:17-buster\n+# Therefore, use openjdk:17-bullseye instead.\n+ARG jdk_version=openjdk:17-bullseye",
        "comment_created_at": "2025-07-16T13:00:33+00:00",
        "comment_author": "chia7712",
        "comment_body": "sounds good",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1989823433",
    "pr_number": 16768,
    "pr_file": "docker/docker_official_images/3.8.0/jvm/Dockerfile",
    "created_at": "2025-03-11T17:35:42+00:00",
    "commented_code": "FROM eclipse-temurin:21-jre-alpine AS build-jsa\n \n-USER root\n-\n-# Get Kafka from https://archive.apache.org/dist/kafka, url passed as env var, for version 3.7.0\n-ENV kafka_url https://archive.apache.org/dist/kafka/3.7.0/kafka_2.13-3.7.0.tgz\n+# Get Kafka from https://archive.apache.org/dist/kafka, url passed as env var, for version 3.8.0\n+ENV kafka_url https://archive.apache.org/dist/kafka/3.8.0/kafka_2.13-3.8.0.tgz\n \n COPY jsa_launch /etc/kafka/docker/jsa_launch\n \n RUN set -eux ; \\\n-    apk update ; \\\n-    apk upgrade ; \\\n     apk add --no-cache wget gcompat gpg gpg-agent procps bash; \\\n-    mkdir opt/kafka; \\\n     wget -nv -O kafka.tgz \"$kafka_url\"; \\\n     wget -nv -O kafka.tgz.asc \"$kafka_url.asc\"; \\\n+    export GNUPGHOME=\"$(mktemp -d)\"; \\\n+    gpg --batch --keyserver hkp://keys.openpgp.org --recv-keys CF9500821E9557AEB04E026C05EEA67F87749E61 || \\\n+    gpg --batch --keyserver keyserver.ubuntu.com --recv-keys CF9500821E9557AEB04E026C05EEA67F87749E61 ; \\\n+    gpg --batch --verify kafka.tgz.asc kafka.tgz; \\\n+    gpgconf --kill all; \\\n+    rm -rf \"$GNUPGHOME\" kafka.tgz.asc; \\\n+    mkdir opt/kafka; \\\n     tar xfz kafka.tgz -C /opt/kafka --strip-components 1; \\\n-    wget -nv -O KEYS https://downloads.apache.org/kafka/KEYS; \\\n-    gpg --import KEYS; \\\n-    gpg --batch --verify kafka.tgz.asc kafka.tgz\n-\n-# Generate jsa files using dynamic CDS for kafka server start command and kafka storage format command\n-RUN /etc/kafka/docker/jsa_launch\n+    # Generate jsa files using dynamic CDS for kafka server start command and kafka storage format command\n+    /etc/kafka/docker/jsa_launch\n \n \n FROM eclipse-temurin:21-jre-alpine\n \n # exposed ports\n EXPOSE 9092\n \n-USER root\n-\n-# Get Kafka from https://archive.apache.org/dist/kafka, url passed as env var, for version 3.7.0\n-ENV kafka_url https://archive.apache.org/dist/kafka/3.7.0/kafka_2.13-3.7.0.tgz\n-ENV build_date 2024-06-11\n+# Get Kafka from https://archive.apache.org/dist/kafka, url passed as env var, for version 3.8.0\n+ENV kafka_url https://archive.apache.org/dist/kafka/3.8.0/kafka_2.13-3.8.0.tgz\n+ENV build_date 2024-08-13",
    "repo_full_name": "apache/kafka",
    "discussion_comments": [
      {
        "comment_id": "1989823433",
        "repo_full_name": "apache/kafka",
        "pr_number": 16768,
        "pr_file": "docker/docker_official_images/3.8.0/jvm/Dockerfile",
        "discussion_id": "1989823433",
        "commented_code": "@@ -18,58 +18,54 @@\n \n FROM eclipse-temurin:21-jre-alpine AS build-jsa\n \n-USER root\n-\n-# Get Kafka from https://archive.apache.org/dist/kafka, url passed as env var, for version 3.7.0\n-ENV kafka_url https://archive.apache.org/dist/kafka/3.7.0/kafka_2.13-3.7.0.tgz\n+# Get Kafka from https://archive.apache.org/dist/kafka, url passed as env var, for version 3.8.0\n+ENV kafka_url https://archive.apache.org/dist/kafka/3.8.0/kafka_2.13-3.8.0.tgz\n \n COPY jsa_launch /etc/kafka/docker/jsa_launch\n \n RUN set -eux ; \\\n-    apk update ; \\\n-    apk upgrade ; \\\n     apk add --no-cache wget gcompat gpg gpg-agent procps bash; \\\n-    mkdir opt/kafka; \\\n     wget -nv -O kafka.tgz \"$kafka_url\"; \\\n     wget -nv -O kafka.tgz.asc \"$kafka_url.asc\"; \\\n+    export GNUPGHOME=\"$(mktemp -d)\"; \\\n+    gpg --batch --keyserver hkp://keys.openpgp.org --recv-keys CF9500821E9557AEB04E026C05EEA67F87749E61 || \\\n+    gpg --batch --keyserver keyserver.ubuntu.com --recv-keys CF9500821E9557AEB04E026C05EEA67F87749E61 ; \\\n+    gpg --batch --verify kafka.tgz.asc kafka.tgz; \\\n+    gpgconf --kill all; \\\n+    rm -rf \"$GNUPGHOME\" kafka.tgz.asc; \\\n+    mkdir opt/kafka; \\\n     tar xfz kafka.tgz -C /opt/kafka --strip-components 1; \\\n-    wget -nv -O KEYS https://downloads.apache.org/kafka/KEYS; \\\n-    gpg --import KEYS; \\\n-    gpg --batch --verify kafka.tgz.asc kafka.tgz\n-\n-# Generate jsa files using dynamic CDS for kafka server start command and kafka storage format command\n-RUN /etc/kafka/docker/jsa_launch\n+    # Generate jsa files using dynamic CDS for kafka server start command and kafka storage format command\n+    /etc/kafka/docker/jsa_launch\n \n \n FROM eclipse-temurin:21-jre-alpine\n \n # exposed ports\n EXPOSE 9092\n \n-USER root\n-\n-# Get Kafka from https://archive.apache.org/dist/kafka, url passed as env var, for version 3.7.0\n-ENV kafka_url https://archive.apache.org/dist/kafka/3.7.0/kafka_2.13-3.7.0.tgz\n-ENV build_date 2024-06-11\n+# Get Kafka from https://archive.apache.org/dist/kafka, url passed as env var, for version 3.8.0\n+ENV kafka_url https://archive.apache.org/dist/kafka/3.8.0/kafka_2.13-3.8.0.tgz\n+ENV build_date 2024-08-13",
        "comment_created_at": "2025-03-11T17:35:42+00:00",
        "comment_author": "tianon",
        "comment_body": "This is not going to be accurate -- this image will be rebuilt any time the base image updates, so this and the associated `LABEL` should be dropped.",
        "pr_file_module": null
      }
    ]
  }
]