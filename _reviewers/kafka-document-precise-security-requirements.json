[
  {
    "discussion_id": "2190507035",
    "pr_number": 20084,
    "pr_file": "docs/streams/developer-guide/security.html",
    "created_at": "2025-07-07T16:13:04+00:00",
    "commented_code": "(see <a class=\"reference external\" href=\"https://cwiki.apache.org/confluence/x/zlOHB\">KIP-277</a>\n                 and <a class=\"reference external\" href=\"https://cwiki.apache.org/confluence/x/QpvLB\">KIP-290</a> for details).\n             </p>\n+            <div class=\"admonition best-practice\">\n+                <p class=\"first admonition-title\">Best Practice</p>\n+                <p class=\"last\">For secure Streams deployments:\n+                <ul class=\"simple\">\n+                    <li><strong>Pre-create internal topics</strong> to avoid requiring <code>CREATE</code> permissions</li>\n+                    <li>Grant <strong>minimal required permissions</strong>:\n+                        <ul>\n+                            <li><code>READ</code> on group <code>${application.id}</code></li>\n+                            <li><code>DESCRIBE_CONFIGS</code> on topics</li>",
    "repo_full_name": "apache/kafka",
    "discussion_comments": [
      {
        "comment_id": "2190507035",
        "repo_full_name": "apache/kafka",
        "pr_number": 20084,
        "pr_file": "docs/streams/developer-guide/security.html",
        "discussion_id": "2190507035",
        "commented_code": "@@ -88,6 +140,23 @@\n                 (see <a class=\"reference external\" href=\"https://cwiki.apache.org/confluence/x/zlOHB\">KIP-277</a>\n                 and <a class=\"reference external\" href=\"https://cwiki.apache.org/confluence/x/QpvLB\">KIP-290</a> for details).\n             </p>\n+            <div class=\"admonition best-practice\">\n+                <p class=\"first admonition-title\">Best Practice</p>\n+                <p class=\"last\">For secure Streams deployments:\n+                <ul class=\"simple\">\n+                    <li><strong>Pre-create internal topics</strong> to avoid requiring <code>CREATE</code> permissions</li>\n+                    <li>Grant <strong>minimal required permissions</strong>:\n+                        <ul>\n+                            <li><code>READ</code> on group <code>${application.id}</code></li>\n+                            <li><code>DESCRIBE_CONFIGS</code> on topics</li>",
        "comment_created_at": "2025-07-07T16:13:04+00:00",
        "comment_author": "lucasbru",
        "comment_body": "The KIP wasn't quite up-to-date. We require DESCRIBE on all topics involved in the group topology",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2197204273",
    "pr_number": 20084,
    "pr_file": "docs/streams/developer-guide/security.html",
    "created_at": "2025-07-10T10:02:40+00:00",
    "commented_code": "the ACL set so that the application has the permissions to create, read and write\n                 <a class=\"reference internal\" href=\"manage-topics.html#streams-developer-guide-topics-internal\"><span class=\"std std-ref\">internal topics</span></a>.</p>\n \n-                <p>To avoid providing this permission to your application, you can create the required internal topics manually.\n+            <div class=\"admonition\">\n+                <p>Starting with <a class=\"reference external\" href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-1071%3A+Streams+Rebalance+Protocol\">KIP-1071</a>(Currently, it's in the Early Access phase), additional ACLs are required for the new Streams rebalance protocol. You can enable this protocol by using the <code>group.protocol=streams</code> configuration:</p>\n+            </div>\n+\n+            <table border=\"1\" class=\"docutils\">\n+                <colgroup>\n+                    <col width=\"25%\">\n+                    <col width=\"15%\">\n+                    <col width=\"20%\">\n+                    <col width=\"40%\">\n+                </colgroup>\n+                <thead valign=\"bottom\">\n+                <tr class=\"row-odd\"><th class=\"head\">API PROTOCOL</th>\n+                    <th class=\"head\">OPERATION</th>\n+                    <th class=\"head\">Resource</th>\n+                    <th class=\"head\">Notes</th>\n+                </tr>\n+                </thead>\n+                <tbody valign=\"top\">\n+                <tr class=\"row-even\">\n+                    <td>STREAMS_GROUP_HEARTBEAT</td>\n+                    <td>Read</td>\n+                    <td>Group</td>\n+                    <td>Required for the application's streams groups</td>\n+                </tr>\n+                <tr class=\"row-odd\">\n+                    <td>STREAMS_GROUP_HEARTBEAT</td>\n+                    <td>Create</td>\n+                    <td>Cluster <i>or</i> Topic</td>\n+                    <td>\n+                        Required only if auto-creating internal topics.<br>\n+                        \u2022 <code>Create</code> on Cluster resource<br>\n+                        \u2022 or <code>Create</code> on all topics in StateChangelogTopics and RepartitionSourceTopics<br>\n+                        Not required if internal topics are pre-created\n+                    </td>\n+                </tr>\n+                <tr class=\"row-even\">\n+                    <td>STREAMS_GROUP_HEARTBEAT</td>\n+                    <td>Describe</td>\n+                    <td>Topic</td>\n+                    <td>Required for all topics included in the message</td>",
    "repo_full_name": "apache/kafka",
    "discussion_comments": [
      {
        "comment_id": "2197204273",
        "repo_full_name": "apache/kafka",
        "pr_number": 20084,
        "pr_file": "docs/streams/developer-guide/security.html",
        "discussion_id": "2197204273",
        "commented_code": "@@ -70,7 +70,65 @@\n                 the ACL set so that the application has the permissions to create, read and write\n                 <a class=\"reference internal\" href=\"manage-topics.html#streams-developer-guide-topics-internal\"><span class=\"std std-ref\">internal topics</span></a>.</p>\n \n-                <p>To avoid providing this permission to your application, you can create the required internal topics manually.\n+            <div class=\"admonition\">\n+                <p>Starting with <a class=\"reference external\" href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-1071%3A+Streams+Rebalance+Protocol\">KIP-1071</a>(Currently, it's in the Early Access phase), additional ACLs are required for the new Streams rebalance protocol. You can enable this protocol by using the <code>group.protocol=streams</code> configuration:</p>\n+            </div>\n+\n+            <table border=\"1\" class=\"docutils\">\n+                <colgroup>\n+                    <col width=\"25%\">\n+                    <col width=\"15%\">\n+                    <col width=\"20%\">\n+                    <col width=\"40%\">\n+                </colgroup>\n+                <thead valign=\"bottom\">\n+                <tr class=\"row-odd\"><th class=\"head\">API PROTOCOL</th>\n+                    <th class=\"head\">OPERATION</th>\n+                    <th class=\"head\">Resource</th>\n+                    <th class=\"head\">Notes</th>\n+                </tr>\n+                </thead>\n+                <tbody valign=\"top\">\n+                <tr class=\"row-even\">\n+                    <td>STREAMS_GROUP_HEARTBEAT</td>\n+                    <td>Read</td>\n+                    <td>Group</td>\n+                    <td>Required for the application's streams groups</td>\n+                </tr>\n+                <tr class=\"row-odd\">\n+                    <td>STREAMS_GROUP_HEARTBEAT</td>\n+                    <td>Create</td>\n+                    <td>Cluster <i>or</i> Topic</td>\n+                    <td>\n+                        Required only if auto-creating internal topics.<br>\n+                        \u2022 <code>Create</code> on Cluster resource<br>\n+                        \u2022 or <code>Create</code> on all topics in StateChangelogTopics and RepartitionSourceTopics<br>\n+                        Not required if internal topics are pre-created\n+                    </td>\n+                </tr>\n+                <tr class=\"row-even\">\n+                    <td>STREAMS_GROUP_HEARTBEAT</td>\n+                    <td>Describe</td>\n+                    <td>Topic</td>\n+                    <td>Required for all topics included in the message</td>",
        "comment_created_at": "2025-07-10T10:02:40+00:00",
        "comment_author": "lucasbru",
        "comment_body": "```suggestion\r\n                    <td>Required for all topics used in the application's topology, when first joining.</td>\r\n```",
        "pr_file_module": null
      }
    ]
  }
]