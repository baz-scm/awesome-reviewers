[
  {
    "discussion_id": "1958604469",
    "pr_number": 18929,
    "pr_file": "core/src/main/scala/kafka/server/KafkaApis.scala",
    "created_at": "2025-02-17T17:36:51+00:00",
    "commented_code": "def handleAlterShareGroupOffsetsRequest(request: RequestChannel.Request): Unit = {\n     val alterShareGroupOffsetsRequest = request.body[AlterShareGroupOffsetsRequest]\n-    requestHelper.sendMaybeThrottle(request, alterShareGroupOffsetsRequest.getErrorResponse(Errors.UNSUPPORTED_VERSION.exception))\n+    val groupId = alterShareGroupOffsetsRequest.data.groupId\n+    if (!isShareGroupProtocolEnabled) {\n+      requestHelper.sendMaybeThrottle(request, alterShareGroupOffsetsRequest.getErrorResponse(Errors.UNSUPPORTED_VERSION.exception))\n+    } else if (!authHelper.authorize(request.context, WRITE, GROUP, groupId)) {",
    "repo_full_name": "apache/kafka",
    "discussion_comments": [
      {
        "comment_id": "1958604469",
        "repo_full_name": "apache/kafka",
        "pr_number": 18929,
        "pr_file": "core/src/main/scala/kafka/server/KafkaApis.scala",
        "discussion_id": "1958604469",
        "commented_code": "@@ -3272,7 +3272,36 @@ class KafkaApis(val requestChannel: RequestChannel,\n \n   def handleAlterShareGroupOffsetsRequest(request: RequestChannel.Request): Unit = {\n     val alterShareGroupOffsetsRequest = request.body[AlterShareGroupOffsetsRequest]\n-    requestHelper.sendMaybeThrottle(request, alterShareGroupOffsetsRequest.getErrorResponse(Errors.UNSUPPORTED_VERSION.exception))\n+    val groupId = alterShareGroupOffsetsRequest.data.groupId\n+    if (!isShareGroupProtocolEnabled) {\n+      requestHelper.sendMaybeThrottle(request, alterShareGroupOffsetsRequest.getErrorResponse(Errors.UNSUPPORTED_VERSION.exception))\n+    } else if (!authHelper.authorize(request.context, WRITE, GROUP, groupId)) {",
        "comment_created_at": "2025-02-17T17:36:51+00:00",
        "comment_author": "AndrewJSchofield",
        "comment_body": "I know this is still in draft but I am making sure all admin operations on share groups are correctly authorised. This should be READ GROUP.",
        "pr_file_module": null
      },
      {
        "comment_id": "1958958050",
        "repo_full_name": "apache/kafka",
        "pr_number": 18929,
        "pr_file": "core/src/main/scala/kafka/server/KafkaApis.scala",
        "discussion_id": "1958604469",
        "commented_code": "@@ -3272,7 +3272,36 @@ class KafkaApis(val requestChannel: RequestChannel,\n \n   def handleAlterShareGroupOffsetsRequest(request: RequestChannel.Request): Unit = {\n     val alterShareGroupOffsetsRequest = request.body[AlterShareGroupOffsetsRequest]\n-    requestHelper.sendMaybeThrottle(request, alterShareGroupOffsetsRequest.getErrorResponse(Errors.UNSUPPORTED_VERSION.exception))\n+    val groupId = alterShareGroupOffsetsRequest.data.groupId\n+    if (!isShareGroupProtocolEnabled) {\n+      requestHelper.sendMaybeThrottle(request, alterShareGroupOffsetsRequest.getErrorResponse(Errors.UNSUPPORTED_VERSION.exception))\n+    } else if (!authHelper.authorize(request.context, WRITE, GROUP, groupId)) {",
        "comment_created_at": "2025-02-18T01:57:52+00:00",
        "comment_author": "JimmyWang6",
        "comment_body": "Got it, I will change that.",
        "pr_file_module": null
      }
    ]
  }
]