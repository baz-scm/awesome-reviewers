[
  {
    "discussion_id": "2153862953",
    "pr_number": 757,
    "pr_file": ".github/workflows/chromatic.yml",
    "created_at": "2025-06-18T07:32:05+00:00",
    "commented_code": "+name: Chromatic Visual Testing\n+\n+on:\n+    workflow_dispatch:\n+    push:\n+        branches: [main]\n+    pull_request:\n+        types: [opened, reopened, ready_for_review, synchronize]\n+        branches: [main]\n+\n+# Add concurrency to cancel in-progress jobs when a new workflow is triggered\n+concurrency:\n+    group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}\n+    cancel-in-progress: true\n+\n+env:\n+    NODE_VERSION: 20.18.1\n+    PNPM_VERSION: 10.8.1\n+\n+jobs:\n+    chromatic:\n+        runs-on: ubuntu-latest\n+        steps:\n+            - name: Checkout code\n+              uses: actions/checkout@v4\n+              with:\n+                  # Chromatic needs full git history for baseline comparison\n+                  fetch-depth: 0\n+\n+            - name: Install pnpm\n+              uses: pnpm/action-setup@v4\n+              with:\n+                  version: ${{ env.PNPM_VERSION }}\n+\n+            - name: Setup Node.js\n+              uses: actions/setup-node@v4\n+              with:\n+                  node-version: ${{ env.NODE_VERSION }}\n+                  cache: \"pnpm\"\n+\n+            - name: Install dependencies\n+              run: pnpm install\n+\n+            - name: Build Storybook\n+              run: pnpm --filter @roo-code/storybook build-storybook\n+\n+            - name: Run Chromatic\n+              id: chromatic\n+              uses: chromaui/action@latest\n+              with:\n+                  # Chromatic project token (you'll need to add this as a GitHub secret)\n+                  projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}",
    "repo_full_name": "Kilo-Org/kilocode",
    "discussion_comments": [
      {
        "comment_id": "2153862953",
        "repo_full_name": "Kilo-Org/kilocode",
        "pr_number": 757,
        "pr_file": ".github/workflows/chromatic.yml",
        "discussion_id": "2153862953",
        "commented_code": "@@ -0,0 +1,102 @@\n+name: Chromatic Visual Testing\n+\n+on:\n+    workflow_dispatch:\n+    push:\n+        branches: [main]\n+    pull_request:\n+        types: [opened, reopened, ready_for_review, synchronize]\n+        branches: [main]\n+\n+# Add concurrency to cancel in-progress jobs when a new workflow is triggered\n+concurrency:\n+    group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}\n+    cancel-in-progress: true\n+\n+env:\n+    NODE_VERSION: 20.18.1\n+    PNPM_VERSION: 10.8.1\n+\n+jobs:\n+    chromatic:\n+        runs-on: ubuntu-latest\n+        steps:\n+            - name: Checkout code\n+              uses: actions/checkout@v4\n+              with:\n+                  # Chromatic needs full git history for baseline comparison\n+                  fetch-depth: 0\n+\n+            - name: Install pnpm\n+              uses: pnpm/action-setup@v4\n+              with:\n+                  version: ${{ env.PNPM_VERSION }}\n+\n+            - name: Setup Node.js\n+              uses: actions/setup-node@v4\n+              with:\n+                  node-version: ${{ env.NODE_VERSION }}\n+                  cache: \"pnpm\"\n+\n+            - name: Install dependencies\n+              run: pnpm install\n+\n+            - name: Build Storybook\n+              run: pnpm --filter @roo-code/storybook build-storybook\n+\n+            - name: Run Chromatic\n+              id: chromatic\n+              uses: chromaui/action@latest\n+              with:\n+                  # Chromatic project token (you'll need to add this as a GitHub secret)\n+                  projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}",
        "comment_created_at": "2025-06-18T07:32:05+00:00",
        "comment_author": "RSO",
        "comment_body": "Would this work when an external user creates a PR? I thought that GitHub made secrets unavailable for workflows triggered from forks.",
        "pr_file_module": null
      },
      {
        "comment_id": "2155004144",
        "repo_full_name": "Kilo-Org/kilocode",
        "pr_number": 757,
        "pr_file": ".github/workflows/chromatic.yml",
        "discussion_id": "2153862953",
        "commented_code": "@@ -0,0 +1,102 @@\n+name: Chromatic Visual Testing\n+\n+on:\n+    workflow_dispatch:\n+    push:\n+        branches: [main]\n+    pull_request:\n+        types: [opened, reopened, ready_for_review, synchronize]\n+        branches: [main]\n+\n+# Add concurrency to cancel in-progress jobs when a new workflow is triggered\n+concurrency:\n+    group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}\n+    cancel-in-progress: true\n+\n+env:\n+    NODE_VERSION: 20.18.1\n+    PNPM_VERSION: 10.8.1\n+\n+jobs:\n+    chromatic:\n+        runs-on: ubuntu-latest\n+        steps:\n+            - name: Checkout code\n+              uses: actions/checkout@v4\n+              with:\n+                  # Chromatic needs full git history for baseline comparison\n+                  fetch-depth: 0\n+\n+            - name: Install pnpm\n+              uses: pnpm/action-setup@v4\n+              with:\n+                  version: ${{ env.PNPM_VERSION }}\n+\n+            - name: Setup Node.js\n+              uses: actions/setup-node@v4\n+              with:\n+                  node-version: ${{ env.NODE_VERSION }}\n+                  cache: \"pnpm\"\n+\n+            - name: Install dependencies\n+              run: pnpm install\n+\n+            - name: Build Storybook\n+              run: pnpm --filter @roo-code/storybook build-storybook\n+\n+            - name: Run Chromatic\n+              id: chromatic\n+              uses: chromaui/action@latest\n+              with:\n+                  # Chromatic project token (you'll need to add this as a GitHub secret)\n+                  projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}",
        "comment_created_at": "2025-06-18T16:08:51+00:00",
        "comment_author": "hassoncs",
        "comment_body": "Good question / point\u2013 I've never set something like this up for a public repo, but I'll look into it, thank you! ",
        "pr_file_module": null
      },
      {
        "comment_id": "2155024615",
        "repo_full_name": "Kilo-Org/kilocode",
        "pr_number": 757,
        "pr_file": ".github/workflows/chromatic.yml",
        "discussion_id": "2153862953",
        "commented_code": "@@ -0,0 +1,102 @@\n+name: Chromatic Visual Testing\n+\n+on:\n+    workflow_dispatch:\n+    push:\n+        branches: [main]\n+    pull_request:\n+        types: [opened, reopened, ready_for_review, synchronize]\n+        branches: [main]\n+\n+# Add concurrency to cancel in-progress jobs when a new workflow is triggered\n+concurrency:\n+    group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}\n+    cancel-in-progress: true\n+\n+env:\n+    NODE_VERSION: 20.18.1\n+    PNPM_VERSION: 10.8.1\n+\n+jobs:\n+    chromatic:\n+        runs-on: ubuntu-latest\n+        steps:\n+            - name: Checkout code\n+              uses: actions/checkout@v4\n+              with:\n+                  # Chromatic needs full git history for baseline comparison\n+                  fetch-depth: 0\n+\n+            - name: Install pnpm\n+              uses: pnpm/action-setup@v4\n+              with:\n+                  version: ${{ env.PNPM_VERSION }}\n+\n+            - name: Setup Node.js\n+              uses: actions/setup-node@v4\n+              with:\n+                  node-version: ${{ env.NODE_VERSION }}\n+                  cache: \"pnpm\"\n+\n+            - name: Install dependencies\n+              run: pnpm install\n+\n+            - name: Build Storybook\n+              run: pnpm --filter @roo-code/storybook build-storybook\n+\n+            - name: Run Chromatic\n+              id: chromatic\n+              uses: chromaui/action@latest\n+              with:\n+                  # Chromatic project token (you'll need to add this as a GitHub secret)\n+                  projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}",
        "comment_created_at": "2025-06-18T16:18:23+00:00",
        "comment_author": "RSO",
        "comment_body": "The only thing I know is that we currently can't have CI builds for dependabot PRs in our private repository, because it doesn't get access to secrets, because there's an attack vector where a malicious change is pushed to an npm package, and that package reads secrets in a `postinstall` script.\r\n\r\nThat being said, it did seem like Chromatic has a public repo that's set up in exactly the same way that you have here, so maybe this case is different? \ud83d\ude15 ",
        "pr_file_module": null
      },
      {
        "comment_id": "2155267654",
        "repo_full_name": "Kilo-Org/kilocode",
        "pr_number": 757,
        "pr_file": ".github/workflows/chromatic.yml",
        "discussion_id": "2153862953",
        "commented_code": "@@ -0,0 +1,102 @@\n+name: Chromatic Visual Testing\n+\n+on:\n+    workflow_dispatch:\n+    push:\n+        branches: [main]\n+    pull_request:\n+        types: [opened, reopened, ready_for_review, synchronize]\n+        branches: [main]\n+\n+# Add concurrency to cancel in-progress jobs when a new workflow is triggered\n+concurrency:\n+    group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}\n+    cancel-in-progress: true\n+\n+env:\n+    NODE_VERSION: 20.18.1\n+    PNPM_VERSION: 10.8.1\n+\n+jobs:\n+    chromatic:\n+        runs-on: ubuntu-latest\n+        steps:\n+            - name: Checkout code\n+              uses: actions/checkout@v4\n+              with:\n+                  # Chromatic needs full git history for baseline comparison\n+                  fetch-depth: 0\n+\n+            - name: Install pnpm\n+              uses: pnpm/action-setup@v4\n+              with:\n+                  version: ${{ env.PNPM_VERSION }}\n+\n+            - name: Setup Node.js\n+              uses: actions/setup-node@v4\n+              with:\n+                  node-version: ${{ env.NODE_VERSION }}\n+                  cache: \"pnpm\"\n+\n+            - name: Install dependencies\n+              run: pnpm install\n+\n+            - name: Build Storybook\n+              run: pnpm --filter @roo-code/storybook build-storybook\n+\n+            - name: Run Chromatic\n+              id: chromatic\n+              uses: chromaui/action@latest\n+              with:\n+                  # Chromatic project token (you'll need to add this as a GitHub secret)\n+                  projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}",
        "comment_created_at": "2025-06-18T18:45:31+00:00",
        "comment_author": "hassoncs",
        "comment_body": "AI Summary of the research. TLDR; it's ok for Chromatic\n\nThe Security Concern is Real\nRSO is correct that GitHub doesn't provide secrets to workflows triggered by external forks or dependabot PRs. This is intentional security - imagine if a malicious actor could:\n\nFork your repo\nAdd a malicious postinstall script to package.json that exfiltrates secrets\nCreate a PR that triggers your CI with access to your secrets\nThat would be a disaster.\n\nWhy Chromatic is Different\nThe key difference with Chromatic is in what the secret actually does:\n\nTraditional secrets (API keys, database passwords, deployment tokens): Give access to critical infrastructure\nChromatic project token: Only allows uploading visual snapshots to your Chromatic project\nThe Tradeoff for Open Source\nWhen you share a Chromatic project token publicly (as the docs suggest), you're essentially saying:\n\n\u2705 \"Anyone can run visual tests and consume my snapshot quota\"\n\u274c \"But they can't access my account, change settings, or approve changes\"\nThis is why it works for open source - the \"blast radius\" of a compromised Chromatic token is limited to snapshot quota usage, not system compromise.",
        "pr_file_module": null
      },
      {
        "comment_id": "2155444242",
        "repo_full_name": "Kilo-Org/kilocode",
        "pr_number": 757,
        "pr_file": ".github/workflows/chromatic.yml",
        "discussion_id": "2153862953",
        "commented_code": "@@ -0,0 +1,102 @@\n+name: Chromatic Visual Testing\n+\n+on:\n+    workflow_dispatch:\n+    push:\n+        branches: [main]\n+    pull_request:\n+        types: [opened, reopened, ready_for_review, synchronize]\n+        branches: [main]\n+\n+# Add concurrency to cancel in-progress jobs when a new workflow is triggered\n+concurrency:\n+    group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}\n+    cancel-in-progress: true\n+\n+env:\n+    NODE_VERSION: 20.18.1\n+    PNPM_VERSION: 10.8.1\n+\n+jobs:\n+    chromatic:\n+        runs-on: ubuntu-latest\n+        steps:\n+            - name: Checkout code\n+              uses: actions/checkout@v4\n+              with:\n+                  # Chromatic needs full git history for baseline comparison\n+                  fetch-depth: 0\n+\n+            - name: Install pnpm\n+              uses: pnpm/action-setup@v4\n+              with:\n+                  version: ${{ env.PNPM_VERSION }}\n+\n+            - name: Setup Node.js\n+              uses: actions/setup-node@v4\n+              with:\n+                  node-version: ${{ env.NODE_VERSION }}\n+                  cache: \"pnpm\"\n+\n+            - name: Install dependencies\n+              run: pnpm install\n+\n+            - name: Build Storybook\n+              run: pnpm --filter @roo-code/storybook build-storybook\n+\n+            - name: Run Chromatic\n+              id: chromatic\n+              uses: chromaui/action@latest\n+              with:\n+                  # Chromatic project token (you'll need to add this as a GitHub secret)\n+                  projectToken: ${{ secrets.CHROMATIC_PROJECT_TOKEN }}",
        "comment_created_at": "2025-06-18T20:32:24+00:00",
        "comment_author": "chrarnoldus",
        "comment_body": "PRs from external users currently require approval from us before workflows run.\r\n\r\n![image](https://github.com/user-attachments/assets/083443cb-c846-4873-934d-1bd48b4fa144)\r\n",
        "pr_file_module": null
      }
    ]
  }
]