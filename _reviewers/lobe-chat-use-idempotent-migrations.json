[
  {
    "discussion_id": "2300129147",
    "pr_number": 8916,
    "pr_file": "packages/database/migrations/0030_cuddly_madame_masque.sql",
    "created_at": "2025-08-26T07:53:00+00:00",
    "commented_code": "+CREATE TABLE \"chat_groups\" (",
    "repo_full_name": "lobehub/lobe-chat",
    "discussion_comments": [
      {
        "comment_id": "2300129147",
        "repo_full_name": "lobehub/lobe-chat",
        "pr_number": 8916,
        "pr_file": "packages/database/migrations/0030_cuddly_madame_masque.sql",
        "discussion_id": "2300129147",
        "commented_code": "@@ -0,0 +1,40 @@\n+CREATE TABLE \"chat_groups\" (",
        "comment_created_at": "2025-08-26T07:53:00+00:00",
        "comment_author": "arvinxx",
        "comment_body": "\u770b\u4e0b\u5176\u4ed6\u7684\u51e0\u4e2a\u8868\uff08\u6bd4\u5982 0029 \uff09\uff0c\u52a0\u4e00\u4e0b\u9632\u5fa1\u6027\u7684\u8bed\u6cd5\uff1a\n\n```\nCREATE TABLE IF NOT EXISTS\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2300242542",
    "pr_number": 8916,
    "pr_file": "packages/database/migrations/0030_cuddly_madame_masque.sql",
    "created_at": "2025-08-26T08:36:29+00:00",
    "commented_code": "+CREATE TABLE \"chat_groups\" (\n+\t\"id\" text PRIMARY KEY NOT NULL,\n+\t\"slug\" varchar(100),\n+\t\"title\" text,\n+\t\"description\" text,\n+\t\"config\" jsonb,\n+\t\"client_id\" text,\n+\t\"user_id\" text NOT NULL,\n+\t\"group_id\" text,\n+\t\"pinned\" boolean DEFAULT false,\n+\t\"accessed_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\t\"created_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\t\"updated_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\tCONSTRAINT \"chat_groups_slug_unique\" UNIQUE(\"slug\")\n+);\n+--> statement-breakpoint\n+CREATE TABLE \"chat_groups_agents\" (\n+\t\"chat_group_id\" text NOT NULL,\n+\t\"agent_id\" text NOT NULL,\n+\t\"user_id\" text NOT NULL,\n+\t\"enabled\" boolean DEFAULT true,\n+\t\"order\" integer DEFAULT 0,\n+\t\"role\" text DEFAULT 'participant',\n+\t\"accessed_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\t\"created_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\t\"updated_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\tCONSTRAINT \"chat_groups_agents_chat_group_id_agent_id_pk\" PRIMARY KEY(\"chat_group_id\",\"agent_id\")\n+);\n+--> statement-breakpoint\n+ALTER TABLE \"messages\" ADD COLUMN \"group_id\" text;--> statement-breakpoint",
    "repo_full_name": "lobehub/lobe-chat",
    "discussion_comments": [
      {
        "comment_id": "2300242542",
        "repo_full_name": "lobehub/lobe-chat",
        "pr_number": 8916,
        "pr_file": "packages/database/migrations/0030_cuddly_madame_masque.sql",
        "discussion_id": "2300242542",
        "commented_code": "@@ -0,0 +1,40 @@\n+CREATE TABLE \"chat_groups\" (\n+\t\"id\" text PRIMARY KEY NOT NULL,\n+\t\"slug\" varchar(100),\n+\t\"title\" text,\n+\t\"description\" text,\n+\t\"config\" jsonb,\n+\t\"client_id\" text,\n+\t\"user_id\" text NOT NULL,\n+\t\"group_id\" text,\n+\t\"pinned\" boolean DEFAULT false,\n+\t\"accessed_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\t\"created_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\t\"updated_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\tCONSTRAINT \"chat_groups_slug_unique\" UNIQUE(\"slug\")\n+);\n+--> statement-breakpoint\n+CREATE TABLE \"chat_groups_agents\" (\n+\t\"chat_group_id\" text NOT NULL,\n+\t\"agent_id\" text NOT NULL,\n+\t\"user_id\" text NOT NULL,\n+\t\"enabled\" boolean DEFAULT true,\n+\t\"order\" integer DEFAULT 0,\n+\t\"role\" text DEFAULT 'participant',\n+\t\"accessed_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\t\"created_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\t\"updated_at\" timestamp with time zone DEFAULT now() NOT NULL,\n+\tCONSTRAINT \"chat_groups_agents_chat_group_id_agent_id_pk\" PRIMARY KEY(\"chat_group_id\",\"agent_id\")\n+);\n+--> statement-breakpoint\n+ALTER TABLE \"messages\" ADD COLUMN \"group_id\" text;--> statement-breakpoint",
        "comment_created_at": "2025-08-26T08:36:29+00:00",
        "comment_author": "arvinxx",
        "comment_body": "```\nALTER TABLE \"messages\" ADD COLUMN IF NOT EXISTS\n```\n\n\u8fd9\u6837\u591a\u6b21\u6267\u884c\u7684\u65f6\u5019\u5c31\u4e0d\u4f1a\u62a5\u91cd\u590d\u7684\u9519\u8bef\u4e86",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2227211816",
    "pr_number": 8535,
    "pr_file": "src/database/migrations/0029_add_apikey_manage.sql",
    "created_at": "2025-07-24T02:58:01+00:00",
    "commented_code": "+CREATE TABLE \"api_keys\" (",
    "repo_full_name": "lobehub/lobe-chat",
    "discussion_comments": [
      {
        "comment_id": "2227211816",
        "repo_full_name": "lobehub/lobe-chat",
        "pr_number": 8535,
        "pr_file": "src/database/migrations/0029_add_apikey_manage.sql",
        "discussion_id": "2227211816",
        "commented_code": "@@ -0,0 +1,16 @@\n+CREATE TABLE \"api_keys\" (",
        "comment_created_at": "2025-07-24T02:58:01+00:00",
        "comment_author": "arvinxx",
        "comment_body": "\u8fd9\u91cc\u9632\u5fa1\u6027\u4e00\u4e0b\uff0c`CREATE TABLE IF NOT EXISTS`",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2040624995",
    "pr_number": 7382,
    "pr_file": "src/database/migrations/0020_pretty_omega_red.sql",
    "created_at": "2025-04-12T10:11:43+00:00",
    "commented_code": null,
    "repo_full_name": "lobehub/lobe-chat",
    "discussion_comments": [
      {
        "comment_id": "2040624995",
        "repo_full_name": "lobehub/lobe-chat",
        "pr_number": 7382,
        "pr_file": "src/database/migrations/0020_pretty_omega_red.sql",
        "discussion_id": "2040624995",
        "commented_code": null,
        "comment_created_at": "2025-04-12T10:11:43+00:00",
        "comment_author": "arvinxx",
        "comment_body": "1. \u6362\u6210\u8bed\u4e49\u5316\u7684\u540d\u5b57\uff0c\u6bd4\u5982 add_opening_guide.sql \uff0c\u7136\u540e meta/_journal.json \u90a3\u91cc\u4e5f\u8bb0\u5f97\u5bf9\u5e94\u6539\u4e0b\r\n2. \u7a0d\u5fae\u505a\u70b9\u9632\u5fa1\u6027\u7f16\u7a0b\uff0c\u53c2\u8003 https://github.com/lobehub/lobe-chat/blob/main/src/database/migrations/0019_add_hotkey_user_settings.sql \u8fd9\u4e2a\uff0c\u52a0\u4e00\u4e0b `IF NOT EXISTS`",
        "pr_file_module": null
      }
    ]
  }
]