[
  {
    "discussion_id": "1725740224",
    "pr_number": 31529,
    "pr_file": "app/views/admin/report_notes/_report_note.html.haml",
    "created_at": "2024-08-21T20:50:31+00:00",
    "commented_code": "-.report-notes__item\n+.report-notes__item{ id: dom_id(report_note) }\n   = image_tag report_note.account.avatar.url, class: 'report-notes__item__avatar'\n \n   .report-notes__item__header\n     %span.username\n       = link_to report_note.account.username, admin_account_path(report_note.account_id)\n-    %time.relative-formatted{ datetime: report_note.created_at.iso8601 }\n-      = l report_note.created_at.to_date\n+    %a.timestamp{ href: \"##{dom_id(report_note)}\" }\n+      %time.relative-formatted{ datetime: report_note.created_at.iso8601 }\n+        = l report_note.created_at.to_date\n \n   .report-notes__item__content\n-    = linkify(report_note.content)\n+    - if report_note.is_a?(InstanceNote)\n+      = report_note.formatted_content\n+    - else\n+      = linkify(report_note.content)\n \n   - if can?(:destroy, report_note)\n     .report-notes__item__actions\n       - if report_note.is_a?(AccountModerationNote)\n         = table_link_to 'delete', t('admin.reports.notes.delete'), admin_account_moderation_note_path(report_note), method: :delete\n+      - if report_note.is_a?(InstanceNote)\n+        = table_link_to 'delete', t('admin.reports.notes.delete'), admin_instance_note_path(instance_id: report_note.domain, id: report_note.id), method: :delete",
    "repo_full_name": "mastodon/mastodon",
    "discussion_comments": [
      {
        "comment_id": "1725740224",
        "repo_full_name": "mastodon/mastodon",
        "pr_number": 31529,
        "pr_file": "app/views/admin/report_notes/_report_note.html.haml",
        "discussion_id": "1725740224",
        "commented_code": "@@ -1,18 +1,24 @@\n-.report-notes__item\n+.report-notes__item{ id: dom_id(report_note) }\n   = image_tag report_note.account.avatar.url, class: 'report-notes__item__avatar'\n \n   .report-notes__item__header\n     %span.username\n       = link_to report_note.account.username, admin_account_path(report_note.account_id)\n-    %time.relative-formatted{ datetime: report_note.created_at.iso8601 }\n-      = l report_note.created_at.to_date\n+    %a.timestamp{ href: \"##{dom_id(report_note)}\" }\n+      %time.relative-formatted{ datetime: report_note.created_at.iso8601 }\n+        = l report_note.created_at.to_date\n \n   .report-notes__item__content\n-    = linkify(report_note.content)\n+    - if report_note.is_a?(InstanceNote)\n+      = report_note.formatted_content\n+    - else\n+      = linkify(report_note.content)\n \n   - if can?(:destroy, report_note)\n     .report-notes__item__actions\n       - if report_note.is_a?(AccountModerationNote)\n         = table_link_to 'delete', t('admin.reports.notes.delete'), admin_account_moderation_note_path(report_note), method: :delete\n+      - if report_note.is_a?(InstanceNote)\n+        = table_link_to 'delete', t('admin.reports.notes.delete'), admin_instance_note_path(instance_id: report_note.domain, id: report_note.id), method: :delete",
        "comment_created_at": "2024-08-21T20:50:31+00:00",
        "comment_author": "ThisIsMissEm",
        "comment_body": "This is a little clunky because I nested the notes under the instances routes, so:\r\n\r\n```\r\n/admin/instances/:instance_id/notes/:id\r\n```\r\n\r\nWhere as both Report Notes and Account Moderation Notes are top-level routes in admin:\r\n\r\n```\r\n/admin/account_moderation_notes/:id\r\n/admin/report_notes/:id\r\n```\r\n\r\nI think those probably should have been nested originally.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1730422824",
    "pr_number": 31529,
    "pr_file": "app/views/admin/report_notes/_report_note.html.haml",
    "created_at": "2024-08-25T20:07:54+00:00",
    "commented_code": "-.report-notes__item\n+.report-notes__item{ id: dom_id(report_note) }",
    "repo_full_name": "mastodon/mastodon",
    "discussion_comments": [
      {
        "comment_id": "1730422824",
        "repo_full_name": "mastodon/mastodon",
        "pr_number": 31529,
        "pr_file": "app/views/admin/report_notes/_report_note.html.haml",
        "discussion_id": "1730422824",
        "commented_code": "@@ -1,11 +1,12 @@\n-.report-notes__item\n+.report-notes__item{ id: dom_id(report_note) }",
        "comment_created_at": "2024-08-25T20:07:54+00:00",
        "comment_author": "ThisIsMissEm",
        "comment_body": "This allows people to permalink to a specific note",
        "pr_file_module": null
      }
    ]
  }
]