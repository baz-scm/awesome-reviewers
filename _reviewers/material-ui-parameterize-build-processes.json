[
  {
    "discussion_id": "1928588010",
    "pr_number": 43264,
    "pr_file": "packages/mui-icons-material/package.json",
    "created_at": "2025-01-24T12:12:04+00:00",
    "commented_code": "\"url\": \"https://opencollective.com/mui-org\"\n   },\n   \"scripts\": {\n-    \"build\": \"shx cp -r lib/ build/ && pnpm build:typings && pnpm build:copy-files\",\n-    \"build:lib\": \"pnpm build:node && pnpm build:stable\",\n+    \"build\": \"shx cp -r lib/ build/ && pnpm build:copy-files && pnpm build:esm-pkg\",\n+    \"build:esm-pkg\": \"node ./scripts/create-esm-package-json.mjs\",\n+    \"build:lib\": \"pnpm build:node && pnpm build:stable && rm lib/esm/package.json && pnpm build:typings\",",
    "repo_full_name": "mui/material-ui",
    "discussion_comments": [
      {
        "comment_id": "1928588010",
        "repo_full_name": "mui/material-ui",
        "pr_number": 43264,
        "pr_file": "packages/mui-icons-material/package.json",
        "discussion_id": "1928588010",
        "commented_code": "@@ -28,8 +28,9 @@\n     \"url\": \"https://opencollective.com/mui-org\"\n   },\n   \"scripts\": {\n-    \"build\": \"shx cp -r lib/ build/ && pnpm build:typings && pnpm build:copy-files\",\n-    \"build:lib\": \"pnpm build:node && pnpm build:stable\",\n+    \"build\": \"shx cp -r lib/ build/ && pnpm build:copy-files && pnpm build:esm-pkg\",\n+    \"build:esm-pkg\": \"node ./scripts/create-esm-package-json.mjs\",\n+    \"build:lib\": \"pnpm build:node && pnpm build:stable && rm lib/esm/package.json && pnpm build:typings\",",
        "comment_created_at": "2025-01-24T12:12:04+00:00",
        "comment_author": "DiegoAndai",
        "comment_body": "What creates the `lib/esm/package.json` file that we need to remove? Can we stop creating it?",
        "pr_file_module": null
      },
      {
        "comment_id": "1928832579",
        "repo_full_name": "mui/material-ui",
        "pr_number": 43264,
        "pr_file": "packages/mui-icons-material/package.json",
        "discussion_id": "1928588010",
        "commented_code": "@@ -28,8 +28,9 @@\n     \"url\": \"https://opencollective.com/mui-org\"\n   },\n   \"scripts\": {\n-    \"build\": \"shx cp -r lib/ build/ && pnpm build:typings && pnpm build:copy-files\",\n-    \"build:lib\": \"pnpm build:node && pnpm build:stable\",\n+    \"build\": \"shx cp -r lib/ build/ && pnpm build:copy-files && pnpm build:esm-pkg\",\n+    \"build:esm-pkg\": \"node ./scripts/create-esm-package-json.mjs\",\n+    \"build:lib\": \"pnpm build:node && pnpm build:stable && rm lib/esm/package.json && pnpm build:typings\",",
        "comment_created_at": "2025-01-24T15:03:55+00:00",
        "comment_author": "Janpot",
        "comment_body": "The build script creates it. The icons package is a bit special as it bakes built files into the repo. This package.json conflicts a bit with the aliasing setup for the docs. I didn't necessarily want to add a special case to the build for a single package, but we could.",
        "pr_file_module": null
      },
      {
        "comment_id": "1931052832",
        "repo_full_name": "mui/material-ui",
        "pr_number": 43264,
        "pr_file": "packages/mui-icons-material/package.json",
        "discussion_id": "1928588010",
        "commented_code": "@@ -28,8 +28,9 @@\n     \"url\": \"https://opencollective.com/mui-org\"\n   },\n   \"scripts\": {\n-    \"build\": \"shx cp -r lib/ build/ && pnpm build:typings && pnpm build:copy-files\",\n-    \"build:lib\": \"pnpm build:node && pnpm build:stable\",\n+    \"build\": \"shx cp -r lib/ build/ && pnpm build:copy-files && pnpm build:esm-pkg\",\n+    \"build:esm-pkg\": \"node ./scripts/create-esm-package-json.mjs\",\n+    \"build:lib\": \"pnpm build:node && pnpm build:stable && rm lib/esm/package.json && pnpm build:typings\",",
        "comment_created_at": "2025-01-27T19:05:41+00:00",
        "comment_author": "DiegoAndai",
        "comment_body": "> I didn't necessarily want to add a special case to the build for a single package, but we could.\r\n\r\nThat's ok, I was just checking üëçüèº let's go with whatever option you think it's better.",
        "pr_file_module": null
      },
      {
        "comment_id": "1931779868",
        "repo_full_name": "mui/material-ui",
        "pr_number": 43264,
        "pr_file": "packages/mui-icons-material/package.json",
        "discussion_id": "1928588010",
        "commented_code": "@@ -28,8 +28,9 @@\n     \"url\": \"https://opencollective.com/mui-org\"\n   },\n   \"scripts\": {\n-    \"build\": \"shx cp -r lib/ build/ && pnpm build:typings && pnpm build:copy-files\",\n-    \"build:lib\": \"pnpm build:node && pnpm build:stable\",\n+    \"build\": \"shx cp -r lib/ build/ && pnpm build:copy-files && pnpm build:esm-pkg\",\n+    \"build:esm-pkg\": \"node ./scripts/create-esm-package-json.mjs\",\n+    \"build:lib\": \"pnpm build:node && pnpm build:stable && rm lib/esm/package.json && pnpm build:typings\",",
        "comment_created_at": "2025-01-28T09:08:04+00:00",
        "comment_author": "Janpot",
        "comment_body": "I'm adding a `--skipEsmPkg`. ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1971727902",
    "pr_number": 45421,
    "pr_file": "package.json",
    "created_at": "2025-02-26T14:46:57+00:00",
    "commented_code": "\"release:build\": \"lerna run --concurrency 8 --no-private build --skip-nx-cache\",\n     \"release:changelog\": \"node scripts/releaseChangelog.mjs\",\n     \"release:publish\": \"pnpm publish --recursive --tag next\",\n-    \"release:publish:dry-run\": \"pnpm publish --recursive --tag next --registry=\\\"http://localhost:4873/\\\"\",",
    "repo_full_name": "mui/material-ui",
    "discussion_comments": [
      {
        "comment_id": "1971727902",
        "repo_full_name": "mui/material-ui",
        "pr_number": 45421,
        "pr_file": "package.json",
        "discussion_id": "1971727902",
        "commented_code": "@@ -16,7 +16,7 @@\n     \"release:build\": \"lerna run --concurrency 8 --no-private build --skip-nx-cache\",\n     \"release:changelog\": \"node scripts/releaseChangelog.mjs\",\n     \"release:publish\": \"pnpm publish --recursive --tag next\",\n-    \"release:publish:dry-run\": \"pnpm publish --recursive --tag next --registry=\\\"http://localhost:4873/\\\"\",",
        "comment_created_at": "2025-02-26T14:46:57+00:00",
        "comment_author": "mj12albert",
        "comment_body": "Maybe we used to use this? https://verdaccio.org/docs/configuration/#listen-port\r\n\r\nWith pnpm we can just use the built-in `--dry-run`: https://pnpm.io/9.x/cli/publish#--dry-run",
        "pr_file_module": null
      },
      {
        "comment_id": "1971949437",
        "repo_full_name": "mui/material-ui",
        "pr_number": 45421,
        "pr_file": "package.json",
        "discussion_id": "1971727902",
        "commented_code": "@@ -16,7 +16,7 @@\n     \"release:build\": \"lerna run --concurrency 8 --no-private build --skip-nx-cache\",\n     \"release:changelog\": \"node scripts/releaseChangelog.mjs\",\n     \"release:publish\": \"pnpm publish --recursive --tag next\",\n-    \"release:publish:dry-run\": \"pnpm publish --recursive --tag next --registry=\\\"http://localhost:4873/\\\"\",",
        "comment_created_at": "2025-02-26T16:37:12+00:00",
        "comment_author": "Janpot",
        "comment_body": "Yes, we've used verdaccio before for testing publishes. It allowed us to also test an install from registry.",
        "pr_file_module": null
      }
    ]
  }
]