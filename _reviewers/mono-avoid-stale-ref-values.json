[
  {
    "discussion_id": "1926060892",
    "pr_number": 3591,
    "pr_file": "apps/zbugs/src/hooks/use-element-size.ts",
    "created_at": "2025-01-22T22:27:31+00:00",
    "commented_code": "import {useLayoutEffect, useState} from 'react';\n \n-export function useElementSize(elm: HTMLElement | null) {\n+export function useElementSize(elm: React.RefObject<HTMLElement>) {",
    "repo_full_name": "rocicorp/mono",
    "discussion_comments": [
      {
        "comment_id": "1926060892",
        "repo_full_name": "rocicorp/mono",
        "pr_number": 3591,
        "pr_file": "apps/zbugs/src/hooks/use-element-size.ts",
        "discussion_id": "1926060892",
        "commented_code": "@@ -1,12 +1,12 @@\n import {useLayoutEffect, useState} from 'react';\n \n-export function useElementSize(elm: HTMLElement | null) {\n+export function useElementSize(elm: React.RefObject<HTMLElement>) {",
        "comment_created_at": "2025-01-22T22:27:31+00:00",
        "comment_author": "tantaman",
        "comment_body": "this was the value of `ref.current` before which would always be stale when the `useLayoutEffect` callback was called.\r\n\r\nIt just so happened to work before because we'd always do two renders via `useQuery`. The second one would pass a new `elm` in.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2216732140",
    "pr_number": 4652,
    "pr_file": "packages/zero-client/src/client/zero.ts",
    "created_at": "2025-07-18T18:59:18+00:00",
    "commented_code": "}\n \n   #setOnline(online: boolean): void {\n-    if (this.#online === online) {\n-      return;\n-    }\n-\n-    this.#online = online;\n-    this.#onOnlineChange?.(online);\n+    this.#onlineManager.setOnline(online);\n   }\n \n   /**\n    * A rough heuristic for whether the client is currently online and\n    * authenticated.\n+   *\n+   * This does *not* update in React when the online status changes.",
    "repo_full_name": "rocicorp/mono",
    "discussion_comments": [
      {
        "comment_id": "2216732140",
        "repo_full_name": "rocicorp/mono",
        "pr_number": 4652,
        "pr_file": "packages/zero-client/src/client/zero.ts",
        "discussion_id": "2216732140",
        "commented_code": "@@ -1787,22 +1796,32 @@ export class Zero<\n   }\n \n   #setOnline(online: boolean): void {\n-    if (this.#online === online) {\n-      return;\n-    }\n-\n-    this.#online = online;\n-    this.#onOnlineChange?.(online);\n+    this.#onlineManager.setOnline(online);\n   }\n \n   /**\n    * A rough heuristic for whether the client is currently online and\n    * authenticated.\n+   *\n+   * This does *not* update in React when the online status changes.",
        "comment_created_at": "2025-07-18T18:59:18+00:00",
        "comment_author": "aboodman",
        "comment_body": "I don't think we should have this comment since it standard that any simple field is not reactive. We don't want to add this warning to every field in the Zero API.",
        "pr_file_module": null
      }
    ]
  }
]