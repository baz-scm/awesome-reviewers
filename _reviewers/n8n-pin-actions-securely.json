[
  {
    "discussion_id": "2205633445",
    "pr_number": 17248,
    "pr_file": ".github/workflows/docker-base-image.yml",
    "created_at": "2025-07-14T19:17:09+00:00",
    "commented_code": "name: Docker Base Image CI\n \n on:\n-  workflow_dispatch:\n-    inputs:\n-      node_version:\n-        description: 'Node.js version to build this image with.'\n-        type: choice\n-        required: true\n-        default: '20'\n-        options:\n-          - '20'\n-          - '22'\n-          - '24'\n+  push:\n+    branches:\n+      - master\n+    paths:\n+      - 'docker/images/n8n-base/Dockerfile'\n+  pull_request:\n+    paths:\n+      - 'docker/images/n8n-base/Dockerfile'\n \n jobs:\n   build:\n     runs-on: ubuntu-latest\n+    strategy:\n+      matrix:\n+        node_version: ['20', '22', '24']\n     steps:\n-      - uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2\n \n       - name: Set up QEMU\n-        uses: docker/setup-qemu-action@53851d14592bedcffcf25ea515637cff71ef929a # v3.3.0\n+        uses: docker/setup-qemu-action@29109295f81e9208d7d86ff1c6c12d2833863392 # v3.6.0\n \n       - name: Set up Docker Buildx\n-        uses: docker/setup-buildx-action@6524bf65af31da8d45b59e8c27de4bd072b392f5 # v3.8.0\n+        uses: docker/setup-buildx-action@e468171a9de216ec08956ac3ada2f0791b6bd435 # v3.11.1\n \n       - name: Login to GitHub Container Registry\n-        uses: docker/login-action@9780b0c442fbb1117ed29e0efdff1e18412f7567 # v3.3.0\n+        uses: docker/login-action@74a5d142397b4f367a81961eba4e8cd7edddf772 # v3.4.0\n         with:\n           registry: ghcr.io\n           username: ${{ github.actor }}\n           password: ${{ secrets.GITHUB_TOKEN }}\n \n       - name: Login to DockerHub\n-        uses: docker/login-action@9780b0c442fbb1117ed29e0efdff1e18412f7567 # v3.3.0\n+        uses: docker/login-action@74a5d142397b4f367a81961eba4e8cd7edddf772 # v3.4.0",
    "repo_full_name": "n8n-io/n8n",
    "discussion_comments": [
      {
        "comment_id": "2205633445",
        "repo_full_name": "n8n-io/n8n",
        "pr_number": 17248,
        "pr_file": ".github/workflows/docker-base-image.yml",
        "discussion_id": "2205633445",
        "commented_code": "@@ -1,55 +1,58 @@\n name: Docker Base Image CI\n \n on:\n-  workflow_dispatch:\n-    inputs:\n-      node_version:\n-        description: 'Node.js version to build this image with.'\n-        type: choice\n-        required: true\n-        default: '20'\n-        options:\n-          - '20'\n-          - '22'\n-          - '24'\n+  push:\n+    branches:\n+      - master\n+    paths:\n+      - 'docker/images/n8n-base/Dockerfile'\n+  pull_request:\n+    paths:\n+      - 'docker/images/n8n-base/Dockerfile'\n \n jobs:\n   build:\n     runs-on: ubuntu-latest\n+    strategy:\n+      matrix:\n+        node_version: ['20', '22', '24']\n     steps:\n-      - uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2\n \n       - name: Set up QEMU\n-        uses: docker/setup-qemu-action@53851d14592bedcffcf25ea515637cff71ef929a # v3.3.0\n+        uses: docker/setup-qemu-action@29109295f81e9208d7d86ff1c6c12d2833863392 # v3.6.0\n \n       - name: Set up Docker Buildx\n-        uses: docker/setup-buildx-action@6524bf65af31da8d45b59e8c27de4bd072b392f5 # v3.8.0\n+        uses: docker/setup-buildx-action@e468171a9de216ec08956ac3ada2f0791b6bd435 # v3.11.1\n \n       - name: Login to GitHub Container Registry\n-        uses: docker/login-action@9780b0c442fbb1117ed29e0efdff1e18412f7567 # v3.3.0\n+        uses: docker/login-action@74a5d142397b4f367a81961eba4e8cd7edddf772 # v3.4.0\n         with:\n           registry: ghcr.io\n           username: ${{ github.actor }}\n           password: ${{ secrets.GITHUB_TOKEN }}\n \n       - name: Login to DockerHub\n-        uses: docker/login-action@9780b0c442fbb1117ed29e0efdff1e18412f7567 # v3.3.0\n+        uses: docker/login-action@74a5d142397b4f367a81961eba4e8cd7edddf772 # v3.4.0",
        "comment_created_at": "2025-07-14T19:17:09+00:00",
        "comment_author": "tomi",
        "comment_body": "Do we need to run the login steps if we don't push?",
        "pr_file_module": null
      },
      {
        "comment_id": "2207775979",
        "repo_full_name": "n8n-io/n8n",
        "pr_number": 17248,
        "pr_file": ".github/workflows/docker-base-image.yml",
        "discussion_id": "2205633445",
        "commented_code": "@@ -1,55 +1,58 @@\n name: Docker Base Image CI\n \n on:\n-  workflow_dispatch:\n-    inputs:\n-      node_version:\n-        description: 'Node.js version to build this image with.'\n-        type: choice\n-        required: true\n-        default: '20'\n-        options:\n-          - '20'\n-          - '22'\n-          - '24'\n+  push:\n+    branches:\n+      - master\n+    paths:\n+      - 'docker/images/n8n-base/Dockerfile'\n+  pull_request:\n+    paths:\n+      - 'docker/images/n8n-base/Dockerfile'\n \n jobs:\n   build:\n     runs-on: ubuntu-latest\n+    strategy:\n+      matrix:\n+        node_version: ['20', '22', '24']\n     steps:\n-      - uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1\n+      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2\n \n       - name: Set up QEMU\n-        uses: docker/setup-qemu-action@53851d14592bedcffcf25ea515637cff71ef929a # v3.3.0\n+        uses: docker/setup-qemu-action@29109295f81e9208d7d86ff1c6c12d2833863392 # v3.6.0\n \n       - name: Set up Docker Buildx\n-        uses: docker/setup-buildx-action@6524bf65af31da8d45b59e8c27de4bd072b392f5 # v3.8.0\n+        uses: docker/setup-buildx-action@e468171a9de216ec08956ac3ada2f0791b6bd435 # v3.11.1\n \n       - name: Login to GitHub Container Registry\n-        uses: docker/login-action@9780b0c442fbb1117ed29e0efdff1e18412f7567 # v3.3.0\n+        uses: docker/login-action@74a5d142397b4f367a81961eba4e8cd7edddf772 # v3.4.0\n         with:\n           registry: ghcr.io\n           username: ${{ github.actor }}\n           password: ${{ secrets.GITHUB_TOKEN }}\n \n       - name: Login to DockerHub\n-        uses: docker/login-action@9780b0c442fbb1117ed29e0efdff1e18412f7567 # v3.3.0\n+        uses: docker/login-action@74a5d142397b4f367a81961eba4e8cd7edddf772 # v3.4.0",
        "comment_created_at": "2025-07-15T15:06:32+00:00",
        "comment_author": "shortstacked",
        "comment_body": "No, we could make it conditional as well.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2124369680",
    "pr_number": 15985,
    "pr_file": ".github/workflows/sync-public-api-docs.yml",
    "created_at": "2025-06-03T16:23:39+00:00",
    "commented_code": "+name: Sync Public API Schema to Docs Repo\n+\n+on:\n+  # Triggers for the master branch if relevant Public API files have changed\n+  push:\n+    branches:\n+      - master\n+    paths:\n+      # Trigger if:\n+      # - any of the public API files change\n+      - 'packages/cli/src/public-api/**'\n+      # - the build script or dependencies change\n+      - 'packages/cli/package.json'\n+      # - any main dependencies change\n+      - 'pnpm-lock.yaml'\n+\n+  # Allow manual trigger\n+  workflow_dispatch:\n+\n+jobs:\n+  sync-public-api:\n+    runs-on: ubuntu-latest\n+    permissions:\n+      contents: read\n+\n+    steps:\n+      - name: Checkout Main n8n Repository\n+        uses: actions/checkout@v4\n+\n+      - name: Setup PNPM\n+        uses: pnpm/action-setup@v3\n+        with:\n+          version: 10\n+\n+      - name: Setup Node.js\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version: '20'\n+          cache: 'pnpm'\n+\n+      - name: Install Dependencies\n+        run: pnpm install --frozen-lockfile\n+\n+      - name: Build Public API Schema\n+        run: pnpm run build:data\n+\n+      - name: Verify OpenAPI schema exists\n+        id: verify_file\n+        run: |\n+          if [[ -f \"packages/cli/dist/public-api/v1/openapi.yml\" ]]; then\n+            echo \"OpenAPI file found: packages/cli/dist/public-api/v1/openapi.yml\"\n+            echo \"file_exists=true\" >> $GITHUB_OUTPUT\n+          else\n+            echo \"ERROR: OpenAPI file not found at packages/cli/dist/public-api/v1/openapi.yml after build.\"\n+            echo \"file_exists=false\" >> $GITHUB_OUTPUT\n+          fi\n+\n+      - name: Checkout Docs Repository\n+        if: steps.verify_file.outputs.file_exists == 'true'\n+        uses: actions/checkout@v4\n+        with:\n+          repository: n8n-io/n8n-docs\n+\n+          # TODO: Check this\n+          # The token needs write access to the docs repository to push branches and create PRs\n+          token: ${{ secrets.GITHUB_TOKEN }}",
    "repo_full_name": "n8n-io/n8n",
    "discussion_comments": [
      {
        "comment_id": "2124369680",
        "repo_full_name": "n8n-io/n8n",
        "pr_number": 15985,
        "pr_file": ".github/workflows/sync-public-api-docs.yml",
        "discussion_id": "2124369680",
        "commented_code": "@@ -0,0 +1,101 @@\n+name: Sync Public API Schema to Docs Repo\n+\n+on:\n+  # Triggers for the master branch if relevant Public API files have changed\n+  push:\n+    branches:\n+      - master\n+    paths:\n+      # Trigger if:\n+      # - any of the public API files change\n+      - 'packages/cli/src/public-api/**'\n+      # - the build script or dependencies change\n+      - 'packages/cli/package.json'\n+      # - any main dependencies change\n+      - 'pnpm-lock.yaml'\n+\n+  # Allow manual trigger\n+  workflow_dispatch:\n+\n+jobs:\n+  sync-public-api:\n+    runs-on: ubuntu-latest\n+    permissions:\n+      contents: read\n+\n+    steps:\n+      - name: Checkout Main n8n Repository\n+        uses: actions/checkout@v4\n+\n+      - name: Setup PNPM\n+        uses: pnpm/action-setup@v3\n+        with:\n+          version: 10\n+\n+      - name: Setup Node.js\n+        uses: actions/setup-node@v4\n+        with:\n+          node-version: '20'\n+          cache: 'pnpm'\n+\n+      - name: Install Dependencies\n+        run: pnpm install --frozen-lockfile\n+\n+      - name: Build Public API Schema\n+        run: pnpm run build:data\n+\n+      - name: Verify OpenAPI schema exists\n+        id: verify_file\n+        run: |\n+          if [[ -f \"packages/cli/dist/public-api/v1/openapi.yml\" ]]; then\n+            echo \"OpenAPI file found: packages/cli/dist/public-api/v1/openapi.yml\"\n+            echo \"file_exists=true\" >> $GITHUB_OUTPUT\n+          else\n+            echo \"ERROR: OpenAPI file not found at packages/cli/dist/public-api/v1/openapi.yml after build.\"\n+            echo \"file_exists=false\" >> $GITHUB_OUTPUT\n+          fi\n+\n+      - name: Checkout Docs Repository\n+        if: steps.verify_file.outputs.file_exists == 'true'\n+        uses: actions/checkout@v4\n+        with:\n+          repository: n8n-io/n8n-docs\n+\n+          # TODO: Check this\n+          # The token needs write access to the docs repository to push branches and create PRs\n+          token: ${{ secrets.GITHUB_TOKEN }}",
        "comment_created_at": "2025-06-03T16:23:39+00:00",
        "comment_author": "cubic-dev-ai[bot]",
        "comment_body": "<!-- metadata:{\"confidence\":10,\"steps\":[{\"text\":\"I'll review the GitHub workflow file for syncing public API docs. Let me analyze the code changes systematically to identify any potential issues.\",\"toolCalls\":[{\"args\":{\"pattern\":\"**/*.yml\"},\"toolName\":\"listFiles\"}]},{\"text\":\"Let me check if there are any existing GitHub workflow files to understand the context better:\",\"toolCalls\":[{\"args\":{\"pattern\":\".github/workflows/*.yml\"},\"toolName\":\"listFiles\"}]},{\"text\":\"Now, let me check the public API structure to understand what's being synced:\",\"toolCalls\":[{\"args\":{\"pattern\":\"packages/cli/src/public-api/**\"},\"toolName\":\"listFiles\"}]},{\"text\":\"Let me check the package.json to understand the build script:\",\"toolCalls\":[{\"args\":{\"command\":\"grep \\\"build:data\\\" packages/cli/package.json\"},\"toolName\":\"executeCommand\"}]},{\"text\":\"Now I'll analyze the workflow file for potential issues:\",\"toolCalls\":[{\"args\":{\"command\":\"grep -r \\\"GITHUB_TOKEN\\\" .github/workflows/ --include=\\\"*.yml\\\"\"},\"toolName\":\"executeCommand\"}]}]} -->\nDefault GITHUB_TOKEN lacks permissions to create PRs in external repositories\n\n```suggestion\n          token: ${{ secrets.DOCS_REPO_PAT }}\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2137969295",
    "pr_number": 15985,
    "pr_file": ".github/workflows/sync-public-api-docs.yml",
    "created_at": "2025-06-10T13:52:54+00:00",
    "commented_code": "+name: Sync Public API Schema to Docs Repo\n+\n+on:\n+  # Triggers for the master branch if relevant Public API files have changed\n+  push:\n+    branches:\n+      - master\n+    paths:\n+      # Trigger if:\n+      # - any of the public API files change\n+      - 'packages/cli/src/public-api/**'\n+      # - the build script or dependencies change\n+      - 'packages/cli/package.json'\n+      # - any main dependencies change\n+      - 'pnpm-lock.yaml'\n+\n+  # Allow manual trigger\n+  workflow_dispatch:\n+\n+jobs:\n+  sync-public-api:\n+    runs-on: ubuntu-latest\n+    permissions:\n+      contents: read\n+\n+    steps:\n+      - name: Checkout Main n8n Repository\n+        uses: actions/checkout@v4\n+\n+      - name: Setup PNPM",
    "repo_full_name": "n8n-io/n8n",
    "discussion_comments": [
      {
        "comment_id": "2137969295",
        "repo_full_name": "n8n-io/n8n",
        "pr_number": 15985,
        "pr_file": ".github/workflows/sync-public-api-docs.yml",
        "discussion_id": "2137969295",
        "commented_code": "@@ -0,0 +1,108 @@\n+name: Sync Public API Schema to Docs Repo\n+\n+on:\n+  # Triggers for the master branch if relevant Public API files have changed\n+  push:\n+    branches:\n+      - master\n+    paths:\n+      # Trigger if:\n+      # - any of the public API files change\n+      - 'packages/cli/src/public-api/**'\n+      # - the build script or dependencies change\n+      - 'packages/cli/package.json'\n+      # - any main dependencies change\n+      - 'pnpm-lock.yaml'\n+\n+  # Allow manual trigger\n+  workflow_dispatch:\n+\n+jobs:\n+  sync-public-api:\n+    runs-on: ubuntu-latest\n+    permissions:\n+      contents: read\n+\n+    steps:\n+      - name: Checkout Main n8n Repository\n+        uses: actions/checkout@v4\n+\n+      - name: Setup PNPM",
        "comment_created_at": "2025-06-10T13:52:54+00:00",
        "comment_author": "shortstacked",
        "comment_body": "We have an action you could use for doing setup/build/install etc, although it's optional to use it\r\n\r\n      - name: Setup Environment and Build Project\r\n        uses: ./.github/actions/setup-and-build\r\n        with:\r\n          node-version: 20.x\r\n          enable-caching: true\r\n          \r\n          \r\n    \r\n          \r\n          \r\n          ",
        "pr_file_module": null
      },
      {
        "comment_id": "2174793634",
        "repo_full_name": "n8n-io/n8n",
        "pr_number": 15985,
        "pr_file": ".github/workflows/sync-public-api-docs.yml",
        "discussion_id": "2137969295",
        "commented_code": "@@ -0,0 +1,108 @@\n+name: Sync Public API Schema to Docs Repo\n+\n+on:\n+  # Triggers for the master branch if relevant Public API files have changed\n+  push:\n+    branches:\n+      - master\n+    paths:\n+      # Trigger if:\n+      # - any of the public API files change\n+      - 'packages/cli/src/public-api/**'\n+      # - the build script or dependencies change\n+      - 'packages/cli/package.json'\n+      # - any main dependencies change\n+      - 'pnpm-lock.yaml'\n+\n+  # Allow manual trigger\n+  workflow_dispatch:\n+\n+jobs:\n+  sync-public-api:\n+    runs-on: ubuntu-latest\n+    permissions:\n+      contents: read\n+\n+    steps:\n+      - name: Checkout Main n8n Repository\n+        uses: actions/checkout@v4\n+\n+      - name: Setup PNPM",
        "comment_created_at": "2025-06-30T10:54:11+00:00",
        "comment_author": "MarcL",
        "comment_body": "Changed to use this.",
        "pr_file_module": null
      }
    ]
  }
]