[
  {
    "discussion_id": "2208007624",
    "pr_number": 17342,
    "pr_file": "heartrelation/terraform/cloud-run/environments/prd/terraform.tfvars",
    "created_at": "2025-07-15T16:41:52+00:00",
    "commented_code": "+# Production Environment Configuration\n+project_id = \"n8n-prd-466015\"\n+region     = \"asia-northeast1\"\n+\n+# Cloud Run Service Configuration\n+service_name     = \"n8n-prd\"\n+container_image  = \"asia-northeast1-docker.pkg.dev/n8n-prd-466015/n8n-images/n8n:latest\"\n+node_env         = \"production\"\n+\n+# Database Configuration\n+db_type     = \"postgres\"\n+db_name     = \"n8n\"\n+db_user     = \"n8n\"\n+\n+# Secret Manager Configuration\n+db_password_secret_name        = \"n8n-prd-db-password\"\n+n8n_encryption_key_secret_name = \"n8n-prd-encryption-key\"\n+manage_secret_versions         = false\n+\n+# Resource Limits (production sized)\n+cpu_limit      = \"4\"\n+memory_limit   = \"4Gi\"\n+timeout_seconds = 3600\n+\n+# Scaling Configuration (production sized)\n+max_instances = \"20\"\n+min_instances = \"2\"\n+\n+# Access Control\n+allow_unauthenticated = false\n+\n+# Artifact Registry Configuration\n+artifact_registry_location   = \"asia-northeast1\"\n+artifact_registry_repository = \"n8n-images\"\n+\n+# PostgreSQL Configuration (production sized)\n+postgres_instance_name       = \"n8n-postgres-prd\"\n+postgres_database_version    = \"POSTGRES_15\"\n+postgres_tier               = \"db-n1-standard-2\"\n+postgres_availability_type  = \"REGIONAL\"\n+postgres_disk_size          = 100\n+postgres_disk_type          = \"PD_SSD\"\n+postgres_deletion_protection = true\n+postgres_backup_enabled     = true\n+postgres_authorized_networks = [\n+  {\n+    name  = \"all\"\n+    value = \"0.0.0.0/0\"",
    "repo_full_name": "n8n-io/n8n",
    "discussion_comments": [
      {
        "comment_id": "2208007624",
        "repo_full_name": "n8n-io/n8n",
        "pr_number": 17342,
        "pr_file": "heartrelation/terraform/cloud-run/environments/prd/terraform.tfvars",
        "discussion_id": "2208007624",
        "commented_code": "@@ -0,0 +1,50 @@\n+# Production Environment Configuration\n+project_id = \"n8n-prd-466015\"\n+region     = \"asia-northeast1\"\n+\n+# Cloud Run Service Configuration\n+service_name     = \"n8n-prd\"\n+container_image  = \"asia-northeast1-docker.pkg.dev/n8n-prd-466015/n8n-images/n8n:latest\"\n+node_env         = \"production\"\n+\n+# Database Configuration\n+db_type     = \"postgres\"\n+db_name     = \"n8n\"\n+db_user     = \"n8n\"\n+\n+# Secret Manager Configuration\n+db_password_secret_name        = \"n8n-prd-db-password\"\n+n8n_encryption_key_secret_name = \"n8n-prd-encryption-key\"\n+manage_secret_versions         = false\n+\n+# Resource Limits (production sized)\n+cpu_limit      = \"4\"\n+memory_limit   = \"4Gi\"\n+timeout_seconds = 3600\n+\n+# Scaling Configuration (production sized)\n+max_instances = \"20\"\n+min_instances = \"2\"\n+\n+# Access Control\n+allow_unauthenticated = false\n+\n+# Artifact Registry Configuration\n+artifact_registry_location   = \"asia-northeast1\"\n+artifact_registry_repository = \"n8n-images\"\n+\n+# PostgreSQL Configuration (production sized)\n+postgres_instance_name       = \"n8n-postgres-prd\"\n+postgres_database_version    = \"POSTGRES_15\"\n+postgres_tier               = \"db-n1-standard-2\"\n+postgres_availability_type  = \"REGIONAL\"\n+postgres_disk_size          = 100\n+postgres_disk_type          = \"PD_SSD\"\n+postgres_deletion_protection = true\n+postgres_backup_enabled     = true\n+postgres_authorized_networks = [\n+  {\n+    name  = \"all\"\n+    value = \"0.0.0.0/0\"",
        "comment_created_at": "2025-07-15T16:41:52+00:00",
        "comment_author": "cubic-dev-ai[bot]",
        "comment_body": "<!-- metadata:{\"confidence\":10,\"steps\":[]} -->\nAllowing 0.0.0.0/0 in authorized networks exposes the PostgreSQL instance to the entire internet, which is a major security risk. Restrict access to trusted IP ranges only.",
        "pr_file_module": null
      }
    ]
  }
]