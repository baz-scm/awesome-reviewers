[
  {
    "discussion_id": "2126368475",
    "pr_number": 10050,
    "pr_file": "pgxn/neon/neon.c",
    "created_at": "2025-06-04T11:30:29+00:00",
    "commented_code": "restore_running_xacts_callback = RestoreRunningXactsFromClog;\n \n \n+\tDefineCustomBoolVariable(\n+\t\t\t\t\t\t\t\"neon.monitor_query_exec_time\",\n+\t\t\t\t\t\t\t\"Collect infortmation about query execution time\",\n+\t\t\t\t\t\t\tNULL,\n+\t\t\t\t\t\t\t&monitor_query_exec_time,\n+\t\t\t\t\t\t\ttrue,",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2126368475",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 10050,
        "pr_file": "pgxn/neon/neon.c",
        "discussion_id": "2126368475",
        "commented_code": "@@ -435,6 +444,16 @@ _PG_init(void)\n \trestore_running_xacts_callback = RestoreRunningXactsFromClog;\n \n \n+\tDefineCustomBoolVariable(\n+\t\t\t\t\t\t\t\"neon.monitor_query_exec_time\",\n+\t\t\t\t\t\t\t\"Collect infortmation about query execution time\",\n+\t\t\t\t\t\t\tNULL,\n+\t\t\t\t\t\t\t&monitor_query_exec_time,\n+\t\t\t\t\t\t\ttrue,",
        "comment_created_at": "2025-06-04T11:30:29+00:00",
        "comment_author": "ololobus",
        "comment_body": "It should default to false",
        "pr_file_module": null
      },
      {
        "comment_id": "2126879392",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 10050,
        "pr_file": "pgxn/neon/neon.c",
        "discussion_id": "2126368475",
        "commented_code": "@@ -435,6 +444,16 @@ _PG_init(void)\n \trestore_running_xacts_callback = RestoreRunningXactsFromClog;\n \n \n+\tDefineCustomBoolVariable(\n+\t\t\t\t\t\t\t\"neon.monitor_query_exec_time\",\n+\t\t\t\t\t\t\t\"Collect infortmation about query execution time\",\n+\t\t\t\t\t\t\tNULL,\n+\t\t\t\t\t\t\t&monitor_query_exec_time,\n+\t\t\t\t\t\t\ttrue,",
        "comment_created_at": "2025-06-04T15:23:28+00:00",
        "comment_author": "knizhnik",
        "comment_body": "Done",
        "pr_file_module": null
      },
      {
        "comment_id": "2126925837",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 10050,
        "pr_file": "pgxn/neon/neon.c",
        "discussion_id": "2126368475",
        "commented_code": "@@ -435,6 +444,16 @@ _PG_init(void)\n \trestore_running_xacts_callback = RestoreRunningXactsFromClog;\n \n \n+\tDefineCustomBoolVariable(\n+\t\t\t\t\t\t\t\"neon.monitor_query_exec_time\",\n+\t\t\t\t\t\t\t\"Collect infortmation about query execution time\",\n+\t\t\t\t\t\t\tNULL,\n+\t\t\t\t\t\t\t&monitor_query_exec_time,\n+\t\t\t\t\t\t\ttrue,",
        "comment_created_at": "2025-06-04T15:46:03+00:00",
        "comment_author": "ololobus",
        "comment_body": "@knizhnik I still see that it defaults to true",
        "pr_file_module": null
      },
      {
        "comment_id": "2126934104",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 10050,
        "pr_file": "pgxn/neon/neon.c",
        "discussion_id": "2126368475",
        "commented_code": "@@ -435,6 +444,16 @@ _PG_init(void)\n \trestore_running_xacts_callback = RestoreRunningXactsFromClog;\n \n \n+\tDefineCustomBoolVariable(\n+\t\t\t\t\t\t\t\"neon.monitor_query_exec_time\",\n+\t\t\t\t\t\t\t\"Collect infortmation about query execution time\",\n+\t\t\t\t\t\t\tNULL,\n+\t\t\t\t\t\t\t&monitor_query_exec_time,\n+\t\t\t\t\t\t\ttrue,",
        "comment_created_at": "2025-06-04T15:50:11+00:00",
        "comment_author": "knizhnik",
        "comment_body": "Sorry, forget to save file.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2086094529",
    "pr_number": 11901,
    "pr_file": "pgxn/neon/walproposer_pg.c",
    "created_at": "2025-05-13T07:16:26+00:00",
    "commented_code": "* GUC_LIST_QUOTE */\n \t\t\t\t\t\t\t   NULL, assign_neon_safekeepers, NULL);\n \n+\tDefineCustomStringVariable(\n+\t\t\t\t\t\t\t   \"neon.safekeeper_extra_conninfo_options\",\n+\t\t\t\t\t\t\t   \"libpq keyword parameters and values to apply to safekeeper connections\",\n+\t\t\t\t\t\t\t   NULL,\n+\t\t\t\t\t\t\t   &safekeeper_extra_conninfo_options,\n+\t\t\t\t\t\t\t   \"\",\n+\t\t\t\t\t\t\t   PGC_SIGHUP,",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2086094529",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11901,
        "pr_file": "pgxn/neon/walproposer_pg.c",
        "discussion_id": "2086094529",
        "commented_code": "@@ -203,6 +205,16 @@ nwp_register_gucs(void)\n \t\t\t\t\t\t\t\t\t\t\t\t * GUC_LIST_QUOTE */\n \t\t\t\t\t\t\t   NULL, assign_neon_safekeepers, NULL);\n \n+\tDefineCustomStringVariable(\n+\t\t\t\t\t\t\t   \"neon.safekeeper_extra_conninfo_options\",\n+\t\t\t\t\t\t\t   \"libpq keyword parameters and values to apply to safekeeper connections\",\n+\t\t\t\t\t\t\t   NULL,\n+\t\t\t\t\t\t\t   &safekeeper_extra_conninfo_options,\n+\t\t\t\t\t\t\t   \"\",\n+\t\t\t\t\t\t\t   PGC_SIGHUP,",
        "comment_created_at": "2025-05-13T07:16:26+00:00",
        "comment_author": "DimasKovas",
        "comment_body": "I think `PGC_POSTMASTER` fits better here, because we don't have code to reconnect to safekeepers when this option changes right now.\r\nOr need to implement `assign_neon_safekeeper_extra_conninfo_options` hook to restart the walproposer process if the option changes similarly to `assign_neon_safekeepers`",
        "pr_file_module": null
      },
      {
        "comment_id": "2087715841",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11901,
        "pr_file": "pgxn/neon/walproposer_pg.c",
        "discussion_id": "2086094529",
        "commented_code": "@@ -203,6 +205,16 @@ nwp_register_gucs(void)\n \t\t\t\t\t\t\t\t\t\t\t\t * GUC_LIST_QUOTE */\n \t\t\t\t\t\t\t   NULL, assign_neon_safekeepers, NULL);\n \n+\tDefineCustomStringVariable(\n+\t\t\t\t\t\t\t   \"neon.safekeeper_extra_conninfo_options\",\n+\t\t\t\t\t\t\t   \"libpq keyword parameters and values to apply to safekeeper connections\",\n+\t\t\t\t\t\t\t   NULL,\n+\t\t\t\t\t\t\t   &safekeeper_extra_conninfo_options,\n+\t\t\t\t\t\t\t   \"\",\n+\t\t\t\t\t\t\t   PGC_SIGHUP,",
        "comment_created_at": "2025-05-13T22:23:26+00:00",
        "comment_author": "tristan957",
        "comment_body": "Thanks for catching this. I agree with you.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2103359581",
    "pr_number": 12000,
    "pr_file": "pgxn/neon/communicator.c",
    "created_at": "2025-05-22T20:35:28+00:00",
    "commented_code": "communicator_reconfigure_timeout_if_needed(void)\n {\n \tbool\tneeds_set = MyPState->ring_receive != MyPState->ring_unused &&\n+\t\t\t\t\t\t!AmPrewarmWorker && /* do not pump prefetch state in prewarm worker */",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2103359581",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12000,
        "pr_file": "pgxn/neon/communicator.c",
        "discussion_id": "2103359581",
        "commented_code": "@@ -2450,6 +2450,7 @@ void\n communicator_reconfigure_timeout_if_needed(void)\n {\n \tbool\tneeds_set = MyPState->ring_receive != MyPState->ring_unused &&\n+\t\t\t\t\t\t!AmPrewarmWorker && /* do not pump prefetch state in prewarm worker */",
        "comment_created_at": "2025-05-22T20:35:28+00:00",
        "comment_author": "MMeent",
        "comment_body": "```suggestion\r\n\t\t\t\t\t\t!AmPrewarmWorker && /* do not configure the timeout-based pumping system in prewarm workers */\r\n```",
        "pr_file_module": null
      }
    ]
  }
]