[
  {
    "discussion_id": "2140815175",
    "pr_number": 12197,
    "pr_file": "compute/etc/sql_exporter/autovacuum_stats.sql",
    "created_at": "2025-06-11T18:23:50+00:00",
    "commented_code": "+WITH dbs AS (\n+  SELECT datname \n+  FROM pg_database \n+  WHERE datconnlimit != -2\n+    AND datname NOT IN ('postgres')\n+    AND NOT datistemplate\n+)\n+SELECT \n+  d.datname as dbname,\n+  t.autovacuum_count as autovacuum_count\n+FROM dbs d,\n+LATERAL (\n+  SELECT * FROM dblink(\n+    'dbname=' || d.datname || ' user=' || current_user || ' connect_timeout=5',",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2140815175",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12197,
        "pr_file": "compute/etc/sql_exporter/autovacuum_stats.sql",
        "discussion_id": "2140815175",
        "commented_code": "@@ -0,0 +1,19 @@\n+WITH dbs AS (\n+  SELECT datname \n+  FROM pg_database \n+  WHERE datconnlimit != -2\n+    AND datname NOT IN ('postgres')\n+    AND NOT datistemplate\n+)\n+SELECT \n+  d.datname as dbname,\n+  t.autovacuum_count as autovacuum_count\n+FROM dbs d,\n+LATERAL (\n+  SELECT * FROM dblink(\n+    'dbname=' || d.datname || ' user=' || current_user || ' connect_timeout=5',",
        "comment_created_at": "2025-06-11T18:23:50+00:00",
        "comment_author": "MMeent",
        "comment_body": "Please make sure you correctly escape the database and user parameters of this connection string.",
        "pr_file_module": null
      }
    ]
  }
]