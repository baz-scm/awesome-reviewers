[
  {
    "discussion_id": "2158800030",
    "pr_number": 12307,
    "pr_file": "compute_tools/Cargo.toml",
    "created_at": "2025-06-20T12:02:17+00:00",
    "commented_code": "bytes = \"1.0\"\n rust-ini = \"0.20.0\"\n rlimit = \"0.10.1\"\n+\n+inferno = { version = \"0.12\", default-features = false, features = [\"multithreaded\", \"nameattr\"] }\n+pprof = { version = \"0.15\", features = [\"protobuf-codec\", \"flamegraph\"] }",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2158800030",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12307,
        "pr_file": "compute_tools/Cargo.toml",
        "discussion_id": "2158800030",
        "commented_code": "@@ -74,3 +74,9 @@ zstd = \"0.13\"\n bytes = \"1.0\"\n rust-ini = \"0.20.0\"\n rlimit = \"0.10.1\"\n+\n+inferno = { version = \"0.12\", default-features = false, features = [\"multithreaded\", \"nameattr\"] }\n+pprof = { version = \"0.15\", features = [\"protobuf-codec\", \"flamegraph\"] }",
        "comment_created_at": "2025-06-20T12:02:17+00:00",
        "comment_author": "myrrc",
        "comment_body": "I see there are a lot of Cargo.lock changes which may not be needed.\r\nTry this to possibly reduce the diff\r\n```\r\ngit checkout origin/main -- Cargo.lock\r\ncargo hakari manage-deps\r\ncargo hakari generate\r\ncargo b --locked --frozen\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "2160924568",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12307,
        "pr_file": "compute_tools/Cargo.toml",
        "discussion_id": "2158800030",
        "commented_code": "@@ -74,3 +74,9 @@ zstd = \"0.13\"\n bytes = \"1.0\"\n rust-ini = \"0.20.0\"\n rlimit = \"0.10.1\"\n+\n+inferno = { version = \"0.12\", default-features = false, features = [\"multithreaded\", \"nameattr\"] }\n+pprof = { version = \"0.15\", features = [\"protobuf-codec\", \"flamegraph\"] }",
        "comment_created_at": "2025-06-23T07:37:22+00:00",
        "comment_author": "iddm",
        "comment_body": "I am seeing some issues with the updated `Cargo.lock`:\r\n- AWS config crate update forces us to change our code to avoid using their deprecated function. Breaks the build.\r\n- The unit tests in number 4 to 5 start to fail, all related to \"parquett\".\r\n- For some reason, clippy starts treating warning as errors, what I do not see in any other Pull Request and just my PRs where the `Cargo.lock` is updated.\r\n\r\nAre there any policies as to how to work with `Cargo.lock` here? Cuz usually it is fine to update it and commit it. ",
        "pr_file_module": null
      },
      {
        "comment_id": "2168923239",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12307,
        "pr_file": "compute_tools/Cargo.toml",
        "discussion_id": "2158800030",
        "commented_code": "@@ -74,3 +74,9 @@ zstd = \"0.13\"\n bytes = \"1.0\"\n rust-ini = \"0.20.0\"\n rlimit = \"0.10.1\"\n+\n+inferno = { version = \"0.12\", default-features = false, features = [\"multithreaded\", \"nameattr\"] }\n+pprof = { version = \"0.15\", features = [\"protobuf-codec\", \"flamegraph\"] }",
        "comment_created_at": "2025-06-26T12:14:31+00:00",
        "comment_author": "iddm",
        "comment_body": "Done.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2151357770",
    "pr_number": 12266,
    "pr_file": "pgxn/neon/communicator/Cargo.toml",
    "created_at": "2025-06-17T05:33:29+00:00",
    "commented_code": "+[package]\n+name = \"communicator\"\n+version = \"0.1.0\"\n+edition = \"2024\"",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2151357770",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12266,
        "pr_file": "pgxn/neon/communicator/Cargo.toml",
        "discussion_id": "2151357770",
        "commented_code": "@@ -0,0 +1,13 @@\n+[package]\n+name = \"communicator\"\n+version = \"0.1.0\"\n+edition = \"2024\"",
        "comment_created_at": "2025-06-17T05:33:29+00:00",
        "comment_author": "erikgrinaker",
        "comment_body": "This should use the license and edition from the workspace:\n\n```\nlicense.workspace = true\nedition.workspace = true\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2136704928",
    "pr_number": 12111,
    "pr_file": "pageserver/page_api/Cargo.toml",
    "created_at": "2025-06-10T00:24:52+00:00",
    "commented_code": "tonic.workspace = true\n utils.workspace = true\n workspace_hack.workspace = true\n+futures.workspace = true\n+futures-core.workspace = true\n+tokio.workspace = true\n+async-stream.workspace = true",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2136704928",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12111,
        "pr_file": "pageserver/page_api/Cargo.toml",
        "discussion_id": "2136704928",
        "commented_code": "@@ -13,6 +14,10 @@ thiserror.workspace = true\n tonic.workspace = true\n utils.workspace = true\n workspace_hack.workspace = true\n+futures.workspace = true\n+futures-core.workspace = true\n+tokio.workspace = true\n+async-stream.workspace = true",
        "comment_created_at": "2025-06-10T00:24:52+00:00",
        "comment_author": "erikgrinaker",
        "comment_body": "Many of these aren't necessary and can be removed: `tokio` (not used), `async-stream` (not used), and `futures-core` (available via `futures`).\n\nnit: we also try (with mixed success) to keep these in alphabetical order.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2112295755",
    "pr_number": 12044,
    "pr_file": "pageserver/client_grpc/Cargo.toml",
    "created_at": "2025-05-28T16:21:47+00:00",
    "commented_code": "+[package]\n+name = \"pageserver_client_grpc\"\n+version = \"0.1.0\"\n+edition = \"2024\"",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2112295755",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12044,
        "pr_file": "pageserver/client_grpc/Cargo.toml",
        "discussion_id": "2112295755",
        "commented_code": "@@ -0,0 +1,16 @@\n+[package]\n+name = \"pageserver_client_grpc\"\n+version = \"0.1.0\"\n+edition = \"2024\"",
        "comment_created_at": "2025-05-28T16:21:47+00:00",
        "comment_author": "erikgrinaker",
        "comment_body": "We should use the workspace edition: `edition.workspace = true`. We'll also need to use the workspace license: `license.workspace = true`.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2112297830",
    "pr_number": 12044,
    "pr_file": "pageserver/client_grpc/Cargo.toml",
    "created_at": "2025-05-28T16:22:59+00:00",
    "commented_code": "+[package]\n+name = \"pageserver_client_grpc\"\n+version = \"0.1.0\"\n+edition = \"2024\"\n+\n+[dependencies]\n+bytes.workspace = true\n+futures.workspace = true\n+http.workspace = true\n+thiserror.workspace = true\n+tonic.workspace = true\n+tracing.workspace = true\n+pageserver_page_api.workspace = true\n+utils.workspace = true\n+tokio.workspace = true\n+tokio-util = { version = \"0.7\", features = [\"compat\"] }",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2112297830",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 12044,
        "pr_file": "pageserver/client_grpc/Cargo.toml",
        "discussion_id": "2112297830",
        "commented_code": "@@ -0,0 +1,16 @@\n+[package]\n+name = \"pageserver_client_grpc\"\n+version = \"0.1.0\"\n+edition = \"2024\"\n+\n+[dependencies]\n+bytes.workspace = true\n+futures.workspace = true\n+http.workspace = true\n+thiserror.workspace = true\n+tonic.workspace = true\n+tracing.workspace = true\n+pageserver_page_api.workspace = true\n+utils.workspace = true\n+tokio.workspace = true\n+tokio-util = { version = \"0.7\", features = [\"compat\"] }",
        "comment_created_at": "2025-05-28T16:22:59+00:00",
        "comment_author": "erikgrinaker",
        "comment_body": "We should use the workspace version: `tokio-util.workspace = true`.\n\nBut I don't think we actually use `tokio-util` at all here, so we can just drop it.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2090524145",
    "pr_number": 11929,
    "pr_file": "libs/neon-shmem/Cargo.toml",
    "created_at": "2025-05-15T07:51:19+00:00",
    "commented_code": "+[package]\n+name = \"neon-shmem\"\n+version = \"0.1.0\"\n+edition.workspace = true\n+license.workspace = true\n+\n+[dependencies]\n+thiserror.workspace = true\n+\n+nix = { version = \"0.30.1\", features = [\"fs\", \"mman\", \"process\"] }",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2090524145",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11929,
        "pr_file": "libs/neon-shmem/Cargo.toml",
        "discussion_id": "2090524145",
        "commented_code": "@@ -0,0 +1,11 @@\n+[package]\n+name = \"neon-shmem\"\n+version = \"0.1.0\"\n+edition.workspace = true\n+license.workspace = true\n+\n+[dependencies]\n+thiserror.workspace = true\n+\n+nix = { version = \"0.30.1\", features = [\"fs\", \"mman\", \"process\"] }",
        "comment_created_at": "2025-05-15T07:51:19+00:00",
        "comment_author": "erikgrinaker",
        "comment_body": "Shouldn't this be in `/Cargo.toml` and included via workspace?",
        "pr_file_module": null
      },
      {
        "comment_id": "2090750268",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11929,
        "pr_file": "libs/neon-shmem/Cargo.toml",
        "discussion_id": "2090524145",
        "commented_code": "@@ -0,0 +1,11 @@\n+[package]\n+name = \"neon-shmem\"\n+version = \"0.1.0\"\n+edition.workspace = true\n+license.workspace = true\n+\n+[dependencies]\n+thiserror.workspace = true\n+\n+nix = { version = \"0.30.1\", features = [\"fs\", \"mman\", \"process\"] }",
        "comment_created_at": "2025-05-15T09:41:06+00:00",
        "comment_author": "hlinnaka",
        "comment_body": "We have an older version of 'nix' in `/Cargo.toml`, which is missing some function we need here. We should upgrade. I looked at doing that, but it wasn't completely trivial, so I punted and just used a newer version here to not get blocked on that.",
        "pr_file_module": null
      },
      {
        "comment_id": "2090906486",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11929,
        "pr_file": "libs/neon-shmem/Cargo.toml",
        "discussion_id": "2090524145",
        "commented_code": "@@ -0,0 +1,11 @@\n+[package]\n+name = \"neon-shmem\"\n+version = \"0.1.0\"\n+edition.workspace = true\n+license.workspace = true\n+\n+[dependencies]\n+thiserror.workspace = true\n+\n+nix = { version = \"0.30.1\", features = [\"fs\", \"mman\", \"process\"] }",
        "comment_created_at": "2025-05-15T10:58:55+00:00",
        "comment_author": "erikgrinaker",
        "comment_body": "Ok, let's leave a TODO to fix it.",
        "pr_file_module": null
      },
      {
        "comment_id": "2092865207",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11929,
        "pr_file": "libs/neon-shmem/Cargo.toml",
        "discussion_id": "2090524145",
        "commented_code": "@@ -0,0 +1,11 @@\n+[package]\n+name = \"neon-shmem\"\n+version = \"0.1.0\"\n+edition.workspace = true\n+license.workspace = true\n+\n+[dependencies]\n+thiserror.workspace = true\n+\n+nix = { version = \"0.30.1\", features = [\"fs\", \"mman\", \"process\"] }",
        "comment_created_at": "2025-05-16T11:25:04+00:00",
        "comment_author": "hlinnaka",
        "comment_body": "Opened https://github.com/neondatabase/neon/pull/11948 to update 'nix'",
        "pr_file_module": null
      }
    ]
  }
]