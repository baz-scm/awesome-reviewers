[
  {
    "discussion_id": "2063173198",
    "pr_number": 11733,
    "pr_file": "compute/compute-node.Dockerfile",
    "created_at": "2025-04-28T08:30:31+00:00",
    "commented_code": "COPY --from=timescaledb-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_cron-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_partman-build /usr/local/pgsql/ /usr/local/pgsql/\n+COPY --from=pg-anon-pg-build /usr/local/pgsql/ /usr/local/pgsql/",
    "repo_full_name": "neondatabase/neon",
    "discussion_comments": [
      {
        "comment_id": "2063173198",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11733,
        "pr_file": "compute/compute-node.Dockerfile",
        "discussion_id": "2063173198",
        "commented_code": "@@ -1623,6 +1623,7 @@ COPY --from=pgrag-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=timescaledb-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_cron-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_partman-build /usr/local/pgsql/ /usr/local/pgsql/\n+COPY --from=pg-anon-pg-build /usr/local/pgsql/ /usr/local/pgsql/",
        "comment_created_at": "2025-04-28T08:30:31+00:00",
        "comment_author": "MMeent",
        "comment_body": "Why is anon suddenly a default preloaded library?",
        "pr_file_module": null
      },
      {
        "comment_id": "2063823141",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11733,
        "pr_file": "compute/compute-node.Dockerfile",
        "discussion_id": "2063173198",
        "commented_code": "@@ -1623,6 +1623,7 @@ COPY --from=pgrag-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=timescaledb-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_cron-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_partman-build /usr/local/pgsql/ /usr/local/pgsql/\n+COPY --from=pg-anon-pg-build /usr/local/pgsql/ /usr/local/pgsql/",
        "comment_created_at": "2025-04-28T14:44:56+00:00",
        "comment_author": "thesuhas",
        "comment_body": "For dynamic masking to work, it needs to be in `session_preload_libraries`. If we added it to `shared_preload_libraries`, we wouldn't need another security definer function to help users set that.",
        "pr_file_module": null
      },
      {
        "comment_id": "2063832715",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11733,
        "pr_file": "compute/compute-node.Dockerfile",
        "discussion_id": "2063173198",
        "commented_code": "@@ -1623,6 +1623,7 @@ COPY --from=pgrag-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=timescaledb-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_cron-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_partman-build /usr/local/pgsql/ /usr/local/pgsql/\n+COPY --from=pg-anon-pg-build /usr/local/pgsql/ /usr/local/pgsql/",
        "comment_created_at": "2025-04-28T14:49:17+00:00",
        "comment_author": "MMeent",
        "comment_body": "OK, but why does it need to be a default-on setting?\r\n\r\nI, as a user, don't want `anon` anywhere close to my data, due to its inherent nature to return the wrong data (i.e. anything but the actual stored data).",
        "pr_file_module": null
      },
      {
        "comment_id": "2063876949",
        "repo_full_name": "neondatabase/neon",
        "pr_number": 11733,
        "pr_file": "compute/compute-node.Dockerfile",
        "discussion_id": "2063173198",
        "commented_code": "@@ -1623,6 +1623,7 @@ COPY --from=pgrag-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=timescaledb-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_cron-build /usr/local/pgsql/ /usr/local/pgsql/\n COPY --from=pg_partman-build /usr/local/pgsql/ /usr/local/pgsql/\n+COPY --from=pg-anon-pg-build /usr/local/pgsql/ /usr/local/pgsql/",
        "comment_created_at": "2025-04-28T15:08:32+00:00",
        "comment_author": "thesuhas",
        "comment_body": "Fair, would you recommend a security definer function that sets it to `session_preload_libraries`? Or is there another way to add it to `shared_preload_libraries` without having it a default-on setting?",
        "pr_file_module": null
      }
    ]
  }
]