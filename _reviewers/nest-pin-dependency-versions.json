[
  {
    "discussion_id": "1018455033",
    "pr_number": 10545,
    "pr_file": ".circleci/config.yml",
    "created_at": "2022-11-09T22:00:33+00:00",
    "commented_code": "- checkout\n       - run:\n           name: Update NPM version\n-          command: 'sudo npm install -g npm@latest'\n+          command: 'sudo npm install -g npm@^8'",
    "repo_full_name": "nestjs/nest",
    "discussion_comments": [
      {
        "comment_id": "1018455033",
        "repo_full_name": "nestjs/nest",
        "pr_number": 10545,
        "pr_file": ".circleci/config.yml",
        "discussion_id": "1018455033",
        "commented_code": "@@ -35,7 +35,7 @@ jobs:\n       - checkout\n       - run:\n           name: Update NPM version\n-          command: 'sudo npm install -g npm@latest'\n+          command: 'sudo npm install -g npm@^8'",
        "comment_created_at": "2022-11-09T22:00:33+00:00",
        "comment_author": "jmcdo29",
        "comment_body": "npm v9 was released on 2022-10-24 is is not compatible with node 12. Today (2022-11-09) it was set to the `@latest` tag for `npm` so our CircleCI builds started breaking. \r\n\r\n> Wednesday Nov. 9th (General Availability)\r\n> To ensure npm@9.x is considered \"non-breaking\" for Node.js LTS we will codify a set of exit criteria in collaboration with the [Release WG](https://github.com/nodejs/release)\r\n> npm@9.x will be set to the latest dist-tag (becoming the latest, maintained version of npm)\r\n> A PR will be opened to land npm@9.x in nodejs/node's main branch (exposing experimental/nightly users to this latest version)\r\n\r\nhttps://github.blog/changelog/2022-10-24-npm-v9-0-0-released/",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "985156652",
    "pr_number": 10335,
    "pr_file": ".github/workflows/codeql-analysis.yml",
    "created_at": "2022-10-01T23:34:22+00:00",
    "commented_code": "steps:\n     - name: Checkout repository\n-      uses: actions/checkout@v2\n+      uses: actions/checkout@v3",
    "repo_full_name": "nestjs/nest",
    "discussion_comments": [
      {
        "comment_id": "985156652",
        "repo_full_name": "nestjs/nest",
        "pr_number": 10335,
        "pr_file": ".github/workflows/codeql-analysis.yml",
        "discussion_id": "985156652",
        "commented_code": "@@ -21,7 +21,7 @@ jobs:\n \n     steps:\n     - name: Checkout repository\n-      uses: actions/checkout@v2\n+      uses: actions/checkout@v3",
        "comment_created_at": "2022-10-01T23:34:22+00:00",
        "comment_author": "jmcdo29",
        "comment_body": "What are the differences between v2 and v3?",
        "pr_file_module": null
      },
      {
        "comment_id": "985164605",
        "repo_full_name": "nestjs/nest",
        "pr_number": 10335,
        "pr_file": ".github/workflows/codeql-analysis.yml",
        "discussion_id": "985156652",
        "commented_code": "@@ -21,7 +21,7 @@ jobs:\n \n     steps:\n     - name: Checkout repository\n-      uses: actions/checkout@v2\n+      uses: actions/checkout@v3",
        "comment_created_at": "2022-10-02T01:31:49+00:00",
        "comment_author": "micalevisk",
        "comment_body": "nothing much https://github.com/actions/checkout/compare/v2...v3\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "985240436",
        "repo_full_name": "nestjs/nest",
        "pr_number": 10335,
        "pr_file": ".github/workflows/codeql-analysis.yml",
        "discussion_id": "985156652",
        "commented_code": "@@ -21,7 +21,7 @@ jobs:\n \n     steps:\n     - name: Checkout repository\n-      uses: actions/checkout@v2\n+      uses: actions/checkout@v3",
        "comment_created_at": "2022-10-02T13:31:52+00:00",
        "comment_author": "oscard0m",
        "comment_body": "The breaking change is to use `node_version` 16 by default.\n\nIt also adds support for `set-safe-directory` option and upgrades some npm package versions (which could have some security patches).\n\nhttps://github.com/actions/checkout/releases",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1291097517",
    "pr_number": 12218,
    "pr_file": ".circleci/config.yml",
    "created_at": "2023-08-11T09:12:35+00:00",
    "commented_code": "codechecks_benchmarks:\n     working_directory: ~/nest\n     docker:\n-      - image: cimg/node:16.20\n+      - image: cimg/node:<< pipeline.parameters.maintenance-node-version >>",
    "repo_full_name": "nestjs/nest",
    "discussion_comments": [
      {
        "comment_id": "1291097517",
        "repo_full_name": "nestjs/nest",
        "pr_number": 12218,
        "pr_file": ".circleci/config.yml",
        "discussion_id": "1291097517",
        "commented_code": "@@ -130,7 +136,7 @@ jobs:\n   codechecks_benchmarks:\n     working_directory: ~/nest\n     docker:\n-      - image: cimg/node:16.20\n+      - image: cimg/node:<< pipeline.parameters.maintenance-node-version >>",
        "comment_created_at": "2023-08-11T09:12:35+00:00",
        "comment_author": "rbnayax",
        "comment_body": "@kamilmysliwiec I wonder if we need to run this step also on other node versions?",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1293053482",
    "pr_number": 12218,
    "pr_file": ".circleci/config.yml",
    "created_at": "2023-08-14T07:08:50+00:00",
    "commented_code": "version: 2\n \n+parameters:\n+  maintenance-node-version:\n+    type: string\n+    default: \"16.20\"",
    "repo_full_name": "nestjs/nest",
    "discussion_comments": [
      {
        "comment_id": "1293053482",
        "repo_full_name": "nestjs/nest",
        "pr_number": 12218,
        "pr_file": ".circleci/config.yml",
        "discussion_id": "1293053482",
        "commented_code": "@@ -1,9 +1,25 @@\n version: 2\n \n+parameters:\n+  maintenance-node-version:\n+    type: string\n+    default: \"16.20\"",
        "comment_created_at": "2023-08-14T07:08:50+00:00",
        "comment_author": "kamilmysliwiec",
        "comment_body": "These may quickly get out of date - we will keep supporting v16 even after it's no longer a maintenance version (after September this year). That's why versions were hardcoded before ",
        "pr_file_module": null
      },
      {
        "comment_id": "1293352019",
        "repo_full_name": "nestjs/nest",
        "pr_number": 12218,
        "pr_file": ".circleci/config.yml",
        "discussion_id": "1293053482",
        "commented_code": "@@ -1,9 +1,25 @@\n version: 2\n \n+parameters:\n+  maintenance-node-version:\n+    type: string\n+    default: \"16.20\"",
        "comment_created_at": "2023-08-14T11:38:05+00:00",
        "comment_author": "rbnayax",
        "comment_body": "Ok, I handled it - added an optional \"legacy\" node version, but once node 16 becomes legacy, the \"main\" steps will run on the maintenance version which will be 18. Does that make sense?",
        "pr_file_module": null
      }
    ]
  }
]