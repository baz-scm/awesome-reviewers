[
  {
    "discussion_id": "1711071840",
    "pr_number": 5235,
    "pr_file": "app/components/markdown.tsx",
    "created_at": "2024-08-09T08:47:39+00:00",
    "commented_code": "}\n   }, []);\n \n+  const [collapsed, setCollapsed] = useState(true);\n+  const [showToggle, setShowToggle] = useState(false);\n+\n+  useEffect(() => {\n+    if (ref.current) {\n+      const codeHeight = ref.current.scrollHeight;\n+      setShowToggle(codeHeight > 400);\n+      ref.current.scrollTop = ref.current.scrollHeight;\n+    }\n+  }, [props.children]);\n+\n+  const toggleCollapsed = () => {\n+    setCollapsed(!collapsed);\n+  };\n+\n   return (\n     <>\n-      <pre ref={ref}>\n-        <span\n-          className=\"copy-code-button\"\n-          onClick={() => {\n-            if (ref.current) {\n-              const code = ref.current.innerText;\n-              copyToClipboard(code);\n-            }\n+      <div style={{ position: \"relative\" }}>\n+        <pre\n+          ref={ref}\n+          style={{\n+            maxHeight: collapsed ? \"400px\" : \"none\",\n+            overflow: \"hidden\",\n           }}\n-        ></span>\n-        {props.children}\n-      </pre>\n+        >\n+          <span\n+            className=\"copy-code-button\"\n+            onClick={() => {\n+              if (ref.current) {\n+                const code = ref.current.innerText;\n+                copyToClipboard(code);\n+              }\n+            }}\n+          ></span>\n+          {props.children}\n+          {showToggle && collapsed && (\n+            <div\n+              className=\"show-hide-button\"\n+              style={{",
    "repo_full_name": "ChatGPTNextWeb/NextChat",
    "discussion_comments": [
      {
        "comment_id": "1711071840",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 5235,
        "pr_file": "app/components/markdown.tsx",
        "discussion_id": "1711071840",
        "commented_code": "@@ -122,20 +122,55 @@ export function PreCode(props: { children: any }) {\n     }\n   }, []);\n \n+  const [collapsed, setCollapsed] = useState(true);\n+  const [showToggle, setShowToggle] = useState(false);\n+\n+  useEffect(() => {\n+    if (ref.current) {\n+      const codeHeight = ref.current.scrollHeight;\n+      setShowToggle(codeHeight > 400);\n+      ref.current.scrollTop = ref.current.scrollHeight;\n+    }\n+  }, [props.children]);\n+\n+  const toggleCollapsed = () => {\n+    setCollapsed(!collapsed);\n+  };\n+\n   return (\n     <>\n-      <pre ref={ref}>\n-        <span\n-          className=\"copy-code-button\"\n-          onClick={() => {\n-            if (ref.current) {\n-              const code = ref.current.innerText;\n-              copyToClipboard(code);\n-            }\n+      <div style={{ position: \"relative\" }}>\n+        <pre\n+          ref={ref}\n+          style={{\n+            maxHeight: collapsed ? \"400px\" : \"none\",\n+            overflow: \"hidden\",\n           }}\n-        ></span>\n-        {props.children}\n-      </pre>\n+        >\n+          <span\n+            className=\"copy-code-button\"\n+            onClick={() => {\n+              if (ref.current) {\n+                const code = ref.current.innerText;\n+                copyToClipboard(code);\n+              }\n+            }}\n+          ></span>\n+          {props.children}\n+          {showToggle && collapsed && (\n+            <div\n+              className=\"show-hide-button\"\n+              style={{",
        "comment_created_at": "2024-08-09T08:47:39+00:00",
        "comment_author": "Dogtiti",
        "comment_body": "\u8fd9\u91cc\u4e0d\u8981\u4e00\u4f1a\u513f\u4f7f\u7528className \u4e00\u4f1a\u513f\u53c8\u662finline style\u628a \u90fd\u53ef\u4ee5\u4f7f\u7528className\u6765\u63a7\u5236",
        "pr_file_module": null
      },
      {
        "comment_id": "1711278978",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 5235,
        "pr_file": "app/components/markdown.tsx",
        "discussion_id": "1711071840",
        "commented_code": "@@ -122,20 +122,55 @@ export function PreCode(props: { children: any }) {\n     }\n   }, []);\n \n+  const [collapsed, setCollapsed] = useState(true);\n+  const [showToggle, setShowToggle] = useState(false);\n+\n+  useEffect(() => {\n+    if (ref.current) {\n+      const codeHeight = ref.current.scrollHeight;\n+      setShowToggle(codeHeight > 400);\n+      ref.current.scrollTop = ref.current.scrollHeight;\n+    }\n+  }, [props.children]);\n+\n+  const toggleCollapsed = () => {\n+    setCollapsed(!collapsed);\n+  };\n+\n   return (\n     <>\n-      <pre ref={ref}>\n-        <span\n-          className=\"copy-code-button\"\n-          onClick={() => {\n-            if (ref.current) {\n-              const code = ref.current.innerText;\n-              copyToClipboard(code);\n-            }\n+      <div style={{ position: \"relative\" }}>\n+        <pre\n+          ref={ref}\n+          style={{\n+            maxHeight: collapsed ? \"400px\" : \"none\",\n+            overflow: \"hidden\",\n           }}\n-        ></span>\n-        {props.children}\n-      </pre>\n+        >\n+          <span\n+            className=\"copy-code-button\"\n+            onClick={() => {\n+              if (ref.current) {\n+                const code = ref.current.innerText;\n+                copyToClipboard(code);\n+              }\n+            }}\n+          ></span>\n+          {props.children}\n+          {showToggle && collapsed && (\n+            <div\n+              className=\"show-hide-button\"\n+              style={{",
        "comment_created_at": "2024-08-09T11:14:53+00:00",
        "comment_author": "mayfwl",
        "comment_body": "\u597d\u7684",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1773519148",
    "pr_number": 5470,
    "pr_file": "app/components/model-config.tsx",
    "created_at": "2024-09-24T14:46:20+00:00",
    "commented_code": "subTitle={Locale.Settings.CompressModel.SubTitle}\n       >\n         <Select\n+          className={styles[\"select-model\"]}",
    "repo_full_name": "ChatGPTNextWeb/NextChat",
    "discussion_comments": [
      {
        "comment_id": "1773519148",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 5470,
        "pr_file": "app/components/model-config.tsx",
        "discussion_id": "1773519148",
        "commented_code": "@@ -242,6 +243,7 @@ export function ModelConfigList(props: {\n         subTitle={Locale.Settings.CompressModel.SubTitle}\n       >\n         <Select\n+          className={styles[\"select-model\"]}",
        "comment_created_at": "2024-09-24T14:46:20+00:00",
        "comment_author": "Dogtiti",
        "comment_body": "\u8fd9\u91cc\u8fd8\u662f\u4e0d\u592a\u5bf9 \u5982\u679c\u672c\u8eab\u8fd9\u4e2a\u7ec4\u4ef6\u4f7f\u7528\u6ca1\u6709\u81ea\u5df1\u7684scss\u6587\u4ef6 \u90a3\u4e48\u6211\u89c9\u5f97\u53ef\u4ee5\u4f7f\u7528style \u6216\u8005\u65b0\u5efa\u4e00\u4e2ascss\u6587\u4ef6\uff0c\r\nui-lib\u4e00\u5b9a\u662f\u901a\u7528\u7684 \u5e76\u4e0d\u50cf\u52a0\u4e00\u4e9b\u7279\u6b8a\u7684\u4e1c\u897f\u8fdb\u53bb \u8fd9\u662f\u89c4\u8303\u95ee\u9898\r\n\u6309\u7167\u4f60\u8fd9\u91cc\u7684\u5904\u7406\u65b9\u5f0f ui-lib\u540e\u9762\u4f1a\u52a0\u8d8a\u6765\u8d8a\u591a\u4e71\u4e03\u516b\u7cdf\u7684style class",
        "pr_file_module": null
      },
      {
        "comment_id": "1774338004",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 5470,
        "pr_file": "app/components/model-config.tsx",
        "discussion_id": "1773519148",
        "commented_code": "@@ -242,6 +243,7 @@ export function ModelConfigList(props: {\n         subTitle={Locale.Settings.CompressModel.SubTitle}\n       >\n         <Select\n+          className={styles[\"select-model\"]}",
        "comment_created_at": "2024-09-25T02:53:07+00:00",
        "comment_author": "mayfwl",
        "comment_body": "okok",
        "pr_file_module": null
      }
    ]
  }
]