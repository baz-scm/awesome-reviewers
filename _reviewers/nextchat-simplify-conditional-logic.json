[
  {
    "discussion_id": "1830578957",
    "pr_number": 5779,
    "pr_file": "app/utils.ts",
    "created_at": "2024-11-06T08:29:18+00:00",
    "commented_code": "export function isVisionModel(model: string) {\n   // Note: This is a better way using the TypeScript feature instead of `&&` or `||` (ts v5.5.0-dev.20240314 I've been using)\n \n+  const excludeKeywords = [\"claude-3-5-haiku-20241022\"];",
    "repo_full_name": "ChatGPTNextWeb/NextChat",
    "discussion_comments": [
      {
        "comment_id": "1830578957",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 5779,
        "pr_file": "app/utils.ts",
        "discussion_id": "1830578957",
        "commented_code": "@@ -254,6 +254,7 @@ export function getMessageImages(message: RequestMessage): string[] {\n export function isVisionModel(model: string) {\n   // Note: This is a better way using the TypeScript feature instead of `&&` or `||` (ts v5.5.0-dev.20240314 I've been using)\n \n+  const excludeKeywords = [\"claude-3-5-haiku-20241022\"];",
        "comment_created_at": "2024-11-06T08:29:18+00:00",
        "comment_author": "lloydzhou",
        "comment_body": "\u8fd9\u91cc\u5e94\u8be5\u5148\u5224\u65ad\u5c5e\u4e8e\u6392\u9664\u5217\u8868\u76f4\u63a5\u8fd4\u56de\r\n\r\n\u73b0\u5728\u653e\u540e\u9762\u901a\u8fc7`&&`\u6bd4\u8f83\uff0c\u4f1a\u591a\u51fa\u6765\u4e00\u4e9b\u591a\u4f59\u7684\u5224\u65ad\u903b\u8f91\u3002",
        "pr_file_module": null
      },
      {
        "comment_id": "1830849208",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 5779,
        "pr_file": "app/utils.ts",
        "discussion_id": "1830578957",
        "commented_code": "@@ -254,6 +254,7 @@ export function getMessageImages(message: RequestMessage): string[] {\n export function isVisionModel(model: string) {\n   // Note: This is a better way using the TypeScript feature instead of `&&` or `||` (ts v5.5.0-dev.20240314 I've been using)\n \n+  const excludeKeywords = [\"claude-3-5-haiku-20241022\"];",
        "comment_created_at": "2024-11-06T11:19:10+00:00",
        "comment_author": "OPChips",
        "comment_body": "\u8fd9\u91cc&&\u77ed\u8def\u4e86 \u6ca1\u95ee\u9898",
        "pr_file_module": null
      },
      {
        "comment_id": "1831229555",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 5779,
        "pr_file": "app/utils.ts",
        "discussion_id": "1830578957",
        "commented_code": "@@ -254,6 +254,7 @@ export function getMessageImages(message: RequestMessage): string[] {\n export function isVisionModel(model: string) {\n   // Note: This is a better way using the TypeScript feature instead of `&&` or `||` (ts v5.5.0-dev.20240314 I've been using)\n \n+  const excludeKeywords = [\"claude-3-5-haiku-20241022\"];",
        "comment_created_at": "2024-11-06T15:18:49+00:00",
        "comment_author": "Dogtiti",
        "comment_body": "\u610f\u601d\u662fexcludeKeywords\u5224\u65ad\u76f4\u63a5return \u53ef\u4ee5\u907f\u514d\u540e\u9762\u7684\u8fd0\u7b97\r\n\u5f53\u7136&&\u4e5f\u6ca1\u95ee\u9898",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1703540291",
    "pr_number": 5190,
    "pr_file": "app/client/api.ts",
    "created_at": "2024-08-05T05:06:42+00:00",
    "commented_code": "break;\n       case ModelProvider.Qwen:\n         this.llm = new QwenApi();\n+        break;",
    "repo_full_name": "ChatGPTNextWeb/NextChat",
    "discussion_comments": [
      {
        "comment_id": "1703540291",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 5190,
        "pr_file": "app/client/api.ts",
        "discussion_id": "1703540291",
        "commented_code": "@@ -118,6 +118,7 @@ export class ClientApi {\n         break;\n       case ModelProvider.Qwen:\n         this.llm = new QwenApi();\n+        break;",
        "comment_created_at": "2024-08-05T05:06:42+00:00",
        "comment_author": "lloydzhou",
        "comment_body": "\u8fd9\u91cc\u4e4b\u524d\u6f0f\u6389\u4e86\u4e00\u4e2abreak\uff0c\u5c5e\u4e8e\u4fee\u590dbug",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1525742107",
    "pr_number": 4310,
    "pr_file": "app/utils.ts",
    "created_at": "2024-03-15T04:23:16+00:00",
    "commented_code": "}\n \n export function isVisionModel(model: string) {\n+  const accessStore = useAccessStore.getState();\n   return (\n     // model.startsWith(\"gpt-4-vision\") ||\n     // model.startsWith(\"gemini-pro-vision\") ||\n-    model.includes(\"vision\")\n+    model.includes(\"vision\") || accessStore.customVisionModels.includes(model)",
    "repo_full_name": "ChatGPTNextWeb/NextChat",
    "discussion_comments": [
      {
        "comment_id": "1525742107",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 4310,
        "pr_file": "app/utils.ts",
        "discussion_id": "1525742107",
        "commented_code": "@@ -292,9 +293,10 @@ export function getMessageImages(message: RequestMessage): string[] {\n }\n \n export function isVisionModel(model: string) {\n+  const accessStore = useAccessStore.getState();\n   return (\n     // model.startsWith(\"gpt-4-vision\") ||\n     // model.startsWith(\"gemini-pro-vision\") ||\n-    model.includes(\"vision\")\n+    model.includes(\"vision\") || accessStore.customVisionModels.includes(model)",
        "comment_created_at": "2024-03-15T04:23:16+00:00",
        "comment_author": "H0llyW00dzZ",
        "comment_body": "so bad using `||` \r\nthis a4c54cae60820a8a026481b91a11a9e7a842699c a better way",
        "pr_file_module": null
      },
      {
        "comment_id": "1525744109",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 4310,
        "pr_file": "app/utils.ts",
        "discussion_id": "1525742107",
        "commented_code": "@@ -292,9 +293,10 @@ export function getMessageImages(message: RequestMessage): string[] {\n }\n \n export function isVisionModel(model: string) {\n+  const accessStore = useAccessStore.getState();\n   return (\n     // model.startsWith(\"gpt-4-vision\") ||\n     // model.startsWith(\"gemini-pro-vision\") ||\n-    model.includes(\"vision\")\n+    model.includes(\"vision\") || accessStore.customVisionModels.includes(model)",
        "comment_created_at": "2024-03-15T04:27:49+00:00",
        "comment_author": "wayoungofustc",
        "comment_body": "It's more difficult to understand the process of constructing a list from customVisionModels:string and the \"vision\" string.\r\nThe approach introduced in this commit is much easier to comprehend.",
        "pr_file_module": null
      },
      {
        "comment_id": "1525745020",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 4310,
        "pr_file": "app/utils.ts",
        "discussion_id": "1525742107",
        "commented_code": "@@ -292,9 +293,10 @@ export function getMessageImages(message: RequestMessage): string[] {\n }\n \n export function isVisionModel(model: string) {\n+  const accessStore = useAccessStore.getState();\n   return (\n     // model.startsWith(\"gpt-4-vision\") ||\n     // model.startsWith(\"gemini-pro-vision\") ||\n-    model.includes(\"vision\")\n+    model.includes(\"vision\") || accessStore.customVisionModels.includes(model)",
        "comment_created_at": "2024-03-15T04:29:49+00:00",
        "comment_author": "H0llyW00dzZ",
        "comment_body": "> It's more difficult to understand the process of constructing a list from customVisionModels:string and the \"vision\" string. The approach introduced in this commit is much easier to comprehend.\r\n\r\nno, that not easier, and so bad because of complex logic using `||`",
        "pr_file_module": null
      },
      {
        "comment_id": "1525778615",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 4310,
        "pr_file": "app/utils.ts",
        "discussion_id": "1525742107",
        "commented_code": "@@ -292,9 +293,10 @@ export function getMessageImages(message: RequestMessage): string[] {\n }\n \n export function isVisionModel(model: string) {\n+  const accessStore = useAccessStore.getState();\n   return (\n     // model.startsWith(\"gpt-4-vision\") ||\n     // model.startsWith(\"gemini-pro-vision\") ||\n-    model.includes(\"vision\")\n+    model.includes(\"vision\") || accessStore.customVisionModels.includes(model)",
        "comment_created_at": "2024-03-15T05:32:50+00:00",
        "comment_author": "wayoungofustc",
        "comment_body": "I understand your suggestions and find your insights very valuable. Based on your feedback, I have made the following changes to the code:\r\n[ef02ef2b43a3c2ef2150b375549bcad453bfd23c](https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web/pull/4310/commits/ef02ef2b43a3c2ef2150b375549bcad453bfd23c)\r\nThank you very much for taking the time to review my code and provide valuable feedback. If it's convenient for you, could you please review my changes once more? If there's anything else that needs improvement, please let me know.\r\n\r\nThank you again for your help and support!",
        "pr_file_module": null
      },
      {
        "comment_id": "1525783543",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 4310,
        "pr_file": "app/utils.ts",
        "discussion_id": "1525742107",
        "commented_code": "@@ -292,9 +293,10 @@ export function getMessageImages(message: RequestMessage): string[] {\n }\n \n export function isVisionModel(model: string) {\n+  const accessStore = useAccessStore.getState();\n   return (\n     // model.startsWith(\"gpt-4-vision\") ||\n     // model.startsWith(\"gemini-pro-vision\") ||\n-    model.includes(\"vision\")\n+    model.includes(\"vision\") || accessStore.customVisionModels.includes(model)",
        "comment_created_at": "2024-03-15T05:41:14+00:00",
        "comment_author": "H0llyW00dzZ",
        "comment_body": "> I understand your suggestions and find your insights very valuable. Based on your feedback, I have made the following changes to the code: [ef02ef2b43a3c2ef2150b375549bcad453bfd23c](https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web/pull/4310/commits/ef02ef2b43a3c2ef2150b375549bcad453bfd23c) Thank you very much for taking the time to review my code and provide valuable feedback. If it's convenient for you, could you please review my changes once more? If there's anything else that needs improvement, please let me know.\r\n> \r\n> Thank you again for your help and support!\r\n\r\nnp, the latest changes have made it easier to maintain and more reusable, instead of using complex conditional logic with the `||` operator.",
        "pr_file_module": null
      }
    ]
  }
]