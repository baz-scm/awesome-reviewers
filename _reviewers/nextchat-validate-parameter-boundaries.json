[
  {
    "discussion_id": "1181024265",
    "pr_number": 1132,
    "pr_file": "app/store/chat.ts",
    "created_at": "2023-04-29T09:08:45+00:00",
    "commented_code": "}));\n       },\n \n-      deleteSession(i?: number) {\n-        const deletedSession = get().currentSession();\n-        const index = i ?? get().currentSessionIndex;",
    "repo_full_name": "ChatGPTNextWeb/NextChat",
    "discussion_comments": [
      {
        "comment_id": "1181024265",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 1132,
        "pr_file": "app/store/chat.ts",
        "discussion_id": "1181024265",
        "commented_code": "@@ -197,10 +206,13 @@ export const useChatStore = create<ChatStore>()(\n         }));\n       },\n \n-      deleteSession(i?: number) {\n-        const deletedSession = get().currentSession();\n-        const index = i ?? get().currentSessionIndex;",
        "comment_created_at": "2023-04-29T09:08:45+00:00",
        "comment_author": "jinmiaoluo",
        "comment_body": "get().currentSessionIndex \u662f\u65e0\u6548\u7684\uff0c\u56e0\u4e3a\uff1a\n\nhttps://github.com/Yidadaa/ChatGPT-Next-Web/blob/fb327704866231748827d4b580851e18b797f49a/app/components/sidebar.tsx#L141\n\n\u89e6\u53d1\u7684\u65f6\u5019\uff0c i \u662f\u4e00\u4e2a\u539f\u751f\u7684\uff1aSyntheticEvent \u4e8b\u4ef6\uff0ci \u5c06\u4e0d\u4f1a\u7b49\u4e8e null \u6216\u8005 undefined\uff0c\u56e0\u6b64\uff0c\u7a7a\u503c\u5408\u5e76\u64cd\u4f5c\u7b26\u5c06\u4e0d\u4f1a\u751f\u6548\u3002\u8fdb\u800c\u5bfc\u81f4\u79fb\u52a8\u7aef\u5982\u679c\u4f7f\u7528 index \u4f5c\u4e3a\u7d22\u5f15\u5b9a\u4f4d deletedSession \u65f6\u4e3a undefined\uff0c\u5bfc\u81f4\u79fb\u52a8\u7aef\u5728 revert deletedSession \u65f6\u62a5\u9519\u3002\n\n\u8fd9\u91cc\u8c03\u6574 deleteSession \u51fd\u6570\u7684\u53c2\u6570\u4e3a\u975e\u53ef\u9009\u7684\uff0c\u5e76\u5728\u79fb\u52a8\u7aef\u4f20\u5165\u9009\u4e2d\u7684 session index\uff0c\u4ece\u800c\u89c4\u907f\u79fb\u52a8\u7aef\u62a5\u9519\u7684\u95ee\u9898\u3002",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1155298804",
    "pr_number": 355,
    "pr_file": "app/store/app.ts",
    "created_at": "2023-04-02T12:06:28+00:00",
    "commented_code": "const config = get().config;\n         const n = session.messages.length;\n         const recentMessages = session.messages.slice(\n-          n - config.historyMessageCount,\n+          - config.historyMessageCount,",
    "repo_full_name": "ChatGPTNextWeb/NextChat",
    "discussion_comments": [
      {
        "comment_id": "1155298804",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 355,
        "pr_file": "app/store/app.ts",
        "discussion_id": "1155298804",
        "commented_code": "@@ -384,7 +384,7 @@ export const useChatStore = create<ChatStore>()(\n         const config = get().config;\n         const n = session.messages.length;\n         const recentMessages = session.messages.slice(\n-          n - config.historyMessageCount,\n+          - config.historyMessageCount,",
        "comment_created_at": "2023-04-02T12:06:28+00:00",
        "comment_author": "Yidadaa",
        "comment_body": "historyMessageCount \u4e3a 0 \u7684\u65f6\u5019\u5c31\u4f1a\u51fa\u95ee\u9898\uff0c\u8fd9\u91cc\u6b63\u786e\u7684\u6539\u6cd5\u662f \r\n\r\n```js\r\nMath.max(0, n - config.historyMessageCount)\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "1155299066",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 355,
        "pr_file": "app/store/app.ts",
        "discussion_id": "1155298804",
        "commented_code": "@@ -384,7 +384,7 @@ export const useChatStore = create<ChatStore>()(\n         const config = get().config;\n         const n = session.messages.length;\n         const recentMessages = session.messages.slice(\n-          n - config.historyMessageCount,\n+          - config.historyMessageCount,",
        "comment_created_at": "2023-04-02T12:08:05+00:00",
        "comment_author": "cesaryuan",
        "comment_body": "\u54c8\u54c8\uff0c\u5927\u4f6c\u4e25\u8c28\uff0c\u4e0d\u8fc7historyMessageCount\u4e5f\u4e0d\u8be5\u7b49\u4e8e0\u54c8\u54c8",
        "pr_file_module": null
      },
      {
        "comment_id": "1155299291",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 355,
        "pr_file": "app/store/app.ts",
        "discussion_id": "1155298804",
        "commented_code": "@@ -384,7 +384,7 @@ export const useChatStore = create<ChatStore>()(\n         const config = get().config;\n         const n = session.messages.length;\n         const recentMessages = session.messages.slice(\n-          n - config.historyMessageCount,\n+          - config.historyMessageCount,",
        "comment_created_at": "2023-04-02T12:09:27+00:00",
        "comment_author": "Yidadaa",
        "comment_body": "\u7528\u6237\u53ef\u4ee5\u9009\u62e9\u4e0d\u9644\u52a0\u4efb\u4f55\u5386\u53f2\u8bb0\u5f55\uff0c\u5f53\u7136\u53ef\u4ee5\u4e3a 0",
        "pr_file_module": null
      },
      {
        "comment_id": "1155299909",
        "repo_full_name": "ChatGPTNextWeb/NextChat",
        "pr_number": 355,
        "pr_file": "app/store/app.ts",
        "discussion_id": "1155298804",
        "commented_code": "@@ -384,7 +384,7 @@ export const useChatStore = create<ChatStore>()(\n         const config = get().config;\n         const n = session.messages.length;\n         const recentMessages = session.messages.slice(\n-          n - config.historyMessageCount,\n+          - config.historyMessageCount,",
        "comment_created_at": "2023-04-02T12:12:22+00:00",
        "comment_author": "cesaryuan",
        "comment_body": "\u5bf9\uff0c\u5fd8\u8bb0\u8fd9\u70b9\u4e86\ud83d\ude25",
        "pr_file_module": null
      }
    ]
  }
]