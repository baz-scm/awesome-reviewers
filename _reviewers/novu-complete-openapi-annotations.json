[
  {
    "discussion_id": "2197070705",
    "pr_number": 8608,
    "pr_file": "apps/api/src/app/environments-v1/dtos/environment-response.dto.ts",
    "created_at": "2025-07-10T09:07:10+00:00",
    "commented_code": "})\n   identifier: string;\n \n+  @ApiPropertyOptional({\n+    enum: EnvironmentTypeEnum,\n+    description: 'Type of the environment',\n+    example: EnvironmentTypeEnum.PROD,\n+    nullable: true,\n+  })\n+  type: EnvironmentTypeEnum;",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2197070705",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8608,
        "pr_file": "apps/api/src/app/environments-v1/dtos/environment-response.dto.ts",
        "discussion_id": "2197070705",
        "commented_code": "@@ -30,6 +31,14 @@ export class EnvironmentResponseDto {\n   })\n   identifier: string;\n \n+  @ApiPropertyOptional({\n+    enum: EnvironmentTypeEnum,\n+    description: 'Type of the environment',\n+    example: EnvironmentTypeEnum.PROD,\n+    nullable: true,\n+  })\n+  type: EnvironmentTypeEnum;",
        "comment_created_at": "2025-07-10T09:07:10+00:00",
        "comment_author": "djabarovgeorge",
        "comment_body": "```suggestion\r\n  @ApiPropertyOptional({\r\n    enum: EnvironmentTypeEnum,\r\n    description: 'Type of the environment',\r\n    example: EnvironmentTypeEnum.PROD,\r\n  })\r\n  type: EnvironmentTypeEnum;\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "2204499196",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8608,
        "pr_file": "apps/api/src/app/environments-v1/dtos/environment-response.dto.ts",
        "discussion_id": "2197070705",
        "commented_code": "@@ -30,6 +31,14 @@ export class EnvironmentResponseDto {\n   })\n   identifier: string;\n \n+  @ApiPropertyOptional({\n+    enum: EnvironmentTypeEnum,\n+    description: 'Type of the environment',\n+    example: EnvironmentTypeEnum.PROD,\n+    nullable: true,\n+  })\n+  type: EnvironmentTypeEnum;",
        "comment_created_at": "2025-07-14T10:24:37+00:00",
        "comment_author": "scopsy",
        "comment_body": "@djabarovgeorge from what i've i've read in the docs, nullable !== required, where apiproprty optional only handeled the undefined state, nullable is different. and is explicitly added. \n\n<img width=\"2216\" height=\"382\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/24004585-d028-4fca-b361-c18254812fea\" />",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2129046816",
    "pr_number": 8454,
    "pr_file": "apps/api/src/app/widgets/dtos/feeds-response.dto.ts",
    "created_at": "2025-06-05T14:49:36+00:00",
    "commented_code": "})\n   payload?: Record<string, unknown>;\n \n+  @ApiPropertyOptional({\n+    description: 'The data sent with the notification.',\n+    type: 'object',\n+    nullable: true,\n+    example: { key: 'value' },\n+  })",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2129046816",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8454,
        "pr_file": "apps/api/src/app/widgets/dtos/feeds-response.dto.ts",
        "discussion_id": "2129046816",
        "commented_code": "@@ -209,6 +209,14 @@ export class NotificationFeedItemDto implements INotificationDto {\n   })\n   payload?: Record<string, unknown>;\n \n+  @ApiPropertyOptional({\n+    description: 'The data sent with the notification.',\n+    type: 'object',\n+    nullable: true,\n+    example: { key: 'value' },\n+  })",
        "comment_created_at": "2025-06-05T14:49:36+00:00",
        "comment_author": "scopsy",
        "comment_body": "```suggestion\r\n  @ApiPropertyOptional({\r\n    description: 'The data sent with the notification.',\r\n    type: 'object',\r\n    nullable: true,\r\n    example: { key: 'value' },\r\n    additionalProperties: true\r\n  })\r\n```\r\n\r\nthis is needed for proper SDK type generation",
        "pr_file_module": null
      },
      {
        "comment_id": "2129129628",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8454,
        "pr_file": "apps/api/src/app/widgets/dtos/feeds-response.dto.ts",
        "discussion_id": "2129046816",
        "commented_code": "@@ -209,6 +209,14 @@ export class NotificationFeedItemDto implements INotificationDto {\n   })\n   payload?: Record<string, unknown>;\n \n+  @ApiPropertyOptional({\n+    description: 'The data sent with the notification.',\n+    type: 'object',\n+    nullable: true,\n+    example: { key: 'value' },\n+  })",
        "comment_created_at": "2025-06-05T15:29:13+00:00",
        "comment_author": "Graphmaxer",
        "comment_body": "Fixed",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1768455318",
    "pr_number": 6528,
    "pr_file": "apps/api/src/app/events/usecases/parse-event-request/parse-event-request.command.ts",
    "created_at": "2024-09-20T11:43:42+00:00",
    "commented_code": "@IsOptional()\n   @IsEnum(TriggerRequestCategoryEnum)\n   requestCategory?: TriggerRequestCategoryEnum;\n+\n+  @IsOptional()\n+  @IsNumber()\n+  priority?: number;",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "1768455318",
        "repo_full_name": "novuhq/novu",
        "pr_number": 6528,
        "pr_file": "apps/api/src/app/events/usecases/parse-event-request/parse-event-request.command.ts",
        "discussion_id": "1768455318",
        "commented_code": "@@ -37,6 +37,10 @@ export class ParseEventRequestBaseCommand extends EnvironmentWithUserCommand {\n   @IsOptional()\n   @IsEnum(TriggerRequestCategoryEnum)\n   requestCategory?: TriggerRequestCategoryEnum;\n+\n+  @IsOptional()\n+  @IsNumber()\n+  priority?: number;",
        "comment_created_at": "2024-09-20T11:43:42+00:00",
        "comment_author": "rifont",
        "comment_body": "This change will result in the `priority` property becoming available on the OpenAPI spec at https://api.novu.co/openapi.yaml, which in turn, is used to generate documentation at https://docs.novu.co/api-reference/overview. \r\n\r\nGiven that this property is only usable in self-hosted via `IS_DOCKER_HOSTED === 'true'` in the implementation, we also need to conditionally apply [@ApiHideProperty](https://docs.nestjs.com/openapi/cli-plugin#:~:text=ApiProperty%20unless%20%40-,ApiHideProperty,-is%20used) when the same condition is met, to ensure the property doesn't become available in public documentation, which pertains only to usage of Novu Cloud at present.",
        "pr_file_module": null
      },
      {
        "comment_id": "1769116797",
        "repo_full_name": "novuhq/novu",
        "pr_number": 6528,
        "pr_file": "apps/api/src/app/events/usecases/parse-event-request/parse-event-request.command.ts",
        "discussion_id": "1768455318",
        "commented_code": "@@ -37,6 +37,10 @@ export class ParseEventRequestBaseCommand extends EnvironmentWithUserCommand {\n   @IsOptional()\n   @IsEnum(TriggerRequestCategoryEnum)\n   requestCategory?: TriggerRequestCategoryEnum;\n+\n+  @IsOptional()\n+  @IsNumber()\n+  priority?: number;",
        "comment_created_at": "2024-09-20T19:20:44+00:00",
        "comment_author": "isaiahdahl",
        "comment_body": "Done",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2113305329",
    "pr_number": 8405,
    "pr_file": "apps/api/src/app/organization/ee.organization.controller.ts",
    "created_at": "2025-05-29T06:32:30+00:00",
    "commented_code": "})\n     );\n   }\n+\n+  @Get('/settings')\n+  @ApiResponse(GetOrganizationSettingsDto)\n+  @ApiOperation({\n+    summary: 'Get organization settings',\n+  })\n+  @ExternalApiAccessible()\n+  async getSettings(@UserSession() user: UserSessionData) {\n+    return await this.getOrganizationSettingsUsecase.execute(\n+      GetOrganizationSettingsCommand.create({\n+        organizationId: user.organizationId,\n+      })\n+    );\n+  }\n+\n+  @Patch('/settings')\n+  @ApiResponse(UpdateOrganizationSettingsDto)\n+  @ApiOperation({\n+    summary: 'Update organization settings',\n+  })",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2113305329",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8405,
        "pr_file": "apps/api/src/app/organization/ee.organization.controller.ts",
        "discussion_id": "2113305329",
        "commented_code": "@@ -88,4 +93,32 @@ export class EEOrganizationController {\n       })\n     );\n   }\n+\n+  @Get('/settings')\n+  @ApiResponse(GetOrganizationSettingsDto)\n+  @ApiOperation({\n+    summary: 'Get organization settings',\n+  })\n+  @ExternalApiAccessible()\n+  async getSettings(@UserSession() user: UserSessionData) {\n+    return await this.getOrganizationSettingsUsecase.execute(\n+      GetOrganizationSettingsCommand.create({\n+        organizationId: user.organizationId,\n+      })\n+    );\n+  }\n+\n+  @Patch('/settings')\n+  @ApiResponse(UpdateOrganizationSettingsDto)\n+  @ApiOperation({\n+    summary: 'Update organization settings',\n+  })",
        "comment_created_at": "2025-05-29T06:32:30+00:00",
        "comment_author": "scopsy",
        "comment_body": "Do we need a body type here for the internal sdk auto gen? ",
        "pr_file_module": null
      },
      {
        "comment_id": "2115389935",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8405,
        "pr_file": "apps/api/src/app/organization/ee.organization.controller.ts",
        "discussion_id": "2113305329",
        "commented_code": "@@ -88,4 +93,32 @@ export class EEOrganizationController {\n       })\n     );\n   }\n+\n+  @Get('/settings')\n+  @ApiResponse(GetOrganizationSettingsDto)\n+  @ApiOperation({\n+    summary: 'Get organization settings',\n+  })\n+  @ExternalApiAccessible()\n+  async getSettings(@UserSession() user: UserSessionData) {\n+    return await this.getOrganizationSettingsUsecase.execute(\n+      GetOrganizationSettingsCommand.create({\n+        organizationId: user.organizationId,\n+      })\n+    );\n+  }\n+\n+  @Patch('/settings')\n+  @ApiResponse(UpdateOrganizationSettingsDto)\n+  @ApiOperation({\n+    summary: 'Update organization settings',\n+  })",
        "comment_created_at": "2025-05-30T08:22:45+00:00",
        "comment_author": "ChmaraX",
        "comment_body": "Swagger picks it up automatically so the SDK should as well, but for now this is just internal endpoint anyway.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2088559982",
    "pr_number": 8299,
    "pr_file": "apps/api/src/app/widgets/dtos/feeds-response.dto.ts",
    "created_at": "2025-05-14T09:58:55+00:00",
    "commented_code": "example: 'feed_445566',\n     type: String,\n   })\n-  _feedId: string;\n+  _feedId?: string | null;",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2088559982",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8299,
        "pr_file": "apps/api/src/app/widgets/dtos/feeds-response.dto.ts",
        "discussion_id": "2088559982",
        "commented_code": "@@ -78,7 +78,7 @@ export class NotificationFeedItemDto implements INotificationDto {\n     example: 'feed_445566',\n     type: String,\n   })\n-  _feedId: string;\n+  _feedId?: string | null;",
        "comment_created_at": "2025-05-14T09:58:55+00:00",
        "comment_author": "scopsy",
        "comment_body": "We would need to update the ApiProperty above, asd it's the one who is resposinble for the SDK gen, we can use the ApiPropertyOptional decorator for that and adding a nullable: true to it",
        "pr_file_module": null
      },
      {
        "comment_id": "2088608350",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8299,
        "pr_file": "apps/api/src/app/widgets/dtos/feeds-response.dto.ts",
        "discussion_id": "2088559982",
        "commented_code": "@@ -78,7 +78,7 @@ export class NotificationFeedItemDto implements INotificationDto {\n     example: 'feed_445566',\n     type: String,\n   })\n-  _feedId: string;\n+  _feedId?: string | null;",
        "comment_created_at": "2025-05-14T10:24:05+00:00",
        "comment_author": "Graphmaxer",
        "comment_body": "Thanks for the quick reply, I updated it :)",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2067846582",
    "pr_number": 8193,
    "pr_file": "apps/api/src/app/shared/framework/response.decorator.ts",
    "created_at": "2025-04-30T04:47:43+00:00",
    "commented_code": "return applyDecorators(\n     ApiExtraModels(DataWrapperDto, dataDto),\n-    responseDecoratorFunction(\n-      options || {\n-        description,\n-        schema: buildSchema(shouldEnvelope, isResponseArray, dataDto),\n-      }\n-    )\n+    responseDecoratorFunction({\n+      description,\n+      schema: buildSchema(shouldEnvelope, isResponseArray, dataDto),\n+      ...options,\n+    })",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2067846582",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8193,
        "pr_file": "apps/api/src/app/shared/framework/response.decorator.ts",
        "discussion_id": "2067846582",
        "commented_code": "@@ -303,12 +303,11 @@ export const ApiResponse = <DataDto extends Type<unknown>>(\n \n   return applyDecorators(\n     ApiExtraModels(DataWrapperDto, dataDto),\n-    responseDecoratorFunction(\n-      options || {\n-        description,\n-        schema: buildSchema(shouldEnvelope, isResponseArray, dataDto),\n-      }\n-    )\n+    responseDecoratorFunction({\n+      description,\n+      schema: buildSchema(shouldEnvelope, isResponseArray, dataDto),\n+      ...options,\n+    })",
        "comment_created_at": "2025-04-30T04:47:43+00:00",
        "comment_author": "scopsy",
        "comment_body": "This fixes a bug where swagger options was not working and overriding the schema definition",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2068955284",
    "pr_number": 8193,
    "pr_file": "apps/api/src/app/subscribers/subscribersV1.controller.ts",
    "created_at": "2025-04-30T15:44:07+00:00",
    "commented_code": "@ApiResponse(String, 200, false, false, {\n     status: 200,\n     description: 'Returns plain text response.',\n+    schema: undefined,",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2068955284",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8193,
        "pr_file": "apps/api/src/app/subscribers/subscribersV1.controller.ts",
        "discussion_id": "2068955284",
        "commented_code": "@@ -739,6 +737,7 @@ export class SubscribersV1Controller {\n   @ApiResponse(String, 200, false, false, {\n     status: 200,\n     description: 'Returns plain text response.',\n+    schema: undefined,",
        "comment_created_at": "2025-04-30T15:44:07+00:00",
        "comment_author": "djabarovgeorge",
        "comment_body": "what this chage does?",
        "pr_file_module": null
      },
      {
        "comment_id": "2071238605",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8193,
        "pr_file": "apps/api/src/app/subscribers/subscribersV1.controller.ts",
        "discussion_id": "2068955284",
        "commented_code": "@@ -739,6 +737,7 @@ export class SubscribersV1Controller {\n   @ApiResponse(String, 200, false, false, {\n     status: 200,\n     description: 'Returns plain text response.',\n+    schema: undefined,",
        "comment_created_at": "2025-05-02T07:52:22+00:00",
        "comment_author": "scopsy",
        "comment_body": "It ensures that the reponse type is the content schema defined one line below. I've fixed a bug with the ApiResponse options, where it was previously just deleting the default schema, instead of overriding it. Preveneting us to rely on the default schema passed on the first param and adding descriptions, and other open-api metadata. That was the only endpoint that relying on this content-type response which is not JSON",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2068963551",
    "pr_number": 8193,
    "pr_file": "apps/api/src/app/topics-v1/dtos/filter-topics.dto.ts",
    "created_at": "2025-04-30T15:46:58+00:00",
    "commented_code": "@IsString()\n   @IsOptional()\n   public key?: string;\n+\n+  @ApiProperty({\n+    example: 'Example Topic',\n+    required: false,\n+    type: 'string',\n+    description: 'A filter name to apply to the results',\n+  })",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2068963551",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8193,
        "pr_file": "apps/api/src/app/topics-v1/dtos/filter-topics.dto.ts",
        "discussion_id": "2068963551",
        "commented_code": "@@ -36,6 +36,16 @@ export class FilterTopicsRequestDto {\n   @IsString()\n   @IsOptional()\n   public key?: string;\n+\n+  @ApiProperty({\n+    example: 'Example Topic',\n+    required: false,\n+    type: 'string',\n+    description: 'A filter name to apply to the results',\n+  })",
        "comment_created_at": "2025-04-30T15:46:58+00:00",
        "comment_author": "djabarovgeorge",
        "comment_body": "```suggestion\r\n  @ApiPropertyOptional({\r\n    example: 'Example Topic',\r\n    type: 'string',\r\n    description: 'A filter name to apply to the results',\r\n  })\r\n```",
        "pr_file_module": null
      }
    ]
  }
]