[
  {
    "discussion_id": "2237219032",
    "pr_number": 8806,
    "pr_file": "apps/dashboard/src/components/workflow-editor/steps/email/email-editor.tsx",
    "created_at": "2025-07-28T16:38:53+00:00",
    "commented_code": "</div>\n         )}\n       </div>\n-      {getComponentByType({ component: body.component })}\n+      {currentEnvironment?.type === EnvironmentTypeEnum.DEV ? (\n+        getComponentByType({ component: body.component })\n+      ) : (\n+        <StepEditorUnavailable />",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2237219032",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8806,
        "pr_file": "apps/dashboard/src/components/workflow-editor/steps/email/email-editor.tsx",
        "discussion_id": "2237219032",
        "commented_code": "@@ -38,7 +47,11 @@ export const EmailEditor = (props: EmailEditorProps) => {\n           </div>\n         )}\n       </div>\n-      {getComponentByType({ component: body.component })}\n+      {currentEnvironment?.type === EnvironmentTypeEnum.DEV ? (\n+        getComponentByType({ component: body.component })\n+      ) : (\n+        <StepEditorUnavailable />",
        "comment_created_at": "2025-07-28T16:38:53+00:00",
        "comment_author": "LetItRock",
        "comment_body": "in the email editor render this editor unavailable instead of body",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2231489235",
    "pr_number": 8793,
    "pr_file": "apps/dashboard/src/components/layouts/create-layout-btn.tsx",
    "created_at": "2025-07-25T15:53:40+00:00",
    "commented_code": "import { IconType } from 'react-icons/lib';\n import { RiAddCircleLine } from 'react-icons/ri';\n import { useLocation, useNavigate } from 'react-router-dom';\n-import { EnvironmentTypeEnum, PermissionsEnum } from '@novu/shared';\n+import { ApiServiceLevelEnum, EnvironmentTypeEnum, PermissionsEnum } from '@novu/shared';\n \n import { PermissionButton } from '@/components/primitives/permission-button';\n import { useEnvironment } from '@/context/environment/hooks';\n import { buildRoute, ROUTES } from '@/utils/routes';\n import { Tooltip, TooltipContent, TooltipTrigger } from '../primitives/tooltip';\n import { Button } from '../primitives/button';\n+import { useFetchSubscription } from '@/hooks/use-fetch-subscription';\n+import { useTelemetry } from '@/hooks/use-telemetry';\n+import { TelemetryEvent } from '@/utils/telemetry';\n+import { useLayoutsUrlState } from './hooks/use-layouts-url-state';\n+import { useFetchLayouts } from '@/hooks/use-fetch-layouts';\n \n export const CreateLayoutButton = ({\n   icon = RiAddCircleLine,\n   text = 'Create layout',\n+  disabled = false,\n }: {\n   icon?: IconType | undefined;\n   text?: string;\n+  disabled?: boolean;\n }) => {\n+  const track = useTelemetry();\n   const navigate = useNavigate();\n   const { currentEnvironment } = useEnvironment();\n   const { search } = useLocation();\n+  const { subscription } = useFetchSubscription();\n+  const tier = subscription?.apiServiceLevel || ApiServiceLevelEnum.FREE;\n+  const { filterValues } = useLayoutsUrlState();\n+  const { data } = useFetchLayouts({\n+    limit: filterValues.limit,\n+    offset: filterValues.offset,\n+    orderBy: filterValues.orderBy,\n+    orderDirection: filterValues.orderDirection,\n+    query: filterValues.query,\n+  });\n \n   const handleCreateLayout = () => {\n+    track(TelemetryEvent.LAYOUTS_CREATE_CLICKED);\n     navigate(`${buildRoute(ROUTES.LAYOUTS_CREATE, { environmentSlug: currentEnvironment?.slug ?? '' })}${search}`);\n   };\n \n+  if (tier === ApiServiceLevelEnum.FREE && data?.layouts && data?.layouts?.length >= 1) {",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2231489235",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8793,
        "pr_file": "apps/dashboard/src/components/layouts/create-layout-btn.tsx",
        "discussion_id": "2231489235",
        "commented_code": "@@ -1,29 +1,67 @@\n import { IconType } from 'react-icons/lib';\n import { RiAddCircleLine } from 'react-icons/ri';\n import { useLocation, useNavigate } from 'react-router-dom';\n-import { EnvironmentTypeEnum, PermissionsEnum } from '@novu/shared';\n+import { ApiServiceLevelEnum, EnvironmentTypeEnum, PermissionsEnum } from '@novu/shared';\n \n import { PermissionButton } from '@/components/primitives/permission-button';\n import { useEnvironment } from '@/context/environment/hooks';\n import { buildRoute, ROUTES } from '@/utils/routes';\n import { Tooltip, TooltipContent, TooltipTrigger } from '../primitives/tooltip';\n import { Button } from '../primitives/button';\n+import { useFetchSubscription } from '@/hooks/use-fetch-subscription';\n+import { useTelemetry } from '@/hooks/use-telemetry';\n+import { TelemetryEvent } from '@/utils/telemetry';\n+import { useLayoutsUrlState } from './hooks/use-layouts-url-state';\n+import { useFetchLayouts } from '@/hooks/use-fetch-layouts';\n \n export const CreateLayoutButton = ({\n   icon = RiAddCircleLine,\n   text = 'Create layout',\n+  disabled = false,\n }: {\n   icon?: IconType | undefined;\n   text?: string;\n+  disabled?: boolean;\n }) => {\n+  const track = useTelemetry();\n   const navigate = useNavigate();\n   const { currentEnvironment } = useEnvironment();\n   const { search } = useLocation();\n+  const { subscription } = useFetchSubscription();\n+  const tier = subscription?.apiServiceLevel || ApiServiceLevelEnum.FREE;\n+  const { filterValues } = useLayoutsUrlState();\n+  const { data } = useFetchLayouts({\n+    limit: filterValues.limit,\n+    offset: filterValues.offset,\n+    orderBy: filterValues.orderBy,\n+    orderDirection: filterValues.orderDirection,\n+    query: filterValues.query,\n+  });\n \n   const handleCreateLayout = () => {\n+    track(TelemetryEvent.LAYOUTS_CREATE_CLICKED);\n     navigate(`${buildRoute(ROUTES.LAYOUTS_CREATE, { environmentSlug: currentEnvironment?.slug ?? '' })}${search}`);\n   };\n \n+  if (tier === ApiServiceLevelEnum.FREE && data?.layouts && data?.layouts?.length >= 1) {",
        "comment_created_at": "2025-07-25T15:53:40+00:00",
        "comment_author": "LetItRock",
        "comment_body": "create layouts button should be disabled for free tier and when layouts >= 1",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2090918160",
    "pr_number": 8300,
    "pr_file": "apps/dashboard/src/components/side-navigation/side-navigation.tsx",
    "created_at": "2025-05-15T11:06:10+00:00",
    "commented_code": "<RiKey2Line className=\"size-4\" />\n                 <span>API Keys</span>\n               </NavigationLink>\n+              {isWebhooksManagementEnabled && !IS_SELF_HOSTED && (",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2090918160",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8300,
        "pr_file": "apps/dashboard/src/components/side-navigation/side-navigation.tsx",
        "discussion_id": "2090918160",
        "commented_code": "@@ -153,6 +155,12 @@ export const SideNavigation = () => {\n                 <RiKey2Line className=\"size-4\" />\n                 <span>API Keys</span>\n               </NavigationLink>\n+              {isWebhooksManagementEnabled && !IS_SELF_HOSTED && (",
        "comment_created_at": "2025-05-15T11:06:10+00:00",
        "comment_author": "djabarovgeorge",
        "comment_body": "i wonder if the IS_SELF_HOSTED is needed, the FF won't make the work by itself?\r\n```suggestion\r\n              {isWebhooksManagementEnabled (\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "2092665911",
        "repo_full_name": "novuhq/novu",
        "pr_number": 8300,
        "pr_file": "apps/dashboard/src/components/side-navigation/side-navigation.tsx",
        "discussion_id": "2090918160",
        "commented_code": "@@ -153,6 +155,12 @@ export const SideNavigation = () => {\n                 <RiKey2Line className=\"size-4\" />\n                 <span>API Keys</span>\n               </NavigationLink>\n+              {isWebhooksManagementEnabled && !IS_SELF_HOSTED && (",
        "comment_created_at": "2025-05-16T09:12:12+00:00",
        "comment_author": "scopsy",
        "comment_body": "It was more for when we remove the FF, to not forget about it. But I added a CTA for cloud on self-hosted",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2067879990",
    "pr_number": 7755,
    "pr_file": "apps/dashboard/src/components/environments/environments-free-state.tsx",
    "created_at": "2025-04-30T05:31:37+00:00",
    "commented_code": "track(TelemetryEvent.UPGRADE_TO_TEAM_TIER_CLICK, {\n                 source: 'environments-page',\n               });\n-              navigate(ROUTES.SETTINGS_BILLING);\n+\n+              if (IS_SELF_HOSTED) {\n+                openInNewTab(SELF_HOSTED_UPGRADE_REDIRECT_URL + '?utm_campaign=custom_environemnts');\n+              } else {\n+                navigate(ROUTES.SETTINGS_BILLING);\n+              }\n             }}\n             leadingIcon={RiSparkling2Line}\n           >\n-            Upgrade to Team Tier\n+            {IS_SELF_HOSTED ? 'Migrate to Cloud' : 'Upgrade to Team Tier'}",
    "repo_full_name": "novuhq/novu",
    "discussion_comments": [
      {
        "comment_id": "2067879990",
        "repo_full_name": "novuhq/novu",
        "pr_number": 7755,
        "pr_file": "apps/dashboard/src/components/environments/environments-free-state.tsx",
        "discussion_id": "2067879990",
        "commented_code": "@@ -90,11 +95,16 @@ export function FreeTierState() {\n               track(TelemetryEvent.UPGRADE_TO_TEAM_TIER_CLICK, {\n                 source: 'environments-page',\n               });\n-              navigate(ROUTES.SETTINGS_BILLING);\n+\n+              if (IS_SELF_HOSTED) {\n+                openInNewTab(SELF_HOSTED_UPGRADE_REDIRECT_URL + '?utm_campaign=custom_environemnts');\n+              } else {\n+                navigate(ROUTES.SETTINGS_BILLING);\n+              }\n             }}\n             leadingIcon={RiSparkling2Line}\n           >\n-            Upgrade to Team Tier\n+            {IS_SELF_HOSTED ? 'Migrate to Cloud' : 'Upgrade to Team Tier'}",
        "comment_created_at": "2025-04-30T05:31:37+00:00",
        "comment_author": "scopsy",
        "comment_body": "```suggestion\r\n            {IS_SELF_HOSTED ? 'Contact Sales' : 'Upgrade to Team Tier'}\r\n```",
        "pr_file_module": null
      }
    ]
  }
]