[
  {
    "discussion_id": "2018861480",
    "pr_number": 31571,
    "pr_file": "packages/nuxt/src/core/runtime/nitro/handlers/renderer.ts",
    "created_at": "2025-03-28T15:11:11+00:00",
    "commented_code": "? getQuery(event) as unknown as NuxtPayload['error'] & { url: string }\n     : null\n \n-  if (ssrError && ssrError.statusCode) {\n-    ssrError.statusCode = Number.parseInt(ssrError.statusCode as any)\n-  }\n-\n   if (ssrError && !('__unenv__' in event.node.req) /* allow internal fetch */) {\n     throw createError({\n       statusCode: 404,\n       statusMessage: 'Page Not Found: /__nuxt_error',\n     })\n   }\n \n+  if (ssrError) {\n+    ssrError.statusCode &&= Number.parseInt(ssrError.statusCode as any)\n+    if (typeof ssrError.data === 'string' && ssrError.data.startsWith('{')) {\n+      try {\n+        ssrError.data = JSON.parse(ssrError.data)",
    "repo_full_name": "nuxt/nuxt",
    "discussion_comments": [
      {
        "comment_id": "2018861480",
        "repo_full_name": "nuxt/nuxt",
        "pr_number": 31571,
        "pr_file": "packages/nuxt/src/core/runtime/nitro/handlers/renderer.ts",
        "discussion_id": "2018861480",
        "commented_code": "@@ -134,17 +134,24 @@ export default defineRenderHandler(async (event): Promise<Partial<RenderResponse\n     ? getQuery(event) as unknown as NuxtPayload['error'] & { url: string }\n     : null\n \n-  if (ssrError && ssrError.statusCode) {\n-    ssrError.statusCode = Number.parseInt(ssrError.statusCode as any)\n-  }\n-\n   if (ssrError && !('__unenv__' in event.node.req) /* allow internal fetch */) {\n     throw createError({\n       statusCode: 404,\n       statusMessage: 'Page Not Found: /__nuxt_error',\n     })\n   }\n \n+  if (ssrError) {\n+    ssrError.statusCode &&= Number.parseInt(ssrError.statusCode as any)\n+    if (typeof ssrError.data === 'string' && ssrError.data.startsWith('{')) {\n+      try {\n+        ssrError.data = JSON.parse(ssrError.data)",
        "comment_created_at": "2025-03-28T15:11:11+00:00",
        "comment_author": "danielroe",
        "comment_body": "```suggestion\n        ssrError.data = destr(ssrError.data)\n```\n",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1973260744",
    "pr_number": 31144,
    "pr_file": "packages/nuxt/src/app/composables/asyncData.ts",
    "created_at": "2025-02-27T10:01:39+00:00",
    "commented_code": "}\n \n         if (import.meta.dev && import.meta.server && typeof result === 'undefined') {\n+          const { captureStackTrace } = await import('errx')\n+          const { fileURLToPath } = await import('node:url')\n+          const stack = captureStackTrace()\n+          const caller = stack[stack.length - 1]",
    "repo_full_name": "nuxt/nuxt",
    "discussion_comments": [
      {
        "comment_id": "1973260744",
        "repo_full_name": "nuxt/nuxt",
        "pr_number": 31144,
        "pr_file": "packages/nuxt/src/app/composables/asyncData.ts",
        "discussion_id": "1973260744",
        "commented_code": "@@ -301,8 +301,13 @@ export function useAsyncData<\n         }\n \n         if (import.meta.dev && import.meta.server && typeof result === 'undefined') {\n+          const { captureStackTrace } = await import('errx')\n+          const { fileURLToPath } = await import('node:url')\n+          const stack = captureStackTrace()\n+          const caller = stack[stack.length - 1]",
        "comment_created_at": "2025-02-27T10:01:39+00:00",
        "comment_author": "ShayanBits",
        "comment_body": "```suggestion\r\n   const {source, line, column} = stack[stack.length - 1] ?? {}\r\n   const explanation = source ? ` (used at ${fileURLToPath(source)}:${line}:${column})` : ''\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "1973271953",
        "repo_full_name": "nuxt/nuxt",
        "pr_number": 31144,
        "pr_file": "packages/nuxt/src/app/composables/asyncData.ts",
        "discussion_id": "1973260744",
        "commented_code": "@@ -301,8 +301,13 @@ export function useAsyncData<\n         }\n \n         if (import.meta.dev && import.meta.server && typeof result === 'undefined') {\n+          const { captureStackTrace } = await import('errx')\n+          const { fileURLToPath } = await import('node:url')\n+          const stack = captureStackTrace()\n+          const caller = stack[stack.length - 1]",
        "comment_created_at": "2025-02-27T10:08:10+00:00",
        "comment_author": "xjccc",
        "comment_body": "Thank you",
        "pr_file_module": null
      },
      {
        "comment_id": "1973283829",
        "repo_full_name": "nuxt/nuxt",
        "pr_number": 31144,
        "pr_file": "packages/nuxt/src/app/composables/asyncData.ts",
        "discussion_id": "1973260744",
        "commented_code": "@@ -301,8 +301,13 @@ export function useAsyncData<\n         }\n \n         if (import.meta.dev && import.meta.server && typeof result === 'undefined') {\n+          const { captureStackTrace } = await import('errx')\n+          const { fileURLToPath } = await import('node:url')\n+          const stack = captureStackTrace()\n+          const caller = stack[stack.length - 1]",
        "comment_created_at": "2025-02-27T10:15:25+00:00",
        "comment_author": "ShayanBits",
        "comment_body": "you're welcome! \ud83d\ude4f ",
        "pr_file_module": null
      }
    ]
  }
]