[
  {
    "discussion_id": "2449277148",
    "pr_number": 33102,
    "pr_file": "astro-docs/src/content/docs/extending-nx/createnodes-compatibility.mdoc",
    "created_at": "2025-10-21T18:13:07+00:00",
    "commented_code": "+---\n+title: CreateNodes API Compatibility\n+description: Understand which createNodes API version is used by different Nx versions and how to write plugins that support multiple Nx versions.\n+filter: 'type:Reference'\n+---\n+\n+This is a reference for knowing how Nx versions and the `createNodes`/`createNodesV2` APIs interact. If you plan on supporting multiple Nx versions with a custom plugin, then it's important to know which APIs to use.\n+\n+## Which CreateNodes Version Does Nx Call?\n+\n+The following table shows which export Nx will call based on the Nx version:\n+\n+| Nx Version    | Calls `createNodes` | Calls `createNodesV2` | Nx Call Preference           |\n+| ------------- | ------------------- | --------------------- | ---------------------------- |\n+| 17.x - 19.1.x | Yes                 | No                    | Only v1 supported            |\n+| 19.2.x - 20.x | Yes (fallback)      | Yes (preferred)       | Prefers v2, falls back to v1 |\n+| 21.x - 21.x   | No                  | Yes                   | Only v2 supported            |\n+| 22.x+         | Yes (v2 signature)  | Yes                   | Both use v2 signature        |\n+\n+## Which Nx Versions Does My Plugin Support?\n+\n+> Note this is the same information as above, but presented as a lookup table for plugin authors.\n+\n+If you're a plugin author, this table shows which Nx versions your plugin will support based on which exports you provide:\n+\n+| Plugin Exports                            | Nx 17-19.1       | Nx 19.2-20       | Nx 21-21.x       | Nx 22+           |\n+| ----------------------------------------- | ---------------- | ---------------- | ---------------- | ---------------- |\n+| Only `createNodes` (v1)                   | \u2705 Supported     | \u2705 Supported     | \u274c Not Supported | \u274c Not Supported |\n+| Only `createNodesV2`                      | \u274c Not Supported | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     |\n+| Both `createNodes` (v1) & `createNodesV2` | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     |\n+| Both with v2 signature (Nx 22+)           | \u274c Not Supported | \u274c Not Supported | \u2705 Supported     | \u2705 Supported     |\n+\n+## Recommended Implementation Pattern\n+\n+### Plugin Support for Nx 21 and later\n+\n+For plugins targeting **Nx 21 and later**, the recommended pattern is to export both `createNodes` and `createNodesV2` using the same v2 implementation:\n+\n+```typescript\n+// my-plugin/index.ts\n+import {\n+  CreateNodesV2,\n+  CreateNodesContextV2,\n+  createNodesFromFiles,\n+} from '@nx/devkit';\n+\n+export interface MyPluginOptions {\n+  // your options\n+}\n+\n+// Export createNodes with v2 signature\n+export const createNodes: CreateNodesV2<MyPluginOptions> = [\n+  '**/some-config.json',\n+  async (configFiles, options, context) => {\n+    return await createNodesFromFiles(\n+      (configFile, options, context) =>\n+        createNodesInternal(configFile, options, context),\n+      configFiles,\n+      options,\n+      context\n+    );\n+  },\n+];\n+\n+// Re-export as createNodesV2\n+export const createNodesV2 = createNodes;\n+\n+async function createNodesInternal(\n+  configFilePath: string,\n+  options: MyPluginOptions,\n+  context: CreateNodesContextV2\n+) {\n+  // Your plugin logic here\n+  return {\n+    projects: {\n+      // ...\n+    },\n+  };\n+}\n+```\n+\n+This pattern ensures your plugin works with both Nx 21 and Nx 22+.\n+\n+### Plugin Support for Nx 17 Through Nx 20\n+\n+If you need to support Nx versions 17-20, you'll need to provide separate implementations:\n+\n+```typescript\n+// my-plugin/index.ts\n+import {\n+  CreateNodes,",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2449277148",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33102,
        "pr_file": "astro-docs/src/content/docs/extending-nx/createnodes-compatibility.mdoc",
        "discussion_id": "2449277148",
        "commented_code": "@@ -0,0 +1,150 @@\n+---\n+title: CreateNodes API Compatibility\n+description: Understand which createNodes API version is used by different Nx versions and how to write plugins that support multiple Nx versions.\n+filter: 'type:Reference'\n+---\n+\n+This is a reference for knowing how Nx versions and the `createNodes`/`createNodesV2` APIs interact. If you plan on supporting multiple Nx versions with a custom plugin, then it's important to know which APIs to use.\n+\n+## Which CreateNodes Version Does Nx Call?\n+\n+The following table shows which export Nx will call based on the Nx version:\n+\n+| Nx Version    | Calls `createNodes` | Calls `createNodesV2` | Nx Call Preference           |\n+| ------------- | ------------------- | --------------------- | ---------------------------- |\n+| 17.x - 19.1.x | Yes                 | No                    | Only v1 supported            |\n+| 19.2.x - 20.x | Yes (fallback)      | Yes (preferred)       | Prefers v2, falls back to v1 |\n+| 21.x - 21.x   | No                  | Yes                   | Only v2 supported            |\n+| 22.x+         | Yes (v2 signature)  | Yes                   | Both use v2 signature        |\n+\n+## Which Nx Versions Does My Plugin Support?\n+\n+> Note this is the same information as above, but presented as a lookup table for plugin authors.\n+\n+If you're a plugin author, this table shows which Nx versions your plugin will support based on which exports you provide:\n+\n+| Plugin Exports                            | Nx 17-19.1       | Nx 19.2-20       | Nx 21-21.x       | Nx 22+           |\n+| ----------------------------------------- | ---------------- | ---------------- | ---------------- | ---------------- |\n+| Only `createNodes` (v1)                   | \u2705 Supported     | \u2705 Supported     | \u274c Not Supported | \u274c Not Supported |\n+| Only `createNodesV2`                      | \u274c Not Supported | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     |\n+| Both `createNodes` (v1) & `createNodesV2` | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     |\n+| Both with v2 signature (Nx 22+)           | \u274c Not Supported | \u274c Not Supported | \u2705 Supported     | \u2705 Supported     |\n+\n+## Recommended Implementation Pattern\n+\n+### Plugin Support for Nx 21 and later\n+\n+For plugins targeting **Nx 21 and later**, the recommended pattern is to export both `createNodes` and `createNodesV2` using the same v2 implementation:\n+\n+```typescript\n+// my-plugin/index.ts\n+import {\n+  CreateNodesV2,\n+  CreateNodesContextV2,\n+  createNodesFromFiles,\n+} from '@nx/devkit';\n+\n+export interface MyPluginOptions {\n+  // your options\n+}\n+\n+// Export createNodes with v2 signature\n+export const createNodes: CreateNodesV2<MyPluginOptions> = [\n+  '**/some-config.json',\n+  async (configFiles, options, context) => {\n+    return await createNodesFromFiles(\n+      (configFile, options, context) =>\n+        createNodesInternal(configFile, options, context),\n+      configFiles,\n+      options,\n+      context\n+    );\n+  },\n+];\n+\n+// Re-export as createNodesV2\n+export const createNodesV2 = createNodes;\n+\n+async function createNodesInternal(\n+  configFilePath: string,\n+  options: MyPluginOptions,\n+  context: CreateNodesContextV2\n+) {\n+  // Your plugin logic here\n+  return {\n+    projects: {\n+      // ...\n+    },\n+  };\n+}\n+```\n+\n+This pattern ensures your plugin works with both Nx 21 and Nx 22+.\n+\n+### Plugin Support for Nx 17 Through Nx 20\n+\n+If you need to support Nx versions 17-20, you'll need to provide separate implementations:\n+\n+```typescript\n+// my-plugin/index.ts\n+import {\n+  CreateNodes,",
        "comment_created_at": "2025-10-21T18:13:07+00:00",
        "comment_author": "AgentEnder",
        "comment_body": "This type is no longer in the codebase for @nx/devkit@22 and higher ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2449281591",
    "pr_number": 33102,
    "pr_file": "astro-docs/src/content/docs/extending-nx/createnodes-compatibility.mdoc",
    "created_at": "2025-10-21T18:14:44+00:00",
    "commented_code": "+---\n+title: CreateNodes API Compatibility\n+description: Understand which createNodes API version is used by different Nx versions and how to write plugins that support multiple Nx versions.\n+filter: 'type:Reference'\n+---\n+\n+This is a reference for knowing how Nx versions and the `createNodes`/`createNodesV2` APIs interact. If you plan on supporting multiple Nx versions with a custom plugin, then it's important to know which APIs to use.\n+\n+## Which CreateNodes Version Does Nx Call?\n+\n+The following table shows which export Nx will call based on the Nx version:\n+\n+| Nx Version    | Calls `createNodes` | Calls `createNodesV2` | Nx Call Preference           |\n+| ------------- | ------------------- | --------------------- | ---------------------------- |\n+| 17.x - 19.1.x | Yes                 | No                    | Only v1 supported            |\n+| 19.2.x - 20.x | Yes (fallback)      | Yes (preferred)       | Prefers v2, falls back to v1 |\n+| 21.x - 21.x   | No                  | Yes                   | Only v2 supported            |\n+| 22.x+         | Yes (v2 signature)  | Yes                   | Both use v2 signature        |\n+\n+## Which Nx Versions Does My Plugin Support?\n+\n+> Note this is the same information as above, but presented as a lookup table for plugin authors.\n+\n+If you're a plugin author, this table shows which Nx versions your plugin will support based on which exports you provide:\n+\n+| Plugin Exports                            | Nx 17-19.1       | Nx 19.2-20       | Nx 21-21.x       | Nx 22+           |\n+| ----------------------------------------- | ---------------- | ---------------- | ---------------- | ---------------- |\n+| Only `createNodes` (v1)                   | \u2705 Supported     | \u2705 Supported     | \u274c Not Supported | \u274c Not Supported |\n+| Only `createNodesV2`                      | \u274c Not Supported | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     |\n+| Both `createNodes` (v1) & `createNodesV2` | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     |\n+| Both with v2 signature (Nx 22+)           | \u274c Not Supported | \u274c Not Supported | \u2705 Supported     | \u2705 Supported     |\n+\n+## Recommended Implementation Pattern\n+\n+### Plugin Support for Nx 21 and later\n+\n+For plugins targeting **Nx 21 and later**, the recommended pattern is to export both `createNodes` and `createNodesV2` using the same v2 implementation:\n+\n+```typescript\n+// my-plugin/index.ts\n+import {\n+  CreateNodesV2,\n+  CreateNodesContextV2,\n+  createNodesFromFiles,\n+} from '@nx/devkit';\n+\n+export interface MyPluginOptions {\n+  // your options\n+}\n+\n+// Export createNodes with v2 signature\n+export const createNodes: CreateNodesV2<MyPluginOptions> = [\n+  '**/some-config.json',\n+  async (configFiles, options, context) => {\n+    return await createNodesFromFiles(\n+      (configFile, options, context) =>\n+        createNodesInternal(configFile, options, context),\n+      configFiles,\n+      options,\n+      context\n+    );\n+  },\n+];\n+\n+// Re-export as createNodesV2\n+export const createNodesV2 = createNodes;\n+\n+async function createNodesInternal(\n+  configFilePath: string,\n+  options: MyPluginOptions,\n+  context: CreateNodesContextV2\n+) {\n+  // Your plugin logic here\n+  return {\n+    projects: {\n+      // ...\n+    },\n+  };\n+}\n+```\n+\n+This pattern ensures your plugin works with both Nx 21 and Nx 22+.\n+\n+### Plugin Support for Nx 17 Through Nx 20\n+\n+If you need to support Nx versions 17-20, you'll need to provide separate implementations:\n+\n+```typescript\n+// my-plugin/index.ts\n+import {\n+  CreateNodes,\n+  CreateNodesV2,\n+  CreateNodesContext,\n+  CreateNodesContextV2,\n+} from '@nx/devkit';\n+\n+export interface MyPluginOptions {\n+  // your options\n+}\n+\n+// V1 API for Nx 17-20\n+export const createNodes: CreateNodes<MyPluginOptions> = [\n+  '**/some-config.json',\n+  (configFile, options, context: CreateNodesContext) => {\n+    // V1 implementation - processes one file at a time\n+    return createNodesInternal(configFile, options, context);\n+  },\n+];\n+\n+// V2 API for Nx 19.2+\n+export const createNodesV2: CreateNodesV2<MyPluginOptions> = [\n+  '**/my-config.json',\n+  async (configFiles, options, context: CreateNodesContextV2) => {\n+    return await createNodesFromFiles(\n+      (configFile, options, context) =>\n+        createNodesInternal(configFile, options, context),\n+      configFiles,\n+      options,\n+      context\n+    );\n+  },\n+];\n+\n+function createNodesInternal(\n+  configFilePath: string,\n+  options: MyPluginOptions,\n+  context: CreateNodesContext | CreateNodesContextV2\n+) {\n+  // Shared logic that works with both APIs\n+  return {\n+    projects: {\n+      // ...\n+    },\n+  };\n+}\n+```\n+\n+## Future Deprecation Timeline\n+\n+Nx is standardizing on the v2 API. Here's the planned timeline:\n+\n+- **Nx 22**: Both `createNodes` and `createNodesV2` can be exported with v2 signature. `createNodes` re-exported as `createNodesV2`.\n+- **Nx 23**: The `createNodesV2` export will be marked as deprecated in TypeScript types. Use `createNodes` with v2 signature instead.\n+- **Nx 24**: The `createNodesV2` types will be removed. Only `createNodes` with v2 signature will be supported.",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2449281591",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33102,
        "pr_file": "astro-docs/src/content/docs/extending-nx/createnodes-compatibility.mdoc",
        "discussion_id": "2449281591",
        "commented_code": "@@ -0,0 +1,150 @@\n+---\n+title: CreateNodes API Compatibility\n+description: Understand which createNodes API version is used by different Nx versions and how to write plugins that support multiple Nx versions.\n+filter: 'type:Reference'\n+---\n+\n+This is a reference for knowing how Nx versions and the `createNodes`/`createNodesV2` APIs interact. If you plan on supporting multiple Nx versions with a custom plugin, then it's important to know which APIs to use.\n+\n+## Which CreateNodes Version Does Nx Call?\n+\n+The following table shows which export Nx will call based on the Nx version:\n+\n+| Nx Version    | Calls `createNodes` | Calls `createNodesV2` | Nx Call Preference           |\n+| ------------- | ------------------- | --------------------- | ---------------------------- |\n+| 17.x - 19.1.x | Yes                 | No                    | Only v1 supported            |\n+| 19.2.x - 20.x | Yes (fallback)      | Yes (preferred)       | Prefers v2, falls back to v1 |\n+| 21.x - 21.x   | No                  | Yes                   | Only v2 supported            |\n+| 22.x+         | Yes (v2 signature)  | Yes                   | Both use v2 signature        |\n+\n+## Which Nx Versions Does My Plugin Support?\n+\n+> Note this is the same information as above, but presented as a lookup table for plugin authors.\n+\n+If you're a plugin author, this table shows which Nx versions your plugin will support based on which exports you provide:\n+\n+| Plugin Exports                            | Nx 17-19.1       | Nx 19.2-20       | Nx 21-21.x       | Nx 22+           |\n+| ----------------------------------------- | ---------------- | ---------------- | ---------------- | ---------------- |\n+| Only `createNodes` (v1)                   | \u2705 Supported     | \u2705 Supported     | \u274c Not Supported | \u274c Not Supported |\n+| Only `createNodesV2`                      | \u274c Not Supported | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     |\n+| Both `createNodes` (v1) & `createNodesV2` | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     | \u2705 Supported     |\n+| Both with v2 signature (Nx 22+)           | \u274c Not Supported | \u274c Not Supported | \u2705 Supported     | \u2705 Supported     |\n+\n+## Recommended Implementation Pattern\n+\n+### Plugin Support for Nx 21 and later\n+\n+For plugins targeting **Nx 21 and later**, the recommended pattern is to export both `createNodes` and `createNodesV2` using the same v2 implementation:\n+\n+```typescript\n+// my-plugin/index.ts\n+import {\n+  CreateNodesV2,\n+  CreateNodesContextV2,\n+  createNodesFromFiles,\n+} from '@nx/devkit';\n+\n+export interface MyPluginOptions {\n+  // your options\n+}\n+\n+// Export createNodes with v2 signature\n+export const createNodes: CreateNodesV2<MyPluginOptions> = [\n+  '**/some-config.json',\n+  async (configFiles, options, context) => {\n+    return await createNodesFromFiles(\n+      (configFile, options, context) =>\n+        createNodesInternal(configFile, options, context),\n+      configFiles,\n+      options,\n+      context\n+    );\n+  },\n+];\n+\n+// Re-export as createNodesV2\n+export const createNodesV2 = createNodes;\n+\n+async function createNodesInternal(\n+  configFilePath: string,\n+  options: MyPluginOptions,\n+  context: CreateNodesContextV2\n+) {\n+  // Your plugin logic here\n+  return {\n+    projects: {\n+      // ...\n+    },\n+  };\n+}\n+```\n+\n+This pattern ensures your plugin works with both Nx 21 and Nx 22+.\n+\n+### Plugin Support for Nx 17 Through Nx 20\n+\n+If you need to support Nx versions 17-20, you'll need to provide separate implementations:\n+\n+```typescript\n+// my-plugin/index.ts\n+import {\n+  CreateNodes,\n+  CreateNodesV2,\n+  CreateNodesContext,\n+  CreateNodesContextV2,\n+} from '@nx/devkit';\n+\n+export interface MyPluginOptions {\n+  // your options\n+}\n+\n+// V1 API for Nx 17-20\n+export const createNodes: CreateNodes<MyPluginOptions> = [\n+  '**/some-config.json',\n+  (configFile, options, context: CreateNodesContext) => {\n+    // V1 implementation - processes one file at a time\n+    return createNodesInternal(configFile, options, context);\n+  },\n+];\n+\n+// V2 API for Nx 19.2+\n+export const createNodesV2: CreateNodesV2<MyPluginOptions> = [\n+  '**/my-config.json',\n+  async (configFiles, options, context: CreateNodesContextV2) => {\n+    return await createNodesFromFiles(\n+      (configFile, options, context) =>\n+        createNodesInternal(configFile, options, context),\n+      configFiles,\n+      options,\n+      context\n+    );\n+  },\n+];\n+\n+function createNodesInternal(\n+  configFilePath: string,\n+  options: MyPluginOptions,\n+  context: CreateNodesContext | CreateNodesContextV2\n+) {\n+  // Shared logic that works with both APIs\n+  return {\n+    projects: {\n+      // ...\n+    },\n+  };\n+}\n+```\n+\n+## Future Deprecation Timeline\n+\n+Nx is standardizing on the v2 API. Here's the planned timeline:\n+\n+- **Nx 22**: Both `createNodes` and `createNodesV2` can be exported with v2 signature. `createNodes` re-exported as `createNodesV2`.\n+- **Nx 23**: The `createNodesV2` export will be marked as deprecated in TypeScript types. Use `createNodes` with v2 signature instead.\n+- **Nx 24**: The `createNodesV2` types will be removed. Only `createNodes` with v2 signature will be supported.",
        "comment_created_at": "2025-10-21T18:14:44+00:00",
        "comment_author": "AgentEnder",
        "comment_body": "Im not sure if the typing will be fully renamed. The export for v2 is not planned to be removed. We will always support it, unless there's a v3 and subsequent depreciation but we are trying to avoid that",
        "pr_file_module": null
      }
    ]
  }
]