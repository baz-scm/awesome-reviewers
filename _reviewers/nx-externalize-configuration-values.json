[
  {
    "discussion_id": "2411566511",
    "pr_number": 32999,
    "pr_file": "nx-dev/nx-dev/next.config.js",
    "created_at": "2025-10-07T18:56:39+00:00",
    "commented_code": "const { withNx } = require('@nx/next/plugins/with-nx');\n const redirectRules = require('./redirect-rules');\n \n+if (!process.env.NEXT_PUBLIC_ASTRO_URL) {\n+  // If we're building for production throw error as each env must set this value.\n+  if (process.env.NODE_ENV === 'production') {\n+    throw new Error(\n+      `The NEXT_PUBLIC_ASTRO_URL environment variable is not set. Please set it to the URL of the Astro site.`\n+    );\n+  }\n+  // For dev, default to the canary docs.\n+  else {\n+    process.env.NEXT_PUBLIC_ASTRO_URL = 'https://master--nx-docs.netlify.app';\n+  }\n+}",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2411599558",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32999,
        "pr_file": "nx-dev/nx-dev/next.config.js",
        "discussion_id": "2411566511",
        "commented_code": "@@ -2,6 +2,19 @@\n const { withNx } = require('@nx/next/plugins/with-nx');\n const redirectRules = require('./redirect-rules');\n \n+if (!process.env.NEXT_PUBLIC_ASTRO_URL) {\n+  // If we're building for production throw error as each env must set this value.\n+  if (process.env.NODE_ENV === 'production') {\n+    throw new Error(\n+      `The NEXT_PUBLIC_ASTRO_URL environment variable is not set. Please set it to the URL of the Astro site.`\n+    );\n+  }\n+  // For dev, default to the canary docs.\n+  else {\n+    process.env.NEXT_PUBLIC_ASTRO_URL = 'https://master--nx-docs.netlify.app';\n+  }\n+}",
        "comment_created_at": "2025-10-07T18:56:39+00:00",
        "comment_author": "jaysoo",
        "comment_body": "We want somethign that fails build in case it's not set in Vercel. But locally we can let it default to canary docs as stated in the comment.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2130332915",
    "pr_number": 31427,
    "pr_file": "scripts/migrate-to-pnpm-10.js",
    "created_at": "2025-06-05T20:53:48+00:00",
    "commented_code": "+#!/usr/bin/env node\n+\n+const { execSync } = require('child_process');",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2130332915",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31427,
        "pr_file": "scripts/migrate-to-pnpm-10.js",
        "discussion_id": "2130332915",
        "commented_code": "@@ -0,0 +1,110 @@\n+#!/usr/bin/env node\n+\n+const { execSync } = require('child_process');",
        "comment_created_at": "2025-06-05T20:53:48+00:00",
        "comment_author": "FrozenPandaz",
        "comment_body": "Read the target version from `package.json` so that this can take it and do the rest.",
        "pr_file_module": null
      }
    ]
  }
]