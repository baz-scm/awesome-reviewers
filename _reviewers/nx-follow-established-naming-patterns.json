[
  {
    "discussion_id": "2373312460",
    "pr_number": 32830,
    "pr_file": "astro-docs/src/content/docs/technologies/test-tools/playwright/Guides/merge-atomized-outputs.mdoc",
    "created_at": "2025-09-23T19:55:21+00:00",
    "commented_code": "+---\n+title: Merge Atomized Playwright Outputs\n+sidebar:\n+  label: Merge Atomized Outputs\n+filter: 'type:Guides'\n+---\n+\n+When running Playwright tests in CI environments, Nx can [split tests across multiple parallel tasks](/docs/features/ci-features/split-e2e-tasks) for faster execution.\n+However, this creates separate test reports for each task.\n+With the Nx Plugin, the Playwright report merging feature allows you to combine these individual reports into a single, unified report.\n+\n+**Benefits:**\n+\n+- View all test results in one consolidated report\n+- Maintain the same reporting experience as non-atomized tests\n+- Keep the performance benefits of parallel test execution\n+\n+## Prerequisites\n+\n+- Nx workspace with `@nx/playwright` plugin\n+- Playwright tests configured in your project\n+- CI environment with [task atomization enabled](/docs/features/ci-features/split-e2e-tasks)\n+- Nx v21.6.1 \n+\n+{% aside type=\"note\" title=\"Nx Version\"%}\n+Nx v21.6.1 introduced automatic configuration of report merging which is the focus of this guide.\n+Similar steps can be followed for manual configuration of Playwright for any versions prior to Nx v21.6.1\n+{%/aside%}\n+\n+## How report merging works\n+\n+1. **Blob Reports**: Playwright generates [lightweight \"blob\" reports](https://playwright.dev/docs/test-reporters#blob-reporter) during test execution\n+2. **Individual Tasks**: Each atomized test task creates its own blob report\n+3. **Report Merging**: A separate merge task combines all blob reports into unified output using your configured reporters (HTML, JSON, JUnit, etc.)\n+\n+## Configuration\n+\n+### Step 1: Enable blob reports\n+\n+The `nxE2EPreset` from `@nx/playwright/preset` automatically enable the blob reporter when running in CI:\n+\n+```ts\n+// playwright.config.ts\n+import { defineConfig } from '@playwright/test';\n+import { nxE2EPreset } from '@nx/playwright/preset';\n+\n+export default defineConfig({\n+  // automatically uses the blob reporter for CI\n+  ...nxE2EPreset(__filename, { testDir: './src' }),\n+  // Your additional configuration\n+});\n+```\n+\n+> The preset has a `generateBlobReports` option that can be used to disable the reporter or maybe enable it not just in CI.\n+\n+**Alternative manual configuration:**\n+\n+```ts\n+// playwright.config.ts\n+export default defineConfig({\n+  reporter: [\n+    ['html', { outputFolder: 'playwright-report' }],\n+    ...(process.env.CI ? [['blob', { outputDir: 'blob-report' }]] : [])\n+  ],\n+  // Your other configuration\n+});\n+```\n+\n+### Step 2: Configure the playwright plugin\n+\n+Add a `ciTargetName` to the Playwright plugin to your `nx.json`. This will enable the report merging feature for CI environments:\n+\n+```json\n+// nx.json\n+{\n+  \"plugins\": [\n+    {\n+      \"plugin\": \"@nx/playwright/plugin\",\n+      \"options\": {\n+        \"targetName\": \"e2e\",\n+        \"ciTargetName\": \"e2e-ci\"\n+      }\n+    }\n+  ]\n+}\n+```\n+\n+\n+With the above configurations, Nx automatically creates these targets for your playwright projects:\n+\n+- `e2e`: Regular target for local development (runs all tests together)\n+- `e2e-ci`: CI target that runs tests in parallel across multiple tasks\n+- `e2e-ci-merge-reports`: Target that merges blob reports into unified reports",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2373312460",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32830,
        "pr_file": "astro-docs/src/content/docs/technologies/test-tools/playwright/Guides/merge-atomized-outputs.mdoc",
        "discussion_id": "2373312460",
        "commented_code": "@@ -0,0 +1,231 @@\n+---\n+title: Merge Atomized Playwright Outputs\n+sidebar:\n+  label: Merge Atomized Outputs\n+filter: 'type:Guides'\n+---\n+\n+When running Playwright tests in CI environments, Nx can [split tests across multiple parallel tasks](/docs/features/ci-features/split-e2e-tasks) for faster execution.\n+However, this creates separate test reports for each task.\n+With the Nx Plugin, the Playwright report merging feature allows you to combine these individual reports into a single, unified report.\n+\n+**Benefits:**\n+\n+- View all test results in one consolidated report\n+- Maintain the same reporting experience as non-atomized tests\n+- Keep the performance benefits of parallel test execution\n+\n+## Prerequisites\n+\n+- Nx workspace with `@nx/playwright` plugin\n+- Playwright tests configured in your project\n+- CI environment with [task atomization enabled](/docs/features/ci-features/split-e2e-tasks)\n+- Nx v21.6.1 \n+\n+{% aside type=\"note\" title=\"Nx Version\"%}\n+Nx v21.6.1 introduced automatic configuration of report merging which is the focus of this guide.\n+Similar steps can be followed for manual configuration of Playwright for any versions prior to Nx v21.6.1\n+{%/aside%}\n+\n+## How report merging works\n+\n+1. **Blob Reports**: Playwright generates [lightweight \"blob\" reports](https://playwright.dev/docs/test-reporters#blob-reporter) during test execution\n+2. **Individual Tasks**: Each atomized test task creates its own blob report\n+3. **Report Merging**: A separate merge task combines all blob reports into unified output using your configured reporters (HTML, JSON, JUnit, etc.)\n+\n+## Configuration\n+\n+### Step 1: Enable blob reports\n+\n+The `nxE2EPreset` from `@nx/playwright/preset` automatically enable the blob reporter when running in CI:\n+\n+```ts\n+// playwright.config.ts\n+import { defineConfig } from '@playwright/test';\n+import { nxE2EPreset } from '@nx/playwright/preset';\n+\n+export default defineConfig({\n+  // automatically uses the blob reporter for CI\n+  ...nxE2EPreset(__filename, { testDir: './src' }),\n+  // Your additional configuration\n+});\n+```\n+\n+> The preset has a `generateBlobReports` option that can be used to disable the reporter or maybe enable it not just in CI.\n+\n+**Alternative manual configuration:**\n+\n+```ts\n+// playwright.config.ts\n+export default defineConfig({\n+  reporter: [\n+    ['html', { outputFolder: 'playwright-report' }],\n+    ...(process.env.CI ? [['blob', { outputDir: 'blob-report' }]] : [])\n+  ],\n+  // Your other configuration\n+});\n+```\n+\n+### Step 2: Configure the playwright plugin\n+\n+Add a `ciTargetName` to the Playwright plugin to your `nx.json`. This will enable the report merging feature for CI environments:\n+\n+```json\n+// nx.json\n+{\n+  \"plugins\": [\n+    {\n+      \"plugin\": \"@nx/playwright/plugin\",\n+      \"options\": {\n+        \"targetName\": \"e2e\",\n+        \"ciTargetName\": \"e2e-ci\"\n+      }\n+    }\n+  ]\n+}\n+```\n+\n+\n+With the above configurations, Nx automatically creates these targets for your playwright projects:\n+\n+- `e2e`: Regular target for local development (runs all tests together)\n+- `e2e-ci`: CI target that runs tests in parallel across multiple tasks\n+- `e2e-ci-merge-reports`: Target that merges blob reports into unified reports",
        "comment_created_at": "2025-09-23T19:55:21+00:00",
        "comment_author": "jaysoo",
        "comment_body": "Should be `e2e-ci--merge-reports` with two dashes as it's always the `ciTargetName` (in this case `e2e-ci`) appended with `--merge-reports`. https://github.com/nrwl/nx/blob/master/packages/playwright/src/plugins/plugin.ts#L426",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2267720621",
    "pr_number": 32261,
    "pr_file": "astro-docs/astro.config.mjs",
    "created_at": "2025-08-11T19:01:21+00:00",
    "commented_code": "// @ts-check\n import { defineConfig } from 'astro/config';\n import starlight from '@astrojs/starlight';\n-import { sectionSidebarPlugin } from './src/plugins/section-sidebar.plugin';\n import netlify from '@astrojs/netlify';\n import linkValidator from 'starlight-links-validator';\n import react from '@astrojs/react';\n import markdoc from '@astrojs/markdoc';\n import tailwindcss from '@tailwindcss/vite';\n-import { sidebar } from './sidebar.mjs';\n+import { sidebar } from './sidebar';",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2267720621",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32261,
        "pr_file": "astro-docs/astro.config.mjs",
        "discussion_id": "2267720621",
        "commented_code": "@@ -1,13 +1,12 @@\n // @ts-check\n import { defineConfig } from 'astro/config';\n import starlight from '@astrojs/starlight';\n-import { sectionSidebarPlugin } from './src/plugins/section-sidebar.plugin';\n import netlify from '@astrojs/netlify';\n import linkValidator from 'starlight-links-validator';\n import react from '@astrojs/react';\n import markdoc from '@astrojs/markdoc';\n import tailwindcss from '@tailwindcss/vite';\n-import { sidebar } from './sidebar.mjs';\n+import { sidebar } from './sidebar';",
        "comment_created_at": "2025-08-11T19:01:21+00:00",
        "comment_author": "jaysoo",
        "comment_body": "Might be good to keep `.mts` in the filename, and leave `.mjs` as that is technically the correct way to import moving forward.",
        "pr_file_module": null
      },
      {
        "comment_id": "2267762877",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32261,
        "pr_file": "astro-docs/astro.config.mjs",
        "discussion_id": "2267720621",
        "commented_code": "@@ -1,13 +1,12 @@\n // @ts-check\n import { defineConfig } from 'astro/config';\n import starlight from '@astrojs/starlight';\n-import { sectionSidebarPlugin } from './src/plugins/section-sidebar.plugin';\n import netlify from '@astrojs/netlify';\n import linkValidator from 'starlight-links-validator';\n import react from '@astrojs/react';\n import markdoc from '@astrojs/markdoc';\n import tailwindcss from '@tailwindcss/vite';\n-import { sidebar } from './sidebar.mjs';\n+import { sidebar } from './sidebar';",
        "comment_created_at": "2025-08-11T19:15:14+00:00",
        "comment_author": "barbados-clemens",
        "comment_body": "updated to use mts file ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2084379203",
    "pr_number": 29253,
    "pr_file": "packages/eslint/src/generators/workspace-rule/files/__name__.spec.ts__tmpl__",
    "created_at": "2025-05-12T10:30:49+00:00",
    "commented_code": "-import { TSESLint } from '@typescript-eslint/utils';\n+<% if (flatConfig) { %>import { RuleTester } from '@typescript-eslint/rule-tester';\n+import type { RuleTesterConfig } from '@typescript-eslint/rule-tester';\n+import { rule, RULE_NAME } from './my-custom-rule';",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2084379203",
        "repo_full_name": "nrwl/nx",
        "pr_number": 29253,
        "pr_file": "packages/eslint/src/generators/workspace-rule/files/__name__.spec.ts__tmpl__",
        "discussion_id": "2084379203",
        "commented_code": "@@ -1,10 +1,19 @@\n-import { TSESLint } from '@typescript-eslint/utils';\n+<% if (flatConfig) { %>import { RuleTester } from '@typescript-eslint/rule-tester';\n+import type { RuleTesterConfig } from '@typescript-eslint/rule-tester';\n+import { rule, RULE_NAME } from './my-custom-rule';",
        "comment_created_at": "2025-05-12T10:30:49+00:00",
        "comment_author": "meeroslav",
        "comment_body": "This should be:\r\n```\r\nimport { rule, RULE_NAME } from './<%= name %>';\r\n```\r\n\r\nThe rest looks good.",
        "pr_file_module": null
      }
    ]
  }
]