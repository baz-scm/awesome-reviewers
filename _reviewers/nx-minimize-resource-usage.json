[
  {
    "discussion_id": "2325451530",
    "pr_number": 32626,
    "pr_file": "packages/nx/src/project-graph/nx-deps-cache.ts",
    "created_at": "2025-09-05T15:48:47+00:00",
    "commented_code": "nxJsonPlugins,\n     pluginsConfig: nxJson?.pluginsConfig,\n     fileMap,\n+    externalNodes: externalNodesData,",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2325451530",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32626,
        "pr_file": "packages/nx/src/project-graph/nx-deps-cache.ts",
        "discussion_id": "2325451530",
        "commented_code": "@@ -193,6 +196,7 @@ export function createProjectFileMapCache(\n     nxJsonPlugins,\n     pluginsConfig: nxJson?.pluginsConfig,\n     fileMap,\n+    externalNodes: externalNodesData,",
        "comment_created_at": "2025-09-05T15:48:47+00:00",
        "comment_author": "FrozenPandaz",
        "comment_body": "I don't think we should write the entire `externalNodesData`.. can we write just the hash?\n\nIt'll save us disk space used by the file.. and it'll save us computing the hash again.",
        "pr_file_module": null
      },
      {
        "comment_id": "2325498486",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32626,
        "pr_file": "packages/nx/src/project-graph/nx-deps-cache.ts",
        "discussion_id": "2325451530",
        "commented_code": "@@ -193,6 +196,7 @@ export function createProjectFileMapCache(\n     nxJsonPlugins,\n     pluginsConfig: nxJson?.pluginsConfig,\n     fileMap,\n+    externalNodes: externalNodesData,",
        "comment_created_at": "2025-09-05T16:09:48+00:00",
        "comment_author": "leosvelperez",
        "comment_body": "Yeah, with the hash, it makes sense. With the output of `JSON.stringify` I had, less so, though we would still reduce computation for sure.\r\n\r\nIf we're interested in reducing disk space used by the file, we should also consider writing an unformatted JSON to disk with no spaces. If anyone wants to manually read it, they can easily format it anyway.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2325725883",
    "pr_number": 32626,
    "pr_file": "packages/nx/src/project-graph/nx-deps-cache.ts",
    "created_at": "2025-09-05T18:00:51+00:00",
    "commented_code": "nxJson: NxJsonConfiguration<'*' | string[]>,\n   packageJsonDeps: Record<string, string>,\n   fileMap: FileMap,\n-  tsConfig: { compilerOptions?: { paths?: { [p: string]: any } } }\n+  tsConfig: { compilerOptions?: { paths?: { [p: string]: any } } },\n+  externalNodes: Record<string, ProjectGraphExternalNode>\n ) {\n   const nxJsonPlugins = getNxJsonPluginsData(nxJson, packageJsonDeps);\n+  const externalNodesHash = hashObject(getExternalNodesData(externalNodes));",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2325725883",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32626,
        "pr_file": "packages/nx/src/project-graph/nx-deps-cache.ts",
        "discussion_id": "2325725883",
        "commented_code": "@@ -182,9 +184,11 @@ export function createProjectFileMapCache(\n   nxJson: NxJsonConfiguration<'*' | string[]>,\n   packageJsonDeps: Record<string, string>,\n   fileMap: FileMap,\n-  tsConfig: { compilerOptions?: { paths?: { [p: string]: any } } }\n+  tsConfig: { compilerOptions?: { paths?: { [p: string]: any } } },\n+  externalNodes: Record<string, ProjectGraphExternalNode>\n ) {\n   const nxJsonPlugins = getNxJsonPluginsData(nxJson, packageJsonDeps);\n+  const externalNodesHash = hashObject(getExternalNodesData(externalNodes));",
        "comment_created_at": "2025-09-05T18:00:51+00:00",
        "comment_author": "FrozenPandaz",
        "comment_body": "Are we hashing it twice? One to compare and once to write it? We should only hash it once.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2325727267",
    "pr_number": 32626,
    "pr_file": "packages/nx/src/project-graph/nx-deps-cache.ts",
    "created_at": "2025-09-05T18:01:39+00:00",
    "commented_code": "};\n   });\n }\n+\n+function getExternalNodesData(",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2325727267",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32626,
        "pr_file": "packages/nx/src/project-graph/nx-deps-cache.ts",
        "discussion_id": "2325727267",
        "commented_code": "@@ -445,3 +456,12 @@ function getNxJsonPluginsData(\n     };\n   });\n }\n+\n+function getExternalNodesData(",
        "comment_created_at": "2025-09-05T18:01:39+00:00",
        "comment_author": "FrozenPandaz",
        "comment_body": "Do we have to reduce this or can we hash the whole thing?",
        "pr_file_module": null
      },
      {
        "comment_id": "2329522265",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32626,
        "pr_file": "packages/nx/src/project-graph/nx-deps-cache.ts",
        "discussion_id": "2325727267",
        "commented_code": "@@ -445,3 +456,12 @@ function getNxJsonPluginsData(\n     };\n   });\n }\n+\n+function getExternalNodesData(",
        "comment_created_at": "2025-09-08T08:29:39+00:00",
        "comment_author": "leosvelperez",
        "comment_body": "I think we should. Benchmarking both approaches in this repo:\r\n\r\n```bash\r\nHash full external nodes: 27.798042000000002ms\r\nReduce and hash external nodes: 4.348999999999997ms\r\n```\r\n\r\nThat's a ~6x time reduction, which is significant.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2168954315",
    "pr_number": 31718,
    "pr_file": "packages/rollup/src/plugins/with-nx/with-nx.ts",
    "created_at": "2025-06-26T12:30:48+00:00",
    "commented_code": "const json = require('@rollup/plugin-json');\n const copy = require('rollup-plugin-copy');\n const postcss = require('rollup-plugin-postcss');\n+const rollupPluginTypescript = require('@rollup/plugin-typescript');",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2168954315",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31718,
        "pr_file": "packages/rollup/src/plugins/with-nx/with-nx.ts",
        "discussion_id": "2168954315",
        "commented_code": "@@ -37,6 +37,7 @@ const image = require('@rollup/plugin-image');\n const json = require('@rollup/plugin-json');\n const copy = require('rollup-plugin-copy');\n const postcss = require('rollup-plugin-postcss');\n+const rollupPluginTypescript = require('@rollup/plugin-typescript');",
        "comment_created_at": "2025-06-26T12:30:48+00:00",
        "comment_author": "jaysoo",
        "comment_body": "Minor: Inline this `require` if it's not always used. Maybe it doesn't really matter, but it can add 50ms or so for each inferred project since we always clear require cache when loading configs.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2104985193",
    "pr_number": 30715,
    "pr_file": "packages/angular/src/executors/utilities/builder-package.ts",
    "created_at": "2025-05-23T16:27:17+00:00",
    "commented_code": "+export function assertBuilderPackageIsInstalled(packageName: string): void {\n+  try {\n+    require(packageName);",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2104985193",
        "repo_full_name": "nrwl/nx",
        "pr_number": 30715,
        "pr_file": "packages/angular/src/executors/utilities/builder-package.ts",
        "discussion_id": "2104985193",
        "commented_code": "@@ -0,0 +1,9 @@\n+export function assertBuilderPackageIsInstalled(packageName: string): void {\n+  try {\n+    require(packageName);",
        "comment_created_at": "2025-05-23T16:27:17+00:00",
        "comment_author": "jaysoo",
        "comment_body": "avoid loading runtime if not needed `require.resolve`",
        "pr_file_module": null
      }
    ]
  }
]