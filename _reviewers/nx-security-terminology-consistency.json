[
  {
    "discussion_id": "2102369758",
    "pr_number": 31261,
    "pr_file": "docs/nx-cloud/concepts/cache-security.md",
    "created_at": "2025-05-22T11:51:38+00:00",
    "commented_code": "While you can [specify a token](/ci/recipes/security/access-tokens) with the `nxCloudAccessToken` property in `nx.json`, this is visible to anyone who can view your codebase. A read-write token would give someone who may not even have permission to create a PR the access to add entries to the remote cache, which would then be used on other developer's machines and in CI. We recommend you restrict CI Access Tokens to CI use only and rely on [personal access tokens](/ci/recipes/security/personal-access-tokens) for local development instead.\n \n-### Use a Read-Write Token in CI\n+### Use Scoped Tokens in CI\n \n-If you're in an environment (like an open source project) where you can't trust the contents of a pull request, we recommend restricting the use of a [read-write token](/ci/recipes/security/access-tokens) in CI to just be used on the `main` branch. If you know that everyone who can make a PR is a trusted developer, you can extend that [read-write token](/ci/recipes/security/access-tokens) to also include pull request branches.\n+For all branches marked as protected, we recommend using a [read-write token](/ci/recipes/security/access-tokens#read-write-access).\n+`read-write` access tokens allow reading and writing from the shared primary cache for your workspace.",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2102369758",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31261,
        "pr_file": "docs/nx-cloud/concepts/cache-security.md",
        "discussion_id": "2102369758",
        "commented_code": "@@ -32,9 +32,12 @@ You can strengthen your workspace security further by revoking all access to the\n \n While you can [specify a token](/ci/recipes/security/access-tokens) with the `nxCloudAccessToken` property in `nx.json`, this is visible to anyone who can view your codebase. A read-write token would give someone who may not even have permission to create a PR the access to add entries to the remote cache, which would then be used on other developer's machines and in CI. We recommend you restrict CI Access Tokens to CI use only and rely on [personal access tokens](/ci/recipes/security/personal-access-tokens) for local development instead.\n \n-### Use a Read-Write Token in CI\n+### Use Scoped Tokens in CI\n \n-If you're in an environment (like an open source project) where you can't trust the contents of a pull request, we recommend restricting the use of a [read-write token](/ci/recipes/security/access-tokens) in CI to just be used on the `main` branch. If you know that everyone who can make a PR is a trusted developer, you can extend that [read-write token](/ci/recipes/security/access-tokens) to also include pull request branches.\n+For all branches marked as protected, we recommend using a [read-write token](/ci/recipes/security/access-tokens#read-write-access).\n+`read-write` access tokens allow reading and writing from the shared primary cache for your workspace.",
        "comment_created_at": "2025-05-22T11:51:38+00:00",
        "comment_author": "meeroslav",
        "comment_body": "```suggestion\r\nThe `read-write` access tokens allow reading from and writing to the shared global cache of your workspace.\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2102375967",
    "pr_number": 31261,
    "pr_file": "docs/nx-cloud/concepts/cache-security.md",
    "created_at": "2025-05-22T11:54:58+00:00",
    "commented_code": "While you can [specify a token](/ci/recipes/security/access-tokens) with the `nxCloudAccessToken` property in `nx.json`, this is visible to anyone who can view your codebase. A read-write token would give someone who may not even have permission to create a PR the access to add entries to the remote cache, which would then be used on other developer's machines and in CI. We recommend you restrict CI Access Tokens to CI use only and rely on [personal access tokens](/ci/recipes/security/personal-access-tokens) for local development instead.\n \n-### Use a Read-Write Token in CI\n+### Use Scoped Tokens in CI\n \n-If you're in an environment (like an open source project) where you can't trust the contents of a pull request, we recommend restricting the use of a [read-write token](/ci/recipes/security/access-tokens) in CI to just be used on the `main` branch. If you know that everyone who can make a PR is a trusted developer, you can extend that [read-write token](/ci/recipes/security/access-tokens) to also include pull request branches.\n+For all branches marked as protected, we recommend using a [read-write token](/ci/recipes/security/access-tokens#read-write-access).\n+`read-write` access tokens allow reading and writing from the shared primary cache for your workspace.\n+\n+In all other branches, we recommend using a [read-only token](/ci/recipes/security/access-tokens#read-only-access). A `read-only` token only allows reading from the shared primary cache, and writing to a branch specific isolated cache. This allows your CI pipelines to share computational work within the same CI pipeline, without opening up the possibility of cache poisoning in your trusted environments. Learn more about [access token architecture](/ci/recipes/security/access-tokens#setting-ci-access-tokens).",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2102375967",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31261,
        "pr_file": "docs/nx-cloud/concepts/cache-security.md",
        "discussion_id": "2102375967",
        "commented_code": "@@ -32,9 +32,12 @@ You can strengthen your workspace security further by revoking all access to the\n \n While you can [specify a token](/ci/recipes/security/access-tokens) with the `nxCloudAccessToken` property in `nx.json`, this is visible to anyone who can view your codebase. A read-write token would give someone who may not even have permission to create a PR the access to add entries to the remote cache, which would then be used on other developer's machines and in CI. We recommend you restrict CI Access Tokens to CI use only and rely on [personal access tokens](/ci/recipes/security/personal-access-tokens) for local development instead.\n \n-### Use a Read-Write Token in CI\n+### Use Scoped Tokens in CI\n \n-If you're in an environment (like an open source project) where you can't trust the contents of a pull request, we recommend restricting the use of a [read-write token](/ci/recipes/security/access-tokens) in CI to just be used on the `main` branch. If you know that everyone who can make a PR is a trusted developer, you can extend that [read-write token](/ci/recipes/security/access-tokens) to also include pull request branches.\n+For all branches marked as protected, we recommend using a [read-write token](/ci/recipes/security/access-tokens#read-write-access).\n+`read-write` access tokens allow reading and writing from the shared primary cache for your workspace.\n+\n+In all other branches, we recommend using a [read-only token](/ci/recipes/security/access-tokens#read-only-access). A `read-only` token only allows reading from the shared primary cache, and writing to a branch specific isolated cache. This allows your CI pipelines to share computational work within the same CI pipeline, without opening up the possibility of cache poisoning in your trusted environments. Learn more about [access token architecture](/ci/recipes/security/access-tokens#setting-ci-access-tokens).",
        "comment_created_at": "2025-05-22T11:54:58+00:00",
        "comment_author": "meeroslav",
        "comment_body": "```suggestion\r\nIn all other branches, we recommend using a [read-only token](/ci/recipes/security/access-tokens#read-only-access). A `read-only` token only allows reading from the shared global cache, while writing is limited to a branch-specific isolated cache. This allows your CI pipelines to share computational work within the same pull request branch and between the distributed agents, without opening up the possibility of cache poisoning in your trusted environments. Learn more about [access token architecture](/ci/recipes/security/access-tokens#setting-ci-access-tokens).\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2102377944",
    "pr_number": 31261,
    "pr_file": "docs/nx-cloud/recipes/access-tokens.md",
    "created_at": "2025-05-22T11:56:00+00:00",
    "commented_code": "## Access Types\n \n {% callout type=\"warning\" title=\"Use Caution With Read-Write Tokens\" %}\n-Read-write tokens allow full write access to your remote cache. They should only be used in trusted environments.\n+`read-write` tokens allow full write access to your remote cache. They should only be used in trusted environments.",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2102377944",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31261,
        "pr_file": "docs/nx-cloud/recipes/access-tokens.md",
        "discussion_id": "2102377944",
        "commented_code": "@@ -9,7 +9,7 @@ The permissions and membership define what developers can access on nx.app but t\n ## Access Types\n \n {% callout type=\"warning\" title=\"Use Caution With Read-Write Tokens\" %}\n-Read-write tokens allow full write access to your remote cache. They should only be used in trusted environments.\n+`read-write` tokens allow full write access to your remote cache. They should only be used in trusted environments.",
        "comment_created_at": "2025-05-22T11:56:00+00:00",
        "comment_author": "meeroslav",
        "comment_body": "```suggestion\r\nThe `read-write` tokens allow full write access to your remote cache. They should only be used in trusted environments.\r\n```",
        "pr_file_module": null
      }
    ]
  }
]