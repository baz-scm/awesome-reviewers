[
  {
    "discussion_id": "2450997517",
    "pr_number": 33178,
    "pr_file": "packages/docker/src/release/version-pattern-utils.ts",
    "created_at": "2025-10-22T08:51:49+00:00",
    "commented_code": "currentDate: Date;\n   commitSha: string;\n   shortCommitSha: string;\n+  version: string;",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2450997517",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33178,
        "pr_file": "packages/docker/src/release/version-pattern-utils.ts",
        "discussion_id": "2450997517",
        "commented_code": "@@ -14,6 +14,7 @@ export interface PatternTokens {\n   currentDate: Date;\n   commitSha: string;\n   shortCommitSha: string;\n+  version: string;",
        "comment_created_at": "2025-10-22T08:51:49+00:00",
        "comment_author": "Coly010",
        "comment_body": "As much as I like `{version}` because it's short and succint, given that `dockerVersionScheme` is supposed to be generating a version, it can be confusing.\r\n\r\nWhat we're really trying to achieve here is to use the version that is calculated by the underlying `VersionActions`. It's worth noting that the underlying `VersionActions` may produce a version that is also not semver.\r\nTherefore, I think we should make this token more explicit: `{versionActionsVersion}`",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2451032306",
    "pr_number": 33178,
    "pr_file": "packages/docker/src/release/version-utils.ts",
    "created_at": "2025-10-22T08:58:13+00:00",
    "commented_code": "projectGraphNode: ProjectGraphProjectNode,\n   finalConfigForProject: FinalConfigForProject,\n   dockerVersionScheme?: string,\n-  dockerVersion?: string\n+  dockerVersion?: string,\n+  projectVersionData?: VersionDataEntry",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2451032306",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33178,
        "pr_file": "packages/docker/src/release/version-utils.ts",
        "discussion_id": "2451032306",
        "commented_code": "@@ -23,7 +24,8 @@ export async function handleDockerVersion(\n   projectGraphNode: ProjectGraphProjectNode,\n   finalConfigForProject: FinalConfigForProject,\n   dockerVersionScheme?: string,\n-  dockerVersion?: string\n+  dockerVersion?: string,\n+  projectVersionData?: VersionDataEntry",
        "comment_created_at": "2025-10-22T08:58:13+00:00",
        "comment_author": "Coly010",
        "comment_body": "Instead of providing the full `VersionDataEntry`, let's rename this and pass the version itself\r\n\r\n ```suggestion\r\n  versionActionsVersion?: string\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2382583462",
    "pr_number": 32583,
    "pr_file": "packages/nx/src/command-line/release/publish.ts",
    "created_at": "2025-09-26T14:21:26+00:00",
    "commented_code": "].join('\n')}\n`\n     );\n   }\n+  const taskId = hashArray([...process.argv, Date.now().toString()]);",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2382583462",
        "repo_full_name": "nrwl/nx",
        "pr_number": 32583,
        "pr_file": "packages/nx/src/command-line/release/publish.ts",
        "discussion_id": "2382583462",
        "commented_code": "@@ -272,11 +273,14 @@ async function runPublishOnProjects(\n       ].join('\\n')}\\n`\n     );\n   }\n+  const taskId = hashArray([...process.argv, Date.now().toString()]);",
        "comment_created_at": "2025-09-26T14:21:26+00:00",
        "comment_author": "FrozenPandaz",
        "comment_body": "Please call this a `tasksExecutionId` or `executionId`... or even just id. Just definitely not `task.id`",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2309704864",
    "pr_number": 31615,
    "pr_file": "packages/playwright/src/plugins/plugin.ts",
    "created_at": "2025-08-29T09:53:07+00:00",
    "commented_code": "return joinPathFragments('{projectRoot}', pathRelativeToProjectRoot);\n }\n \n-function getOutputEnvVars(\n-  reporterOutputs: Array<[string, string]>,\n+function getAtomizedTaskEnvVars(\n+  reporterOutputs: Array<ReporterOutput>,\n   outputSubfolder: string\n ): Record<string, string> {\n   const env: Record<string, string> = {};\n   for (let [reporter, output] of reporterOutputs) {\n-    if (outputSubfolder) {\n-      const isFile = parse(output).ext !== '';\n-      const envVarName = `PLAYWRIGHT_${reporter.toUpperCase()}_OUTPUT_${\n-        isFile ? 'FILE' : 'DIR'\n-      }`;\n-      env[envVarName] = addSubfolderToOutput(output, outputSubfolder);\n-      // Also set PLAYWRIGHT_HTML_REPORT for Playwright prior to 1.45.0.\n-      // HTML prior to this version did not follow the pattern of \"PLAYWRIGHT_<REPORTER>_OUTPUT_<FILE|DIR>\".\n-      if (reporter === 'html') {\n-        env['PLAYWRIGHT_HTML_REPORT'] = env[envVarName];\n-      }\n+    if (!output) {\n+      continue;\n+    }\n+\n+    if (reporter === 'blob') {\n+      output = normalizeAtomizedTaskBlobReportOutput(output, outputSubfolder);\n+    } else {\n+      // add subfolder to the output to make them unique\n+      output = addSubfolderToOutput(output, outputSubfolder);\n+    }\n+\n+    const outputExtname = parse(output).ext;\n+    const isFile = outputExtname !== '';\n+    let envVarName: string;\n+    envVarName = `PLAYWRIGHT_${reporter.toUpperCase()}_OUTPUT_${\n+      isFile ? 'FILE' : 'DIR'\n+    }`;\n+\n+    env[envVarName] = output;\n+    // Also set PLAYWRIGHT_HTML_REPORT for Playwright prior to 1.45.0.\n+    // HTML prior to this version did not follow the pattern of \"PLAYWRIGHT_<REPORTER>_OUTPUT_<FILE|DIR>\".\n+    if (reporter === 'html') {\n+      env['PLAYWRIGHT_HTML_REPORT'] = env[envVarName];\n     }\n   }\n   return env;\n }\n+\n+function normalizeAtomizedTaskBlobReportOutput(\n+  output: string,\n+  subfolder: string\n+): string {\n+  const outputExtname = parse(output).ext;\n+\n+  // set unique name for the blob report file\n+  return outputExtname !== ''\n+    ? join(dirname(output), `${subfolder}${outputExtname}`)\n+    : join(output, `${subfolder}.zip`);",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2309726369",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31615,
        "pr_file": "packages/playwright/src/plugins/plugin.ts",
        "discussion_id": "2309704864",
        "commented_code": "@@ -551,24 +590,48 @@ function normalizeOutput(\n   return joinPathFragments('{projectRoot}', pathRelativeToProjectRoot);\n }\n \n-function getOutputEnvVars(\n-  reporterOutputs: Array<[string, string]>,\n+function getAtomizedTaskEnvVars(\n+  reporterOutputs: Array<ReporterOutput>,\n   outputSubfolder: string\n ): Record<string, string> {\n   const env: Record<string, string> = {};\n   for (let [reporter, output] of reporterOutputs) {\n-    if (outputSubfolder) {\n-      const isFile = parse(output).ext !== '';\n-      const envVarName = `PLAYWRIGHT_${reporter.toUpperCase()}_OUTPUT_${\n-        isFile ? 'FILE' : 'DIR'\n-      }`;\n-      env[envVarName] = addSubfolderToOutput(output, outputSubfolder);\n-      // Also set PLAYWRIGHT_HTML_REPORT for Playwright prior to 1.45.0.\n-      // HTML prior to this version did not follow the pattern of \"PLAYWRIGHT_<REPORTER>_OUTPUT_<FILE|DIR>\".\n-      if (reporter === 'html') {\n-        env['PLAYWRIGHT_HTML_REPORT'] = env[envVarName];\n-      }\n+    if (!output) {\n+      continue;\n+    }\n+\n+    if (reporter === 'blob') {\n+      output = normalizeAtomizedTaskBlobReportOutput(output, outputSubfolder);\n+    } else {\n+      // add subfolder to the output to make them unique\n+      output = addSubfolderToOutput(output, outputSubfolder);\n+    }\n+\n+    const outputExtname = parse(output).ext;\n+    const isFile = outputExtname !== '';\n+    let envVarName: string;\n+    envVarName = `PLAYWRIGHT_${reporter.toUpperCase()}_OUTPUT_${\n+      isFile ? 'FILE' : 'DIR'\n+    }`;\n+\n+    env[envVarName] = output;\n+    // Also set PLAYWRIGHT_HTML_REPORT for Playwright prior to 1.45.0.\n+    // HTML prior to this version did not follow the pattern of \"PLAYWRIGHT_<REPORTER>_OUTPUT_<FILE|DIR>\".\n+    if (reporter === 'html') {\n+      env['PLAYWRIGHT_HTML_REPORT'] = env[envVarName];\n     }\n   }\n   return env;\n }\n+\n+function normalizeAtomizedTaskBlobReportOutput(\n+  output: string,\n+  subfolder: string\n+): string {\n+  const outputExtname = parse(output).ext;\n+\n+  // set unique name for the blob report file\n+  return outputExtname !== ''\n+    ? join(dirname(output), `${subfolder}${outputExtname}`)\n+    : join(output, `${subfolder}.zip`);",
        "comment_created_at": "2025-08-29T09:53:07+00:00",
        "comment_author": "leosvelperez",
        "comment_body": "All subfolders are unique because they are named after each atomized spec file.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2209701374",
    "pr_number": 31756,
    "pr_file": "packages/nx/src/command-line/release/config/config.ts",
    "created_at": "2025-07-16T08:46:51+00:00",
    "commented_code": "releaseTagPatternRequireSemver:\n       userConfig.releaseTagPatternRequireSemver ??\n       defaultReleaseTagPatternRequireSemver,\n+    releaseTagPatternStrictPreid:",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2209701374",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31756,
        "pr_file": "packages/nx/src/command-line/release/config/config.ts",
        "discussion_id": "2209701374",
        "commented_code": "@@ -345,6 +349,9 @@ export async function createNxReleaseConfig(\n     releaseTagPatternRequireSemver:\n       userConfig.releaseTagPatternRequireSemver ??\n       defaultReleaseTagPatternRequireSemver,\n+    releaseTagPatternStrictPreid:",
        "comment_created_at": "2025-07-16T08:46:51+00:00",
        "comment_author": "meeroslav",
        "comment_body": "Can we rename this to `releaseTagPatternStrictPreId`?",
        "pr_file_module": null
      },
      {
        "comment_id": "2209734605",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31756,
        "pr_file": "packages/nx/src/command-line/release/config/config.ts",
        "discussion_id": "2209701374",
        "commented_code": "@@ -345,6 +349,9 @@ export async function createNxReleaseConfig(\n     releaseTagPatternRequireSemver:\n       userConfig.releaseTagPatternRequireSemver ??\n       defaultReleaseTagPatternRequireSemver,\n+    releaseTagPatternStrictPreid:",
        "comment_created_at": "2025-07-16T09:01:35+00:00",
        "comment_author": "iuliancmarcu",
        "comment_body": "I can do that, of course, just note that the CLI flag is also `--preid`, not `--preId`. Would you like me to go ahead with it?",
        "pr_file_module": null
      },
      {
        "comment_id": "2209789373",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31756,
        "pr_file": "packages/nx/src/command-line/release/config/config.ts",
        "discussion_id": "2209701374",
        "commented_code": "@@ -345,6 +349,9 @@ export async function createNxReleaseConfig(\n     releaseTagPatternRequireSemver:\n       userConfig.releaseTagPatternRequireSemver ??\n       defaultReleaseTagPatternRequireSemver,\n+    releaseTagPatternStrictPreid:",
        "comment_created_at": "2025-07-16T09:26:43+00:00",
        "comment_author": "JamesHenry",
        "comment_body": "@meeroslav Our CLI option is `preid` which is consistent with the npm CLI and the `semver` library, so this option also uses `Preid` casing to be consistent again",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2127027617",
    "pr_number": 31414,
    "pr_file": ".github/workflows/nightly/process-matrix.ts",
    "created_at": "2025-06-04T16:42:44+00:00",
    "commented_code": "package_manager: string,\n   os: string,\n   os_name: string,\n-  os_timeout: number\n+  os_timeout: number,\n+  isGolden?: boolean,",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2127027617",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31414,
        "pr_file": ".github/workflows/nightly/process-matrix.ts",
        "discussion_id": "2127027617",
        "commented_code": "@@ -69,7 +71,8 @@ const matrix: Array<{\n   package_manager: string,\n   os: string,\n   os_name: string,\n-  os_timeout: number\n+  os_timeout: number,\n+  isGolden?: boolean,",
        "comment_created_at": "2025-06-04T16:42:44+00:00",
        "comment_author": "jaysoo",
        "comment_body": "Nit: since the pipeline files and existing keys use underscores, we should use `is_golden`.\r\n\r\nWe should also explain what this property does somewhere in this file.",
        "pr_file_module": null
      }
    ]
  }
]