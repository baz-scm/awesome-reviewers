[
  {
    "discussion_id": "2528316616",
    "pr_number": 33493,
    "pr_file": "packages/nx/src/command-line/yargs-utils/shared-options.ts",
    "created_at": "2025-11-14T17:20:50+00:00",
    "commented_code": ".middleware([\n       (args) => {\n         const useTui = shouldUseTui(readNxJson(), args as NxArgs);\n-        if (useTui) {\n+        if (\n+          !args.outputStyle && \n+          !('output-style' in args) && \n+          process.env.NX_DEFAULT_OUTPUT_STYLE && \n+          choices.includes(process.env.NX_DEFAULT_OUTPUT_STYLE as OutputStyle)) {\n+            (args as any)['output-style'] = process.env.NX_DEFAULT_OUTPUT_STYLE;\n+            (args as any).outputStyle = process.env.NX_DEFAULT_OUTPUT_STYLE;\n+        } else if (useTui) {",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2528316616",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33493,
        "pr_file": "packages/nx/src/command-line/yargs-utils/shared-options.ts",
        "discussion_id": "2528316616",
        "commented_code": "@@ -326,7 +326,14 @@ export function withOutputStyleOption<T>(\n     .middleware([\n       (args) => {\n         const useTui = shouldUseTui(readNxJson(), args as NxArgs);\n-        if (useTui) {\n+        if (\n+          !args.outputStyle && \n+          !('output-style' in args) && \n+          process.env.NX_DEFAULT_OUTPUT_STYLE && \n+          choices.includes(process.env.NX_DEFAULT_OUTPUT_STYLE as OutputStyle)) {\n+            (args as any)['output-style'] = process.env.NX_DEFAULT_OUTPUT_STYLE;\n+            (args as any).outputStyle = process.env.NX_DEFAULT_OUTPUT_STYLE;\n+        } else if (useTui) {",
        "comment_created_at": "2025-11-14T17:20:50+00:00",
        "comment_author": "AgentEnder",
        "comment_body": "This may actually be cleaner as a separate middleware function, that runs before the current tui middleware. Note, the `.middleware` call takes an array, you should be able to add something like \r\n\r\n```\r\n(args) => {\r\n   if (!args.outputStyle && process.env.NX_DEFAULT_OUTPUT_STYLE && ...) {\r\n     args.outputStyle = process.envNX_DEFAULT_OUTPUT_STYLE\r\n   }\r\n}\r\n```\r\n\r\nthe tui middleware should already respect if the output style is set, so it won't need updates and the intentions will be clearer.\r\n\r\nAlso, I don't think you should need to check / assign the dashed version (`output-style`), since this middleware should run after the yargs parser transformations? Lets remove those if that theory holds.",
        "pr_file_module": null
      },
      {
        "comment_id": "2528412272",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33493,
        "pr_file": "packages/nx/src/command-line/yargs-utils/shared-options.ts",
        "discussion_id": "2528316616",
        "commented_code": "@@ -326,7 +326,14 @@ export function withOutputStyleOption<T>(\n     .middleware([\n       (args) => {\n         const useTui = shouldUseTui(readNxJson(), args as NxArgs);\n-        if (useTui) {\n+        if (\n+          !args.outputStyle && \n+          !('output-style' in args) && \n+          process.env.NX_DEFAULT_OUTPUT_STYLE && \n+          choices.includes(process.env.NX_DEFAULT_OUTPUT_STYLE as OutputStyle)) {\n+            (args as any)['output-style'] = process.env.NX_DEFAULT_OUTPUT_STYLE;\n+            (args as any).outputStyle = process.env.NX_DEFAULT_OUTPUT_STYLE;\n+        } else if (useTui) {",
        "comment_created_at": "2025-11-14T17:50:00+00:00",
        "comment_author": "avens19",
        "comment_body": "Updated, thanks!",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2132464579",
    "pr_number": 30619,
    "pr_file": "packages/eslint-plugin/src/rules/dependency-checks.ts",
    "created_at": "2025-06-06T16:03:12+00:00",
    "commented_code": "description: `Checks dependencies in project's package.json for version mismatches`,\n     },\n     fixable: 'code',\n-    schema: [\n-      {\n+    schema: {\n+      type: 'array',\n+      items: {",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2132464579",
        "repo_full_name": "nrwl/nx",
        "pr_number": 30619,
        "pr_file": "packages/eslint-plugin/src/rules/dependency-checks.ts",
        "discussion_id": "2132464579",
        "commented_code": "@@ -50,8 +49,9 @@ export default ESLintUtils.RuleCreator(\n       description: `Checks dependencies in project's package.json for version mismatches`,\n     },\n     fixable: 'code',\n-    schema: [\n-      {\n+    schema: {\n+      type: 'array',\n+      items: {",
        "comment_created_at": "2025-06-06T16:03:12+00:00",
        "comment_author": "leosvelperez",
        "comment_body": "The current changes would allow multiple configurations with the same value for `production` and more than two configurations, which is not ideal. The tooling wouldn't prevent users from making such a mistake. We need to limit to at most two configurations, and a way to enforce that there are not two configurations with the same value for `production`.\r\n\r\nAdditionally, it would be great if users wouldn't have to repeat common configuration properties for both configurations.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2451043792",
    "pr_number": 33178,
    "pr_file": "packages/nx/src/config/nx-json.ts",
    "created_at": "2025-10-22T09:00:17+00:00",
    "commented_code": "*     \"skipVersionActions\": [\"api\"]\n    *   }\n    * ```\n+   * Note: if you are using {version} in your docker version scheme you should not skip version actions for that project as the docker versioning will not be able to resolve the {version} placeholder.",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2451043792",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33178,
        "pr_file": "packages/nx/src/config/nx-json.ts",
        "discussion_id": "2451043792",
        "commented_code": "@@ -78,6 +78,7 @@ export interface NxReleaseDockerConfiguration {\n    *     \"skipVersionActions\": [\"api\"]\n    *   }\n    * ```\n+   * Note: if you are using {version} in your docker version scheme you should not skip version actions for that project as the docker versioning will not be able to resolve the {version} placeholder.",
        "comment_created_at": "2025-10-22T09:00:17+00:00",
        "comment_author": "Coly010",
        "comment_body": "Change to `{versionActionsVersion}`",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2452086179",
    "pr_number": 33178,
    "pr_file": "packages/nx/src/config/nx-json.ts",
    "created_at": "2025-10-22T13:21:30+00:00",
    "commented_code": "*     \"skipVersionActions\": [\"api\"]\n    *   }\n    * ```\n+   * Note: if you are using {versionActionsVersion} in your docker version scheme you should not skip version actions for that project",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2452086179",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33178,
        "pr_file": "packages/nx/src/config/nx-json.ts",
        "discussion_id": "2452086179",
        "commented_code": "@@ -78,6 +78,8 @@ export interface NxReleaseDockerConfiguration {\n    *     \"skipVersionActions\": [\"api\"]\n    *   }\n    * ```\n+   * Note: if you are using {versionActionsVersion} in your docker version scheme you should not skip version actions for that project",
        "comment_created_at": "2025-10-22T13:21:30+00:00",
        "comment_author": "JamesHenry",
        "comment_body": "Whilst this is good to have I think we can and should add a runtime check for this invalid combination and provide a specific error\n\nIt would live in https://github.com/nrwl/nx/blob/master/packages/nx/src/command-line/release/config/config.ts",
        "pr_file_module": null
      },
      {
        "comment_id": "2452141183",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33178,
        "pr_file": "packages/nx/src/config/nx-json.ts",
        "discussion_id": "2452086179",
        "commented_code": "@@ -78,6 +78,8 @@ export interface NxReleaseDockerConfiguration {\n    *     \"skipVersionActions\": [\"api\"]\n    *   }\n    * ```\n+   * Note: if you are using {versionActionsVersion} in your docker version scheme you should not skip version actions for that project",
        "comment_created_at": "2025-10-22T13:39:13+00:00",
        "comment_author": "emiliosheinz",
        "comment_body": "Sounds good, I'll try to look into it later today or tomorrow :) ",
        "pr_file_module": null
      },
      {
        "comment_id": "2453509282",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33178,
        "pr_file": "packages/nx/src/config/nx-json.ts",
        "discussion_id": "2452086179",
        "commented_code": "@@ -78,6 +78,8 @@ export interface NxReleaseDockerConfiguration {\n    *     \"skipVersionActions\": [\"api\"]\n    *   }\n    * ```\n+   * Note: if you are using {versionActionsVersion} in your docker version scheme you should not skip version actions for that project",
        "comment_created_at": "2025-10-22T22:40:29+00:00",
        "comment_author": "emiliosheinz",
        "comment_body": "Let me know if that is not what you expect :)\r\n\r\nhttps://github.com/user-attachments/assets/9d4f7a4e-d00f-41ac-aa4e-22fe3f3870f0\r\n\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "2454732470",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33178,
        "pr_file": "packages/nx/src/config/nx-json.ts",
        "discussion_id": "2452086179",
        "commented_code": "@@ -78,6 +78,8 @@ export interface NxReleaseDockerConfiguration {\n    *     \"skipVersionActions\": [\"api\"]\n    *   }\n    * ```\n+   * Note: if you are using {versionActionsVersion} in your docker version scheme you should not skip version actions for that project",
        "comment_created_at": "2025-10-23T11:00:03+00:00",
        "comment_author": "JamesHenry",
        "comment_body": "Yep, exactly, thank you!",
        "pr_file_module": null
      },
      {
        "comment_id": "2454758889",
        "repo_full_name": "nrwl/nx",
        "pr_number": 33178,
        "pr_file": "packages/nx/src/config/nx-json.ts",
        "discussion_id": "2452086179",
        "commented_code": "@@ -78,6 +78,8 @@ export interface NxReleaseDockerConfiguration {\n    *     \"skipVersionActions\": [\"api\"]\n    *   }\n    * ```\n+   * Note: if you are using {versionActionsVersion} in your docker version scheme you should not skip version actions for that project",
        "comment_created_at": "2025-10-23T11:10:13+00:00",
        "comment_author": "emiliosheinz",
        "comment_body": "Nice, so please, review again.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2195138707",
    "pr_number": 31621,
    "pr_file": "packages/nx/src/tasks-runner/is-tui-enabled.ts",
    "created_at": "2025-07-09T14:09:22+00:00",
    "commented_code": "const isCapable =\n     skipCapabilityCheck || (process.stderr.isTTY && isUnicodeSupported());\n \n+  if (typeof nxArgs.tui === 'boolean') {\n+    if (nxArgs.tui && !isCapable) {\n+      logger.warn(\n+        'The Nx Terminal UI cannot be used in this environment; falling back to static output.'",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2195138707",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31621,
        "pr_file": "packages/nx/src/tasks-runner/is-tui-enabled.ts",
        "discussion_id": "2195138707",
        "commented_code": "@@ -33,6 +33,16 @@ export function shouldUseTui(\n   const isCapable =\n     skipCapabilityCheck || (process.stderr.isTTY && isUnicodeSupported());\n \n+  if (typeof nxArgs.tui === 'boolean') {\n+    if (nxArgs.tui && !isCapable) {\n+      logger.warn(\n+        'The Nx Terminal UI cannot be used in this environment; falling back to static output.'",
        "comment_created_at": "2025-07-09T14:09:22+00:00",
        "comment_author": "FrozenPandaz",
        "comment_body": "```suggestion\n        'Nx Terminal UI was not enabled as it is not supported in this environment.'\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2153888528",
    "pr_number": 31622,
    "pr_file": "packages/nx/src/utils/package-manager.ts",
    "created_at": "2025-06-18T07:43:39+00:00",
    "commented_code": "getRegistryUrl: useBerry\n           ? 'yarn config get npmRegistryServer'\n           : 'yarn config get registry',\n+        publish: (packageRoot, registry, registryConfigKey, tag) =>\n+          `npm publish \"${packageRoot}\" --json --\"${registryConfigKey}=${registry}\" --tag=${tag}`,\n       };\n     },\n     pnpm: () => {\n-      let modernPnpm: boolean, includeDoubleDashBeforeArgs: boolean;\n+      let modernPnpm: boolean,\n+        includeDoubleDashBeforeArgs: boolean,\n+        allowRegistryConfigKey: boolean;\n       try {\n         const pnpmVersion = getPackageManagerVersion('pnpm', root);\n         modernPnpm = gte(pnpmVersion, '6.13.0');\n         includeDoubleDashBeforeArgs = lt(pnpmVersion, '7.0.0');\n+        allowRegistryConfigKey = satisfies(\n+          pnpmVersion,\n+          '>=9.15.7 <10.0.0 || >=10.5.0'",
    "repo_full_name": "nrwl/nx",
    "discussion_comments": [
      {
        "comment_id": "2153888528",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31622,
        "pr_file": "packages/nx/src/utils/package-manager.ts",
        "discussion_id": "2153888528",
        "commented_code": "@@ -130,17 +136,26 @@ export function getPackageManagerCommand(\n         getRegistryUrl: useBerry\n           ? 'yarn config get npmRegistryServer'\n           : 'yarn config get registry',\n+        publish: (packageRoot, registry, registryConfigKey, tag) =>\n+          `npm publish \"${packageRoot}\" --json --\"${registryConfigKey}=${registry}\" --tag=${tag}`,\n       };\n     },\n     pnpm: () => {\n-      let modernPnpm: boolean, includeDoubleDashBeforeArgs: boolean;\n+      let modernPnpm: boolean,\n+        includeDoubleDashBeforeArgs: boolean,\n+        allowRegistryConfigKey: boolean;\n       try {\n         const pnpmVersion = getPackageManagerVersion('pnpm', root);\n         modernPnpm = gte(pnpmVersion, '6.13.0');\n         includeDoubleDashBeforeArgs = lt(pnpmVersion, '7.0.0');\n+        allowRegistryConfigKey = satisfies(\n+          pnpmVersion,\n+          '>=9.15.7 <10.0.0 || >=10.5.0'",
        "comment_created_at": "2025-06-18T07:43:39+00:00",
        "comment_author": "JamesHenry",
        "comment_body": "What happened here? `>= 10.0.0 < 10.5.0`?",
        "pr_file_module": null
      },
      {
        "comment_id": "2153909547",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31622,
        "pr_file": "packages/nx/src/utils/package-manager.ts",
        "discussion_id": "2153888528",
        "commented_code": "@@ -130,17 +136,26 @@ export function getPackageManagerCommand(\n         getRegistryUrl: useBerry\n           ? 'yarn config get npmRegistryServer'\n           : 'yarn config get registry',\n+        publish: (packageRoot, registry, registryConfigKey, tag) =>\n+          `npm publish \"${packageRoot}\" --json --\"${registryConfigKey}=${registry}\" --tag=${tag}`,\n       };\n     },\n     pnpm: () => {\n-      let modernPnpm: boolean, includeDoubleDashBeforeArgs: boolean;\n+      let modernPnpm: boolean,\n+        includeDoubleDashBeforeArgs: boolean,\n+        allowRegistryConfigKey: boolean;\n       try {\n         const pnpmVersion = getPackageManagerVersion('pnpm', root);\n         modernPnpm = gte(pnpmVersion, '6.13.0');\n         includeDoubleDashBeforeArgs = lt(pnpmVersion, '7.0.0');\n+        allowRegistryConfigKey = satisfies(\n+          pnpmVersion,\n+          '>=9.15.7 <10.0.0 || >=10.5.0'",
        "comment_created_at": "2025-06-18T07:51:18+00:00",
        "comment_author": "jogelin",
        "comment_body": "So they [fixed it initially on `v10.5`](https://github.com/pnpm/pnpm/releases?page=3) on the 25 of February\r\n![image](https://github.com/user-attachments/assets/0e37922e-2cc0-450a-a4ac-dcff90c7c4ec)\r\n\r\n[then patched `v9.15.7`](https://github.com/pnpm/pnpm/releases/tag/v9.15.7) on the 6th of March\r\n![image](https://github.com/user-attachments/assets/e91d4f23-9222-4c94-869d-42fb7db7f250)\r\n\r\nSo all versions `>= 10.0.0 < 10.5.0` are not containing the fix\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "2153915627",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31622,
        "pr_file": "packages/nx/src/utils/package-manager.ts",
        "discussion_id": "2153888528",
        "commented_code": "@@ -130,17 +136,26 @@ export function getPackageManagerCommand(\n         getRegistryUrl: useBerry\n           ? 'yarn config get npmRegistryServer'\n           : 'yarn config get registry',\n+        publish: (packageRoot, registry, registryConfigKey, tag) =>\n+          `npm publish \"${packageRoot}\" --json --\"${registryConfigKey}=${registry}\" --tag=${tag}`,\n       };\n     },\n     pnpm: () => {\n-      let modernPnpm: boolean, includeDoubleDashBeforeArgs: boolean;\n+      let modernPnpm: boolean,\n+        includeDoubleDashBeforeArgs: boolean,\n+        allowRegistryConfigKey: boolean;\n       try {\n         const pnpmVersion = getPackageManagerVersion('pnpm', root);\n         modernPnpm = gte(pnpmVersion, '6.13.0');\n         includeDoubleDashBeforeArgs = lt(pnpmVersion, '7.0.0');\n+        allowRegistryConfigKey = satisfies(\n+          pnpmVersion,\n+          '>=9.15.7 <10.0.0 || >=10.5.0'",
        "comment_created_at": "2025-06-18T07:54:20+00:00",
        "comment_author": "JamesHenry",
        "comment_body": "Oh interesting, so it was actually a v10 feature, but they chose to back port it to the latest v9 patch...\r\n\r\nPlease can we add that as a comment to clarify for posterity? Otherwise LGTM",
        "pr_file_module": null
      },
      {
        "comment_id": "2153985290",
        "repo_full_name": "nrwl/nx",
        "pr_number": 31622,
        "pr_file": "packages/nx/src/utils/package-manager.ts",
        "discussion_id": "2153888528",
        "commented_code": "@@ -130,17 +136,26 @@ export function getPackageManagerCommand(\n         getRegistryUrl: useBerry\n           ? 'yarn config get npmRegistryServer'\n           : 'yarn config get registry',\n+        publish: (packageRoot, registry, registryConfigKey, tag) =>\n+          `npm publish \"${packageRoot}\" --json --\"${registryConfigKey}=${registry}\" --tag=${tag}`,\n       };\n     },\n     pnpm: () => {\n-      let modernPnpm: boolean, includeDoubleDashBeforeArgs: boolean;\n+      let modernPnpm: boolean,\n+        includeDoubleDashBeforeArgs: boolean,\n+        allowRegistryConfigKey: boolean;\n       try {\n         const pnpmVersion = getPackageManagerVersion('pnpm', root);\n         modernPnpm = gte(pnpmVersion, '6.13.0');\n         includeDoubleDashBeforeArgs = lt(pnpmVersion, '7.0.0');\n+        allowRegistryConfigKey = satisfies(\n+          pnpmVersion,\n+          '>=9.15.7 <10.0.0 || >=10.5.0'",
        "comment_created_at": "2025-06-18T08:27:39+00:00",
        "comment_author": "jogelin",
        "comment_body": "Comment added",
        "pr_file_module": null
      }
    ]
  }
]