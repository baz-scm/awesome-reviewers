[
  {
    "discussion_id": "1817705625",
    "pr_number": 5872,
    "pr_file": "Dockerfile",
    "created_at": "2024-10-26T07:17:07+00:00",
    "commented_code": "RUN mkdir -p ../../dist/linux-amd64-rocm/lib/ollama && \\\n     (cd /opt/rocm/lib && tar cf - rocblas/library) | (cd ../../dist/linux-amd64-rocm/lib/ollama && tar xf - )\n \n+FROM --platform=linux/arm64 cosdt/cann:${ASCEND_VERSION} AS ascend-build-arm64\n+ARG CMAKE_VERSION\n+COPY ./scripts/rh_linux_deps.sh /\n+RUN CMAKE_VERSION=${CMAKE_VERSION} sh /rh_linux_deps.sh\n+ENV PATH /opt/rh/gcc-toolset-10/root/usr/bin:$PATH\n+COPY --from=llm-code / /go/src/github.com/ollama/ollama/\n+WORKDIR /go/src/github.com/ollama/ollama/llm/generate\n+ARG CGO_CFLAGS\n+RUN OLLAMA_SKIP_STATIC_GENERATE=1 OLLAMA_SKIP_CPU_GENERATE=1 sh gen_linux.sh\n+",
    "repo_full_name": "ollama/ollama",
    "discussion_comments": [
      {
        "comment_id": "1817705625",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "Dockerfile",
        "discussion_id": "1817705625",
        "commented_code": "@@ -98,6 +99,16 @@ RUN --mount=type=cache,target=/root/.ccache \\\n RUN mkdir -p ../../dist/linux-amd64-rocm/lib/ollama && \\\n     (cd /opt/rocm/lib && tar cf - rocblas/library) | (cd ../../dist/linux-amd64-rocm/lib/ollama && tar xf - )\n \n+FROM --platform=linux/arm64 cosdt/cann:${ASCEND_VERSION} AS ascend-build-arm64\n+ARG CMAKE_VERSION\n+COPY ./scripts/rh_linux_deps.sh /\n+RUN CMAKE_VERSION=${CMAKE_VERSION} sh /rh_linux_deps.sh\n+ENV PATH /opt/rh/gcc-toolset-10/root/usr/bin:$PATH\n+COPY --from=llm-code / /go/src/github.com/ollama/ollama/\n+WORKDIR /go/src/github.com/ollama/ollama/llm/generate\n+ARG CGO_CFLAGS\n+RUN OLLAMA_SKIP_STATIC_GENERATE=1 OLLAMA_SKIP_CPU_GENERATE=1 sh gen_linux.sh\n+",
        "comment_created_at": "2024-10-26T07:17:07+00:00",
        "comment_author": "shink",
        "comment_body": "Hi, thanks for the contribution! We deprecated `cosdt/cann` image a few months ago, please use [ascendai/cann](https://hub.docker.com/r/ascendai/cann) instead.",
        "pr_file_module": null
      },
      {
        "comment_id": "1817708981",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "Dockerfile",
        "discussion_id": "1817705625",
        "commented_code": "@@ -98,6 +99,16 @@ RUN --mount=type=cache,target=/root/.ccache \\\n RUN mkdir -p ../../dist/linux-amd64-rocm/lib/ollama && \\\n     (cd /opt/rocm/lib && tar cf - rocblas/library) | (cd ../../dist/linux-amd64-rocm/lib/ollama && tar xf - )\n \n+FROM --platform=linux/arm64 cosdt/cann:${ASCEND_VERSION} AS ascend-build-arm64\n+ARG CMAKE_VERSION\n+COPY ./scripts/rh_linux_deps.sh /\n+RUN CMAKE_VERSION=${CMAKE_VERSION} sh /rh_linux_deps.sh\n+ENV PATH /opt/rh/gcc-toolset-10/root/usr/bin:$PATH\n+COPY --from=llm-code / /go/src/github.com/ollama/ollama/\n+WORKDIR /go/src/github.com/ollama/ollama/llm/generate\n+ARG CGO_CFLAGS\n+RUN OLLAMA_SKIP_STATIC_GENERATE=1 OLLAMA_SKIP_CPU_GENERATE=1 sh gen_linux.sh\n+",
        "comment_created_at": "2024-10-26T07:41:08+00:00",
        "comment_author": "shink",
        "comment_body": "Also, all images support `linux/amd64` and `linux/arm64`, you can add amd64 support if you want.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1940012178",
    "pr_number": 8211,
    "pr_file": "Dockerfile",
    "created_at": "2025-02-03T20:55:47+00:00",
    "commented_code": "ARG GOLANG_VERSION=1.22.8\n ARG CUDA_VERSION_11=11.3.1\n ARG CUDA_VERSION_12=12.4.0\n-ARG ROCM_VERSION=6.1.2\n+ARG ROCM_VERSION=6.2.4",
    "repo_full_name": "ollama/ollama",
    "discussion_comments": [
      {
        "comment_id": "1940012178",
        "repo_full_name": "ollama/ollama",
        "pr_number": 8211,
        "pr_file": "Dockerfile",
        "discussion_id": "1940012178",
        "commented_code": "@@ -1,7 +1,7 @@\n ARG GOLANG_VERSION=1.22.8\n ARG CUDA_VERSION_11=11.3.1\n ARG CUDA_VERSION_12=12.4.0\n-ARG ROCM_VERSION=6.1.2\n+ARG ROCM_VERSION=6.2.4",
        "comment_created_at": "2025-02-03T20:55:47+00:00",
        "comment_author": "melroy89",
        "comment_body": "```suggestion\r\nARG ROCM_VERSION=6.3.2\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "1941083928",
        "repo_full_name": "ollama/ollama",
        "pr_number": 8211,
        "pr_file": "Dockerfile",
        "discussion_id": "1940012178",
        "commented_code": "@@ -1,7 +1,7 @@\n ARG GOLANG_VERSION=1.22.8\n ARG CUDA_VERSION_11=11.3.1\n ARG CUDA_VERSION_12=12.4.0\n-ARG ROCM_VERSION=6.1.2\n+ARG ROCM_VERSION=6.2.4",
        "comment_created_at": "2025-02-04T12:34:17+00:00",
        "comment_author": "Pekkari",
        "comment_body": "Is that available?\r\n```\r\n$ podman pull docker.io/rocm/dev-centos-7:6.3.2\r\nTrying to pull docker.io/rocm/dev-centos-7:6.3.2...\r\nError: initializing source docker://rocm/dev-centos-7:6.3.2: reading manifest 6.3.2 in docker.io/rocm/dev-centos-7: manifest unknown\r\n$ podman pull docker.io/rocm/dev-centos-7:6.3.2-complete\r\nTrying to pull docker.io/rocm/dev-centos-7:6.3.2-complete...\r\nError: initializing source docker://rocm/dev-centos-7:6.3.2-complete: reading manifest 6.3.2-complete in docker.io/rocm/dev-centos-7: manifest unknown\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "1941506434",
        "repo_full_name": "ollama/ollama",
        "pr_number": 8211,
        "pr_file": "Dockerfile",
        "discussion_id": "1940012178",
        "commented_code": "@@ -1,7 +1,7 @@\n ARG GOLANG_VERSION=1.22.8\n ARG CUDA_VERSION_11=11.3.1\n ARG CUDA_VERSION_12=12.4.0\n-ARG ROCM_VERSION=6.1.2\n+ARG ROCM_VERSION=6.2.4",
        "comment_created_at": "2025-02-04T16:26:55+00:00",
        "comment_author": "melroy89",
        "comment_body": "Uhm.. Maybe that needs to be reported here. https://github.com/ROCm/ROCm-docker/blob/master/dev/Dockerfile-centos-7\r\n\r\nSince they didn't publish new images for multiple months! ",
        "pr_file_module": null
      },
      {
        "comment_id": "1943102752",
        "repo_full_name": "ollama/ollama",
        "pr_number": 8211,
        "pr_file": "Dockerfile",
        "discussion_id": "1940012178",
        "commented_code": "@@ -1,7 +1,7 @@\n ARG GOLANG_VERSION=1.22.8\n ARG CUDA_VERSION_11=11.3.1\n ARG CUDA_VERSION_12=12.4.0\n-ARG ROCM_VERSION=6.1.2\n+ARG ROCM_VERSION=6.2.4",
        "comment_created_at": "2025-02-05T14:57:37+00:00",
        "comment_author": "Pekkari",
        "comment_body": "they did, but no longer for centos-7, but almalinux-8, so either you take this patch as is, and get the minor upgrade, or wait for a second version of the patch that I'm on the works upgrading to rocm-6.3.2 using the almalinux image.",
        "pr_file_module": null
      },
      {
        "comment_id": "1948128093",
        "repo_full_name": "ollama/ollama",
        "pr_number": 8211,
        "pr_file": "Dockerfile",
        "discussion_id": "1940012178",
        "commented_code": "@@ -1,7 +1,7 @@\n ARG GOLANG_VERSION=1.22.8\n ARG CUDA_VERSION_11=11.3.1\n ARG CUDA_VERSION_12=12.4.0\n-ARG ROCM_VERSION=6.1.2\n+ARG ROCM_VERSION=6.2.4",
        "comment_created_at": "2025-02-09T15:04:10+00:00",
        "comment_author": "melroy89",
        "comment_body": "Nice to see to move to v6.3.2 indeed by using almalinux.",
        "pr_file_module": null
      }
    ]
  }
]