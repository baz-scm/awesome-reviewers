[
  {
    "discussion_id": "1697785918",
    "pr_number": 5872,
    "pr_file": "scripts/install.sh",
    "created_at": "2024-07-31T01:40:52+00:00",
    "commented_code": "case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
    "repo_full_name": "ollama/ollama",
    "discussion_comments": [
      {
        "comment_id": "1697785918",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-07-31T01:40:52+00:00",
        "comment_author": "wangshuai09",
        "comment_body": "Incorrect use of `;`",
        "pr_file_module": null
      },
      {
        "comment_id": "1704974205",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-08-06T06:24:46+00:00",
        "comment_author": "zhongTao99",
        "comment_body": "fixed",
        "pr_file_module": null
      },
      {
        "comment_id": "1839616290",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-13T07:07:14+00:00",
        "comment_author": "donkey566788",
        "comment_body": "@wangshuai09  \r\nHello, could you please advise how I should deploy ollama inference on an aarch64 system architecture using Ascend 910B? Could you also provide an installation example? \r\n\u60a8\u597d\uff0c\u662f\u5426\u76f4\u63a5\u4e0b\u8f7d\u6700\u65b0ollma \u7248\u672c\u7f16\u8bd1\u5b89\u88c5\u5373\u53ef\u3002\u3002",
        "pr_file_module": null
      },
      {
        "comment_id": "1841386100",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-14T01:06:58+00:00",
        "comment_author": "hipudding",
        "comment_body": "Yes, download the pr and compile it according to the official guidance.",
        "pr_file_module": null
      },
      {
        "comment_id": "1841442779",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-14T01:54:50+00:00",
        "comment_author": "donkey566788",
        "comment_body": "@hipudding  \u611f\u8c22\u56de\u590d\uff0c \u8fd8\u6709\u4e00\u4e9b\u7ec6\u8282\u671f\u5f85\u60a8\u7684\u652f\u6301\r\n\r\n\u5b98\u65b9\u7248\u672c\u9700\u6c42\r\ngo version 1.22 or higher\r\ngcc version 11.4.0 or higher\r\n\r\n\u6211\u4f7f\u7528\u4ee5\u4e0b \u65b9\u6cd5\u7f16\u8bd1\u5b89\u88c5\r\ngit clone https://github.com/zhongTao99/ollama.git\r\ncd ollama//llm/generate\r\nollama/llm/generate# bash gen_linux.sh\r\n\r\n\u7531\u4e8e\u9879\u76ee\u73af\u5883\u4e0d\u53ef\u5347\u7ea7gcc \u7248\u672c\uff0c\u4e14gcc\u7248\u672c \u4e3a7.x \uff0c\u7f16\u8bd1\u5931\u8d25\uff0c \u8bf7\u95ee\u6709\u4ec0\u4e48\u89e3\u51b3\u65b9\u6848\u5417",
        "pr_file_module": null
      },
      {
        "comment_id": "1841444009",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-14T01:56:16+00:00",
        "comment_author": "hipudding",
        "comment_body": "go generate ./...\r\ngo build .\r\n\r\nBut for the gcc version, there shouldn't be any good solution. If it doesn't work, just compile a higher version of gcc.",
        "pr_file_module": null
      },
      {
        "comment_id": "1843140901",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-15T03:24:41+00:00",
        "comment_author": "donkey566788",
        "comment_body": "@hipudding \u5df2\u7ecf\u5347\u7ea7 go 1.22.9 \u548c gcc \u7248\u672c 11.4\r\n\u7f16\u8bd1\u8fd9\u4e2apr \u4ecd\u7136\u7f16\u8bd1\u4e0d\u8fc7\u53bb\uff0c \u8bf7\u6559\u4e0b\u8fd8\u6709\u4ec0\u4e48\u89e3\u51b3\u529e\u6cd5\u5417\r\n\r\n![6da078357cb98e61a6d99b4d53b50367](https://github.com/user-attachments/assets/e1a49977-4b3f-4736-8c9f-330183a49f64)\r\n![453d123639c8af8c7efa878715d229db](https://github.com/user-attachments/assets/c2f87e76-49c2-4a24-b73f-68dcec65a451)\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "1843233311",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-15T06:10:25+00:00",
        "comment_author": "hipudding",
        "comment_body": "Check whether the gcc detected in cmake is version 11.4, or you can manually specify the gcc path. It seems that the gcc version is wrong.",
        "pr_file_module": null
      },
      {
        "comment_id": "1843326453",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-15T07:56:39+00:00",
        "comment_author": "Wind-Ring",
        "comment_body": "@hipudding \u5927\u4f6c\u60a8\u597d\uff0c\u76ee\u524dgo generate ./...\u8fd9\u4e00\u6b65\u770b\u4e0a\u53bb\u5df2\u7ecf\u5b8c\u6210\uff0c\u6267\u884cgo build .\u540e\u65e0\u8fd4\u56de\uff0c\u4e0d\u77e5\u9053\u662f\u5426\u5b89\u88c5\u6210\u529f\u3002\u540e\u7eed\u8981\u4ece\u6d4b\u8bd5\u73af\u5883\u8fc1\u79fb\u90e8\u7f72\u5230\u67d0\u8fd0\u8425\u5546\u7684gcc\u7248\u672c\u4f4e(7.3.0)\uff0c\u65e0\u6cd5\u5347\u7ea7\u7cfb\u7edf\u5305\u7684\u5c01\u95ed\u73af\u5883\uff0c\u8bf7\u95ee\u5982\u4f55\u6253\u5305\u96c6\u6210\u8fd9\u4e2a\u5e94\u7528\u3002\r\n\u5982\u679c\u60a8\u80fd\u7559\u4e0b\u79c1\u4e0b\u8054\u7cfb\u7684\u90ae\u7bb1\u5c31\u6700\u597d\u4e86\uff0c\u611f\u8c22\uff01\r\n![1](https://github.com/user-attachments/assets/97cc2aba-78a6-4a9a-a59f-f6f789bfbdf1)\r\n![2](https://github.com/user-attachments/assets/0ad48c5a-8dcd-47c3-9646-461acf8072f3)\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "1845801828",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-18T03:18:46+00:00",
        "comment_author": "MeiK2333",
        "comment_body": "@Wind-Ring @donkey566788 \r\n[ollama.zip](https://github.com/user-attachments/files/17794164/ollama.zip)\r\n\r\n\u8fd9\u91cc\u662f\u6211\u7f16\u8bd1\u6253\u5305\u7684 ollama \u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5982\u679c gcc \u7248\u672c\u8fc7\u4f4e\u7684\u8bdd\uff0c\u9700\u8981\u628a libstdc++.so \u90a3\u4e2a\u6587\u4ef6\u52a0\u5165 LD_LIBRARY_PATH \u4e2d\r\n\r\n\u8fd8\u6709\u5c31\u662f\u8fd9\u4e2a\u6587\u4ef6\u662f\u57fa\u4e8e\u5f53\u524d pr \u7684\u4ee3\u7801\u7f16\u8bd1\u7684\uff0c\u6ca1\u6709\u5408\u5165\u6700\u65b0\u7684 ollama \u548c llama.cpp \u7684\u4ee3\u7801",
        "pr_file_module": null
      },
      {
        "comment_id": "1845805950",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-18T03:27:45+00:00",
        "comment_author": "Wind-Ring",
        "comment_body": "@MeiK2333 \r\n\u975e\u5e38\u611f\u8c22\uff01",
        "pr_file_module": null
      },
      {
        "comment_id": "1860488489",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-27T11:23:44+00:00",
        "comment_author": "121209",
        "comment_body": "> [ollama.zip](https://github.com/user-attachments/files/17794164/ollama.zip)\r\n> \r\n> \u8fd9\u91cc\u662f\u6211\u7f16\u8bd1\u6253\u5305\u7684 ollama \u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5982\u679c gcc \u7248\u672c\u8fc7\u4f4e\u7684\u8bdd\uff0c\u9700\u8981\u628a libstdc++.so \u90a3\u4e2a\u6587\u4ef6\u52a0\u5165 LD_LIBRARY_PATH \u4e2d\r\n> \r\n> \u8fd8\u6709\u5c31\u662f\u8fd9\u4e2a\u6587\u4ef6\u662f\u57fa\u4e8e\u5f53\u524d pr \u7684\u4ee3\u7801\u7f16\u8bd1\u7684\uff0c\u6ca1\u6709\u5408\u5165\u6700\u65b0\u7684 ollama \u548c llama.cpp \u7684\u4ee3\u7801\r\n\r\n\u6211\u662f\u65b0\u624b\uff0c\u80fd\u95ee\u4e0b\u8fd9\u4e2a\u5305\u4e0a\u4f20\u670d\u52a1\u5668\u540e\u8be5\u5982\u4f55\u5b89\u88c5\u5417",
        "pr_file_module": null
      },
      {
        "comment_id": "1861393560",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-28T01:14:53+00:00",
        "comment_author": "hipudding",
        "comment_body": "@121209 ./ollama serve",
        "pr_file_module": null
      },
      {
        "comment_id": "1861426468",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-28T02:19:07+00:00",
        "comment_author": "121209",
        "comment_body": "> @121209 ./ollama serve\r\n\u5927\u4f6c\uff0c\u60a8\u597d\u3002\u6211\u5728910B3\u4e0a\u5c06\u6253\u5305\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u89e3\u538b\u540e\uff0c./ollama serve\u542f\u52a8\u670d\u52a1\uff0c\u4f46\u662f\u6253\u5c4f\u4fe1\u606f\u5361\u4f4f\u4e86\uff0c\u4e5f\u6ca1\u6709\u8f93\u51fa\u7ed3\u679c\u3002\u8fd9\u8be5\u548b\u529e\u5462\uff1f\r\n![Snipaste_2024-11-28_10-16-51](https://github.com/user-attachments/assets/fb8b9abe-0896-47cf-9e1c-7b4e3ec8dbb6)\r\n\r\n\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "1861446172",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-28T02:55:09+00:00",
        "comment_author": "121209",
        "comment_body": "> go generate ./... go build .\r\n> \r\n> But for the gcc version, there shouldn't be any good solution. If it doesn't work, just compile a higher version of gcc.\r\n\r\n\u5927\u4f6c\uff0c\u6211\u5229\u7528conda\u5b89\u88c5\u4e86go1.22.6\u548cgcc11.4\u7248\u672c\uff0c\u7136\u540e\u4f7f\u7528\u5982\u4e0b\u65b9\u5f0f\u7f16\u8bd1\r\ngit clone https://github.com/zhongTao99/ollama.git\r\ncd ollama//llm/generate\r\nollama/llm/generate# bash gen_linux.sh\uff1b\r\nbash\u8fd0\u884c\u62a5\u9519\u540e\u63a5\u7740\u8fd0\u884c\uff1a\r\ngo generate ./...\r\ngo build .\r\n\u5176\u4e2d\uff0cgo generate ./\u62a5\u9519\uff1a\r\n![image](https://github.com/user-attachments/assets/5ccfbaa5-e922-4c72-a17c-948b8bd5d366)\r\ngo bulid .\u6ca1\u6709\u62a5\u9519\u4f46\u662f\u542f\u52a8ollama serve\u540e\uff0c\r\n![image](https://github.com/user-attachments/assets/011ad01e-ff84-43bd-ba94-c7ca68ddc342)\r\n\u8fd9\u79cd\u60c5\u51b5\u8be5\u600e\u4e48\u5904\u7406\u5462\uff1f\u80fd\u548c\u60a8\u76f4\u63a5\u5728welink\u4e2d\u53d6\u5f97\u8054\u7cfb\u5417\uff1f",
        "pr_file_module": null
      },
      {
        "comment_id": "1861560951",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-28T06:15:57+00:00",
        "comment_author": "hipudding",
        "comment_body": "> > @121209 ./ollama serve\r\n> > \u5927\u4f6c\uff0c\u60a8\u597d\u3002\u6211\u5728910B3\u4e0a\u5c06\u6253\u5305\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u89e3\u538b\u540e\uff0c./ollama serve\u542f\u52a8\u670d\u52a1\uff0c\u4f46\u662f\u6253\u5c4f\u4fe1\u606f\u5361\u4f4f\u4e86\uff0c\u4e5f\u6ca1\u6709\u8f93\u51fa\u7ed3\u679c\u3002\u8fd9\u8be5\u548b\u529e\u5462\uff1f\r\n> > ![Snipaste_2024-11-28_10-16-51](https://private-user-images.githubusercontent.com/74487984/390616774-fb8b9abe-0896-47cf-9e1c-7b4e3ec8dbb6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzI3NzQ3OTIsIm5iZiI6MTczMjc3NDQ5MiwicGF0aCI6Ii83NDQ4Nzk4NC8zOTA2MTY3NzQtZmI4YjlhYmUtMDg5Ni00N2NmLTllMWMtN2I0ZTNlYzhkYmI2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMjglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTI4VDA2MTQ1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTdmNzg5YjBmYjE2YzdlNDBlYWZlMTE5ZGE4YTVkOTI5YjIwMTg3MGUyODc1Y2QxMWI5NWQzZjc2OTk2Y2Q3ZDkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.L0UNMsjPKKyVPi7AxoaHbupKbz8P-Is4gGLPsp5-MVo)\r\n\r\nIt seems ollama server has already started. You can just run ollama client, for example: ./ollama run qwen2.5",
        "pr_file_module": null
      },
      {
        "comment_id": "1861584628",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-28T06:35:30+00:00",
        "comment_author": "Wind-Ring",
        "comment_body": "@hipudding @MeiK2333 @zhongTao99 \u5927\u4f6c\u4eec\u597d\uff0c\u6211\u7528\u81ea\u5df1\u7f16\u8bd1\u7684\u4ee5\u53caMeiK2333\u5927\u4f6c\u7ed9\u51fa\u7684ollama\uff0c\u542f\u52a8\u670d\u52a1\u540e\u53d1\u73b0\u65e0\u6cd5\u76d1\u6d4b\u51fa\u672c\u8bbe\u5907npu\u800c\u662f\u76f4\u63a5\u52a0\u8f7dcpu\uff0c\u4e14\u8dd1\u6a21\u578b\u65f6\u786e\u5b9e\u6ca1\u6709\u4f7f\u7528\u5230npu\uff0c\u8bf7\u95ee\u662f\u4ec0\u4e48\u539f\u56e0\u5462\r\n![31CEC4C6-CF88-465f-8BD5-0C23A7E289C3](https://github.com/user-attachments/assets/fd7823ee-8a81-4d4c-8f98-2668c9c07d9e)\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "1861638681",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-28T07:30:38+00:00",
        "comment_author": "hipudding",
        "comment_body": "> @hipudding @MeiK2333 @zhongTao99 \u5927\u4f6c\u4eec\u597d\uff0c\u6211\u7528\u81ea\u5df1\u7f16\u8bd1\u7684\u4ee5\u53caMeiK2333\u5927\u4f6c\u7ed9\u51fa\u7684ollama\uff0c\u542f\u52a8\u670d\u52a1\u540e\u53d1\u73b0\u65e0\u6cd5\u76d1\u6d4b\u51fa\u672c\u8bbe\u5907npu\u800c\u662f\u76f4\u63a5\u52a0\u8f7dcpu\uff0c\u4e14\u8dd1\u6a21\u578b\u65f6\u786e\u5b9e\u6ca1\u6709\u4f7f\u7528\u5230npu\uff0c\u8bf7\u95ee\u662f\u4ec0\u4e48\u539f\u56e0\u5462 ![31CEC4C6-CF88-465f-8BD5-0C23A7E289C3](https://private-user-images.githubusercontent.com/52388501/390667212-fd7823ee-8a81-4d4c-8f98-2668c9c07d9e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzI3NzkxNjQsIm5iZiI6MTczMjc3ODg2NCwicGF0aCI6Ii81MjM4ODUwMS8zOTA2NjcyMTItZmQ3ODIzZWUtOGE4MS00ZDRjLThmOTgtMjY2OGM5YzA3ZDllLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMjglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTI4VDA3Mjc0NFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWJkY2QwNWMzYjVmNjY0ZjcxZmU2MTJjMjUzZWMzMDFmNWM3MzU2ZTAzY2U1ZWM3OTc2NmMzOWEzMzFkYjY0MTYmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.pDy0zBsSMf8lOK5g-A10zrVT4V3JmuiSCNafo4OS8rc)\r\n\r\nThere are two possibilities: 1. CANN compilation was not used during compilation; 2. Ascend NPU was not detected during startup.\r\n\r\nYou can check like this: after starting ollama, go to the /tmp/ollama****/ directory to check whether the Ascend version of the ollama server has been generated; or check whether the user who started ollama has permission to access the NPU.",
        "pr_file_module": null
      },
      {
        "comment_id": "1861700827",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-28T08:13:42+00:00",
        "comment_author": "121209",
        "comment_body": "> > > @121209 ./ollama serve\r\n> > > \u5927\u4f6c\uff0c\u60a8\u597d\u3002\u6211\u5728910B3\u4e0a\u5c06\u6253\u5305\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u89e3\u538b\u540e\uff0c./ollama serve\u542f\u52a8\u670d\u52a1\uff0c\u4f46\u662f\u6253\u5c4f\u4fe1\u606f\u5361\u4f4f\u4e86\uff0c\u4e5f\u6ca1\u6709\u8f93\u51fa\u7ed3\u679c\u3002\u8fd9\u8be5\u548b\u529e\u5462\uff1f\r\n> > > ![Snipaste_2024-11-28_10-16-51](https://private-user-images.githubusercontent.com/74487984/390616774-fb8b9abe-0896-47cf-9e1c-7b4e3ec8dbb6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzI3NzQ3OTIsIm5iZiI6MTczMjc3NDQ5MiwicGF0aCI6Ii83NDQ4Nzk4NC8zOTA2MTY3NzQtZmI4YjlhYmUtMDg5Ni00N2NmLTllMWMtN2I0ZTNlYzhkYmI2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMjglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTI4VDA2MTQ1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTdmNzg5YjBmYjE2YzdlNDBlYWZlMTE5ZGE4YTVkOTI5YjIwMTg3MGUyODc1Y2QxMWI5NWQzZjc2OTk2Y2Q3ZDkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.L0UNMsjPKKyVPi7AxoaHbupKbz8P-Is4gGLPsp5-MVo)\r\n> \r\n> It seems ollama server has already started. You can just run ollama client, for example: ./ollama run qwen2.5\r\n\r\n@hipudding \u5927\u4f6c\uff0c\u76f4\u63a5\u8fd0\u884c\u663e\u793a\u670d\u52a1\u6ca1\u62c9\u8d77\u6765\u3002\u60a8\u6709\u80fd\u76f4\u63a5\u4f7f\u7528\u8be5\u670d\u52a1\u7684\u6709\u6548\u65b9\u6cd5\u5417\uff1f\r\n![Snipaste_2024-11-28_16-06-21](https://github.com/user-attachments/assets/d43c109a-a36b-4f9e-92cf-49a120b0e1c5)\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "1861703129",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-28T08:14:36+00:00",
        "comment_author": "Wind-Ring",
        "comment_body": "@hipudding \r\n\u5927\u4f6c\u4f60\u597d\uff0c\u6211\u521a\u521a\u68c0\u67e5\u5e76export\u4e86cann\u73af\u5883\u53d8\u91cf\u540e\u542f\u52a8ollama\uff0c\u7ed3\u679c\u4f9d\u65e7\u662f\u6ca1\u6709\u76d1\u6d4b\u51fanpu\u3002\r\n\r\n![AEFD4FB7-73B8-45b3-949D-DCB0FF253275](https://github.com/user-attachments/assets/eb25b725-829b-48d5-99cf-a788c53be8ee)\r\n\r\n\u76ee\u524d\u7684ollama\u662f\u5728\u65e0npu\u4ee5\u53ca\u9a71\u52a8\u7684\u6d4b\u8bd5\u73af\u5883\u7f16\u8bd1\u597d\uff0c\u7136\u540e\u4e0a\u4f20\u5230\u5c01\u95ed\u73af\u5883\u4e14\u65e0root\u6743\u9650\u73b0\u7f51\u8bbe\u5907\u4e0a\u7684\u3002ollama\u8981\u4f7f\u7528npu\u662f\u5426\u9700\u8981\u4ece\u4e00\u5f00\u59cb\u7f16\u8bd1\u5c31\u8981\u52a0\u5165npu\u76f8\u5173\u53c2\u6570\u5462\uff1f\u5982\u82e5\u9700\u8981\uff0c\u5982\u4f55\u7ed3\u5408cann\u9a71\u52a8\u7f16\u8bd1ollama\uff1f",
        "pr_file_module": null
      },
      {
        "comment_id": "1863027631",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697785918",
        "commented_code": "@@ -156,24 +156,32 @@ check_gpu() {\n             case $2 in\n                 nvidia) available lspci && lspci -d '10de:' | grep -q 'NVIDIA' || return 1 ;;\n                 amdgpu) available lspci && lspci -d '1002:' | grep -q 'AMD' || return 1 ;;\n+                ascend) available lspci && lspci -d '19e5:' | grep -q 'HUAWEI' || return 1 ;;\n             esac ;;\n         lshw)\n             case $2 in\n                 nvidia) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[10DE\\]' || return 1 ;;\n                 amdgpu) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[1002\\]' || return 1 ;;\n+                ascend) available lshw && $SUDO lshw -c display -numeric -disable network | grep -q 'vendor: .* \\[19E5\\]' || return 1 ;;\n             esac ;;\n         nvidia-smi) available nvidia-smi || return 1 ;;\n+        npu-smi) available npu-smi || return 1 ;;\n     esac\n }\n \n+if check_gpu npu-smi; then\n+    status \"ASCEND GPU installed.\"\n+    exit 0\n+fi\n+\n if check_gpu nvidia-smi; then\n     status \"NVIDIA GPU installed.\"\n     exit 0\n fi\n \n-if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu; then\n+if ! check_gpu lspci nvidia && ! check_gpu lshw nvidia && ! check_gpu lspci amdgpu && ! check_gpu lshw amdgpu ; check_gpu lspci ascend && ! check_gpu lshw ascend then",
        "comment_created_at": "2024-11-29T06:44:26+00:00",
        "comment_author": "hipudding",
        "comment_body": "> > > > @121209 ./ollama serve\r\n> > > > \u5927\u4f6c\uff0c\u60a8\u597d\u3002\u6211\u5728910B3\u4e0a\u5c06\u6253\u5305\u597d\u7684\u4e8c\u8fdb\u5236\u6587\u4ef6\u89e3\u538b\u540e\uff0c./ollama serve\u542f\u52a8\u670d\u52a1\uff0c\u4f46\u662f\u6253\u5c4f\u4fe1\u606f\u5361\u4f4f\u4e86\uff0c\u4e5f\u6ca1\u6709\u8f93\u51fa\u7ed3\u679c\u3002\u8fd9\u8be5\u548b\u529e\u5462\uff1f\r\n> > > > ![Snipaste_2024-11-28_10-16-51](https://private-user-images.githubusercontent.com/74487984/390616774-fb8b9abe-0896-47cf-9e1c-7b4e3ec8dbb6.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzI3NzQ3OTIsIm5iZiI6MTczMjc3NDQ5MiwicGF0aCI6Ii83NDQ4Nzk4NC8zOTA2MTY3NzQtZmI4YjlhYmUtMDg5Ni00N2NmLTllMWMtN2I0ZTNlYzhkYmI2LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMjglMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTI4VDA2MTQ1MlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTdmNzg5YjBmYjE2YzdlNDBlYWZlMTE5ZGE4YTVkOTI5YjIwMTg3MGUyODc1Y2QxMWI5NWQzZjc2OTk2Y2Q3ZDkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.L0UNMsjPKKyVPi7AxoaHbupKbz8P-Is4gGLPsp5-MVo)\r\n> > \r\n> > \r\n> > It seems ollama server has already started. You can just run ollama client, for example: ./ollama run qwen2.5\r\n> \r\n> @hipudding \u5927\u4f6c\uff0c\u76f4\u63a5\u8fd0\u884c\u663e\u793a\u670d\u52a1\u6ca1\u62c9\u8d77\u6765\u3002\u60a8\u6709\u80fd\u76f4\u63a5\u4f7f\u7528\u8be5\u670d\u52a1\u7684\u6709\u6548\u65b9\u6cd5\u5417\uff1f ![Snipaste_2024-11-28_16-06-21](https://private-user-images.githubusercontent.com/74487984/390694396-d43c109a-a36b-4f9e-92cf-49a120b0e1c5.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzI4NDQwMDIsIm5iZiI6MTczMjg0MzcwMiwicGF0aCI6Ii83NDQ4Nzk4NC8zOTA2OTQzOTYtZDQzYzEwOWEtYTM2Yi00ZjllLTkyY2YtNDlhMTIwYjBlMWM1LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDExMjklMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQxMTI5VDAxMjgyMlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWUzYzQyYjZjOGJiOWJjM2QyODQ2ZTE0MDk0Y2MxMjZiY2UyM2UyODBiMjY5ZGZkMzE5ZjVmMWU0MGJlNjhiNmUmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.67HeB1JIwFh0sTz-FKcUqoI2ufMNyoHjhDJKUp49Fyw)\r\n\r\nDo not terminate ollama server, keep ollama server running, and open another terminal run ollama cli.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1697791177",
    "pr_number": 5872,
    "pr_file": "scripts/install.sh",
    "created_at": "2024-07-31T01:49:19+00:00",
    "commented_code": "done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
    "repo_full_name": "ollama/ollama",
    "discussion_comments": [
      {
        "comment_id": "1697791177",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697791177",
        "commented_code": "@@ -322,5 +330,82 @@ if command -v nvidia-persistenced > /dev/null 2>&1; then\n     done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
        "comment_created_at": "2024-07-31T01:49:19+00:00",
        "comment_author": "wangshuai09",
        "comment_body": "Replace `24.1.RC1` and `7.1.0.6.220` with `ASCEND_DRIVER_VERSION` and `ASCEND_FIRMWARE_VERSION`.",
        "pr_file_module": null
      },
      {
        "comment_id": "1704974281",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697791177",
        "commented_code": "@@ -322,5 +330,82 @@ if command -v nvidia-persistenced > /dev/null 2>&1; then\n     done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
        "comment_created_at": "2024-08-06T06:24:52+00:00",
        "comment_author": "zhongTao99",
        "comment_body": "fxied",
        "pr_file_module": null
      },
      {
        "comment_id": "1947411391",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697791177",
        "commented_code": "@@ -322,5 +330,82 @@ if command -v nvidia-persistenced > /dev/null 2>&1; then\n     done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
        "comment_created_at": "2025-02-08T02:38:29+00:00",
        "comment_author": "zhangzhi0902",
        "comment_body": "@zhongTao99 @hipudding \r\n\u5927\u4f6c\u597d\uff0c\u6211\u6309\u7167\u8fd9\u6837\u7684\u65b9\u5f0f\u7f16\u8bd1\uff1a\r\n\u786c\u4ef6\u73af\u5883\uff1a\r\n    ubuntu22.04 aarch64\r\n    atlas 800 (Model 9000) -> ascend 910Bpro * 8\r\n1\u3001git clone https://github.com/zhongTao99/ollama.git\r\n2\u3001cd ollama\r\n3\u3001export CUSTOM_CPU_FLAGS=cann\r\n4\u3001make --no-print-directory -f make/Makefile.cann\r\n5\u3001make\r\n6\u3001go clean -cache\r\n7\u3001go build -v .\r\n8\u3001./ollama serve\r\n\u7136\u540e\u53ef\u4ee5\u68c0\u6d4b\u5230npu\u5361\r\n```\r\n[GIN-debug] HEAD   /api/version              --> github.com/ollama/ollama/server.(*Server).GenerateRoutes.func2 (5 handlers)\r\ntime=2025-02-08T10:37:20.671+08:00 level=INFO source=routes.go:1310 msg=\"Listening on 127.0.0.1:11434 (version 0.0.0)\"\r\ntime=2025-02-08T10:37:20.671+08:00 level=INFO source=routes.go:1339 msg=\"Dynamic LLM libraries\" runners=\"[cpu cann]\"\r\ntime=2025-02-08T10:37:20.672+08:00 level=INFO source=gpu.go:231 msg=\"looking for compatible GPUs\"\r\ntime=2025-02-08T10:37:21.721+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=0)] Name:Ascend910P: FreeMemory:30664511488, TotalMemory: 47497707520\"\r\ntime=2025-02-08T10:37:22.194+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=1)] Name:Ascend910P: FreeMemory:62613598208, TotalMemory: 97210580992\"\r\ntime=2025-02-08T10:37:22.696+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=2)] Name:Ascend910P: FreeMemory:93374935040, TotalMemory: 146923454464\"\r\ntime=2025-02-08T10:37:23.217+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=3)] Name:Ascend910P: FreeMemory:125907451904, TotalMemory: 196532715520\"\r\ntime=2025-02-08T10:37:23.671+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=4)] Name:Ascend910P: FreeMemory:156503126016, TotalMemory: 244030414848\"\r\ntime=2025-02-08T10:37:24.144+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=5)] Name:Ascend910P: FreeMemory:187712458752, TotalMemory: 293743292416\"\r\ntime=2025-02-08T10:37:24.673+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=6)] Name:Ascend910P: FreeMemory:220164345856, TotalMemory: 343456169984\"\r\ntime=2025-02-08T10:37:25.184+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=7)] Name:Ascend910P: FreeMemory:249405378560, TotalMemory: 393065435136\"\r\ntime=2025-02-08T10:37:25.185+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=0 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend910P total=\"44.2 GiB\" available=\"28.6 GiB\"\r\ntime=2025-02-08T10:37:25.185+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=1 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend910P total=\"90.5 GiB\" available=\"58.3 GiB\"\r\ntime=2025-02-08T10:37:25.185+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=2 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend910P total=\"136.8 GiB\" available=\"87.0 GiB\"\r\ntime=2025-02-08T10:37:25.185+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=3 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend910P total=\"183.0 GiB\" available=\"117.3 GiB\"\r\ntime=2025-02-08T10:37:25.186+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=4 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend910P total=\"227.3 GiB\" available=\"145.8 GiB\"\r\ntime=2025-02-08T10:37:25.186+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=5 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend910P total=\"273.6 GiB\" available=\"174.8 GiB\"\r\ntime=2025-02-08T10:37:25.186+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=6 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend910P total=\"319.9 GiB\" available=\"205.0 GiB\"\r\ntime=2025-02-08T10:37:25.186+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=7 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend910P total=\"366.1 GiB\" available=\"232.3 GiB\"\r\n```\r\n\u4f46\u662f\u6267\u884c./ollama run qwen2.5-7b-instruct-f16:latest\u540e\u6ca1\u6709\u52a0\u8f7d\u5230NPU\u4e0a\r\n```\r\nllm_load_print_meta: EOG token        = 151643 '<|endoftext|>'\r\nllm_load_print_meta: EOG token        = 151645 '<|im_end|>'\r\nllm_load_print_meta: EOG token        = 151662 '<|fim_pad|>'\r\nllm_load_print_meta: EOG token        = 151663 '<|repo_name|>'\r\nllm_load_print_meta: EOG token        = 151664 '<|file_sep|>'\r\nllm_load_print_meta: max token length = 256\r\nllm_load_tensors:   CPU_Mapped model buffer size = 14526.27 MiB\r\nllama_new_context_with_model: n_seq_max     = 4\r\nllama_new_context_with_model: n_ctx         = 8192\r\nllama_new_context_with_model: n_ctx_per_seq = 2048\r\nllama_new_context_with_model: n_batch       = 2048\r\nllama_new_context_with_model: n_ubatch      = 512\r\nllama_new_context_with_model: flash_attn    = 0\r\nllama_new_context_with_model: freq_base     = 1000000.0\r\nllama_new_context_with_model: freq_scale    = 1\r\nllama_new_context_with_model: n_ctx_per_seq (2048) < n_ctx_train (32768) -- the full capacity of the model will not be utilized\r\nllama_kv_cache_init:        CPU KV buffer size =   448.00 MiB\r\nllama_new_context_with_model: KV self size  =  448.00 MiB, K (f16):  224.00 MiB, V (f16):  224.00 MiB\r\nllama_new_context_with_model:        CPU  output buffer size =     2.38 MiB\r\nllama_new_context_with_model:        CPU compute buffer size =   492.01 MiB\r\nllama_new_context_with_model: graph nodes  = 986\r\nllama_new_context_with_model: graph splits = 1\r\ntime=2025-02-08T10:40:32.222+08:00 level=INFO source=server.go:594 msg=\"llama runner started in 1.01 seconds\"\r\n[GIN] 2025/02/08 - 10:40:32 | 200 |   9.37067435s |       127.0.0.1 | POST     \"/api/generate\"\r\n```\r\n\u8be5\u600e\u6837\u89e3\u51b3\uff1f\u6211\u5c1d\u8bd5\u5728llama.cpp\u4e0a\u4f7f\u7528llama-cli\u6d4b\u8bd5\u8fc7\u8fd9\u4e2a\u6a21\u578b\uff0c\u53ef\u4ee5\u52a0\u8f7d\u5728npu\u4e0a\uff0c\u4f46\u662f\u63a8\u7406\u901f\u5ea6\u6781\u6162\uff0c\u7ea60.45tokens/s, \u8fd9\u662f\u4ec0\u4e48\u60c5\u51b5\uff1f",
        "pr_file_module": null
      },
      {
        "comment_id": "1957332098",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697791177",
        "commented_code": "@@ -322,5 +330,82 @@ if command -v nvidia-persistenced > /dev/null 2>&1; then\n     done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
        "comment_created_at": "2025-02-16T13:52:42+00:00",
        "comment_author": "windy629",
        "comment_body": "\u6211\u4e5f\u78b0\u5230\u8fd9\u4e2a\u95ee\u9898\uff0collama\u7f16\u8bd1\u90fd\u6210\u529f\u4e86\uff0c\u4f46\u662f\u6267\u884c./ollama run deepseek-r1:1.5b \u7684\u65f6\u5019\uff0c\u6ca1\u6709\u7528\u5230gpu\uff0c\u53ea\u7528\u5230cpu\uff0c\u5bfc\u81f4\u597d\u6162\u3002\u4e0b\u9762\u662f\u6211\u7684\u7f16\u8bd1\u540e\u7684ollama\u8fd0\u884c\u542f\u52a8\u4fe1\u606f\uff0c\u663e\u793a\u8bc6\u522b\u5230Ascend310P\u663e\u5361\r\n\r\n\r\ntime=2025-02-16T21:45:10.990+08:00 level=INFO source=routes.go:1310 msg=\"Listening on 127.0.0.1:11434 (version 0.0.0)\"\r\ntime=2025-02-16T21:45:10.990+08:00 level=INFO source=routes.go:1339 msg=\"Dynamic LLM libraries\" runners=\"[cpu cann]\"\r\ntime=2025-02-16T21:45:10.990+08:00 level=INFO source=gpu.go:231 msg=\"looking for compatible GPUs\"\r\ntime=2025-02-16T21:45:11.957+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=0)] Name:Ascend310P: FreeMemory:90251976704, TotalMemory: 92727123968\"\r\ntime=2025-02-16T21:45:12.400+08:00 level=INFO source=gpu.go:414 msg=\"[%!d(string=1)] Name:Ascend310P: FreeMemory:180501692416, TotalMemory: 185454239744\"\r\ntime=2025-02-16T21:45:12.537+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=0 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend310P total=\"86.4 GiB\" available=\"84.1 GiB\"\r\ntime=2025-02-16T21:45:12.537+08:00 level=INFO source=types.go:131 msg=\"inference compute\" id=1 library=ascend variant=\"\" compute=\"\" driver=0.0 name=Ascend310P total=\"172.7 GiB\" available=\"168.1 GiB\"\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "1961289584",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697791177",
        "commented_code": "@@ -322,5 +330,82 @@ if command -v nvidia-persistenced > /dev/null 2>&1; then\n     done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
        "comment_created_at": "2025-02-19T09:26:12+00:00",
        "comment_author": "windy629",
        "comment_body": "@zhongTao99  \u6709\u4ec0\u4e48\u529e\u6cd5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u554a",
        "pr_file_module": null
      },
      {
        "comment_id": "1962774520",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697791177",
        "commented_code": "@@ -322,5 +330,82 @@ if command -v nvidia-persistenced > /dev/null 2>&1; then\n     done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
        "comment_created_at": "2025-02-20T02:39:00+00:00",
        "comment_author": "hipudding",
        "comment_body": "Use fp16 instead.",
        "pr_file_module": null
      },
      {
        "comment_id": "1976438630",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697791177",
        "commented_code": "@@ -322,5 +330,82 @@ if command -v nvidia-persistenced > /dev/null 2>&1; then\n     done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
        "comment_created_at": "2025-03-01T15:34:06+00:00",
        "comment_author": "windy629",
        "comment_body": "\u4f60\u6307\u7684\u662f\u4f7f\u7528fp16\u7684\u6a21\u578b\uff1f\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "1976776927",
        "repo_full_name": "ollama/ollama",
        "pr_number": 5872,
        "pr_file": "scripts/install.sh",
        "discussion_id": "1697791177",
        "commented_code": "@@ -322,5 +330,82 @@ if command -v nvidia-persistenced > /dev/null 2>&1; then\n     done\n fi\n \n+install_ascend_driver_yum() {\n+    status 'Installing ASCNED driver...'\n+    $SUDO $PACKAGE_MANAGER -y install gcc gcc-c++ make cmake unzip zlib-devel libffi-devel openssl-devel pciutils net-tools sqlite-devel lapack-devel gcc-gfortran python3-devel\n+    $SUDO groupadd -g HwHiAiUser\n+    $SUDO useradd -g HwHiAiUser -d /home/HwHiAiUser -m HwHiAiUser -s /bin/bash\n+    $SUDO usermod -aG HwHiAiUser $USER\n+\n+    # driver version, mabey get from it\n+    # npu-smi info\n+    # +------------------------------------------------------------------------------------------------+\n+    # | npu-smi 24.1.rc1.b060            Version: 24.1.rc1.b060                                        |\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\"\n+    $SUDO sh Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run --full --install-for-all\n+    rm -rf ./Ascend-hdk-$1-npu-driver_24.1.rc1_linux-$ARCH.run\n+\n+    wget \"https://ascend-repo.obs.cn-east-2.myhuaweicloud.com/Ascend HDK/Ascend HDK 24.1.RC1/Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run\"\n+    sudo sh Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run --full\n+    rm -rf ./Ascend-hdk-$1-npu-firmware_7.1.0.6.220.run",
        "comment_created_at": "2025-03-03T01:23:23+00:00",
        "comment_author": "hipudding",
        "comment_body": "Yes.",
        "pr_file_module": null
      }
    ]
  }
]