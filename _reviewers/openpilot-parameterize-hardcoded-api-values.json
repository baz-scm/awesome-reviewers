[
  {
    "discussion_id": "1599290526",
    "pr_number": 32202,
    "pr_file": "system/loggerd/encoder/encoder.cc",
    "created_at": "2024-05-14T02:13:17+00:00",
    "commented_code": "out_width = encoder_info.frame_width > 0 ? encoder_info.frame_width : in_width;\n   out_height = encoder_info.frame_height > 0 ? encoder_info.frame_height : in_height;\n \n-  pm.reset(new PubMaster({encoder_info.publish_name}));\n+  pm.reset(new PubMaster({encoder_info.publish_name, \"thumbnail\"}));",
    "repo_full_name": "commaai/openpilot",
    "discussion_comments": [
      {
        "comment_id": "1599290526",
        "repo_full_name": "commaai/openpilot",
        "pr_number": 32202,
        "pr_file": "system/loggerd/encoder/encoder.cc",
        "discussion_id": "1599290526",
        "commented_code": "@@ -6,7 +6,7 @@ VideoEncoder::VideoEncoder(const EncoderInfo &encoder_info, int in_width, int in\n   out_width = encoder_info.frame_width > 0 ? encoder_info.frame_width : in_width;\n   out_height = encoder_info.frame_height > 0 ? encoder_info.frame_height : in_height;\n \n-  pm.reset(new PubMaster({encoder_info.publish_name}));\n+  pm.reset(new PubMaster({encoder_info.publish_name, \"thumbnail\"}));",
        "comment_created_at": "2024-05-14T02:13:17+00:00",
        "comment_author": "adeebshihadeh",
        "comment_body": "we've just gotta parameterize the thumbnail \"publish_name\" in the EncoderInfo",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1948158682",
    "pr_number": 34554,
    "pr_file": "system/loggerd/encoderd.cc",
    "created_at": "2025-02-09T17:50:51+00:00",
    "commented_code": "std::vector<std::unique_ptr<Encoder>> encoders;\n   VisionIpcClient vipc_client = VisionIpcClient(\"camerad\", cam_info.stream_type, false);\n \n+  std::unique_ptr<JpegEncoder> jpeg_encoder;\n+  if (cam_info.stream_type == VISION_STREAM_ROAD) {",
    "repo_full_name": "commaai/openpilot",
    "discussion_comments": [
      {
        "comment_id": "1948158682",
        "repo_full_name": "commaai/openpilot",
        "pr_number": 34554,
        "pr_file": "system/loggerd/encoderd.cc",
        "discussion_id": "1948158682",
        "commented_code": "@@ -50,6 +51,11 @@ void encoder_thread(EncoderdState *s, const LogCameraInfo &cam_info) {\n   std::vector<std::unique_ptr<Encoder>> encoders;\n   VisionIpcClient vipc_client = VisionIpcClient(\"camerad\", cam_info.stream_type, false);\n \n+  std::unique_ptr<JpegEncoder> jpeg_encoder;\n+  if (cam_info.stream_type == VISION_STREAM_ROAD) {",
        "comment_created_at": "2025-02-09T17:50:51+00:00",
        "comment_author": "adeebshihadeh",
        "comment_body": "let's use EncoderInfo.thumbnail name and make sure to support any encoder having a thumbnail defined",
        "pr_file_module": null
      }
    ]
  }
]