[
  {
    "discussion_id": "1717113522",
    "pr_number": 46,
    "pr_file": "server/bin/emcie-server",
    "created_at": "2024-08-14T15:08:11+00:00",
    "commented_code": "GuidelineToolAssociationStore,\n )\n from emcie.server.engines.common import Engine\n+from emcie.server.indexer import Indexer\n from emcie.server.logger import FileLogger, Logger\n from emcie.server.mc import MC\n from emcie.server.configuration_validator import ConfigurationFileValidator\n \n DEFAULT_PORT = 8000\n+DEFAULT_INDEX = True",
    "repo_full_name": "emcie-co/parlant",
    "discussion_comments": [
      {
        "comment_id": "1717113522",
        "repo_full_name": "emcie-co/parlant",
        "pr_number": 46,
        "pr_file": "server/bin/emcie-server",
        "discussion_id": "1717113522",
        "commented_code": "@@ -51,11 +51,14 @@ from emcie.server.core.guideline_tool_associations import (\n     GuidelineToolAssociationStore,\n )\n from emcie.server.engines.common import Engine\n+from emcie.server.indexer import Indexer\n from emcie.server.logger import FileLogger, Logger\n from emcie.server.mc import MC\n from emcie.server.configuration_validator import ConfigurationFileValidator\n \n DEFAULT_PORT = 8000\n+DEFAULT_INDEX = True",
        "comment_created_at": "2024-08-14T15:08:11+00:00",
        "comment_author": "kichanyurd",
        "comment_body": "We don't need these global vars -- they aren't important. We can just look at them in-context.",
        "pr_file_module": null
      },
      {
        "comment_id": "1717194731",
        "repo_full_name": "emcie-co/parlant",
        "pr_number": 46,
        "pr_file": "server/bin/emcie-server",
        "discussion_id": "1717113522",
        "commented_code": "@@ -51,11 +51,14 @@ from emcie.server.core.guideline_tool_associations import (\n     GuidelineToolAssociationStore,\n )\n from emcie.server.engines.common import Engine\n+from emcie.server.indexer import Indexer\n from emcie.server.logger import FileLogger, Logger\n from emcie.server.mc import MC\n from emcie.server.configuration_validator import ConfigurationFileValidator\n \n DEFAULT_PORT = 8000\n+DEFAULT_INDEX = True",
        "comment_created_at": "2024-08-14T15:57:01+00:00",
        "comment_author": "kichanyurd",
        "comment_body": "P.S. the default here needs to be false",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1720680268",
    "pr_number": 46,
    "pr_file": "server/bin/emcie-server",
    "created_at": "2024-08-17T06:56:12+00:00",
    "commented_code": "@asynccontextmanager\n-async def load_app(config: Any) -> AsyncIterator[FastAPI]:\n+async def load_app(params: CLIParams) -> AsyncIterator[FastAPI]:\n     global EXIT_STACK\n \n     EXIT_STACK = AsyncExitStack()\n \n-    async with setup_container(config) as container, EXIT_STACK:\n+    indexer = Indexer(index_json_file=EMCIE_HOME_DIR / \"index.json\",perform_indexing=params.index, force_disable_indexing=params.force)",
    "repo_full_name": "emcie-co/parlant",
    "discussion_comments": [
      {
        "comment_id": "1720680268",
        "repo_full_name": "emcie-co/parlant",
        "pr_number": 46,
        "pr_file": "server/bin/emcie-server",
        "discussion_id": "1720680268",
        "commented_code": "@@ -210,12 +217,16 @@ async def setup_container(config: Any) -> AsyncIterator[Container]:\n \n \n @asynccontextmanager\n-async def load_app(config: Any) -> AsyncIterator[FastAPI]:\n+async def load_app(params: CLIParams) -> AsyncIterator[FastAPI]:\n     global EXIT_STACK\n \n     EXIT_STACK = AsyncExitStack()\n \n-    async with setup_container(config) as container, EXIT_STACK:\n+    indexer = Indexer(index_json_file=EMCIE_HOME_DIR / \"index.json\",perform_indexing=params.index, force_disable_indexing=params.force)",
        "comment_created_at": "2024-08-17T06:56:12+00:00",
        "comment_author": "kichanyurd",
        "comment_body": "@mc-dorzo \"story-wise\" it doesn't make sense to me to create and run an `Indexer` with an option to `force_disable_indexing`. It sounds like you're asking it to \"index without indexing\".\n\nThe CLI params `index` and `force` shouldn't be propagated to the `Indexer`, but rather control if/how we use it in running the server.",
        "pr_file_module": null
      }
    ]
  }
]