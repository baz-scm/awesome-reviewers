[
  {
    "discussion_id": "2072609577",
    "pr_number": 360,
    "pr_file": "tests/core/stable/engines/alpha/features/baseline/tools.feature",
    "created_at": "2025-05-04T12:48:48+00:00",
    "commented_code": "And the tool calls event contains a call to \"local:search_electronic_products\" with Dell vendor and laptop keyword\n         And the tool calls event contains a call to \"local:search_electronic_products\" with Samsung vendor and SSD keyword\n \n+    Scenario: Tool caller chooses the right tool for scheduling when three are overlapping\n+        Given a customer named \"Hailey\"\n+        And an empty session with \"Hailey\"\n+        And a guideline \"to_schedule_appointment\" to schedule an appointment with a doctor when user asks to make an appointment\n+        And a guideline \"to_reschedule_appointment\" to rescedule existing appointment when user had an appointment and they want to change its time\n+        And a guideline \"to_schedule_meeting\" to schedule a meeting when customer asks to meet with someone\n+        And the tool \"schedule_appointment\"\n+        And an association between \"to_schedule_appointment\" and \"schedule_appointment\"\n+        And the tool \"reschedule_appointment\"\n+        And an association between \"to_reschedule_appointment\" and \"reschedule_appointment\"\n+        And the tool \"schedule_meeting\"\n+        And an association between \"to_schedule_meeting\" and \"schedule_meeting\"\n+        And a tool relationship whereby \"reschedule_appointment\" overlaps with \"schedule_appointment\"\n+        And a tool relationship whereby \"schedule_meeting\" overlaps with \"schedule_appointment\"\n+        And a context variable \"Current Date\" set to \"April 10th, 2025\" for \"Hailey\"\n+        And a customer message, \"Hi I want to make an appointment with Dr Sara Goodman tommorow at 19:00. Can you help me with that?\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 1 tool call(s)\n+        And the tool calls event contains a call to \"local:schedule_appointment\" to Hailey with Dr sara goodman at 11-04-2025 19:00\n+\n+    Scenario: Tool caller use both tools for scheduling appointment correctly when they overlap \n+        Given a customer named \"Hailey\"\n+        And an empty session with \"Hailey\"\n+        And a guideline \"to_schedule_appointment\" to schedule an appointment with a doctor when user asks to make an appointment\n+        And a guideline \"to_reschedule_appointment\" to rescedule existing appointment when user had an appointment and they want to change its time\n+        And the tool \"schedule_appointment\"\n+        And an association between \"to_schedule_appointment\" and \"schedule_appointment\"\n+        And the tool \"reschedule_appointment\"\n+        And an association between \"to_reschedule_appointment\" and \"reschedule_appointment\"\n+        And a tool relationship whereby \"reschedule_appointment\" overlaps with \"schedule_appointment\"\n+        And a context variable \"Current Date\" set to \"April 10th, 2025\" for \"Hailey\"\n+        And a customer message, \"Hi, I\u2019d like to schedule an appointment for tommorow at 18:00 with Dr. Gabi, please. Also, I have an appointment with Dr. Michael. Could you please reschedule with Dr. Michael for tommorow at 3:00 PM? Thank you!\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 2 tool call(s)\n+        And the tool calls event contains a call to \"local:reschedule_appointment\" to Hailey with Dr. Michael at 11-04-2025 15:00 and contains a call to \"local:schedule_appointment\" to Hailey with Dr. Gabi at 11-04-2025 18:00\n+\n+    Scenario: Drinks and toppings tools called from same guideline\n+        Given a guideline \"sell_pizza\" to sell pizza when interacting with customers\n+        And a guideline \"check_drinks_or_toppings_in_stock\" to check for drinks or toppings in stock when the customer specifies toppings or drinks\n+        And the tool \"get_available_drinks\"\n+        And the tool \"get_available_toppings\"\n+        And an association between \"check_drinks_or_toppings_in_stock\" and \"get_available_drinks\"\n+        And an association between \"check_drinks_or_toppings_in_stock\" and \"get_available_toppings\"\n+        And a customer message, \"Hey, can I order a large pepperoni pizza with Sprite?\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 2 tool call(s)\n+        And the tool calls event contains Sprite and Coca Cola under \"get_available_drinks\"\n+        And the tool calls event contains Pepperoni, Mushrooms, and Olives under \"get_available_toppings\"\n+    \n+    Scenario: Tool caller use the more suitable tool for transfer when two overlap\n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels? my name is Fredric\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 1 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 as amount from Fredric to Alisse\n+\n+    Scenario: Tool caller want to use the more suitable tool for transfer when two overlap and there are missing parameters (1)\n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels?\"\n+        When processing is triggered\n+        Then no tool calls event is emitted\n+\n+    Scenario: Tool caller want to use the more suitable tool for transfer when two overlap and there are missing parameters (2)\n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to $200?\"\n+        When processing is triggered\n+        Then no tool calls event is emitted\n+\n+    Scenario: Tool caller use both tools for the right transfer when two overlap \n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And a guideline to choose the more specific coin when customer asks to transfer money\n+        And the tool \"transfer_money\"\n+        And the tool \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels and to my friend Bob $300? my name is Fredric\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 2 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 from Fredric to Alisse and a call to \"transfer_money\" with 300 from Fredric to Bob and no call to \"transfer_money\" with 200\n+\n+    Scenario: Tool caller use tools multiple times for the right transfer when two overlap \n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And a guideline to choose the more specific coin when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels and to my friend Bob $300 and also 100 shekels to Bob? my name is Fredric\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 3 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 from Fredric to Alisse a call to \"transfer_shekels\" with 100 from Fredric to Bob and a call to \"transfer_money\" with 300 from Fredric to Bob and no call to \"transfer_money\" with 200\n+\n+    Scenario: Tool caller use the more suitable tool for transfer when three overlap directly \n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And the tool \"transfer_dollars\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_dollars\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a tool relationship whereby \"transfer_dollars\" overlaps with \"transfer_money\"\n+        And a tool relationship whereby \"transfer_dollars\" overlaps with \"transfer_shekels\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels and to my friend Dan $40 and to my friend Ali 500 Dinar? my name is Fredric\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 3 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 from Fredric to Alisse and a call to \"transfer_dollars\" with 40 from Fredric to Dan and a call to \"transfer_money\" with 500 from Fredric to Ali\n+\n+    Scenario: Tool caller use the more suitable tool for transfer when three overlap indirectly \n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And the tool \"transfer_dollars\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_dollars\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a tool relationship whereby \"transfer_dollars\" overlaps with \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels and to my friend Dan $40 and to my friend Ali 500 Dinar? my name is Fredric\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 3 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 from Fredric to Alisse and a call to \"transfer_dollars\" with 40 from Fredric to Dan and a call to \"transfer_money\" with 500 from Fredric to Ali\n+\n+    Scenario: Tool caller user the more suitable tool for searching when two overlap (1)\n+        Given a guideline \"do_search\" to retrieve relevant products that match the asked attributes when customer is interested in products with specific attributes\n+        And the tool \"search_products\"\n+        And the tool \"search_electronic_products\"\n+        And an association between \"do_search\" and \"search_products\"\n+        And an association between \"do_search\" and \"search_electronic_products\"\n+        And a tool relationship whereby \"search_electronic_products\" overlaps with \"search_products\"\n+        And a customer message, \"Hey, Do you have trousers that costs no more than $5 for men?\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 1 tool call(s)\n+        And the tool calls event contains a call to \"search_products\" with trousers as keyword and max price of 5  \n+\n+    Scenario: Tool caller user the more suitable tool for searching when two overlap (2)\n+        Given a guideline \"do_search\" to retrieve relevant products that match the asked attributes when customer is interested in products with specific attributes\n+        And the tool \"search_products\"\n+        And the tool \"search_electronic_products\"\n+        And an association between \"do_search\" and \"search_products\"\n+        And an association between \"do_search\" and \"search_electronic_products\"\n+        And a tool relationship whereby \"search_electronic_products\" overlaps with \"search_products\"\n+        And a customer message, \"Hey, Do you have laptops that costs no more than $5?\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 1 tool call(s)\n+        And the tool calls event contains a call to \"search_electronic_products\" with laptop as keyword and max price of 5 \n+\n+    Scenario: The agent correctly chooses to call the right tool",
    "repo_full_name": "emcie-co/parlant",
    "discussion_comments": [
      {
        "comment_id": "2072609577",
        "repo_full_name": "emcie-co/parlant",
        "pr_number": 360,
        "pr_file": "tests/core/stable/engines/alpha/features/baseline/tools.feature",
        "discussion_id": "2072609577",
        "commented_code": "@@ -574,3 +574,193 @@ Feature: Tools\n         And the tool calls event contains a call to \"local:search_electronic_products\" with Dell vendor and laptop keyword\n         And the tool calls event contains a call to \"local:search_electronic_products\" with Samsung vendor and SSD keyword\n \n+    Scenario: Tool caller chooses the right tool for scheduling when three are overlapping\n+        Given a customer named \"Hailey\"\n+        And an empty session with \"Hailey\"\n+        And a guideline \"to_schedule_appointment\" to schedule an appointment with a doctor when user asks to make an appointment\n+        And a guideline \"to_reschedule_appointment\" to rescedule existing appointment when user had an appointment and they want to change its time\n+        And a guideline \"to_schedule_meeting\" to schedule a meeting when customer asks to meet with someone\n+        And the tool \"schedule_appointment\"\n+        And an association between \"to_schedule_appointment\" and \"schedule_appointment\"\n+        And the tool \"reschedule_appointment\"\n+        And an association between \"to_reschedule_appointment\" and \"reschedule_appointment\"\n+        And the tool \"schedule_meeting\"\n+        And an association between \"to_schedule_meeting\" and \"schedule_meeting\"\n+        And a tool relationship whereby \"reschedule_appointment\" overlaps with \"schedule_appointment\"\n+        And a tool relationship whereby \"schedule_meeting\" overlaps with \"schedule_appointment\"\n+        And a context variable \"Current Date\" set to \"April 10th, 2025\" for \"Hailey\"\n+        And a customer message, \"Hi I want to make an appointment with Dr Sara Goodman tommorow at 19:00. Can you help me with that?\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 1 tool call(s)\n+        And the tool calls event contains a call to \"local:schedule_appointment\" to Hailey with Dr sara goodman at 11-04-2025 19:00\n+\n+    Scenario: Tool caller use both tools for scheduling appointment correctly when they overlap \n+        Given a customer named \"Hailey\"\n+        And an empty session with \"Hailey\"\n+        And a guideline \"to_schedule_appointment\" to schedule an appointment with a doctor when user asks to make an appointment\n+        And a guideline \"to_reschedule_appointment\" to rescedule existing appointment when user had an appointment and they want to change its time\n+        And the tool \"schedule_appointment\"\n+        And an association between \"to_schedule_appointment\" and \"schedule_appointment\"\n+        And the tool \"reschedule_appointment\"\n+        And an association between \"to_reschedule_appointment\" and \"reschedule_appointment\"\n+        And a tool relationship whereby \"reschedule_appointment\" overlaps with \"schedule_appointment\"\n+        And a context variable \"Current Date\" set to \"April 10th, 2025\" for \"Hailey\"\n+        And a customer message, \"Hi, I\u2019d like to schedule an appointment for tommorow at 18:00 with Dr. Gabi, please. Also, I have an appointment with Dr. Michael. Could you please reschedule with Dr. Michael for tommorow at 3:00 PM? Thank you!\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 2 tool call(s)\n+        And the tool calls event contains a call to \"local:reschedule_appointment\" to Hailey with Dr. Michael at 11-04-2025 15:00 and contains a call to \"local:schedule_appointment\" to Hailey with Dr. Gabi at 11-04-2025 18:00\n+\n+    Scenario: Drinks and toppings tools called from same guideline\n+        Given a guideline \"sell_pizza\" to sell pizza when interacting with customers\n+        And a guideline \"check_drinks_or_toppings_in_stock\" to check for drinks or toppings in stock when the customer specifies toppings or drinks\n+        And the tool \"get_available_drinks\"\n+        And the tool \"get_available_toppings\"\n+        And an association between \"check_drinks_or_toppings_in_stock\" and \"get_available_drinks\"\n+        And an association between \"check_drinks_or_toppings_in_stock\" and \"get_available_toppings\"\n+        And a customer message, \"Hey, can I order a large pepperoni pizza with Sprite?\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 2 tool call(s)\n+        And the tool calls event contains Sprite and Coca Cola under \"get_available_drinks\"\n+        And the tool calls event contains Pepperoni, Mushrooms, and Olives under \"get_available_toppings\"\n+    \n+    Scenario: Tool caller use the more suitable tool for transfer when two overlap\n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels? my name is Fredric\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 1 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 as amount from Fredric to Alisse\n+\n+    Scenario: Tool caller want to use the more suitable tool for transfer when two overlap and there are missing parameters (1)\n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels?\"\n+        When processing is triggered\n+        Then no tool calls event is emitted\n+\n+    Scenario: Tool caller want to use the more suitable tool for transfer when two overlap and there are missing parameters (2)\n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to $200?\"\n+        When processing is triggered\n+        Then no tool calls event is emitted\n+\n+    Scenario: Tool caller use both tools for the right transfer when two overlap \n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And a guideline to choose the more specific coin when customer asks to transfer money\n+        And the tool \"transfer_money\"\n+        And the tool \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels and to my friend Bob $300? my name is Fredric\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 2 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 from Fredric to Alisse and a call to \"transfer_money\" with 300 from Fredric to Bob and no call to \"transfer_money\" with 200\n+\n+    Scenario: Tool caller use tools multiple times for the right transfer when two overlap \n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And a guideline to choose the more specific coin when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels and to my friend Bob $300 and also 100 shekels to Bob? my name is Fredric\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 3 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 from Fredric to Alisse a call to \"transfer_shekels\" with 100 from Fredric to Bob and a call to \"transfer_money\" with 300 from Fredric to Bob and no call to \"transfer_money\" with 200\n+\n+    Scenario: Tool caller use the more suitable tool for transfer when three overlap directly \n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And the tool \"transfer_dollars\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_dollars\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a tool relationship whereby \"transfer_dollars\" overlaps with \"transfer_money\"\n+        And a tool relationship whereby \"transfer_dollars\" overlaps with \"transfer_shekels\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels and to my friend Dan $40 and to my friend Ali 500 Dinar? my name is Fredric\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 3 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 from Fredric to Alisse and a call to \"transfer_dollars\" with 40 from Fredric to Dan and a call to \"transfer_money\" with 500 from Fredric to Ali\n+\n+    Scenario: Tool caller use the more suitable tool for transfer when three overlap indirectly \n+        Given a guideline \"do_transcation\" to transfer money for the customer when customer asks to transfer money\n+        And the tool \"transfer_shekels\"\n+        And the tool \"transfer_money\"\n+        And the tool \"transfer_dollars\"\n+        And an association between \"do_transcation\" and \"transfer_shekels\"\n+        And an association between \"do_transcation\" and \"transfer_money\"\n+        And an association between \"do_transcation\" and \"transfer_dollars\"\n+        And a tool relationship whereby \"transfer_shekels\" overlaps with \"transfer_money\"\n+        And a tool relationship whereby \"transfer_dollars\" overlaps with \"transfer_money\"\n+        And a customer message, \"Hey, can transfer to my friend Alisse 200 shekels and to my friend Dan $40 and to my friend Ali 500 Dinar? my name is Fredric\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 3 tool call(s)\n+        And the tool calls event contains a call to \"transfer_shekels\" with 200 from Fredric to Alisse and a call to \"transfer_dollars\" with 40 from Fredric to Dan and a call to \"transfer_money\" with 500 from Fredric to Ali\n+\n+    Scenario: Tool caller user the more suitable tool for searching when two overlap (1)\n+        Given a guideline \"do_search\" to retrieve relevant products that match the asked attributes when customer is interested in products with specific attributes\n+        And the tool \"search_products\"\n+        And the tool \"search_electronic_products\"\n+        And an association between \"do_search\" and \"search_products\"\n+        And an association between \"do_search\" and \"search_electronic_products\"\n+        And a tool relationship whereby \"search_electronic_products\" overlaps with \"search_products\"\n+        And a customer message, \"Hey, Do you have trousers that costs no more than $5 for men?\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 1 tool call(s)\n+        And the tool calls event contains a call to \"search_products\" with trousers as keyword and max price of 5  \n+\n+    Scenario: Tool caller user the more suitable tool for searching when two overlap (2)\n+        Given a guideline \"do_search\" to retrieve relevant products that match the asked attributes when customer is interested in products with specific attributes\n+        And the tool \"search_products\"\n+        And the tool \"search_electronic_products\"\n+        And an association between \"do_search\" and \"search_products\"\n+        And an association between \"do_search\" and \"search_electronic_products\"\n+        And a tool relationship whereby \"search_electronic_products\" overlaps with \"search_products\"\n+        And a customer message, \"Hey, Do you have laptops that costs no more than $5?\"\n+        When processing is triggered\n+        Then a single tool calls event is emitted\n+        And the tool calls event contains 1 tool call(s)\n+        And the tool calls event contains a call to \"search_electronic_products\" with laptop as keyword and max price of 5 \n+\n+    Scenario: The agent correctly chooses to call the right tool",
        "comment_created_at": "2025-05-04T12:48:48+00:00",
        "comment_author": "MCBarKar",
        "comment_body": "Since we added more tests in this area, I think it'd be good to change the name of this one to something more specific, like \"The agent correctly chooses to call the right overlapping tool based on glossary\"",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1680858004",
    "pr_number": 29,
    "pr_file": "server/tests/features/engines/alpha/message_agent_with_rules.feature",
    "created_at": "2024-07-17T11:01:55+00:00",
    "commented_code": "When processing is triggered\n         Then a single message event is produced\n         And the message contains an offering of a Pepsi\n+\n+    \n+    Scenario: The agent sells pizza because of his defined identity \n+        Given the alpha engine\n+        And an agent with identity of selling pizza\n+        And a session with a single user message",
    "repo_full_name": "emcie-co/parlant",
    "discussion_comments": [
      {
        "comment_id": "1680858004",
        "repo_full_name": "emcie-co/parlant",
        "pr_number": 29,
        "pr_file": "server/tests/features/engines/alpha/message_agent_with_rules.feature",
        "discussion_id": "1680858004",
        "commented_code": "@@ -26,3 +26,13 @@ Feature: Alpha Engine\n         When processing is triggered\n         Then a single message event is produced\n         And the message contains an offering of a Pepsi\n+\n+    \n+    Scenario: The agent sells pizza because of his defined identity \n+        Given the alpha engine\n+        And an agent with identity of selling pizza\n+        And a session with a single user message",
        "comment_created_at": "2024-07-17T11:01:55+00:00",
        "comment_author": "kichanyurd",
        "comment_body": "This step \"with a single user message\" isn't well defined, as it's unclear what the message is, yet you still make assumptions on what the agent should do in response. Better to say, \"And a user message, '...'\" as is already done in other tests.",
        "pr_file_module": null
      }
    ]
  }
]