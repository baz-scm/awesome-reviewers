[
  {
    "discussion_id": "967858573",
    "pr_number": 6450,
    "pr_file": ".pre-commit-hooks.yaml",
    "created_at": "2022-09-11T17:01:26+00:00",
    "commented_code": "description: run poetry check to validate config\n   entry: poetry check\n   language: python\n-  language_version: python3\n   pass_filenames: false\n-  files: ^pyproject.toml$\n+  files: ^pyproject\\.toml$\n \n - id: poetry-lock\n   name: poetry-lock\n   description: run poetry lock to update lock file\n   entry: poetry lock\n   language: python\n-  language_version: python3\n   pass_filenames: false\n+  files: ^pyproject\\.toml|poetry\\.lock$\n+\n+- id: poetry-lock-check\n+  name: poetry-lock-check\n+  description: run poetry lock to check lock file is up-to-date with pyproject.toml",
    "repo_full_name": "python-poetry/poetry",
    "discussion_comments": [
      {
        "comment_id": "967858573",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 6450,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "967858573",
        "commented_code": "@@ -3,17 +3,24 @@\n   description: run poetry check to validate config\n   entry: poetry check\n   language: python\n-  language_version: python3\n   pass_filenames: false\n-  files: ^pyproject.toml$\n+  files: ^pyproject\\.toml$\n \n - id: poetry-lock\n   name: poetry-lock\n   description: run poetry lock to update lock file\n   entry: poetry lock\n   language: python\n-  language_version: python3\n   pass_filenames: false\n+  files: ^pyproject\\.toml|poetry\\.lock$\n+\n+- id: poetry-lock-check\n+  name: poetry-lock-check\n+  description: run poetry lock to check lock file is up-to-date with pyproject.toml",
        "comment_created_at": "2022-09-11T17:01:26+00:00",
        "comment_author": "mkniewallner",
        "comment_body": "```suggestion\r\n  description: check that poetry lock file is consistent with pyproject.toml\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1506827689",
    "pr_number": 9063,
    "pr_file": ".github/workflows/lock-threads.yml",
    "created_at": "2024-02-29T00:15:47+00:00",
    "commented_code": "+name: 'Lock Threads'\n+\n+on:\n+  schedule:\n+    - cron: '0 * * * *'",
    "repo_full_name": "python-poetry/poetry",
    "discussion_comments": [
      {
        "comment_id": "1506827689",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 9063,
        "pr_file": ".github/workflows/lock-threads.yml",
        "discussion_id": "1506827689",
        "commented_code": "@@ -0,0 +1,31 @@\n+name: 'Lock Threads'\n+\n+on:\n+  schedule:\n+    - cron: '0 * * * *'",
        "comment_created_at": "2024-02-29T00:15:47+00:00",
        "comment_author": "Secrus",
        "comment_body": "Please add a description for this setting (cron settings are not that easy to remember).",
        "pr_file_module": null
      },
      {
        "comment_id": "1506873098",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 9063,
        "pr_file": ".github/workflows/lock-threads.yml",
        "discussion_id": "1506827689",
        "commented_code": "@@ -0,0 +1,31 @@\n+name: 'Lock Threads'\n+\n+on:\n+  schedule:\n+    - cron: '0 * * * *'",
        "comment_created_at": "2024-02-29T01:16:44+00:00",
        "comment_author": "abn",
        "comment_body": "[crontab.guru](https://crontab.guru/#0_*_*_*_* ) is handy. :)\r\n\r\n> \u201cAt minute 0.\u201d ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1298062266",
    "pr_number": 8327,
    "pr_file": ".pre-commit-hooks.yaml",
    "created_at": "2023-08-18T06:37:26+00:00",
    "commented_code": "pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
    "repo_full_name": "python-poetry/poetry",
    "discussion_comments": [
      {
        "comment_id": "1298062266",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-18T06:37:26+00:00",
        "comment_author": "finswimmer",
        "comment_body": "The `--sync` argument should be moved to the [args](https://pre-commit.com/#hooks-args) key. Doing so users can decide to overwrite it.\r\n\r\nI wonder if want to use `--sync` by default at all. I personally would expect this, but having a look into responses in our issue tracker, there seems to be a lot of people who don't agree. @radoering, @Secrus, @neersighted Any opinions?",
        "pr_file_module": null
      },
      {
        "comment_id": "1298181619",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-18T08:41:32+00:00",
        "comment_author": "Secrus",
        "comment_body": "Yeah, I would remove it. Personally, I rarely use `--sync` option.",
        "pr_file_module": null
      },
      {
        "comment_id": "1298213336",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-18T09:12:46+00:00",
        "comment_author": "alsmnn",
        "comment_body": "So, if I remove some dependencies and invoke `poetry install`, does it result in the same virtual environment as invoking `poetry install --sync`? If so, what is the correct use case for the `--sync` option?",
        "pr_file_module": null
      },
      {
        "comment_id": "1298227344",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-18T09:26:07+00:00",
        "comment_author": "finswimmer",
        "comment_body": "`poetry install` without `--sync` will not remove any dependencies. This is useful for people who have installed additional things in the venv via `pip` and want to keep these things. Personally, I clearly prefer using `--sync`. :smiley: ",
        "pr_file_module": null
      },
      {
        "comment_id": "1298246770",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-18T09:43:17+00:00",
        "comment_author": "alsmnn",
        "comment_body": "I would like to put the `--sync` option into the args key, because I think it is the intended behaviour.\r\nIf I change branches and there is a different lock file, i want to have a clean slate.",
        "pr_file_module": null
      },
      {
        "comment_id": "1298311444",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-18T10:50:37+00:00",
        "comment_author": "radoering",
        "comment_body": "I always use `--sync` so that's fine for me. \ud83d\ude09\r\n\r\nWe could also add two hooks `poetry-install` (without sync) and `poetry-sync` (with sync). Maybe, we just add `poetry-sync` now and poetry-install later only if someone requests it?",
        "pr_file_module": null
      },
      {
        "comment_id": "1298316256",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-18T10:56:11+00:00",
        "comment_author": "finswimmer",
        "comment_body": "To be consistent with the existing pre-commit hooks, I think it would be a good idea to call this hook `poetry-install` (because it runs `poetry install`). One can add any argument they want  (in you use case `--sync`) to projects pre-commit config then. \r\n\r\nEdit: Oh, @radoering was a bit faster then me :sweat_smile: ",
        "pr_file_module": null
      },
      {
        "comment_id": "1298444431",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-18T13:19:39+00:00",
        "comment_author": "radoering",
        "comment_body": "That's fine with me, too. It has the benefit that it's more flexible and we only need one hook. \ud83e\udd37 ",
        "pr_file_module": null
      },
      {
        "comment_id": "1299900160",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1298062266",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-update\n+  name: poetry-update\n+  description: Update the Poetry dependencies if out of sync\n+  entry: poetry install --sync",
        "comment_created_at": "2023-08-21T10:04:20+00:00",
        "comment_author": "alsmnn",
        "comment_body": "So `poetry-install` it is!",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1305642051",
    "pr_number": 8327,
    "pr_file": ".pre-commit-hooks.yaml",
    "created_at": "2023-08-25T13:11:14+00:00",
    "commented_code": "pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-install\n+  name: poetry-install\n+  description: Synchronize the Poetry dependencies with the lock file if out of sync",
    "repo_full_name": "python-poetry/poetry",
    "discussion_comments": [
      {
        "comment_id": "1305642051",
        "repo_full_name": "python-poetry/poetry",
        "pr_number": 8327,
        "pr_file": ".pre-commit-hooks.yaml",
        "discussion_id": "1305642051",
        "commented_code": "@@ -22,3 +22,12 @@\n   pass_filenames: false\n   files: ^(.*/)?poetry\\.lock$\n   args: [\"-f\", \"requirements.txt\", \"-o\", \"requirements.txt\"]\n+\n+- id: poetry-install\n+  name: poetry-install\n+  description: Synchronize the Poetry dependencies with the lock file if out of sync",
        "comment_created_at": "2023-08-25T13:11:14+00:00",
        "comment_author": "radoering",
        "comment_body": "Another spot that reads more like `poetry install --sync`. Considering the descriptions of the other hooks, maybe:\r\n\r\n```suggestion\r\n  description: run poetry install to install dependencies from the lock file\r\n```",
        "pr_file_module": null
      }
    ]
  }
]