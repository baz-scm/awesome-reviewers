[
  {
    "discussion_id": "2250946612",
    "pr_number": 36086,
    "pr_file": "plugin-server/src/cdp/consumers/cdp-behavioural-events.consumer.ts",
    "created_at": "2025-08-04T09:35:56+00:00",
    "commented_code": "protocolOptions: {\n                     port: hub.CASSANDRA_PORT,\n                 },\n+                sslOptions: isCloud()\n+                    ? {\n+                          ca: fs.readFileSync(join(__dirname, '../cassandra/ca.crt')),",
    "repo_full_name": "PostHog/posthog",
    "discussion_comments": [
      {
        "comment_id": "2250946612",
        "repo_full_name": "PostHog/posthog",
        "pr_number": 36086,
        "pr_file": "plugin-server/src/cdp/consumers/cdp-behavioural-events.consumer.ts",
        "discussion_id": "2250946612",
        "commented_code": "@@ -84,12 +87,21 @@ export class CdpBehaviouralEventsConsumer extends CdpConsumerBase {\n                 protocolOptions: {\n                     port: hub.CASSANDRA_PORT,\n                 },\n+                sslOptions: isCloud()\n+                    ? {\n+                          ca: fs.readFileSync(join(__dirname, '../cassandra/ca.crt')),",
        "comment_created_at": "2025-08-04T09:35:56+00:00",
        "comment_author": "benjackwhite",
        "comment_body": "Is it possible to this via a base64 encoded env? Mounting files is a headache",
        "pr_file_module": null
      },
      {
        "comment_id": "2250947762",
        "repo_full_name": "PostHog/posthog",
        "pr_number": 36086,
        "pr_file": "plugin-server/src/cdp/consumers/cdp-behavioural-events.consumer.ts",
        "discussion_id": "2250946612",
        "commented_code": "@@ -84,12 +87,21 @@ export class CdpBehaviouralEventsConsumer extends CdpConsumerBase {\n                 protocolOptions: {\n                     port: hub.CASSANDRA_PORT,\n                 },\n+                sslOptions: isCloud()\n+                    ? {\n+                          ca: fs.readFileSync(join(__dirname, '../cassandra/ca.crt')),",
        "comment_created_at": "2025-08-04T09:36:24+00:00",
        "comment_author": "benjackwhite",
        "comment_body": "also much prefer not relying on \"isCloud\" but rather purely relying on config envs. Reason being that we might have something different in dev to prod",
        "pr_file_module": null
      },
      {
        "comment_id": "2251219210",
        "repo_full_name": "PostHog/posthog",
        "pr_number": 36086,
        "pr_file": "plugin-server/src/cdp/consumers/cdp-behavioural-events.consumer.ts",
        "discussion_id": "2250946612",
        "commented_code": "@@ -84,12 +87,21 @@ export class CdpBehaviouralEventsConsumer extends CdpConsumerBase {\n                 protocolOptions: {\n                     port: hub.CASSANDRA_PORT,\n                 },\n+                sslOptions: isCloud()\n+                    ? {\n+                          ca: fs.readFileSync(join(__dirname, '../cassandra/ca.crt')),",
        "comment_created_at": "2025-08-04T11:37:25+00:00",
        "comment_author": "meikelmosby",
        "comment_body": "@benjackwhite i asked the same but Michis answer was\r\n\r\n```\r\nas we don't issue those, I think it could make more sense to download it on startup\r\nmeans: if they change it, we always get the latest version\r\neither we just put it in the command section of the container or we have an init container downloading it\r\nrecommended is the latter\r\n```\r\n\r\nyeah can make the change with not relying on isCloud ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2247538006",
    "pr_number": 35926,
    "pr_file": "plugin-server/src/config/config.ts",
    "created_at": "2025-08-01T10:02:26+00:00",
    "commented_code": "PERSON_BATCH_WRITING_MAX_OPTIMISTIC_UPDATE_RETRIES: 5,\n         PERSON_BATCH_WRITING_OPTIMISTIC_UPDATE_RETRY_INTERVAL_MS: 50,\n         PERSON_UPDATE_CALCULATE_PROPERTIES_SIZE: 0,\n+        PERSON_PROPERTIES_SIZE_LIMIT: 1024 * 1024, // 1MB default",
    "repo_full_name": "PostHog/posthog",
    "discussion_comments": [
      {
        "comment_id": "2247538006",
        "repo_full_name": "PostHog/posthog",
        "pr_number": 35926,
        "pr_file": "plugin-server/src/config/config.ts",
        "discussion_id": "2247538006",
        "commented_code": "@@ -265,6 +265,7 @@ export function getDefaultConfig(): PluginsServerConfig {\n         PERSON_BATCH_WRITING_MAX_OPTIMISTIC_UPDATE_RETRIES: 5,\n         PERSON_BATCH_WRITING_OPTIMISTIC_UPDATE_RETRY_INTERVAL_MS: 50,\n         PERSON_UPDATE_CALCULATE_PROPERTIES_SIZE: 0,\n+        PERSON_PROPERTIES_SIZE_LIMIT: 1024 * 1024, // 1MB default",
        "comment_created_at": "2025-08-01T10:02:26+00:00",
        "comment_author": "pl",
        "comment_body": "nit: I was thinking maybe we should set it to 512KB default - we publish those updates to Kafka and I think the limit is 1MB, so it would be good to set the default to a value that won't breach it.",
        "pr_file_module": null
      },
      {
        "comment_id": "2258173746",
        "repo_full_name": "PostHog/posthog",
        "pr_number": 35926,
        "pr_file": "plugin-server/src/config/config.ts",
        "discussion_id": "2247538006",
        "commented_code": "@@ -265,6 +265,7 @@ export function getDefaultConfig(): PluginsServerConfig {\n         PERSON_BATCH_WRITING_MAX_OPTIMISTIC_UPDATE_RETRIES: 5,\n         PERSON_BATCH_WRITING_OPTIMISTIC_UPDATE_RETRY_INTERVAL_MS: 50,\n         PERSON_UPDATE_CALCULATE_PROPERTIES_SIZE: 0,\n+        PERSON_PROPERTIES_SIZE_LIMIT: 1024 * 1024, // 1MB default",
        "comment_created_at": "2025-08-06T20:08:51+00:00",
        "comment_author": "nickbest-ph",
        "comment_body": "yep, that soudns good to me.",
        "pr_file_module": null
      }
    ]
  }
]