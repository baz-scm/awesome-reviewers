[
  {
    "discussion_id": "2259951821",
    "pr_number": 36297,
    "pr_file": "plugin-server/src/cdp/utils.ts",
    "created_at": "2025-08-07T13:11:01+00:00",
    "commented_code": "}\n     }\n \n+    let properties = data.event.properties\n+\n+    if ('exception_props' in properties) {",
    "repo_full_name": "PostHog/posthog",
    "discussion_comments": [
      {
        "comment_id": "2260283082",
        "repo_full_name": "PostHog/posthog",
        "pr_number": 36297,
        "pr_file": "plugin-server/src/cdp/utils.ts",
        "discussion_id": "2259951821",
        "commented_code": "@@ -112,6 +112,13 @@ export function convertInternalEventToHogFunctionInvocationGlobals(\n         }\n     }\n \n+    let properties = data.event.properties\n+\n+    if ('exception_props' in properties) {",
        "comment_created_at": "2025-08-07T13:11:01+00:00",
        "comment_author": "benjackwhite",
        "comment_body": "Spread wont fail if it is undefined or null so thats rubbish, but probably good to at least check that its truthy.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2082100538",
    "pr_number": 32090,
    "pr_file": "plugin-server/src/worker/ingestion/event-pipeline/prepareEventStep.ts",
    "created_at": "2025-05-09T16:49:36+00:00",
    "commented_code": "uuid!, // it will throw if it's undefined,\n         processPerson\n     )\n+    if (event.now) {\n+        const capturedAtDateTime = DateTime.fromISO(event.now).toUTC()\n+        preIngestionEvent.capturedAt = capturedAtDateTime.isValid",
    "repo_full_name": "PostHog/posthog",
    "discussion_comments": [
      {
        "comment_id": "2082100538",
        "repo_full_name": "PostHog/posthog",
        "pr_number": 32090,
        "pr_file": "plugin-server/src/worker/ingestion/event-pipeline/prepareEventStep.ts",
        "discussion_id": "2082100538",
        "commented_code": "@@ -42,6 +43,12 @@ export async function prepareEventStep(\n         uuid!, // it will throw if it's undefined,\n         processPerson\n     )\n+    if (event.now) {\n+        const capturedAtDateTime = DateTime.fromISO(event.now).toUTC()\n+        preIngestionEvent.capturedAt = capturedAtDateTime.isValid",
        "comment_created_at": "2025-05-09T16:49:36+00:00",
        "comment_author": "nickbest-ph",
        "comment_body": "NOTE: event.now should always be set and be valid, but if it is not and this gets set to `undefined` based on my testing in local development we'll get `1970-01-01 00:00:00.000000` as the value in clickhouse.",
        "pr_file_module": null
      }
    ]
  }
]