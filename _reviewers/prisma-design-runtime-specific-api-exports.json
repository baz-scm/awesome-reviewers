[
  {
    "discussion_id": "2020733080",
    "pr_number": 26776,
    "pr_file": "packages/adapter-libsql/package.json",
    "created_at": "2025-03-31T09:51:31+00:00",
    "commented_code": "\"name\": \"@prisma/adapter-libsql\",\n   \"version\": \"0.0.0\",\n   \"description\": \"Prisma's driver adapter for libSQL and Turso\",\n-  \"main\": \"dist/index.js\",\n-  \"module\": \"dist/index.mjs\",\n-  \"types\": \"dist/index.d.ts\",\n+  \"main\": \"dist/index-node.js\",\n+  \"module\": \"dist/index-node.mjs\",\n+  \"types\": \"dist/index-node.d.ts\",\n   \"exports\": {\n     \".\": {\n       \"require\": {\n-        \"types\": \"./dist/index.d.ts\",\n-        \"default\": \"./dist/index.js\"\n+        \"types\": \"./dist/index-node.d.ts\",\n+        \"default\": \"./dist/index-node.js\"\n       },\n       \"import\": {\n-        \"types\": \"./dist/index.d.mts\",\n-        \"default\": \"./dist/index.mjs\"\n+        \"types\": \"./dist/index-node.d.mts\",\n+        \"default\": \"./dist/index-node.mjs\"\n+      }\n+    },\n+    \"./web\": {\n+      \"require\": {\n+        \"types\": \"./dist/index-web.d.ts\",\n+        \"default\": \"./dist/index-web.js\"\n+      },\n+      \"import\": {\n+        \"types\": \"./dist/index-web.d.mts\",\n+        \"default\": \"./dist/index-web.mjs\"\n       }",
    "repo_full_name": "prisma/prisma",
    "discussion_comments": [
      {
        "comment_id": "2020733080",
        "repo_full_name": "prisma/prisma",
        "pr_number": 26776,
        "pr_file": "packages/adapter-libsql/package.json",
        "discussion_id": "2020733080",
        "commented_code": "@@ -2,18 +2,28 @@\n   \"name\": \"@prisma/adapter-libsql\",\n   \"version\": \"0.0.0\",\n   \"description\": \"Prisma's driver adapter for libSQL and Turso\",\n-  \"main\": \"dist/index.js\",\n-  \"module\": \"dist/index.mjs\",\n-  \"types\": \"dist/index.d.ts\",\n+  \"main\": \"dist/index-node.js\",\n+  \"module\": \"dist/index-node.mjs\",\n+  \"types\": \"dist/index-node.d.ts\",\n   \"exports\": {\n     \".\": {\n       \"require\": {\n-        \"types\": \"./dist/index.d.ts\",\n-        \"default\": \"./dist/index.js\"\n+        \"types\": \"./dist/index-node.d.ts\",\n+        \"default\": \"./dist/index-node.js\"\n       },\n       \"import\": {\n-        \"types\": \"./dist/index.d.mts\",\n-        \"default\": \"./dist/index.mjs\"\n+        \"types\": \"./dist/index-node.d.mts\",\n+        \"default\": \"./dist/index-node.mjs\"\n+      }\n+    },\n+    \"./web\": {\n+      \"require\": {\n+        \"types\": \"./dist/index-web.d.ts\",\n+        \"default\": \"./dist/index-web.js\"\n+      },\n+      \"import\": {\n+        \"types\": \"./dist/index-web.d.mts\",\n+        \"default\": \"./dist/index-web.mjs\"\n       }",
        "comment_created_at": "2025-03-31T09:51:31+00:00",
        "comment_author": "jkomyno",
        "comment_body": "Could we use explicit JS runtime keys like shown in [here](https://jkomyno-armada-js-2024.vercel.app/25), and pair this with an integration release + ecosystem test to see whether the correct import is selected in runtimes like Cloudflare Workers and Vercel Edge? We can have a manual test right now, and an ecosystem test next sprint, but we should check this before merging it.",
        "pr_file_module": null
      },
      {
        "comment_id": "2021345199",
        "repo_full_name": "prisma/prisma",
        "pr_number": 26776,
        "pr_file": "packages/adapter-libsql/package.json",
        "discussion_id": "2020733080",
        "commented_code": "@@ -2,18 +2,28 @@\n   \"name\": \"@prisma/adapter-libsql\",\n   \"version\": \"0.0.0\",\n   \"description\": \"Prisma's driver adapter for libSQL and Turso\",\n-  \"main\": \"dist/index.js\",\n-  \"module\": \"dist/index.mjs\",\n-  \"types\": \"dist/index.d.ts\",\n+  \"main\": \"dist/index-node.js\",\n+  \"module\": \"dist/index-node.mjs\",\n+  \"types\": \"dist/index-node.d.ts\",\n   \"exports\": {\n     \".\": {\n       \"require\": {\n-        \"types\": \"./dist/index.d.ts\",\n-        \"default\": \"./dist/index.js\"\n+        \"types\": \"./dist/index-node.d.ts\",\n+        \"default\": \"./dist/index-node.js\"\n       },\n       \"import\": {\n-        \"types\": \"./dist/index.d.mts\",\n-        \"default\": \"./dist/index.mjs\"\n+        \"types\": \"./dist/index-node.d.mts\",\n+        \"default\": \"./dist/index-node.mjs\"\n+      }\n+    },\n+    \"./web\": {\n+      \"require\": {\n+        \"types\": \"./dist/index-web.d.ts\",\n+        \"default\": \"./dist/index-web.js\"\n+      },\n+      \"import\": {\n+        \"types\": \"./dist/index-web.d.mts\",\n+        \"default\": \"./dist/index-web.mjs\"\n       }",
        "comment_created_at": "2025-03-31T16:13:43+00:00",
        "comment_author": "jacek-prisma",
        "comment_body": "Do you mean it should automatically pick the bundle based on runtime? I don't know if that's better because web and node implementations aren't interchangeable, so the `web` implementation is basically an opt-in.",
        "pr_file_module": null
      },
      {
        "comment_id": "2021348544",
        "repo_full_name": "prisma/prisma",
        "pr_number": 26776,
        "pr_file": "packages/adapter-libsql/package.json",
        "discussion_id": "2020733080",
        "commented_code": "@@ -2,18 +2,28 @@\n   \"name\": \"@prisma/adapter-libsql\",\n   \"version\": \"0.0.0\",\n   \"description\": \"Prisma's driver adapter for libSQL and Turso\",\n-  \"main\": \"dist/index.js\",\n-  \"module\": \"dist/index.mjs\",\n-  \"types\": \"dist/index.d.ts\",\n+  \"main\": \"dist/index-node.js\",\n+  \"module\": \"dist/index-node.mjs\",\n+  \"types\": \"dist/index-node.d.ts\",\n   \"exports\": {\n     \".\": {\n       \"require\": {\n-        \"types\": \"./dist/index.d.ts\",\n-        \"default\": \"./dist/index.js\"\n+        \"types\": \"./dist/index-node.d.ts\",\n+        \"default\": \"./dist/index-node.js\"\n       },\n       \"import\": {\n-        \"types\": \"./dist/index.d.mts\",\n-        \"default\": \"./dist/index.mjs\"\n+        \"types\": \"./dist/index-node.d.mts\",\n+        \"default\": \"./dist/index-node.mjs\"\n+      }\n+    },\n+    \"./web\": {\n+      \"require\": {\n+        \"types\": \"./dist/index-web.d.ts\",\n+        \"default\": \"./dist/index-web.js\"\n+      },\n+      \"import\": {\n+        \"types\": \"./dist/index-web.d.mts\",\n+        \"default\": \"./dist/index-web.mjs\"\n       }",
        "comment_created_at": "2025-03-31T16:16:13+00:00",
        "comment_author": "jacek-prisma",
        "comment_body": "As for a test, I agree it makes sense to have an ecosystem test (and we'll have to update the turso lambda test anyway to get it to pass), while not a proper test the bundle size script is run against the web adapter in this PR: https://github.com/prisma/prisma/pull/26776/files#diff-502f8d135ffba468d44ae1553239a364576436fda5ff4108067c6230d549fd04L5, which confirms that the export works",
        "pr_file_module": null
      },
      {
        "comment_id": "2024499658",
        "repo_full_name": "prisma/prisma",
        "pr_number": 26776,
        "pr_file": "packages/adapter-libsql/package.json",
        "discussion_id": "2020733080",
        "commented_code": "@@ -2,18 +2,28 @@\n   \"name\": \"@prisma/adapter-libsql\",\n   \"version\": \"0.0.0\",\n   \"description\": \"Prisma's driver adapter for libSQL and Turso\",\n-  \"main\": \"dist/index.js\",\n-  \"module\": \"dist/index.mjs\",\n-  \"types\": \"dist/index.d.ts\",\n+  \"main\": \"dist/index-node.js\",\n+  \"module\": \"dist/index-node.mjs\",\n+  \"types\": \"dist/index-node.d.ts\",\n   \"exports\": {\n     \".\": {\n       \"require\": {\n-        \"types\": \"./dist/index.d.ts\",\n-        \"default\": \"./dist/index.js\"\n+        \"types\": \"./dist/index-node.d.ts\",\n+        \"default\": \"./dist/index-node.js\"\n       },\n       \"import\": {\n-        \"types\": \"./dist/index.d.mts\",\n-        \"default\": \"./dist/index.mjs\"\n+        \"types\": \"./dist/index-node.d.mts\",\n+        \"default\": \"./dist/index-node.mjs\"\n+      }\n+    },\n+    \"./web\": {\n+      \"require\": {\n+        \"types\": \"./dist/index-web.d.ts\",\n+        \"default\": \"./dist/index-web.js\"\n+      },\n+      \"import\": {\n+        \"types\": \"./dist/index-web.d.mts\",\n+        \"default\": \"./dist/index-web.mjs\"\n       }",
        "comment_created_at": "2025-04-02T09:55:19+00:00",
        "comment_author": "jkomyno",
        "comment_body": "Note: my comment above is not blocking. As discussed irl, let's create a follow-up Linear ticket for creating ecosystem-tests to assert how these exports work in Cloudflare Workers and Vercel Edge. It's possible that the Node.js version actually works in these edge environments, as long as a `node_compat` attribute (or similar) is set.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2005586696",
    "pr_number": 26692,
    "pr_file": "packages/adapter-d1/package.json",
    "created_at": "2025-03-20T12:58:23+00:00",
    "commented_code": "],\n   \"keywords\": [],\n   \"contributors\": [\n+    \"Alberto Schiabel <schiabel@prisma.io>\",\n     \"Sophie Atkins <atkins@prisma.io>\",\n     \"Jo\u00ebl Galeran <galeran@prisma.io>\"\n   ],\n   \"license\": \"Apache-2.0\",\n   \"sideEffects\": false,\n   \"dependencies\": {\n-    \"@prisma/driver-adapter-utils\": \"workspace:*\",\n     \"@cloudflare/workers-types\": \"4.20250214.0\",\n+    \"@prisma/driver-adapter-utils\": \"workspace:*\",\n+    \"ky\": \"1.7.5\",",
    "repo_full_name": "prisma/prisma",
    "discussion_comments": [
      {
        "comment_id": "2005586696",
        "repo_full_name": "prisma/prisma",
        "pr_number": 26692,
        "pr_file": "packages/adapter-d1/package.json",
        "discussion_id": "2005586696",
        "commented_code": "@@ -32,16 +32,16 @@\n   ],\n   \"keywords\": [],\n   \"contributors\": [\n+    \"Alberto Schiabel <schiabel@prisma.io>\",\n     \"Sophie Atkins <atkins@prisma.io>\",\n     \"Jo\u00ebl Galeran <galeran@prisma.io>\"\n   ],\n   \"license\": \"Apache-2.0\",\n   \"sideEffects\": false,\n   \"dependencies\": {\n-    \"@prisma/driver-adapter-utils\": \"workspace:*\",\n     \"@cloudflare/workers-types\": \"4.20250214.0\",\n+    \"@prisma/driver-adapter-utils\": \"workspace:*\",\n+    \"ky\": \"1.7.5\",",
        "comment_created_at": "2025-03-20T12:58:23+00:00",
        "comment_author": "FGoessler",
        "comment_body": "\u2753 Any particular reason why we use `ky` here? \ud83e\udd14 We are targeting nodejs18+ and bun, deno and browsers all should support fetch by now.",
        "pr_file_module": null
      },
      {
        "comment_id": "2005758351",
        "repo_full_name": "prisma/prisma",
        "pr_number": 26692,
        "pr_file": "packages/adapter-d1/package.json",
        "discussion_id": "2005586696",
        "commented_code": "@@ -32,16 +32,16 @@\n   ],\n   \"keywords\": [],\n   \"contributors\": [\n+    \"Alberto Schiabel <schiabel@prisma.io>\",\n     \"Sophie Atkins <atkins@prisma.io>\",\n     \"Jo\u00ebl Galeran <galeran@prisma.io>\"\n   ],\n   \"license\": \"Apache-2.0\",\n   \"sideEffects\": false,\n   \"dependencies\": {\n-    \"@prisma/driver-adapter-utils\": \"workspace:*\",\n     \"@cloudflare/workers-types\": \"4.20250214.0\",\n+    \"@prisma/driver-adapter-utils\": \"workspace:*\",\n+    \"ky\": \"1.7.5\",",
        "comment_created_at": "2025-03-20T14:20:44+00:00",
        "comment_author": "jkomyno",
        "comment_body": "`ky` natively uses `fetch` under the hood, but it provides useful abstractions that make dealing with `POST`s more ergonomic. It's a very thin layer",
        "pr_file_module": null
      }
    ]
  }
]