[
  {
    "discussion_id": "1895983442",
    "pr_number": 15712,
    "pr_file": "Makefile.common",
    "created_at": "2024-12-23T17:36:18+00:00",
    "commented_code": ".PHONY: common-build\n common-build: promu\n \t@echo \">> building binaries\"\n-\t$(PROMU) build --prefix $(PREFIX) $(PROMU_BINARIES)\n+\t@$(PROMU) build --prefix $(PREFIX) $(PROMU_BINARIES) && \\\n+\t\tif [ \"$(GOHOSTOS)\" = \"darwin\" ] && command -v codesign > /dev/null 2>&1; then \\\n+\t\t\tcodesign --sign - --force --preserve-metadata=entitlements,requirements,flags,runtime $(PREFIX) >/dev/null 2>&1; \\",
    "repo_full_name": "prometheus/prometheus",
    "discussion_comments": [
      {
        "comment_id": "1895983442",
        "repo_full_name": "prometheus/prometheus",
        "pr_number": 15712,
        "pr_file": "Makefile.common",
        "discussion_id": "1895983442",
        "commented_code": "@@ -201,7 +201,10 @@ common-unused:\n .PHONY: common-build\n common-build: promu\n \t@echo \">> building binaries\"\n-\t$(PROMU) build --prefix $(PREFIX) $(PROMU_BINARIES)\n+\t@$(PROMU) build --prefix $(PREFIX) $(PROMU_BINARIES) && \\\n+\t\tif [ \"$(GOHOSTOS)\" = \"darwin\" ] && command -v codesign > /dev/null 2>&1; then \\\n+\t\t\tcodesign --sign - --force --preserve-metadata=entitlements,requirements,flags,runtime $(PREFIX) >/dev/null 2>&1; \\",
        "comment_created_at": "2024-12-23T17:36:18+00:00",
        "comment_author": "rexagod",
        "comment_body": "`--force` is used to overwrite any pre-existing signatures on the binary that may cause compatibility issues when attempting to run on `darwin`. PLMK if this should be dropped instead and I'll do so.",
        "pr_file_module": null
      }
    ]
  }
]