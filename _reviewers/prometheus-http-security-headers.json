[
  {
    "discussion_id": "2170707371",
    "pr_number": 16778,
    "pr_file": "CHANGELOG.md",
    "created_at": "2025-06-27T03:57:18+00:00",
    "commented_code": "## main / unreleased\n \n-* [FEATURE] OTLP receiver: Support promoting OTel scope name/version/schema URL/attributes as metric labels, enable via configuration parameter `otlp.promote_scope_metadata`. #16730 #16760\n-\n+## 3.5.0-rc.0 / 2025-06-25\n+\n+* [FEATURE] PromQL: Add experimental type and unit metadata labels, behind feature flag `type-and-unit-labels`. #16228 #16632 #16718 #16743\n+* [FEATURE] PromQL: Add `ts_of_(min|max|last)_over_time`, behind feature flag `experimental-promql-functions`. #16722 #16733\n+* [FEATURE] Scraping: Add global option `always_scrape_classic_histograms` to scrape a classic histogram even if it is also exposed as native. #16452\n+* [FEATURE] OTLP: Support promoting OTel scope name/version/schema URL/attributes as metric labels, via `otlp.promote_scope_metadata`. #16730 #16760\n+* [FEATURE] OTLP: New config options `promote_all_resource_attributes` and `ignore_resource_attributes`. #16426\n+* [FEATURE] Discovery: New service discovery for STACKIT Cloud. #16401\n+\n+* [ENHANCEMENT] Hezner SD: Add `label_selector` to filter servers. #16512\n+* [ENHANCEMENT] PromQL: support non-constant parameter in aggregations like `quantile` and `topk`. #16404\n+* [ENHANCEMENT] UI: Better total target count display when using `keep_dropped_targets` option. #16604\n+* [ENHANCEMENT] UI: Add simple filtering on the `/rules` page. #16605\n+* [ENHANCEMENT] UI: Display query stats in hover tooltip over table query tab. #16723\n+* [ENHANCEMENT] UI: Clear search field on `/targets` page. #16567\n+* [ENHANCEMENT] Rules: Check that rules parse without error earlier at startup. #16601\n+* [ENHANCEMENT] Promtool: Optional fuzzy float64 comparison in rules unittests. #16395\n+\n+* [PERF] PromQL: Reuse `histogramStatsIterator` where possible. #16686\n+* [PERF] PromQL: Reuse storage for custom bucket values for native histograms. #16565\n+* [PERF] UI: Optimize memoization and search debouncing on `/targets` page. #16589\n+* [PERF] UI: Fix full-page re-rendering when opening status nav menu. #16590\n+* [PERF] Kubernetes SD: use service cache.Indexer to achieve better performance. #16365\n+* [PERF] TSDB: Optionally use Direct IO for chunks writing. #15365\n+* [PERF] TSDB: When fetching label values, stop work earlier if the limit is reached. #16158\n+* [PERF] Labels: Simpler/faster stringlabels encoding. #16069\n+\n+* [BUGFIX] Top-level: Update GOGC before loading TSDB. #16491\n+* [BUGFIX] Config: Respect GOGC environment variable if no \"runtime\" block exists. #16558\n+* [BUGFIX] PromQL: Fix native histogram last_over_time. #16744\n+* [BUGFIX] PromQL: Error reports wrong position for aggregation wrapped in ParenExpr #16041 #16754\n+* [BUGFIX] PromQL: Don't emit a value from `histogram_fraction` or `histogram_quantile` if classic and native histograms are present at the same timestamp. #16552\n+* [BUGFIX] PromQL: Incorrect rounding of `[1001ms]` to `[1s]` and similar. #16478\n+* [BUGFIX] PromQL: Fix inconsistent / sometimes negative `histogram_count` and `histogram_sum`. #16682\n+* [BUGFIX] PromQL: Fix unary operator precedence in duration expressions. #16713\n+* [BUGFIX] UI: Add query warnings and info to graph view. #16753 #16759\n+* [BUGFIX] UI: Fix `/alerts` accordian theme colors. #16043\n+* [BUGFIX] API: Add http Vary: Origin header to responses to avoid cache poisoning. #16008",
    "repo_full_name": "prometheus/prometheus",
    "discussion_comments": [
      {
        "comment_id": "2170707371",
        "repo_full_name": "prometheus/prometheus",
        "pr_number": 16778,
        "pr_file": "CHANGELOG.md",
        "discussion_id": "2170707371",
        "commented_code": "@@ -2,8 +2,56 @@\n \n ## main / unreleased\n \n-* [FEATURE] OTLP receiver: Support promoting OTel scope name/version/schema URL/attributes as metric labels, enable via configuration parameter `otlp.promote_scope_metadata`. #16730 #16760\n-\n+## 3.5.0-rc.0 / 2025-06-25\n+\n+* [FEATURE] PromQL: Add experimental type and unit metadata labels, behind feature flag `type-and-unit-labels`. #16228 #16632 #16718 #16743\n+* [FEATURE] PromQL: Add `ts_of_(min|max|last)_over_time`, behind feature flag `experimental-promql-functions`. #16722 #16733\n+* [FEATURE] Scraping: Add global option `always_scrape_classic_histograms` to scrape a classic histogram even if it is also exposed as native. #16452\n+* [FEATURE] OTLP: Support promoting OTel scope name/version/schema URL/attributes as metric labels, via `otlp.promote_scope_metadata`. #16730 #16760\n+* [FEATURE] OTLP: New config options `promote_all_resource_attributes` and `ignore_resource_attributes`. #16426\n+* [FEATURE] Discovery: New service discovery for STACKIT Cloud. #16401\n+\n+* [ENHANCEMENT] Hezner SD: Add `label_selector` to filter servers. #16512\n+* [ENHANCEMENT] PromQL: support non-constant parameter in aggregations like `quantile` and `topk`. #16404\n+* [ENHANCEMENT] UI: Better total target count display when using `keep_dropped_targets` option. #16604\n+* [ENHANCEMENT] UI: Add simple filtering on the `/rules` page. #16605\n+* [ENHANCEMENT] UI: Display query stats in hover tooltip over table query tab. #16723\n+* [ENHANCEMENT] UI: Clear search field on `/targets` page. #16567\n+* [ENHANCEMENT] Rules: Check that rules parse without error earlier at startup. #16601\n+* [ENHANCEMENT] Promtool: Optional fuzzy float64 comparison in rules unittests. #16395\n+\n+* [PERF] PromQL: Reuse `histogramStatsIterator` where possible. #16686\n+* [PERF] PromQL: Reuse storage for custom bucket values for native histograms. #16565\n+* [PERF] UI: Optimize memoization and search debouncing on `/targets` page. #16589\n+* [PERF] UI: Fix full-page re-rendering when opening status nav menu. #16590\n+* [PERF] Kubernetes SD: use service cache.Indexer to achieve better performance. #16365\n+* [PERF] TSDB: Optionally use Direct IO for chunks writing. #15365\n+* [PERF] TSDB: When fetching label values, stop work earlier if the limit is reached. #16158\n+* [PERF] Labels: Simpler/faster stringlabels encoding. #16069\n+\n+* [BUGFIX] Top-level: Update GOGC before loading TSDB. #16491\n+* [BUGFIX] Config: Respect GOGC environment variable if no \"runtime\" block exists. #16558\n+* [BUGFIX] PromQL: Fix native histogram last_over_time. #16744\n+* [BUGFIX] PromQL: Error reports wrong position for aggregation wrapped in ParenExpr #16041 #16754\n+* [BUGFIX] PromQL: Don't emit a value from `histogram_fraction` or `histogram_quantile` if classic and native histograms are present at the same timestamp. #16552\n+* [BUGFIX] PromQL: Incorrect rounding of `[1001ms]` to `[1s]` and similar. #16478\n+* [BUGFIX] PromQL: Fix inconsistent / sometimes negative `histogram_count` and `histogram_sum`. #16682\n+* [BUGFIX] PromQL: Fix unary operator precedence in duration expressions. #16713\n+* [BUGFIX] UI: Add query warnings and info to graph view. #16753 #16759\n+* [BUGFIX] UI: Fix `/alerts` accordian theme colors. #16043\n+* [BUGFIX] API: Add http Vary: Origin header to responses to avoid cache poisoning. #16008",
        "comment_created_at": "2025-06-27T03:57:18+00:00",
        "comment_author": "juliusv",
        "comment_body": "```suggestion\r\n* [BUGFIX] API: Add HTTP `Vary: Origin` header to responses to avoid cache poisoning. #16008\r\n```",
        "pr_file_module": null
      }
    ]
  }
]