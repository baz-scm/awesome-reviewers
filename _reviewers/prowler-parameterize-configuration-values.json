[
  {
    "discussion_id": "2063334142",
    "pr_number": 7563,
    "pr_file": "api/Dockerfile",
    "created_at": "2025-04-28T09:59:33+00:00",
    "commented_code": "-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+# hadolint ignore=DL3008\n+RUN apt-get update && apt-get install -y --no-install-recommends \\\n+    gcc python3-dev bash \\\n+    libcurl4-openssl-dev ca-certificates less ncurses-base \\\n+    krb5-multidev libgcc-s1 gettext libssl3 \\\n+    libstdc++6 tzdata liburcu8 zlib1g libicu72 curl openssh-client \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+# Install PowerShell\n+RUN ARCH=$(uname -m) && \\\n+    if [ \"$ARCH\" = \"x86_64\" ]; then \\\n+        curl -L https://github.com/PowerShell/PowerShell/releases/download/v7.5.0/powershell-7.5.0-linux-x64.tar.gz -o /tmp/powershell.tar.gz ; \\\n+    elif [ \"$ARCH\" = \"aarch64\" ]; then \\\n+        curl -L https://github.com/PowerShell/PowerShell/releases/download/v7.5.0/powershell-7.5.0-linux-arm64.tar.gz -o /tmp/powershell.tar.gz ; \\",
    "repo_full_name": "prowler-cloud/prowler",
    "discussion_comments": [
      {
        "comment_id": "2063334142",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7563,
        "pr_file": "api/Dockerfile",
        "discussion_id": "2063334142",
        "commented_code": "@@ -1,13 +1,34 @@\n-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+# hadolint ignore=DL3008\n+RUN apt-get update && apt-get install -y --no-install-recommends \\\n+    gcc python3-dev bash \\\n+    libcurl4-openssl-dev ca-certificates less ncurses-base \\\n+    krb5-multidev libgcc-s1 gettext libssl3 \\\n+    libstdc++6 tzdata liburcu8 zlib1g libicu72 curl openssh-client \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+# Install PowerShell\n+RUN ARCH=$(uname -m) && \\\n+    if [ \"$ARCH\" = \"x86_64\" ]; then \\\n+        curl -L https://github.com/PowerShell/PowerShell/releases/download/v7.5.0/powershell-7.5.0-linux-x64.tar.gz -o /tmp/powershell.tar.gz ; \\\n+    elif [ \"$ARCH\" = \"aarch64\" ]; then \\\n+        curl -L https://github.com/PowerShell/PowerShell/releases/download/v7.5.0/powershell-7.5.0-linux-arm64.tar.gz -o /tmp/powershell.tar.gz ; \\",
        "comment_created_at": "2025-04-28T09:59:33+00:00",
        "comment_author": "jfagoagas",
        "comment_body": "Could you please store the Powershell version in a variable?\r\n```\r\nARG POWERSHELL_VERSION=v7.5.0\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "2063336183",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7563,
        "pr_file": "api/Dockerfile",
        "discussion_id": "2063334142",
        "commented_code": "@@ -1,13 +1,34 @@\n-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+# hadolint ignore=DL3008\n+RUN apt-get update && apt-get install -y --no-install-recommends \\\n+    gcc python3-dev bash \\\n+    libcurl4-openssl-dev ca-certificates less ncurses-base \\\n+    krb5-multidev libgcc-s1 gettext libssl3 \\\n+    libstdc++6 tzdata liburcu8 zlib1g libicu72 curl openssh-client \\\n+    && rm -rf /var/lib/apt/lists/*\n+\n+# Install PowerShell\n+RUN ARCH=$(uname -m) && \\\n+    if [ \"$ARCH\" = \"x86_64\" ]; then \\\n+        curl -L https://github.com/PowerShell/PowerShell/releases/download/v7.5.0/powershell-7.5.0-linux-x64.tar.gz -o /tmp/powershell.tar.gz ; \\\n+    elif [ \"$ARCH\" = \"aarch64\" ]; then \\\n+        curl -L https://github.com/PowerShell/PowerShell/releases/download/v7.5.0/powershell-7.5.0-linux-arm64.tar.gz -o /tmp/powershell.tar.gz ; \\",
        "comment_created_at": "2025-04-28T10:00:57+00:00",
        "comment_author": "AdriiiPRodri",
        "comment_body": "Sure",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2065895173",
    "pr_number": 7563,
    "pr_file": "api/Dockerfile",
    "created_at": "2025-04-29T09:18:01+00:00",
    "commented_code": "-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12.10-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+ARG POWERSHELL_VERSION=7.5.0",
    "repo_full_name": "prowler-cloud/prowler",
    "discussion_comments": [
      {
        "comment_id": "2065895173",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7563,
        "pr_file": "api/Dockerfile",
        "discussion_id": "2065895173",
        "commented_code": "@@ -1,13 +1,32 @@\n-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12.10-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+ARG POWERSHELL_VERSION=7.5.0",
        "comment_created_at": "2025-04-29T09:18:01+00:00",
        "comment_author": "vicferpoy",
        "comment_body": "Should we control this version through environment variable?",
        "pr_file_module": null
      },
      {
        "comment_id": "2065897677",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7563,
        "pr_file": "api/Dockerfile",
        "discussion_id": "2065895173",
        "commented_code": "@@ -1,13 +1,32 @@\n-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12.10-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+ARG POWERSHELL_VERSION=7.5.0",
        "comment_created_at": "2025-04-29T09:18:57+00:00",
        "comment_author": "vicferpoy",
        "comment_body": "We could define this version as the default value in case the environment variable is not present. Does this make sense to you?",
        "pr_file_module": null
      },
      {
        "comment_id": "2065943656",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7563,
        "pr_file": "api/Dockerfile",
        "discussion_id": "2065895173",
        "commented_code": "@@ -1,13 +1,32 @@\n-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12.10-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+ARG POWERSHELL_VERSION=7.5.0",
        "comment_created_at": "2025-04-29T09:42:22+00:00",
        "comment_author": "vicferpoy",
        "comment_body": "cc: @jfagoagas since you asked Adri to store the version staticly.",
        "pr_file_module": null
      },
      {
        "comment_id": "2066032942",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7563,
        "pr_file": "api/Dockerfile",
        "discussion_id": "2065895173",
        "commented_code": "@@ -1,13 +1,32 @@\n-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12.10-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+ARG POWERSHELL_VERSION=7.5.0",
        "comment_created_at": "2025-04-29T10:42:17+00:00",
        "comment_author": "AdriiiPRodri",
        "comment_body": "I can apply this change, @jfagoagas what do you think?",
        "pr_file_module": null
      },
      {
        "comment_id": "2066051160",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7563,
        "pr_file": "api/Dockerfile",
        "discussion_id": "2065895173",
        "commented_code": "@@ -1,13 +1,32 @@\n-FROM python:3.12.8-alpine3.20 AS build\n+FROM python:3.12.10-slim-bookworm AS build\n \n LABEL maintainer=\"https://github.com/prowler-cloud/api\"\n \n-# hadolint ignore=DL3018\n-RUN apk --no-cache add gcc python3-dev musl-dev linux-headers curl-dev\n+ARG POWERSHELL_VERSION=7.5.0",
        "comment_created_at": "2025-04-29T10:54:59+00:00",
        "comment_author": "jfagoagas",
        "comment_body": "I don't know how are we going to manage Powershell dependencies but we'll need to find an automated way and try to have just one source of truth. Regarding the environment variable I think it is good to have it.",
        "pr_file_module": null
      }
    ]
  }
]