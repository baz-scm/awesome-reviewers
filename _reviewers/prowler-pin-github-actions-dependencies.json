[
  {
    "discussion_id": "2156499129",
    "pr_number": 7991,
    "pr_file": ".github/workflows/pull-request-check-changelog.yml",
    "created_at": "2025-06-19T08:55:02+00:00",
    "commented_code": "+name: Check Changelog\n+\n+on:\n+  pull_request:\n+    types: [opened, synchronize, reopened]\n+    paths:\n+      - 'api/**'\n+      - 'ui/**'\n+      - 'prowler/**'\n+\n+jobs:\n+  check-changelog:\n+    if: contains(github.event.pull_request.labels.*.name, 'no-backport') == false\n+    runs-on: ubuntu-latest\n+    permissions:\n+      pull-requests: write\n+    env:\n+      MONITORED_FOLDERS: \"api ui prowler\"\n+\n+    steps:\n+      - uses: actions/checkout@v4\n+        with:\n+          fetch-depth: 0\n+\n+      - name: Get list of changed files\n+        id: changed_files\n+        run: |\n+          git fetch origin ${{ github.base_ref }}\n+          git diff --name-only origin/${{ github.base_ref }}...HEAD > changed_files.txt\n+          cat changed_files.txt\n+\n+      - name: Check for folder changes and changelog presence\n+        id: check_folders\n+        run: |\n+          missing_changelogs=\"\"\n+\n+          for folder in $MONITORED_FOLDERS; do\n+            if grep -q \"^${folder}/\" changed_files.txt; then\n+              echo \"Detected changes in ${folder}/\"\n+              if ! grep -q \"^${folder}/CHANGELOG.md$\" changed_files.txt; then\n+                echo \"No changelog update found for ${folder}/\"\n+                missing_changelogs=\"${missing_changelogs}- \\`${folder}\\`\n\"\n+              fi\n+            fi\n+          done\n+\n+          echo \"missing_changelogs<<EOF\" >> $GITHUB_OUTPUT\n+          echo -e \"${missing_changelogs}\" >> $GITHUB_OUTPUT\n+          echo \"EOF\" >> $GITHUB_OUTPUT\n+\n+      - name: Find existing changelog comment\n+        id: find_comment\n+        uses: peter-evans/find-comment@v3",
    "repo_full_name": "prowler-cloud/prowler",
    "discussion_comments": [
      {
        "comment_id": "2156499129",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7991,
        "pr_file": ".github/workflows/pull-request-check-changelog.yml",
        "discussion_id": "2156499129",
        "commented_code": "@@ -0,0 +1,87 @@\n+name: Check Changelog\n+\n+on:\n+  pull_request:\n+    types: [opened, synchronize, reopened]\n+    paths:\n+      - 'api/**'\n+      - 'ui/**'\n+      - 'prowler/**'\n+\n+jobs:\n+  check-changelog:\n+    if: contains(github.event.pull_request.labels.*.name, 'no-backport') == false\n+    runs-on: ubuntu-latest\n+    permissions:\n+      pull-requests: write\n+    env:\n+      MONITORED_FOLDERS: \"api ui prowler\"\n+\n+    steps:\n+      - uses: actions/checkout@v4\n+        with:\n+          fetch-depth: 0\n+\n+      - name: Get list of changed files\n+        id: changed_files\n+        run: |\n+          git fetch origin ${{ github.base_ref }}\n+          git diff --name-only origin/${{ github.base_ref }}...HEAD > changed_files.txt\n+          cat changed_files.txt\n+\n+      - name: Check for folder changes and changelog presence\n+        id: check_folders\n+        run: |\n+          missing_changelogs=\"\"\n+\n+          for folder in $MONITORED_FOLDERS; do\n+            if grep -q \"^${folder}/\" changed_files.txt; then\n+              echo \"Detected changes in ${folder}/\"\n+              if ! grep -q \"^${folder}/CHANGELOG.md$\" changed_files.txt; then\n+                echo \"No changelog update found for ${folder}/\"\n+                missing_changelogs=\"${missing_changelogs}- \\`${folder}\\`\\n\"\n+              fi\n+            fi\n+          done\n+\n+          echo \"missing_changelogs<<EOF\" >> $GITHUB_OUTPUT\n+          echo -e \"${missing_changelogs}\" >> $GITHUB_OUTPUT\n+          echo \"EOF\" >> $GITHUB_OUTPUT\n+\n+      - name: Find existing changelog comment\n+        id: find_comment\n+        uses: peter-evans/find-comment@v3",
        "comment_created_at": "2025-06-19T08:55:02+00:00",
        "comment_author": "jfagoagas",
        "comment_body": "SHA also here.\r\n```suggestion\r\n        uses: peter-evans/find-comment@3eae4d37986fb5a8592848f6a574fdf654e61f9e #v3.1.0\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2156487767",
    "pr_number": 7991,
    "pr_file": ".github/workflows/pull-request-check-changelog.yml",
    "created_at": "2025-06-19T08:49:00+00:00",
    "commented_code": "+name: Check Changelog\n+\n+on:\n+  pull_request:\n+    types: [opened, synchronize, reopened]\n+    paths:\n+      - 'api/**'\n+      - 'ui/**'\n+      - 'prowler/**'\n+\n+jobs:\n+  check-changelog:\n+    if: contains(github.event.pull_request.labels.*.name, 'no-backport') == false",
    "repo_full_name": "prowler-cloud/prowler",
    "discussion_comments": [
      {
        "comment_id": "2156487767",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7991,
        "pr_file": ".github/workflows/pull-request-check-changelog.yml",
        "discussion_id": "2156487767",
        "commented_code": "@@ -0,0 +1,87 @@\n+name: Check Changelog\n+\n+on:\n+  pull_request:\n+    types: [opened, synchronize, reopened]\n+    paths:\n+      - 'api/**'\n+      - 'ui/**'\n+      - 'prowler/**'\n+\n+jobs:\n+  check-changelog:\n+    if: contains(github.event.pull_request.labels.*.name, 'no-backport') == false",
        "comment_created_at": "2025-06-19T08:49:00+00:00",
        "comment_author": "jfagoagas",
        "comment_body": "Why this?",
        "pr_file_module": null
      },
      {
        "comment_id": "2156510727",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7991,
        "pr_file": ".github/workflows/pull-request-check-changelog.yml",
        "discussion_id": "2156487767",
        "commented_code": "@@ -0,0 +1,87 @@\n+name: Check Changelog\n+\n+on:\n+  pull_request:\n+    types: [opened, synchronize, reopened]\n+    paths:\n+      - 'api/**'\n+      - 'ui/**'\n+      - 'prowler/**'\n+\n+jobs:\n+  check-changelog:\n+    if: contains(github.event.pull_request.labels.*.name, 'no-backport') == false",
        "comment_created_at": "2025-06-19T09:00:50+00:00",
        "comment_author": "cesararroba",
        "comment_body": "I'm telling it to not run if the label `no-backport` is present on the PR",
        "pr_file_module": null
      },
      {
        "comment_id": "2156518041",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7991,
        "pr_file": ".github/workflows/pull-request-check-changelog.yml",
        "discussion_id": "2156487767",
        "commented_code": "@@ -0,0 +1,87 @@\n+name: Check Changelog\n+\n+on:\n+  pull_request:\n+    types: [opened, synchronize, reopened]\n+    paths:\n+      - 'api/**'\n+      - 'ui/**'\n+      - 'prowler/**'\n+\n+jobs:\n+  check-changelog:\n+    if: contains(github.event.pull_request.labels.*.name, 'no-backport') == false",
        "comment_created_at": "2025-06-19T09:04:18+00:00",
        "comment_author": "cesararroba",
        "comment_body": "Changed to `no-changelog` :)",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2108330259",
    "pr_number": 7822,
    "pr_file": ".github/workflows/api-pull-request.yml",
    "created_at": "2025-05-27T06:50:14+00:00",
    "commented_code": "python-version: ${{ matrix.python-version }}\n           cache: \"poetry\"\n \n+      - name: Install system dependencies for xmlsec\n+        if: steps.are-non-ignored-files-changed.outputs.any_changed == 'true'\n+        run: |\n+          sudo apt-get update\n+          sudo apt-get install -y libxml2-dev libxmlsec1-dev libxmlsec1-openssl pkg-config",
    "repo_full_name": "prowler-cloud/prowler",
    "discussion_comments": [
      {
        "comment_id": "2108330259",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7822,
        "pr_file": ".github/workflows/api-pull-request.yml",
        "discussion_id": "2108330259",
        "commented_code": "@@ -113,6 +113,12 @@ jobs:\n           python-version: ${{ matrix.python-version }}\n           cache: \"poetry\"\n \n+      - name: Install system dependencies for xmlsec\n+        if: steps.are-non-ignored-files-changed.outputs.any_changed == 'true'\n+        run: |\n+          sudo apt-get update\n+          sudo apt-get install -y libxml2-dev libxmlsec1-dev libxmlsec1-openssl pkg-config",
        "comment_created_at": "2025-05-27T06:50:14+00:00",
        "comment_author": "jfagoagas",
        "comment_body": "Out of curiosity, why do you need to install all these in the workflow system? ",
        "pr_file_module": null
      },
      {
        "comment_id": "2108449026",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7822,
        "pr_file": ".github/workflows/api-pull-request.yml",
        "discussion_id": "2108330259",
        "commented_code": "@@ -113,6 +113,12 @@ jobs:\n           python-version: ${{ matrix.python-version }}\n           cache: \"poetry\"\n \n+      - name: Install system dependencies for xmlsec\n+        if: steps.are-non-ignored-files-changed.outputs.any_changed == 'true'\n+        run: |\n+          sudo apt-get update\n+          sudo apt-get install -y libxml2-dev libxmlsec1-dev libxmlsec1-openssl pkg-config",
        "comment_created_at": "2025-05-27T07:43:47+00:00",
        "comment_author": "AdriiiPRodri",
        "comment_body": "Due to: https://github.com/xmlsec/python-xmlsec/issues/320, we need to reinstall after the other dependencies and it should be the no-binary version because its need to be compilated in our system",
        "pr_file_module": null
      },
      {
        "comment_id": "2108668386",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7822,
        "pr_file": ".github/workflows/api-pull-request.yml",
        "discussion_id": "2108330259",
        "commented_code": "@@ -113,6 +113,12 @@ jobs:\n           python-version: ${{ matrix.python-version }}\n           cache: \"poetry\"\n \n+      - name: Install system dependencies for xmlsec\n+        if: steps.are-non-ignored-files-changed.outputs.any_changed == 'true'\n+        run: |\n+          sudo apt-get update\n+          sudo apt-get install -y libxml2-dev libxmlsec1-dev libxmlsec1-openssl pkg-config",
        "comment_created_at": "2025-05-27T09:12:26+00:00",
        "comment_author": "jfagoagas",
        "comment_body": "Interesting, can you create a TODO and a ticket to review this in the future once the issue is addressed?",
        "pr_file_module": null
      },
      {
        "comment_id": "2108858874",
        "repo_full_name": "prowler-cloud/prowler",
        "pr_number": 7822,
        "pr_file": ".github/workflows/api-pull-request.yml",
        "discussion_id": "2108330259",
        "commented_code": "@@ -113,6 +113,12 @@ jobs:\n           python-version: ${{ matrix.python-version }}\n           cache: \"poetry\"\n \n+      - name: Install system dependencies for xmlsec\n+        if: steps.are-non-ignored-files-changed.outputs.any_changed == 'true'\n+        run: |\n+          sudo apt-get update\n+          sudo apt-get install -y libxml2-dev libxmlsec1-dev libxmlsec1-openssl pkg-config",
        "comment_created_at": "2025-05-27T10:47:19+00:00",
        "comment_author": "AdriiiPRodri",
        "comment_body": "Sure!",
        "pr_file_module": null
      }
    ]
  }
]