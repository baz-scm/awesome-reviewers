[
  {
    "discussion_id": "2148209756",
    "pr_number": 156017,
    "pr_file": "pyproject.toml",
    "created_at": "2025-06-15T14:55:03+00:00",
    "commented_code": "name = \"torch\"\n description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n readme = \"README.md\"\n-requires-python = \">=3.9\"  # also update classifiers when changing this\n+requires-python = \">=3.9,<3.14\"",
    "repo_full_name": "pytorch/pytorch",
    "discussion_comments": [
      {
        "comment_id": "2148209756",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 156017,
        "pr_file": "pyproject.toml",
        "discussion_id": "2148209756",
        "commented_code": "@@ -22,7 +22,7 @@ build-backend = \"setuptools.build_meta\"\n name = \"torch\"\n description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n readme = \"README.md\"\n-requires-python = \">=3.9\"  # also update classifiers when changing this\n+requires-python = \">=3.9,<3.14\"",
        "comment_created_at": "2025-06-15T14:55:03+00:00",
        "comment_author": "Skylion007",
        "comment_body": "Don't do upper Python version. These are bad for a variety of reasons. https://iscinumpy.dev/post/bound-version-constraints/ we should figure out how to configure the linter to disable this lint rule",
        "pr_file_module": null
      },
      {
        "comment_id": "2148237072",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 156017,
        "pr_file": "pyproject.toml",
        "discussion_id": "2148209756",
        "commented_code": "@@ -22,7 +22,7 @@ build-backend = \"setuptools.build_meta\"\n name = \"torch\"\n description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n readme = \"README.md\"\n-requires-python = \">=3.9\"  # also update classifiers when changing this\n+requires-python = \">=3.9,<3.14\"",
        "comment_created_at": "2025-06-15T15:07:25+00:00",
        "comment_author": "XuehaiPan",
        "comment_body": "Dynamo is not available unless we explicitly support it. If we do not explicitly set the upper version, users will try to install from SDist on PyPI when they install `torch` with an unsupported version.\r\n\r\n`~=3.9` is equivalent to `>=3.9,<4.0`, which is not fit for the Python version constraint use case.",
        "pr_file_module": null
      },
      {
        "comment_id": "2148284701",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 156017,
        "pr_file": "pyproject.toml",
        "discussion_id": "2148209756",
        "commented_code": "@@ -22,7 +22,7 @@ build-backend = \"setuptools.build_meta\"\n name = \"torch\"\n description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n readme = \"README.md\"\n-requires-python = \">=3.9\"  # also update classifiers when changing this\n+requires-python = \">=3.9,<3.14\"",
        "comment_created_at": "2025-06-15T15:25:45+00:00",
        "comment_author": "Skylion007",
        "comment_body": "True, but everything except Dynamo is available.",
        "pr_file_module": null
      },
      {
        "comment_id": "2148306807",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 156017,
        "pr_file": "pyproject.toml",
        "discussion_id": "2148209756",
        "commented_code": "@@ -22,7 +22,7 @@ build-backend = \"setuptools.build_meta\"\n name = \"torch\"\n description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n readme = \"README.md\"\n-requires-python = \">=3.9\"  # also update classifiers when changing this\n+requires-python = \">=3.9,<3.14\"",
        "comment_created_at": "2025-06-15T15:34:04+00:00",
        "comment_author": "XuehaiPan",
        "comment_body": "IMO, we should either make building from SDist work or forbid users from installing from SDist on PyPI.",
        "pr_file_module": null
      },
      {
        "comment_id": "2148331061",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 156017,
        "pr_file": "pyproject.toml",
        "discussion_id": "2148209756",
        "commented_code": "@@ -22,7 +22,7 @@ build-backend = \"setuptools.build_meta\"\n name = \"torch\"\n description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n readme = \"README.md\"\n-requires-python = \">=3.9\"  # also update classifiers when changing this\n+requires-python = \">=3.9,<3.14\"",
        "comment_created_at": "2025-06-15T15:42:53+00:00",
        "comment_author": "Skylion007",
        "comment_body": "Does building from sdist not currently work? Or just running dynamo?",
        "pr_file_module": null
      },
      {
        "comment_id": "2148334815",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 156017,
        "pr_file": "pyproject.toml",
        "discussion_id": "2148209756",
        "commented_code": "@@ -22,7 +22,7 @@ build-backend = \"setuptools.build_meta\"\n name = \"torch\"\n description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n readme = \"README.md\"\n-requires-python = \">=3.9\"  # also update classifiers when changing this\n+requires-python = \">=3.9,<3.14\"",
        "comment_created_at": "2025-06-15T15:44:22+00:00",
        "comment_author": "XuehaiPan",
        "comment_body": "> Does building from sdist not currently work?\r\n\r\nIt has not been working for a long time.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2157552226",
    "pr_number": 155998,
    "pr_file": "pyproject.toml",
    "created_at": "2025-06-19T19:23:09+00:00",
    "commented_code": "\"typing-extensions>=4.10.0\",\n     \"requests\",\n ]\n-# Use legacy backend to import local packages in setup.py\n-build-backend = \"setuptools.build_meta:__legacy__\"\n+build-backend = \"setuptools.build_meta\"\n+\n+[project]\n+name = \"torch\"\n+description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n+readme = \"README.md\"\n+requires-python = \">=3.9\"  # also update classifiers when changing this\n+license = { text = \"BSD-3-Clause\" }",
    "repo_full_name": "pytorch/pytorch",
    "discussion_comments": [
      {
        "comment_id": "2157552226",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 155998,
        "pr_file": "pyproject.toml",
        "discussion_id": "2157552226",
        "commented_code": "@@ -38,9 +16,56 @@ requires = [\n     \"typing-extensions>=4.10.0\",\n     \"requests\",\n ]\n-# Use legacy backend to import local packages in setup.py\n-build-backend = \"setuptools.build_meta:__legacy__\"\n+build-backend = \"setuptools.build_meta\"\n+\n+[project]\n+name = \"torch\"\n+description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n+readme = \"README.md\"\n+requires-python = \">=3.9\"  # also update classifiers when changing this\n+license = { text = \"BSD-3-Clause\" }",
        "comment_created_at": "2025-06-19T19:23:09+00:00",
        "comment_author": "rgommers",
        "comment_body": "`text` is outdated/deprecated (I think `setuptools` raises warnings now) after [PEP 639](https://peps.python.org/pep-0639/). You'll want this:\r\n```\r\nlicense = \"BSD-3-Clause\"\r\nlicense-files = [\r\n    \"LICENSE\",\r\n    # add other licenses files if those are present in the source tree\r\n]\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "2157770775",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 155998,
        "pr_file": "pyproject.toml",
        "discussion_id": "2157552226",
        "commented_code": "@@ -38,9 +16,56 @@ requires = [\n     \"typing-extensions>=4.10.0\",\n     \"requests\",\n ]\n-# Use legacy backend to import local packages in setup.py\n-build-backend = \"setuptools.build_meta:__legacy__\"\n+build-backend = \"setuptools.build_meta\"\n+\n+[project]\n+name = \"torch\"\n+description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n+readme = \"README.md\"\n+requires-python = \">=3.9\"  # also update classifiers when changing this\n+license = { text = \"BSD-3-Clause\" }",
        "comment_created_at": "2025-06-19T23:21:14+00:00",
        "comment_author": "XuehaiPan",
        "comment_body": "I tried to address this by pinning `setuptools>=77` and enabling PEP 639. But it seems not very easy to ensure the minimal version of `setuptools` in the CI environment.\r\n\r\nSee also:\r\n\r\n- #155999",
        "pr_file_module": null
      },
      {
        "comment_id": "2158190088",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 155998,
        "pr_file": "pyproject.toml",
        "discussion_id": "2157552226",
        "commented_code": "@@ -38,9 +16,56 @@ requires = [\n     \"typing-extensions>=4.10.0\",\n     \"requests\",\n ]\n-# Use legacy backend to import local packages in setup.py\n-build-backend = \"setuptools.build_meta:__legacy__\"\n+build-backend = \"setuptools.build_meta\"\n+\n+[project]\n+name = \"torch\"\n+description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n+readme = \"README.md\"\n+requires-python = \">=3.9\"  # also update classifiers when changing this\n+license = { text = \"BSD-3-Clause\" }",
        "comment_created_at": "2025-06-20T06:51:36+00:00",
        "comment_author": "rgommers",
        "comment_body": "Ah okay. Maybe add a code comment then that you tried this in June 2025, and it's too much trouble right now - should be revisited later once new `setuptools` versions have propagated to more CI? Without a code comment, someone is bound to try this again when seeing the deprecation warnings.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2169231430",
    "pr_number": 155998,
    "pr_file": "pyproject.toml",
    "created_at": "2025-06-26T14:36:55+00:00",
    "commented_code": "-[project]\n-name = \"torch\"\n-requires-python = \">=3.9\"\n-license = {text = \"BSD-3-Clause\"}\n-dynamic = [\n-    \"authors\",\n-    \"classifiers\",\n-    \"entry-points\",\n-    \"dependencies\",\n-    \"description\",\n-    \"keywords\",\n-    \"optional-dependencies\",\n-    \"readme\",\n-    \"scripts\",\n-    \"version\",\n-]\n-\n-[project.urls]\n-Homepage = \"https://pytorch.org/\"\n-Documentation = \"https://pytorch.org/docs/\"\n-Source = \"https://github.com/pytorch/pytorch\"\n-Forum = \"https://discuss.pytorch.org/\"\n-\n+# Package ######################################################################\n \n [build-system]\n requires = [\n     # After 75.8.2 dropped dep disttools API. Please fix\n     # API temporarily restored and shim used. Please fix\n     # Setuptools will drop support for setup.py past 80\n-    # min version for recursive glob package data support\n+    # 62.3.0: min version for recursive glob package data support\n+    # 77.0.0: min version for SPDX expression support for project.license\n     \"setuptools>=62.3.0,<80.0\",\n     \"wheel\",\n     \"astunparse\",\n-    \"numpy\",\n+    \"cmake>=3.27\",\n     \"ninja\",\n+    \"numpy\",\n     \"pyyaml\",\n-    \"cmake\",\n-    \"typing-extensions>=4.10.0\",\n     \"requests\",\n+    \"typing-extensions>=4.10.0\",\n ]\n-# Use legacy backend to import local packages in setup.py\n-build-backend = \"setuptools.build_meta:__legacy__\"\n+build-backend = \"setuptools.build_meta\"\n \n+[project]\n+name = \"torch\"\n+description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n+readme = \"README.md\"\n+requires-python = \">=3.9\"  # also update classifiers when changing this\n+# TODO: change to `license = \"BSD-3-Clause\"` and enable PEP 639 after pinning setuptools>=77\n+# FIXME: As of 2025.06.20, it is hard to ensure the minimum version of setuptools in our CI environment.\n+# TOML-table-based license deprecated in setuptools>=77, and the deprecation warning will be changed\n+# to an error on 2026.02.18. See also: https://github.com/pypa/setuptools/issues/4903\n+license = { text = \"BSD-3-Clause\" }\n+authors = [{ name = \"PyTorch Team\", email = \"packages@pytorch.org\" }]\n+keywords = [\"pytorch\", \"machine learning\"]\n+classifiers = [\n+    \"Development Status :: 5 - Production/Stable\",\n+    \"Intended Audience :: Developers\",\n+    \"Intended Audience :: Education\",\n+    \"Intended Audience :: Science/Research\",\n+    \"Topic :: Scientific/Engineering\",\n+    \"Topic :: Scientific/Engineering :: Mathematics\",\n+    \"Topic :: Scientific/Engineering :: Artificial Intelligence\",\n+    \"Topic :: Software Development\",\n+    \"Topic :: Software Development :: Libraries\",\n+    \"Topic :: Software Development :: Libraries :: Python Modules\",\n+    \"Programming Language :: C++\",\n+    \"Programming Language :: Python :: 3 :: Only\",\n+    \"Programming Language :: Python :: 3.9\",\n+    \"Programming Language :: Python :: 3.10\",\n+    \"Programming Language :: Python :: 3.11\",\n+    \"Programming Language :: Python :: 3.12\",\n+    \"Programming Language :: Python :: 3.13\",",
    "repo_full_name": "pytorch/pytorch",
    "discussion_comments": [
      {
        "comment_id": "2169231430",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 155998,
        "pr_file": "pyproject.toml",
        "discussion_id": "2169231430",
        "commented_code": "@@ -1,46 +1,75 @@\n-[project]\n-name = \"torch\"\n-requires-python = \">=3.9\"\n-license = {text = \"BSD-3-Clause\"}\n-dynamic = [\n-    \"authors\",\n-    \"classifiers\",\n-    \"entry-points\",\n-    \"dependencies\",\n-    \"description\",\n-    \"keywords\",\n-    \"optional-dependencies\",\n-    \"readme\",\n-    \"scripts\",\n-    \"version\",\n-]\n-\n-[project.urls]\n-Homepage = \"https://pytorch.org/\"\n-Documentation = \"https://pytorch.org/docs/\"\n-Source = \"https://github.com/pytorch/pytorch\"\n-Forum = \"https://discuss.pytorch.org/\"\n-\n+# Package ######################################################################\n \n [build-system]\n requires = [\n     # After 75.8.2 dropped dep disttools API. Please fix\n     # API temporarily restored and shim used. Please fix\n     # Setuptools will drop support for setup.py past 80\n-    # min version for recursive glob package data support\n+    # 62.3.0: min version for recursive glob package data support\n+    # 77.0.0: min version for SPDX expression support for project.license\n     \"setuptools>=62.3.0,<80.0\",\n     \"wheel\",\n     \"astunparse\",\n-    \"numpy\",\n+    \"cmake>=3.27\",\n     \"ninja\",\n+    \"numpy\",\n     \"pyyaml\",\n-    \"cmake\",\n-    \"typing-extensions>=4.10.0\",\n     \"requests\",\n+    \"typing-extensions>=4.10.0\",\n ]\n-# Use legacy backend to import local packages in setup.py\n-build-backend = \"setuptools.build_meta:__legacy__\"\n+build-backend = \"setuptools.build_meta\"\n \n+[project]\n+name = \"torch\"\n+description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n+readme = \"README.md\"\n+requires-python = \">=3.9\"  # also update classifiers when changing this\n+# TODO: change to `license = \"BSD-3-Clause\"` and enable PEP 639 after pinning setuptools>=77\n+# FIXME: As of 2025.06.20, it is hard to ensure the minimum version of setuptools in our CI environment.\n+# TOML-table-based license deprecated in setuptools>=77, and the deprecation warning will be changed\n+# to an error on 2026.02.18. See also: https://github.com/pypa/setuptools/issues/4903\n+license = { text = \"BSD-3-Clause\" }\n+authors = [{ name = \"PyTorch Team\", email = \"packages@pytorch.org\" }]\n+keywords = [\"pytorch\", \"machine learning\"]\n+classifiers = [\n+    \"Development Status :: 5 - Production/Stable\",\n+    \"Intended Audience :: Developers\",\n+    \"Intended Audience :: Education\",\n+    \"Intended Audience :: Science/Research\",\n+    \"Topic :: Scientific/Engineering\",\n+    \"Topic :: Scientific/Engineering :: Mathematics\",\n+    \"Topic :: Scientific/Engineering :: Artificial Intelligence\",\n+    \"Topic :: Software Development\",\n+    \"Topic :: Software Development :: Libraries\",\n+    \"Topic :: Software Development :: Libraries :: Python Modules\",\n+    \"Programming Language :: C++\",\n+    \"Programming Language :: Python :: 3 :: Only\",\n+    \"Programming Language :: Python :: 3.9\",\n+    \"Programming Language :: Python :: 3.10\",\n+    \"Programming Language :: Python :: 3.11\",\n+    \"Programming Language :: Python :: 3.12\",\n+    \"Programming Language :: Python :: 3.13\",",
        "comment_created_at": "2025-06-26T14:36:55+00:00",
        "comment_author": "malfet",
        "comment_body": "If you are making it an explicit list again, please add a linter that checks that this list and min/max versions in setup.py align (we had a few regressions about it in the past)",
        "pr_file_module": null
      },
      {
        "comment_id": "2169243790",
        "repo_full_name": "pytorch/pytorch",
        "pr_number": 155998,
        "pr_file": "pyproject.toml",
        "discussion_id": "2169231430",
        "commented_code": "@@ -1,46 +1,75 @@\n-[project]\n-name = \"torch\"\n-requires-python = \">=3.9\"\n-license = {text = \"BSD-3-Clause\"}\n-dynamic = [\n-    \"authors\",\n-    \"classifiers\",\n-    \"entry-points\",\n-    \"dependencies\",\n-    \"description\",\n-    \"keywords\",\n-    \"optional-dependencies\",\n-    \"readme\",\n-    \"scripts\",\n-    \"version\",\n-]\n-\n-[project.urls]\n-Homepage = \"https://pytorch.org/\"\n-Documentation = \"https://pytorch.org/docs/\"\n-Source = \"https://github.com/pytorch/pytorch\"\n-Forum = \"https://discuss.pytorch.org/\"\n-\n+# Package ######################################################################\n \n [build-system]\n requires = [\n     # After 75.8.2 dropped dep disttools API. Please fix\n     # API temporarily restored and shim used. Please fix\n     # Setuptools will drop support for setup.py past 80\n-    # min version for recursive glob package data support\n+    # 62.3.0: min version for recursive glob package data support\n+    # 77.0.0: min version for SPDX expression support for project.license\n     \"setuptools>=62.3.0,<80.0\",\n     \"wheel\",\n     \"astunparse\",\n-    \"numpy\",\n+    \"cmake>=3.27\",\n     \"ninja\",\n+    \"numpy\",\n     \"pyyaml\",\n-    \"cmake\",\n-    \"typing-extensions>=4.10.0\",\n     \"requests\",\n+    \"typing-extensions>=4.10.0\",\n ]\n-# Use legacy backend to import local packages in setup.py\n-build-backend = \"setuptools.build_meta:__legacy__\"\n+build-backend = \"setuptools.build_meta\"\n \n+[project]\n+name = \"torch\"\n+description = \"Tensors and Dynamic neural networks in Python with strong GPU acceleration\"\n+readme = \"README.md\"\n+requires-python = \">=3.9\"  # also update classifiers when changing this\n+# TODO: change to `license = \"BSD-3-Clause\"` and enable PEP 639 after pinning setuptools>=77\n+# FIXME: As of 2025.06.20, it is hard to ensure the minimum version of setuptools in our CI environment.\n+# TOML-table-based license deprecated in setuptools>=77, and the deprecation warning will be changed\n+# to an error on 2026.02.18. See also: https://github.com/pypa/setuptools/issues/4903\n+license = { text = \"BSD-3-Clause\" }\n+authors = [{ name = \"PyTorch Team\", email = \"packages@pytorch.org\" }]\n+keywords = [\"pytorch\", \"machine learning\"]\n+classifiers = [\n+    \"Development Status :: 5 - Production/Stable\",\n+    \"Intended Audience :: Developers\",\n+    \"Intended Audience :: Education\",\n+    \"Intended Audience :: Science/Research\",\n+    \"Topic :: Scientific/Engineering\",\n+    \"Topic :: Scientific/Engineering :: Mathematics\",\n+    \"Topic :: Scientific/Engineering :: Artificial Intelligence\",\n+    \"Topic :: Software Development\",\n+    \"Topic :: Software Development :: Libraries\",\n+    \"Topic :: Software Development :: Libraries :: Python Modules\",\n+    \"Programming Language :: C++\",\n+    \"Programming Language :: Python :: 3 :: Only\",\n+    \"Programming Language :: Python :: 3.9\",\n+    \"Programming Language :: Python :: 3.10\",\n+    \"Programming Language :: Python :: 3.11\",\n+    \"Programming Language :: Python :: 3.12\",\n+    \"Programming Language :: Python :: 3.13\",",
        "comment_created_at": "2025-06-26T14:42:26+00:00",
        "comment_author": "XuehaiPan",
        "comment_body": "Added in the following PR in the stack.\r\n\r\n- #156017",
        "pr_file_module": null
      }
    ]
  }
]