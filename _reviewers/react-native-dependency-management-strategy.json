[
  {
    "discussion_id": "1953045291",
    "pr_number": 49325,
    "pr_file": "packages/react-native/package.json",
    "created_at": "2025-02-12T16:48:06+00:00",
    "commented_code": "\"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "1953045291",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-12T16:48:06+00:00",
        "comment_author": "cortinico",
        "comment_body": "@tido64 @robhogan \r\nmentioned that this will force `cli-server-api` to be installed (or at least result in a warning) also for expo users.\r\n\r\nCan't we add this as direct dependency inside the template instead?",
        "pr_file_module": null
      },
      {
        "comment_id": "1953049276",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-12T16:50:37+00:00",
        "comment_author": "tido64",
        "comment_body": "We still need it here for it to be hoisted correctly. But we can make it optional and make it a direct dependency in the template.\n\nEdit: I meant to submit a PR to the template but got distracted. Will try to get to it later tonight.",
        "pr_file_module": null
      },
      {
        "comment_id": "1953084969",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-12T17:13:11+00:00",
        "comment_author": "cortinico",
        "comment_body": "> We still need it here for it to be hoisted correctly\r\n\r\nWhy do we need it here specifically?",
        "pr_file_module": null
      },
      {
        "comment_id": "1953092387",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-12T17:18:01+00:00",
        "comment_author": "tido64",
        "comment_body": "Basically, we declare that `@react-native/community-cli-plugin` depends on `cli-server-api` but that consumers need to satisfy this requirement. The only consumer of `@react-native/community-cli-plugin` is `react-native`, but you don't want `react-native` to depend on CLI any longer. So `react-native` needs to \"forward\" the dependency to **its** consumers, hence redeclare peer dependency. Without this, package managers won't correctly link the package.\r\n\r\nHowever, since `react-native` has `cli-server-api` as peer dependency, it's probably fine to mark it as optional and add it in the template as a direct dependency to satisfy the requirement.",
        "pr_file_module": null
      },
      {
        "comment_id": "1953267802",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-12T19:20:16+00:00",
        "comment_author": "tido64",
        "comment_body": "https://github.com/react-native-community/template/pull/105",
        "pr_file_module": null
      },
      {
        "comment_id": "1954796255",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-13T16:04:25+00:00",
        "comment_author": "cortinico",
        "comment_body": "> but you don't want react-native to depend on CLI any longer.\r\n\r\nI think there is some cleanup to make sure `react-native` doesn't need to depend on `@react-native/community-cli-plugin` at all so this change wont' be required at all",
        "pr_file_module": null
      },
      {
        "comment_id": "1954800342",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-13T16:06:51+00:00",
        "comment_author": "tido64",
        "comment_body": "> I think there is some cleanup to make sure `react-native` doesn't need to depend on `@react-native/community-cli-plugin` at all so this change wont' be required at all\r\n\r\nYes, that would be the proper solution in the long run.",
        "pr_file_module": null
      },
      {
        "comment_id": "1955996959",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-14T11:28:34+00:00",
        "comment_author": "cortinico",
        "comment_body": "For the time being, can't we just have:\r\n1. Remove the `peerDependency` here between `react-native` and `@react-native-community/cli-server-api` (so amend this line)\r\n2. Add the dependency on the template as per react-native-community/template#105\r\n\r\n?",
        "pr_file_module": null
      },
      {
        "comment_id": "1956091886",
        "repo_full_name": "facebook/react-native",
        "pr_number": 49325,
        "pr_file": "packages/react-native/package.json",
        "discussion_id": "1953045291",
        "commented_code": "@@ -98,6 +98,7 @@\n     \"featureflags\": \"node ./scripts/featureflags/index.js\"\n   },\n   \"peerDependencies\": {\n+    \"@react-native-community/cli-server-api\": \"*\",",
        "comment_created_at": "2025-02-14T12:44:04+00:00",
        "comment_author": "tido64",
        "comment_body": "I've replied to this offline but I'll post it here as well for transparency: The short answer is, if you do it this way, package managers won't put `@react-native-community/cli-server-api` in a place where `@react-native/community-cli-plugin` will be able to find it.\r\n\r\nLonger answer: See https://github.com/facebook/react-native/pull/49325#discussion_r1953092387",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "988176265",
    "pr_number": 30129,
    "pr_file": "packages/assets/package.json",
    "created_at": "2022-10-05T17:32:04+00:00",
    "commented_code": "{\n   \"name\": \"@react-native/assets\",\n-  \"version\": \"1.0.0\",\n+  \"version\": \"1.1.0\",",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "988176265",
        "repo_full_name": "facebook/react-native",
        "pr_number": 30129,
        "pr_file": "packages/assets/package.json",
        "discussion_id": "988176265",
        "commented_code": "@@ -1,6 +1,6 @@\n {\n   \"name\": \"@react-native/assets\",\n-  \"version\": \"1.0.0\",\n+  \"version\": \"1.1.0\",",
        "comment_created_at": "2022-10-05T17:32:04+00:00",
        "comment_author": "cortinico",
        "comment_body": "This would require a `npm publish` of this package OR the use of Verdaccio (which we already have for template tests).",
        "pr_file_module": null
      },
      {
        "comment_id": "988244860",
        "repo_full_name": "facebook/react-native",
        "pr_number": 30129,
        "pr_file": "packages/assets/package.json",
        "discussion_id": "988176265",
        "commented_code": "@@ -1,6 +1,6 @@\n {\n   \"name\": \"@react-native/assets\",\n-  \"version\": \"1.0.0\",\n+  \"version\": \"1.1.0\",",
        "comment_created_at": "2022-10-05T18:55:56+00:00",
        "comment_author": "janicduplessis",
        "comment_body": "This might also conflict with https://github.com/facebook/react-native/pull/34572. Maybe not all template tests use verdaccio currently? Do I need to make some changes for it to pickup the assets package?\r\n\r\nMaybe the simplest way would be to just revert the change to the assets package and can land it later as it is not really needed as all it does is rename a function.",
        "pr_file_module": null
      },
      {
        "comment_id": "988256706",
        "repo_full_name": "facebook/react-native",
        "pr_number": 30129,
        "pr_file": "packages/assets/package.json",
        "discussion_id": "988176265",
        "commented_code": "@@ -1,6 +1,6 @@\n {\n   \"name\": \"@react-native/assets\",\n-  \"version\": \"1.0.0\",\n+  \"version\": \"1.1.0\",",
        "comment_created_at": "2022-10-05T19:10:34+00:00",
        "comment_author": "cortinico",
        "comment_body": "> Maybe the simplest way would be to just revert the change to the assets package and can land it later as it is not really needed as all it does is rename a function.\r\n\r\nIf possible, let's revert it. We're in the process of migrating our repo to be a proper monorepo and let's try to limit the changes to those packages to only the necessary ones \ud83d\udc4d ",
        "pr_file_module": null
      },
      {
        "comment_id": "988400052",
        "repo_full_name": "facebook/react-native",
        "pr_number": 30129,
        "pr_file": "packages/assets/package.json",
        "discussion_id": "988176265",
        "commented_code": "@@ -1,6 +1,6 @@\n {\n   \"name\": \"@react-native/assets\",\n-  \"version\": \"1.0.0\",\n+  \"version\": \"1.1.0\",",
        "comment_created_at": "2022-10-05T22:21:00+00:00",
        "comment_author": "janicduplessis",
        "comment_body": "Ok I reverted the change, let's see how CI goes.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1374479425",
    "pr_number": 41218,
    "pr_file": "packages/rn-tester-e2e/package.json",
    "created_at": "2023-10-27T12:07:31+00:00",
    "commented_code": "\"directory\": \"packages/rn-tester-e2e\"\n   },\n   \"scripts\": {\n-    \"test-e2e\": \"node ./../../scripts/e2e/run-e2e-tests.js\"\n+    \"test-e2e-ios\": \"npx wdio wdio.conf.ios.js\",\n+    \"test-e2e-android\": \"npx wdio wdio.conf.android.js\"\n   },\n   \"devDependencies\": {\n-    \"eslint\": \"^8.19.0\",\n-    \"jest\": \"^29.6.3\",\n+    \"eslint\": \"^8.23.1\",\n     \"webdriverio\": \"^7.32.0\",\n     \"@babel/core\": \"^7.20.0\",\n     \"@babel/preset-env\": \"^7.20.0\",\n     \"@babel/plugin-transform-flow-strip-types\": \"^7.20.0\",\n-    \"@types/jest\": \"^29.5.3\"\n+    \"@babel/register\": \"^7.20.0\",\n+    \"@types/mocha\": \"^10.0.3\",\n+    \"@wdio/appium-service\": \"^7.32.0\",\n+    \"@wdio/cli\": \"^7.32.0\",\n+    \"@wdio/local-runner\": \"^7.32.0\",\n+    \"@wdio/mocha-framework\": \"^7.32.0\",\n+    \"@wdio/spec-reporter\": \"^7.32.0\",\n+    \"appium\": \"2.0.0\",\n+    \"appium-uiautomator2-driver\": \"^2.29.0\",\n+    \"appium-xcuitest-driver\": \"^5.6.0\"",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "1374479425",
        "repo_full_name": "facebook/react-native",
        "pr_number": 41218,
        "pr_file": "packages/rn-tester-e2e/package.json",
        "discussion_id": "1374479425",
        "commented_code": "@@ -11,15 +11,24 @@\n   \"directory\": \"packages/rn-tester-e2e\"\n   },\n   \"scripts\": {\n-    \"test-e2e\": \"node ./../../scripts/e2e/run-e2e-tests.js\"\n+    \"test-e2e-ios\": \"npx wdio wdio.conf.ios.js\",\n+    \"test-e2e-android\": \"npx wdio wdio.conf.android.js\"\n   },\n   \"devDependencies\": {\n-    \"eslint\": \"^8.19.0\",\n-    \"jest\": \"^29.6.3\",\n+    \"eslint\": \"^8.23.1\",\n     \"webdriverio\": \"^7.32.0\",\n     \"@babel/core\": \"^7.20.0\",\n     \"@babel/preset-env\": \"^7.20.0\",\n     \"@babel/plugin-transform-flow-strip-types\": \"^7.20.0\",\n-    \"@types/jest\": \"^29.5.3\"\n+    \"@babel/register\": \"^7.20.0\",\n+    \"@types/mocha\": \"^10.0.3\",\n+    \"@wdio/appium-service\": \"^7.32.0\",\n+    \"@wdio/cli\": \"^7.32.0\",\n+    \"@wdio/local-runner\": \"^7.32.0\",\n+    \"@wdio/mocha-framework\": \"^7.32.0\",\n+    \"@wdio/spec-reporter\": \"^7.32.0\",\n+    \"appium\": \"2.0.0\",\n+    \"appium-uiautomator2-driver\": \"^2.29.0\",\n+    \"appium-xcuitest-driver\": \"^5.6.0\"",
        "comment_created_at": "2023-10-27T12:07:31+00:00",
        "comment_author": "szymonrybczak",
        "comment_body": "We're also installing `appium` and drivers globally, IIRC we should do it only in one place.",
        "pr_file_module": null
      },
      {
        "comment_id": "1374890387",
        "repo_full_name": "facebook/react-native",
        "pr_number": 41218,
        "pr_file": "packages/rn-tester-e2e/package.json",
        "discussion_id": "1374479425",
        "commented_code": "@@ -11,15 +11,24 @@\n   \"directory\": \"packages/rn-tester-e2e\"\n   },\n   \"scripts\": {\n-    \"test-e2e\": \"node ./../../scripts/e2e/run-e2e-tests.js\"\n+    \"test-e2e-ios\": \"npx wdio wdio.conf.ios.js\",\n+    \"test-e2e-android\": \"npx wdio wdio.conf.android.js\"\n   },\n   \"devDependencies\": {\n-    \"eslint\": \"^8.19.0\",\n-    \"jest\": \"^29.6.3\",\n+    \"eslint\": \"^8.23.1\",\n     \"webdriverio\": \"^7.32.0\",\n     \"@babel/core\": \"^7.20.0\",\n     \"@babel/preset-env\": \"^7.20.0\",\n     \"@babel/plugin-transform-flow-strip-types\": \"^7.20.0\",\n-    \"@types/jest\": \"^29.5.3\"\n+    \"@babel/register\": \"^7.20.0\",\n+    \"@types/mocha\": \"^10.0.3\",\n+    \"@wdio/appium-service\": \"^7.32.0\",\n+    \"@wdio/cli\": \"^7.32.0\",\n+    \"@wdio/local-runner\": \"^7.32.0\",\n+    \"@wdio/mocha-framework\": \"^7.32.0\",\n+    \"@wdio/spec-reporter\": \"^7.32.0\",\n+    \"appium\": \"2.0.0\",\n+    \"appium-uiautomator2-driver\": \"^2.29.0\",\n+    \"appium-xcuitest-driver\": \"^5.6.0\"",
        "comment_created_at": "2023-10-27T17:57:43+00:00",
        "comment_author": "samuelfreiberg",
        "comment_body": "This is correct. You don't need to install globally if installing here.",
        "pr_file_module": null
      },
      {
        "comment_id": "1376337875",
        "repo_full_name": "facebook/react-native",
        "pr_number": 41218,
        "pr_file": "packages/rn-tester-e2e/package.json",
        "discussion_id": "1374479425",
        "commented_code": "@@ -11,15 +11,24 @@\n   \"directory\": \"packages/rn-tester-e2e\"\n   },\n   \"scripts\": {\n-    \"test-e2e\": \"node ./../../scripts/e2e/run-e2e-tests.js\"\n+    \"test-e2e-ios\": \"npx wdio wdio.conf.ios.js\",\n+    \"test-e2e-android\": \"npx wdio wdio.conf.android.js\"\n   },\n   \"devDependencies\": {\n-    \"eslint\": \"^8.19.0\",\n-    \"jest\": \"^29.6.3\",\n+    \"eslint\": \"^8.23.1\",\n     \"webdriverio\": \"^7.32.0\",\n     \"@babel/core\": \"^7.20.0\",\n     \"@babel/preset-env\": \"^7.20.0\",\n     \"@babel/plugin-transform-flow-strip-types\": \"^7.20.0\",\n-    \"@types/jest\": \"^29.5.3\"\n+    \"@babel/register\": \"^7.20.0\",\n+    \"@types/mocha\": \"^10.0.3\",\n+    \"@wdio/appium-service\": \"^7.32.0\",\n+    \"@wdio/cli\": \"^7.32.0\",\n+    \"@wdio/local-runner\": \"^7.32.0\",\n+    \"@wdio/mocha-framework\": \"^7.32.0\",\n+    \"@wdio/spec-reporter\": \"^7.32.0\",\n+    \"appium\": \"2.0.0\",\n+    \"appium-uiautomator2-driver\": \"^2.29.0\",\n+    \"appium-xcuitest-driver\": \"^5.6.0\"",
        "comment_created_at": "2023-10-30T14:41:41+00:00",
        "comment_author": "Othinn",
        "comment_body": "Yes, you're right. I've removed appium installation from CircleCi jobs and readme step",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1374889996",
    "pr_number": 41218,
    "pr_file": "packages/rn-tester-e2e/package.json",
    "created_at": "2023-10-27T17:57:13+00:00",
    "commented_code": "\"directory\": \"packages/rn-tester-e2e\"\n   },\n   \"scripts\": {\n-    \"test-e2e\": \"node ./../../scripts/e2e/run-e2e-tests.js\"\n+    \"test-e2e-ios\": \"npx wdio wdio.conf.ios.js\",\n+    \"test-e2e-android\": \"npx wdio wdio.conf.android.js\"\n   },\n   \"devDependencies\": {\n-    \"eslint\": \"^8.19.0\",\n-    \"jest\": \"^29.6.3\",\n+    \"eslint\": \"^8.23.1\",\n     \"webdriverio\": \"^7.32.0\",\n     \"@babel/core\": \"^7.20.0\",\n     \"@babel/preset-env\": \"^7.20.0\",\n     \"@babel/plugin-transform-flow-strip-types\": \"^7.20.0\",\n-    \"@types/jest\": \"^29.5.3\"\n+    \"@babel/register\": \"^7.20.0\",\n+    \"@types/mocha\": \"^10.0.3\",\n+    \"@wdio/appium-service\": \"^7.32.0\",\n+    \"@wdio/cli\": \"^7.32.0\",\n+    \"@wdio/local-runner\": \"^7.32.0\",\n+    \"@wdio/mocha-framework\": \"^7.32.0\",\n+    \"@wdio/spec-reporter\": \"^7.32.0\",\n+    \"appium\": \"2.0.0\",\n+    \"appium-uiautomator2-driver\": \"^2.29.0\",",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "1374889996",
        "repo_full_name": "facebook/react-native",
        "pr_number": 41218,
        "pr_file": "packages/rn-tester-e2e/package.json",
        "discussion_id": "1374889996",
        "commented_code": "@@ -11,15 +11,24 @@\n   \"directory\": \"packages/rn-tester-e2e\"\n   },\n   \"scripts\": {\n-    \"test-e2e\": \"node ./../../scripts/e2e/run-e2e-tests.js\"\n+    \"test-e2e-ios\": \"npx wdio wdio.conf.ios.js\",\n+    \"test-e2e-android\": \"npx wdio wdio.conf.android.js\"\n   },\n   \"devDependencies\": {\n-    \"eslint\": \"^8.19.0\",\n-    \"jest\": \"^29.6.3\",\n+    \"eslint\": \"^8.23.1\",\n     \"webdriverio\": \"^7.32.0\",\n     \"@babel/core\": \"^7.20.0\",\n     \"@babel/preset-env\": \"^7.20.0\",\n     \"@babel/plugin-transform-flow-strip-types\": \"^7.20.0\",\n-    \"@types/jest\": \"^29.5.3\"\n+    \"@babel/register\": \"^7.20.0\",\n+    \"@types/mocha\": \"^10.0.3\",\n+    \"@wdio/appium-service\": \"^7.32.0\",\n+    \"@wdio/cli\": \"^7.32.0\",\n+    \"@wdio/local-runner\": \"^7.32.0\",\n+    \"@wdio/mocha-framework\": \"^7.32.0\",\n+    \"@wdio/spec-reporter\": \"^7.32.0\",\n+    \"appium\": \"2.0.0\",\n+    \"appium-uiautomator2-driver\": \"^2.29.0\",",
        "comment_created_at": "2023-10-27T17:57:13+00:00",
        "comment_author": "samuelfreiberg",
        "comment_body": "I would suggest locking the Appium driver packages to a version you find that works. We've had situations in the past where updates break testing. We only update when we need a specific update.",
        "pr_file_module": null
      }
    ]
  }
]