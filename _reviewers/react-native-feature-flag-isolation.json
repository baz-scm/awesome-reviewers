[
  {
    "discussion_id": "1867034224",
    "pr_number": 47554,
    "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/ReactHost.kt",
    "created_at": "2024-12-03T04:31:23+00:00",
    "commented_code": "/** Routes memory pressure events to interested components */\n   public val memoryPressureRouter: MemoryPressureRouter\n \n+  public fun isEdgeToEdgeEnabled(): Boolean",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "1867034224",
        "repo_full_name": "facebook/react-native",
        "pr_number": 47554,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/ReactHost.kt",
        "discussion_id": "1867034224",
        "commented_code": "@@ -48,6 +48,8 @@ public interface ReactHost {\n   /** Routes memory pressure events to interested components */\n   public val memoryPressureRouter: MemoryPressureRouter\n \n+  public fun isEdgeToEdgeEnabled(): Boolean",
        "comment_created_at": "2024-12-03T04:31:23+00:00",
        "comment_author": "alanleedev",
        "comment_body": "I have some concern with adding this field to ReactHost as this more of a UI configuration that will eventually go away as edge-to-edge will become the default for Android and as we raise the minSdk. Doesn't seem like it is something we should keep in ReactHost.",
        "pr_file_module": null
      },
      {
        "comment_id": "1867405069",
        "repo_full_name": "facebook/react-native",
        "pr_number": 47554,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/ReactHost.kt",
        "discussion_id": "1867034224",
        "commented_code": "@@ -48,6 +48,8 @@ public interface ReactHost {\n   /** Routes memory pressure events to interested components */\n   public val memoryPressureRouter: MemoryPressureRouter\n \n+  public fun isEdgeToEdgeEnabled(): Boolean",
        "comment_created_at": "2024-12-03T09:57:10+00:00",
        "comment_author": "zoontek",
        "comment_body": "@alanleedev I agree, just tried to copy the current code structure, but it's not optimal. What would you think about removing all of this and just have an `EdgeToEdgeUtils.kt` somewhere?\r\n\r\n```kotlin\r\nobject EdgeToEdgeUtils {\r\n  fun isEnabled(): Boolean {\r\n    return BuildConfig.IS_EDGE_TO_EDGE_ENABLED\r\n  }\r\n}\r\n```\r\n\r\nEDIT: Hmm, this can't be done so easily as the `BuildConfig` is scoped to the project and can't be used in the react-native codebase directly, we still need to pass it. I'll have a check on how to remove it from `ReactHost`",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2175387276",
    "pr_number": 47554,
    "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/uimanager/DisplayMetricsHolder.kt",
    "created_at": "2025-06-30T15:42:25+00:00",
    "commented_code": "@JvmStatic\n   public fun initDisplayMetrics(context: Context) {\n     val displayMetrics = context.resources.displayMetrics\n-    windowDisplayMetrics = displayMetrics\n+    val windowDisplayMetrics = DisplayMetrics()\n     val screenDisplayMetrics = DisplayMetrics()\n+\n+    windowDisplayMetrics.setTo(displayMetrics)\n     screenDisplayMetrics.setTo(displayMetrics)\n+\n+    if (isEdgeToEdgeFeatureFlagOn) {",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "2175387276",
        "repo_full_name": "facebook/react-native",
        "pr_number": 47554,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/uimanager/DisplayMetricsHolder.kt",
        "discussion_id": "2175387276",
        "commented_code": "@@ -62,16 +64,30 @@ public object DisplayMetricsHolder {\n   @JvmStatic\n   public fun initDisplayMetrics(context: Context) {\n     val displayMetrics = context.resources.displayMetrics\n-    windowDisplayMetrics = displayMetrics\n+    val windowDisplayMetrics = DisplayMetrics()\n     val screenDisplayMetrics = DisplayMetrics()\n+\n+    windowDisplayMetrics.setTo(displayMetrics)\n     screenDisplayMetrics.setTo(displayMetrics)\n+\n+    if (isEdgeToEdgeFeatureFlagOn) {",
        "comment_created_at": "2025-06-30T15:42:25+00:00",
        "comment_author": "alanleedev",
        "comment_body": "Does this only change the behavior when only `isEdgeToEdgeFeatureFlagOn` is set? ",
        "pr_file_module": null
      },
      {
        "comment_id": "2175540816",
        "repo_full_name": "facebook/react-native",
        "pr_number": 47554,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/uimanager/DisplayMetricsHolder.kt",
        "discussion_id": "2175387276",
        "commented_code": "@@ -62,16 +64,30 @@ public object DisplayMetricsHolder {\n   @JvmStatic\n   public fun initDisplayMetrics(context: Context) {\n     val displayMetrics = context.resources.displayMetrics\n-    windowDisplayMetrics = displayMetrics\n+    val windowDisplayMetrics = DisplayMetrics()\n     val screenDisplayMetrics = DisplayMetrics()\n+\n+    windowDisplayMetrics.setTo(displayMetrics)\n     screenDisplayMetrics.setTo(displayMetrics)\n+\n+    if (isEdgeToEdgeFeatureFlagOn) {",
        "comment_created_at": "2025-06-30T17:09:14+00:00",
        "comment_author": "zoontek",
        "comment_body": "Yes. Because it returns window height with system bars included.\n\nSo either we substract those when the flag is off, either we only use the new API when it's on (to preserve the existing behavior when it's off)",
        "pr_file_module": null
      },
      {
        "comment_id": "2175559283",
        "repo_full_name": "facebook/react-native",
        "pr_number": 47554,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/uimanager/DisplayMetricsHolder.kt",
        "discussion_id": "2175387276",
        "commented_code": "@@ -62,16 +64,30 @@ public object DisplayMetricsHolder {\n   @JvmStatic\n   public fun initDisplayMetrics(context: Context) {\n     val displayMetrics = context.resources.displayMetrics\n-    windowDisplayMetrics = displayMetrics\n+    val windowDisplayMetrics = DisplayMetrics()\n     val screenDisplayMetrics = DisplayMetrics()\n+\n+    windowDisplayMetrics.setTo(displayMetrics)\n     screenDisplayMetrics.setTo(displayMetrics)\n+\n+    if (isEdgeToEdgeFeatureFlagOn) {",
        "comment_created_at": "2025-06-30T17:22:05+00:00",
        "comment_author": "alanleedev",
        "comment_body": "Just want to make sure we are not adding any unintended behavior change to existing apps or else we need to be really clear about it.",
        "pr_file_module": null
      },
      {
        "comment_id": "2175560640",
        "repo_full_name": "facebook/react-native",
        "pr_number": 47554,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/uimanager/DisplayMetricsHolder.kt",
        "discussion_id": "2175387276",
        "commented_code": "@@ -62,16 +64,30 @@ public object DisplayMetricsHolder {\n   @JvmStatic\n   public fun initDisplayMetrics(context: Context) {\n     val displayMetrics = context.resources.displayMetrics\n-    windowDisplayMetrics = displayMetrics\n+    val windowDisplayMetrics = DisplayMetrics()\n     val screenDisplayMetrics = DisplayMetrics()\n+\n+    windowDisplayMetrics.setTo(displayMetrics)\n     screenDisplayMetrics.setTo(displayMetrics)\n+\n+    if (isEdgeToEdgeFeatureFlagOn) {",
        "comment_created_at": "2025-06-30T17:23:04+00:00",
        "comment_author": "zoontek",
        "comment_body": "It doesn't change anything if `edgeToEdgeEnabled` is not `true`.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2168047374",
    "pr_number": 52088,
    "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/statusbar/StatusBarModule.kt",
    "created_at": "2025-06-26T03:55:17+00:00",
    "commented_code": "\"StatusBarModule: Ignored status bar change, current activity is null.\")\n       return\n     }\n+    if (isEdgeToEdgeFeatureFlagOn) {\n+      FLog.w(\n+        ReactConstants.TAG,\n+        \"StatusBarModule: Ignored status bar change, current activity is edge-to-edge.\")\n+      return\n+    }",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "2168047374",
        "repo_full_name": "facebook/react-native",
        "pr_number": 52088,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/statusbar/StatusBarModule.kt",
        "discussion_id": "2168047374",
        "commented_code": "@@ -82,6 +89,12 @@ internal class StatusBarModule(reactContext: ReactApplicationContext?) :\n           \"StatusBarModule: Ignored status bar change, current activity is null.\")\n       return\n     }\n+    if (isEdgeToEdgeFeatureFlagOn) {\n+      FLog.w(\n+        ReactConstants.TAG,\n+        \"StatusBarModule: Ignored status bar change, current activity is edge-to-edge.\")\n+      return\n+    }",
        "comment_created_at": "2025-06-26T03:55:17+00:00",
        "comment_author": "alanleedev",
        "comment_body": "@zoontek There was a question about this check. Since things are loosely coupled on a flag and this may not work correctly if they are using custom Activity instead of the provided ReactActivity and enabling the flag.\r\nI think for now we should add a comment (and also additional docs if needed) in `edgeToEdgeEnabled` fiag in `gradle.properties`.\r\nSomething like; \r\n\r\n```\r\n# Enables edge-to-edge. Only works with ReactActivity and should not be used with custom Activity.\r\n edgeToEdgeEnabled=false\r\n```\r\nWhat do you think?\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "2168364149",
        "repo_full_name": "facebook/react-native",
        "pr_number": 52088,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/statusbar/StatusBarModule.kt",
        "discussion_id": "2168047374",
        "commented_code": "@@ -82,6 +89,12 @@ internal class StatusBarModule(reactContext: ReactApplicationContext?) :\n           \"StatusBarModule: Ignored status bar change, current activity is null.\")\n       return\n     }\n+    if (isEdgeToEdgeFeatureFlagOn) {\n+      FLog.w(\n+        ReactConstants.TAG,\n+        \"StatusBarModule: Ignored status bar change, current activity is edge-to-edge.\")\n+      return\n+    }",
        "comment_created_at": "2025-06-26T07:20:23+00:00",
        "comment_author": "zoontek",
        "comment_body": "@alanleedev You are right, I can update the comment in the [template](https://github.com/react-native-community/template).",
        "pr_file_module": null
      },
      {
        "comment_id": "2168412299",
        "repo_full_name": "facebook/react-native",
        "pr_number": 52088,
        "pr_file": "packages/react-native/ReactAndroid/src/main/java/com/facebook/react/modules/statusbar/StatusBarModule.kt",
        "discussion_id": "2168047374",
        "commented_code": "@@ -82,6 +89,12 @@ internal class StatusBarModule(reactContext: ReactApplicationContext?) :\n           \"StatusBarModule: Ignored status bar change, current activity is null.\")\n       return\n     }\n+    if (isEdgeToEdgeFeatureFlagOn) {\n+      FLog.w(\n+        ReactConstants.TAG,\n+        \"StatusBarModule: Ignored status bar change, current activity is edge-to-edge.\")\n+      return\n+    }",
        "comment_created_at": "2025-06-26T07:42:34+00:00",
        "comment_author": "zoontek",
        "comment_body": "@alanleedev Here it is https://github.com/react-native-community/template/pull/145",
        "pr_file_module": null
      }
    ]
  }
]