[
  {
    "discussion_id": "2124381232",
    "pr_number": 51770,
    "pr_file": "packages/react-native/React/Views/RCTBorderDrawing.m",
    "created_at": "2025-06-03T16:28:55+00:00",
    "commented_code": "CGPathRef path =\n         RCTPathCreateWithRoundedRect(pathRect, RCTGetCornerInsets(cornerRadii, UIEdgeInsetsZero), NULL, NO);\n \n+    CGContextSaveGState(context);\n+    {\n+      // Create a path representing the full rect\n+      CGMutablePathRef outerPath = CGPathCreateMutable();\n+      CGPathAddRect(outerPath, NULL, rect);\n+\n+      CGRect insetRect = CGRectMake(\n+        rect.origin.x + borderInsets.left,\n+        rect.origin.y + borderInsets.top,\n+        rect.size.width - borderInsets.left - borderInsets.right,\n+        rect.size.height - borderInsets.top - borderInsets.bottom\n+      );\n+\n+      CGPathRef innerRoundedRect = RCTPathCreateWithRoundedRect(\n+          insetRect, RCTGetCornerInsets(cornerRadii, UIEdgeInsetsZero), NULL);",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "2124381232",
        "repo_full_name": "facebook/react-native",
        "pr_number": 51770,
        "pr_file": "packages/react-native/React/Views/RCTBorderDrawing.m",
        "discussion_id": "2124381232",
        "commented_code": "@@ -519,6 +518,31 @@ static CGPathRef RCTPathCreateOuterOutline(BOOL drawToEdge, CGRect rect, RCTCorn\n     CGPathRef path =\n         RCTPathCreateWithRoundedRect(pathRect, RCTGetCornerInsets(cornerRadii, UIEdgeInsetsZero), NULL, NO);\n \n+    CGContextSaveGState(context);\n+    {\n+      // Create a path representing the full rect\n+      CGMutablePathRef outerPath = CGPathCreateMutable();\n+      CGPathAddRect(outerPath, NULL, rect);\n+\n+      CGRect insetRect = CGRectMake(\n+        rect.origin.x + borderInsets.left,\n+        rect.origin.y + borderInsets.top,\n+        rect.size.width - borderInsets.left - borderInsets.right,\n+        rect.size.height - borderInsets.top - borderInsets.bottom\n+      );\n+\n+      CGPathRef innerRoundedRect = RCTPathCreateWithRoundedRect(\n+          insetRect, RCTGetCornerInsets(cornerRadii, UIEdgeInsetsZero), NULL);",
        "comment_created_at": "2025-06-03T16:28:55+00:00",
        "comment_author": "jorge-cab",
        "comment_body": "I think the cornerRadii for the inner rectangle need to be adjusted based on the size of the borderInsets or \"border thickness\" you can look at the [W3C spec here](https://www.w3.org/TR/css-backgrounds-3/#corner-shaping)\r\n\r\nElse I think we might clip a little more than what we need",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1019242669",
    "pr_number": 30129,
    "pr_file": "React/Base/RCTUtils.m",
    "created_at": "2022-11-10T14:57:38+00:00",
    "commented_code": "return RCTRelativePathForURL(RCTHomePath(), URL);\n }\n \n+static NSRegularExpression *RCTAssetURLScaleRegex()\n+{\n+  static dispatch_once_t onceToken;\n+  static NSRegularExpression *regex;\n+  dispatch_once(&onceToken, ^{\n+    regex = [NSRegularExpression regularExpressionWithPattern:@\"@\\\\dx$\" options:0 error:nil];\n+  });\n+  return regex;\n+}\n+\n+static NSRegularExpression *RCTAssetURLCharactersRegex()\n+{\n+  static dispatch_once_t onceToken;\n+  static NSRegularExpression *regex;\n+  dispatch_once(&onceToken, ^{\n+    regex = [NSRegularExpression regularExpressionWithPattern:@\"[^a-z0-9_]\" options:0 error:nil];\n+  });\n+  return regex;\n+}",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "1019242669",
        "repo_full_name": "facebook/react-native",
        "pr_number": 30129,
        "pr_file": "React/Base/RCTUtils.m",
        "discussion_id": "1019242669",
        "commented_code": "@@ -728,6 +728,62 @@ BOOL RCTIsGzippedData(NSData *__nullable data)\n   return RCTRelativePathForURL(RCTHomePath(), URL);\n }\n \n+static NSRegularExpression *RCTAssetURLScaleRegex()\n+{\n+  static dispatch_once_t onceToken;\n+  static NSRegularExpression *regex;\n+  dispatch_once(&onceToken, ^{\n+    regex = [NSRegularExpression regularExpressionWithPattern:@\"@\\\\dx$\" options:0 error:nil];\n+  });\n+  return regex;\n+}\n+\n+static NSRegularExpression *RCTAssetURLCharactersRegex()\n+{\n+  static dispatch_once_t onceToken;\n+  static NSRegularExpression *regex;\n+  dispatch_once(&onceToken, ^{\n+    regex = [NSRegularExpression regularExpressionWithPattern:@\"[^a-z0-9_]\" options:0 error:nil];\n+  });\n+  return regex;\n+}",
        "comment_created_at": "2022-11-10T14:57:38+00:00",
        "comment_author": "javache",
        "comment_body": "Instead of a regular expression, could you use a NSCharacterSet for this?",
        "pr_file_module": null
      }
    ]
  }
]