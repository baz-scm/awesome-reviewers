[
  {
    "discussion_id": "2018497774",
    "pr_number": 50043,
    "pr_file": "packages/react-native/Libraries/Blob/URLSearchParams.js",
    "created_at": "2025-03-28T11:29:28+00:00",
    "commented_code": "// Small subset from whatwg-url: https://github.com/jsdom/whatwg-url/tree/master/src\n // The reference code bloat comes from Unicode issues with URLs, so those won't work here.\n export class URLSearchParams {\n-  _searchParams: Array<[string, string]> = [];\n+  _searchParams: Map<string, string[]> = new Map();\n \n-  constructor(params?: Record<string, string>) {\n-    if (typeof params === 'object') {\n-      Object.keys(params).forEach(key => this.append(key, params[key]));\n+  constructor(params?: Record<string, string> | string | [string, string][]) {",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "2018497774",
        "repo_full_name": "facebook/react-native",
        "pr_number": 50043,
        "pr_file": "packages/react-native/Libraries/Blob/URLSearchParams.js",
        "discussion_id": "2018497774",
        "commented_code": "@@ -11,60 +11,129 @@\n // Small subset from whatwg-url: https://github.com/jsdom/whatwg-url/tree/master/src\n // The reference code bloat comes from Unicode issues with URLs, so those won't work here.\n export class URLSearchParams {\n-  _searchParams: Array<[string, string]> = [];\n+  _searchParams: Map<string, string[]> = new Map();\n \n-  constructor(params?: Record<string, string>) {\n-    if (typeof params === 'object') {\n-      Object.keys(params).forEach(key => this.append(key, params[key]));\n+  constructor(params?: Record<string, string> | string | [string, string][]) {",
        "comment_created_at": "2025-03-28T11:29:28+00:00",
        "comment_author": "huntie",
        "comment_body": "Let's validate `params` before proceeding (typeof null is 'object'!)\r\n\r\n```suggestion\r\n  constructor(params?: Record<string, string> | string | [string, string][]) {\r\n    if (params == null) {\r\n      return;\r\n    }\r\n\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "2018645779",
        "repo_full_name": "facebook/react-native",
        "pr_number": 50043,
        "pr_file": "packages/react-native/Libraries/Blob/URLSearchParams.js",
        "discussion_id": "2018497774",
        "commented_code": "@@ -11,60 +11,129 @@\n // Small subset from whatwg-url: https://github.com/jsdom/whatwg-url/tree/master/src\n // The reference code bloat comes from Unicode issues with URLs, so those won't work here.\n export class URLSearchParams {\n-  _searchParams: Array<[string, string]> = [];\n+  _searchParams: Map<string, string[]> = new Map();\n \n-  constructor(params?: Record<string, string>) {\n-    if (typeof params === 'object') {\n-      Object.keys(params).forEach(key => this.append(key, params[key]));\n+  constructor(params?: Record<string, string> | string | [string, string][]) {",
        "comment_created_at": "2025-03-28T13:18:49+00:00",
        "comment_author": "riteshshukla04",
        "comment_body": "Added null check .",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1933047276",
    "pr_number": 48993,
    "pr_file": "packages/react-native/Libraries/Animated/nodes/AnimatedWithChildren.js",
    "created_at": "2025-01-29T00:37:35+00:00",
    "commented_code": "console.warn(\"Trying to remove a child that doesn't exist\");\n       return;\n     }\n+    child.removeParent(this); // Remove parent reference from the child",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "1933047276",
        "repo_full_name": "facebook/react-native",
        "pr_number": 48993,
        "pr_file": "packages/react-native/Libraries/Animated/nodes/AnimatedWithChildren.js",
        "discussion_id": "1933047276",
        "commented_code": "@@ -56,6 +49,7 @@ export default class AnimatedWithChildren extends AnimatedNode {\n       console.warn(\"Trying to remove a child that doesn't exist\");\n       return;\n     }\n+    child.removeParent(this); // Remove parent reference from the child",
        "comment_created_at": "2025-01-29T00:37:35+00:00",
        "comment_author": "c-miles",
        "comment_body": "Yarn build was failing because `child` doesn't always implement `addParent` or `removeParent`.\r\n\r\nI had to add checks (`typeof child.addParent === 'function'` and `typeof child.removeParent === 'function'`) to avoid calling nonexistent methods.\r\n\r\nI\u2019m not necessarily recommending to adopt this; I just wanted to share what I had to do locally to test the rest of these changes.\r\n\r\n(See attached screenshot of the terminal output.)\r\n\r\n\r\n<img width=\"1245\" alt=\"yarn build error\" src=\"https://github.com/user-attachments/assets/a1062054-a075-4f6b-a5be-dfa76c57957d\" />\r\n\r\n\r\n",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1897950391",
    "pr_number": 48388,
    "pr_file": "packages/react-native/Libraries/Utilities/BackHandler.android.js",
    "created_at": "2024-12-26T14:22:08+00:00",
    "commented_code": "RCTDeviceEventEmitter.addListener(DEVICE_BACK_EVENT, function () {\n   for (let i = _backPressSubscriptions.length - 1; i >= 0; i--) {\n-    if (_backPressSubscriptions[i]()) {\n+    if (_backPressSubscriptions[i] && _backPressSubscriptions[i]()) {",
    "repo_full_name": "facebook/react-native",
    "discussion_comments": [
      {
        "comment_id": "1897950391",
        "repo_full_name": "facebook/react-native",
        "pr_number": 48388,
        "pr_file": "packages/react-native/Libraries/Utilities/BackHandler.android.js",
        "discussion_id": "1897950391",
        "commented_code": "@@ -19,7 +19,7 @@ const _backPressSubscriptions = [];\n \n RCTDeviceEventEmitter.addListener(DEVICE_BACK_EVENT, function () {\n   for (let i = _backPressSubscriptions.length - 1; i >= 0; i--) {\n-    if (_backPressSubscriptions[i]()) {\n+    if (_backPressSubscriptions[i] && _backPressSubscriptions[i]()) {",
        "comment_created_at": "2024-12-26T14:22:08+00:00",
        "comment_author": "rshest",
        "comment_body": "How about:\r\n```\r\nif (_backPressSubscriptions[i]?.()) {\r\n```\r\n?",
        "pr_file_module": null
      },
      {
        "comment_id": "1899245979",
        "repo_full_name": "facebook/react-native",
        "pr_number": 48388,
        "pr_file": "packages/react-native/Libraries/Utilities/BackHandler.android.js",
        "discussion_id": "1897950391",
        "commented_code": "@@ -19,7 +19,7 @@ const _backPressSubscriptions = [];\n \n RCTDeviceEventEmitter.addListener(DEVICE_BACK_EVENT, function () {\n   for (let i = _backPressSubscriptions.length - 1; i >= 0; i--) {\n-    if (_backPressSubscriptions[i]()) {\n+    if (_backPressSubscriptions[i] && _backPressSubscriptions[i]()) {",
        "comment_created_at": "2024-12-30T02:45:03+00:00",
        "comment_author": "BleemIs42",
        "comment_body": "I remmenber JS is no option operator ",
        "pr_file_module": null
      }
    ]
  }
]