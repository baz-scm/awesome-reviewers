[
  {
    "discussion_id": "1478199978",
    "pr_number": 291,
    "pr_file": "self_hosting_machinery/webgui/selfhost_statistics.py",
    "created_at": "2024-02-05T13:04:01+00:00",
    "commented_code": "},\n             media_type='application/json',\n             status_code=500)\n+        self.add_api_route('/rh-stats', self._rh_stats, methods=[\"POST\"])",
    "repo_full_name": "smallcloudai/refact",
    "discussion_comments": [
      {
        "comment_id": "1478199978",
        "repo_full_name": "smallcloudai/refact",
        "pr_number": 291,
        "pr_file": "self_hosting_machinery/webgui/selfhost_statistics.py",
        "discussion_id": "1478199978",
        "commented_code": "@@ -56,12 +63,49 @@ def __init__(\n             },\n             media_type='application/json',\n             status_code=500)\n+        self.add_api_route('/rh-stats', self._rh_stats, methods=[\"POST\"])",
        "comment_created_at": "2024-02-05T13:04:01+00:00",
        "comment_author": "mitya52",
        "comment_body": "this route should use authorization",
        "pr_file_module": null
      },
      {
        "comment_id": "1478220419",
        "repo_full_name": "smallcloudai/refact",
        "pr_number": 291,
        "pr_file": "self_hosting_machinery/webgui/selfhost_statistics.py",
        "discussion_id": "1478199978",
        "commented_code": "@@ -56,12 +63,49 @@ def __init__(\n             },\n             media_type='application/json',\n             status_code=500)\n+        self.add_api_route('/rh-stats', self._rh_stats, methods=[\"POST\"])",
        "comment_created_at": "2024-02-05T13:11:26+00:00",
        "comment_author": "mitya52",
        "comment_body": "and yes, this should be GET request with Authorization header",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1384475787",
    "pr_number": 212,
    "pr_file": "self_hosting_machinery/webgui/webgui.py",
    "created_at": "2023-11-07T07:18:45+00:00",
    "commented_code": "return [\n             TabLorasRouter(),\n             PluginsRouter(),\n+            CAPSRouter(\n+                inference_queue=inference_queue,\n+                model_assigner=model_assigner),\n             CompletionsRouter(\n                 prefix=\"/v1\",\n                 id2ticket=id2ticket,",
    "repo_full_name": "smallcloudai/refact",
    "discussion_comments": [
      {
        "comment_id": "1384475787",
        "repo_full_name": "smallcloudai/refact",
        "pr_number": 212,
        "pr_file": "self_hosting_machinery/webgui/webgui.py",
        "discussion_id": "1384475787",
        "commented_code": "@@ -63,6 +64,9 @@ def _routers_list(\n         return [\n             TabLorasRouter(),\n             PluginsRouter(),\n+            CAPSRouter(\n+                inference_queue=inference_queue,\n+                model_assigner=model_assigner),\n             CompletionsRouter(\n                 prefix=\"/v1\",\n                 id2ticket=id2ticket,",
        "comment_created_at": "2023-11-07T07:18:45+00:00",
        "comment_author": "mitya52",
        "comment_body": "lets not to create a new router but move prefix into add_api_route",
        "pr_file_module": null
      },
      {
        "comment_id": "1384476619",
        "repo_full_name": "smallcloudai/refact",
        "pr_number": 212,
        "pr_file": "self_hosting_machinery/webgui/webgui.py",
        "discussion_id": "1384475787",
        "commented_code": "@@ -63,6 +64,9 @@ def _routers_list(\n         return [\n             TabLorasRouter(),\n             PluginsRouter(),\n+            CAPSRouter(\n+                inference_queue=inference_queue,\n+                model_assigner=model_assigner),\n             CompletionsRouter(\n                 prefix=\"/v1\",\n                 id2ticket=id2ticket,",
        "comment_created_at": "2023-11-07T07:19:45+00:00",
        "comment_author": "mitya52",
        "comment_body": "```\r\nself.add_api_route(\"/completions\", self._completions, methods=[\"POST\"])\r\n|\r\nV\r\nself.add_api_route(\"/v1/completions\", self._completions, methods=[\"POST\"])\r\n```",
        "pr_file_module": null
      }
    ]
  }
]