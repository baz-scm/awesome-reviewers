[
  {
    "discussion_id": "2157300374",
    "pr_number": 834,
    "pr_file": "refact-agent/engine/src/files_in_workspace.rs",
    "created_at": "2025-06-19T15:44:24+00:00",
    "commented_code": "}\n     }\n \n+    async fn on_dot_refact_dir_change(gcx_weak: Weak<ARwLock<GlobalContext>>, event: Event) {\n+        if let Some(gcx) = gcx_weak.clone().upgrade() {\n+            let dot_refact_folders_arc = gcx.read().await.documents_state.dot_refact_folders.clone();\n+            let mut dot_refact_folders = dot_refact_folders_arc.lock().await;\n+            match event.kind {",
    "repo_full_name": "smallcloudai/refact",
    "discussion_comments": [
      {
        "comment_id": "2157300374",
        "repo_full_name": "smallcloudai/refact",
        "pr_number": 834,
        "pr_file": "refact-agent/engine/src/files_in_workspace.rs",
        "discussion_id": "2157300374",
        "commented_code": "@@ -875,6 +922,46 @@ pub async fn file_watcher_event(event: Event, gcx_weak: Weak<ARwLock<GlobalConte\n         }\n     }\n \n+    async fn on_dot_refact_dir_change(gcx_weak: Weak<ARwLock<GlobalContext>>, event: Event) {\n+        if let Some(gcx) = gcx_weak.clone().upgrade() {\n+            let dot_refact_folders_arc = gcx.read().await.documents_state.dot_refact_folders.clone();\n+            let mut dot_refact_folders = dot_refact_folders_arc.lock().await;\n+            match event.kind {",
        "comment_created_at": "2025-06-19T15:44:24+00:00",
        "comment_author": "humbertoyusta",
        "comment_body": "Just small thing, but logic could be simplified by just always doing what it's done in the modification case, retain and then add if exists, could remove some branching, and then based on event.kind just log, but it's not very important ",
        "pr_file_module": null
      },
      {
        "comment_id": "2163766990",
        "repo_full_name": "smallcloudai/refact",
        "pr_number": 834,
        "pr_file": "refact-agent/engine/src/files_in_workspace.rs",
        "discussion_id": "2157300374",
        "commented_code": "@@ -875,6 +922,46 @@ pub async fn file_watcher_event(event: Event, gcx_weak: Weak<ARwLock<GlobalConte\n         }\n     }\n \n+    async fn on_dot_refact_dir_change(gcx_weak: Weak<ARwLock<GlobalContext>>, event: Event) {\n+        if let Some(gcx) = gcx_weak.clone().upgrade() {\n+            let dot_refact_folders_arc = gcx.read().await.documents_state.dot_refact_folders.clone();\n+            let mut dot_refact_folders = dot_refact_folders_arc.lock().await;\n+            match event.kind {",
        "comment_created_at": "2025-06-24T11:59:32+00:00",
        "comment_author": "MDario123",
        "comment_body": "fixed",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2102661054",
    "pr_number": 775,
    "pr_file": "refact-agent/engine/src/scratchpads/chat_passthrough.rs",
    "created_at": "2025-05-22T14:05:56+00:00",
    "commented_code": "};\n         let style = self.post.style.clone();\n         let mut at_tools = if !should_execute_remotely {",
    "repo_full_name": "smallcloudai/refact",
    "discussion_comments": [
      {
        "comment_id": "2102661054",
        "repo_full_name": "smallcloudai/refact",
        "pr_number": 775,
        "pr_file": "refact-agent/engine/src/scratchpads/chat_passthrough.rs",
        "discussion_id": "2102661054",
        "commented_code": "@@ -112,13 +115,21 @@ impl ScratchpadAbstract for ChatPassthrough {\n         };\n         let style = self.post.style.clone();\n         let mut at_tools = if !should_execute_remotely {",
        "comment_created_at": "2025-05-22T14:05:56+00:00",
        "comment_author": "humbertoyusta",
        "comment_body": "I would prefer to not load all tools again, but instead use always self.tools\r\n\r\nIt was an old issue, but since we're changing stuff there looks like good time to fix it",
        "pr_file_module": null
      }
    ]
  }
]