[
  {
    "discussion_id": "2162715644",
    "pr_number": 4284,
    "pr_file": "scripts/install-vsix.js",
    "created_at": "2025-06-24T00:06:11+00:00",
    "commented_code": "+const { execSync } = require(\"child_process\")\n+const fs = require(\"fs\")\n+\n+try {\n+\tconst packageJson = JSON.parse(fs.readFileSync(\"./src/package.json\", \"utf-8\"))\n+\tconst name = packageJson.name\n+\tconst version = packageJson.version\n+\tconst vsixFileName = `./bin/${name}-${version}.vsix`\n+\n+\ttry {\n+\t\texecSync(`code --uninstall-extension rooveterinaryinc.roo-cline`, { stdio: \"inherit\" })",
    "repo_full_name": "RooCodeInc/Roo-Code",
    "discussion_comments": [
      {
        "comment_id": "2162715644",
        "repo_full_name": "RooCodeInc/Roo-Code",
        "pr_number": 4284,
        "pr_file": "scripts/install-vsix.js",
        "discussion_id": "2162715644",
        "commented_code": "@@ -0,0 +1,21 @@\n+const { execSync } = require(\"child_process\")\n+const fs = require(\"fs\")\n+\n+try {\n+\tconst packageJson = JSON.parse(fs.readFileSync(\"./src/package.json\", \"utf-8\"))\n+\tconst name = packageJson.name\n+\tconst version = packageJson.version\n+\tconst vsixFileName = `./bin/${name}-${version}.vsix`\n+\n+\ttry {\n+\t\texecSync(`code --uninstall-extension rooveterinaryinc.roo-cline`, { stdio: \"inherit\" })",
        "comment_created_at": "2025-06-24T00:06:11+00:00",
        "comment_author": "daniel-lxs",
        "comment_body": "The script could use a few updates to make it more reliable and easier to maintain:\r\n\r\n1. **Hardcoded extension ID**: Right now, the extension ID is hardcoded as `rooveterinaryinc.roo-cline`. Instead, it should be built dynamically from the `package.json` to avoid issues if the name or publisher ever changes:\r\n\r\n   ```javascript\r\n   const publisher = packageJson.publisher\r\n   const extensionId = `${publisher}.${name}`\r\n   ```\r\n\r\n2. **Missing VSIX file check**: Before trying to install the VSIX file, it's a good idea to check that it actually exists. Otherwise, the script might fail without a clear reason. Here\u2019s a simple check to add:\r\n\r\n   ```javascript\r\n   if (!fs.existsSync(vsixFileName)) {\r\n     console.error(`VSIX file not found: ${vsixFileName}`)\r\n     console.error(\"Make sure the build completed successfully\")\r\n     process.exit(1)\r\n   }\r\n   ```\r\n\r\nAdding these checks will make the script more robust and easier to work with in the long run.\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "2164598402",
        "repo_full_name": "RooCodeInc/Roo-Code",
        "pr_number": 4284,
        "pr_file": "scripts/install-vsix.js",
        "discussion_id": "2162715644",
        "commented_code": "@@ -0,0 +1,21 @@\n+const { execSync } = require(\"child_process\")\n+const fs = require(\"fs\")\n+\n+try {\n+\tconst packageJson = JSON.parse(fs.readFileSync(\"./src/package.json\", \"utf-8\"))\n+\tconst name = packageJson.name\n+\tconst version = packageJson.version\n+\tconst vsixFileName = `./bin/${name}-${version}.vsix`\n+\n+\ttry {\n+\t\texecSync(`code --uninstall-extension rooveterinaryinc.roo-cline`, { stdio: \"inherit\" })",
        "comment_created_at": "2025-06-24T18:00:06+00:00",
        "comment_author": "devxpain",
        "comment_body": "Thanks again for the suggestion. I\u2019ve already updated it based on your feedback.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2175272364",
    "pr_number": 4284,
    "pr_file": "scripts/install-vsix.js",
    "created_at": "2025-06-30T14:52:03+00:00",
    "commented_code": "+const { execSync } = require(\"child_process\")\n+const fs = require(\"fs\")\n+const readline = require(\"readline\")\n+\n+// detect \u201cyes\u201d flags\n+const autoYes = process.argv.includes(\"-y\")\n+\n+const rl = readline.createInterface({\n+\tinput: process.stdin,\n+\toutput: process.stdout,\n+})\n+\n+const askQuestion = (question) => {\n+\treturn new Promise((resolve) => {\n+\t\trl.question(question, (answer) => {\n+\t\t\tresolve(answer)\n+\t\t})\n+\t})\n+}\n+\n+async function main() {\n+\ttry {\n+\t\tconst packageJson = JSON.parse(fs.readFileSync(\"./src/package.json\", \"utf-8\"))\n+\t\tconst name = packageJson.name\n+\t\tconst version = packageJson.version\n+\t\tconst vsixFileName = `./bin/${name}-${version}.vsix`\n+\t\tconst publisher = packageJson.publisher\n+\t\tconst extensionId = `${publisher}.${name}`\n+\n+\t\tconsole.log(\"\n\ud83d\ude80 Roo Code VSIX Installer\")\n+\t\tconsole.log(\"========================\")\n+\t\tconsole.log(\"\nThis script will:\")\n+\t\tconsole.log(\"1. Uninstall any existing version of the Roo Code extension\")\n+\t\tconsole.log(\"2. Install the newly built VSIX package\")\n+\t\tconsole.log(`\nExtension: ${extensionId}`)\n+\t\tconsole.log(`VSIX file: ${vsixFileName}`)\n+\n+\t\t// skip prompt if auto-yes\n+\t\tconst answer = autoYes ? \"y\" : await askQuestion(\"\nDo you wish to continue? (y/n): \")\n+\n+\t\tif (answer.toLowerCase() !== \"y\") {\n+\t\t\tconsole.log(\"Installation cancelled.\")\n+\t\t\trl.close()\n+\t\t\tprocess.exit(0)\n+\t\t}\n+\n+\t\tconsole.log(\"\nProceeding with installation...\")\n+\n+\t\ttry {\n+\t\t\texecSync(`code --uninstall-extension ${extensionId}`, { stdio: \"inherit\" })",
    "repo_full_name": "RooCodeInc/Roo-Code",
    "discussion_comments": [
      {
        "comment_id": "2175272364",
        "repo_full_name": "RooCodeInc/Roo-Code",
        "pr_number": 4284,
        "pr_file": "scripts/install-vsix.js",
        "discussion_id": "2175272364",
        "commented_code": "@@ -0,0 +1,76 @@\n+const { execSync } = require(\"child_process\")\n+const fs = require(\"fs\")\n+const readline = require(\"readline\")\n+\n+// detect \u201cyes\u201d flags\n+const autoYes = process.argv.includes(\"-y\")\n+\n+const rl = readline.createInterface({\n+\tinput: process.stdin,\n+\toutput: process.stdout,\n+})\n+\n+const askQuestion = (question) => {\n+\treturn new Promise((resolve) => {\n+\t\trl.question(question, (answer) => {\n+\t\t\tresolve(answer)\n+\t\t})\n+\t})\n+}\n+\n+async function main() {\n+\ttry {\n+\t\tconst packageJson = JSON.parse(fs.readFileSync(\"./src/package.json\", \"utf-8\"))\n+\t\tconst name = packageJson.name\n+\t\tconst version = packageJson.version\n+\t\tconst vsixFileName = `./bin/${name}-${version}.vsix`\n+\t\tconst publisher = packageJson.publisher\n+\t\tconst extensionId = `${publisher}.${name}`\n+\n+\t\tconsole.log(\"\\n\ud83d\ude80 Roo Code VSIX Installer\")\n+\t\tconsole.log(\"========================\")\n+\t\tconsole.log(\"\\nThis script will:\")\n+\t\tconsole.log(\"1. Uninstall any existing version of the Roo Code extension\")\n+\t\tconsole.log(\"2. Install the newly built VSIX package\")\n+\t\tconsole.log(`\\nExtension: ${extensionId}`)\n+\t\tconsole.log(`VSIX file: ${vsixFileName}`)\n+\n+\t\t// skip prompt if auto-yes\n+\t\tconst answer = autoYes ? \"y\" : await askQuestion(\"\\nDo you wish to continue? (y/n): \")\n+\n+\t\tif (answer.toLowerCase() !== \"y\") {\n+\t\t\tconsole.log(\"Installation cancelled.\")\n+\t\t\trl.close()\n+\t\t\tprocess.exit(0)\n+\t\t}\n+\n+\t\tconsole.log(\"\\nProceeding with installation...\")\n+\n+\t\ttry {\n+\t\t\texecSync(`code --uninstall-extension ${extensionId}`, { stdio: \"inherit\" })",
        "comment_created_at": "2025-06-30T14:52:03+00:00",
        "comment_author": "mrubens",
        "comment_body": "I wonder if it should also ask you for the editor command (code/cursor/code-insiders/etc, defaulting to code)",
        "pr_file_module": null
      }
    ]
  }
]