[
  {
    "discussion_id": "2223256261",
    "pr_number": 5918,
    "pr_file": "webview-ui/src/components/chat/ChatTextArea.tsx",
    "created_at": "2025-07-22T17:05:02+00:00",
    "commented_code": "}\n \t\t}, [showContextMenu])\n \n+\t\t// Announce selected menu item for screen readers\n+\t\tuseEffect(() => {\n+\t\t\tif (showContextMenu && selectedMenuIndex >= 0) {\n+\t\t\t\tconst options = getContextMenuOptions(\n+\t\t\t\t\tsearchQuery,\n+\t\t\t\t\tinputValue,\n+\t\t\t\t\tselectedType,\n+\t\t\t\t\tqueryItems,\n+\t\t\t\t\tfileSearchResults,\n+\t\t\t\t\tallModes,\n+\t\t\t\t)\n+\t\t\t\tconst selectedOption = options[selectedMenuIndex]\n+\t\t\t\tif (selectedOption && selectedOption.type !== ContextMenuOptionType.NoResults) {\n+\t\t\t\t\tlet announcement = \"\"\n+\t\t\t\t\tswitch (selectedOption.type) {\n+\t\t\t\t\t\tcase ContextMenuOptionType.File:\n+\t\t\t\t\t\tcase ContextMenuOptionType.OpenedFile:\n+\t\t\t\t\t\t\tannouncement = `File: ${selectedOption.value || selectedOption.label}, ${selectedMenuIndex + 1} of ${options.length}`",
    "repo_full_name": "RooCodeInc/Roo-Code",
    "discussion_comments": [
      {
        "comment_id": "2223256261",
        "repo_full_name": "RooCodeInc/Roo-Code",
        "pr_number": 5918,
        "pr_file": "webview-ui/src/components/chat/ChatTextArea.tsx",
        "discussion_id": "2223256261",
        "commented_code": "@@ -559,6 +568,48 @@ const ChatTextArea = forwardRef<HTMLTextAreaElement, ChatTextAreaProps>(\n \t\t\t}\n \t\t}, [showContextMenu])\n \n+\t\t// Announce selected menu item for screen readers\n+\t\tuseEffect(() => {\n+\t\t\tif (showContextMenu && selectedMenuIndex >= 0) {\n+\t\t\t\tconst options = getContextMenuOptions(\n+\t\t\t\t\tsearchQuery,\n+\t\t\t\t\tinputValue,\n+\t\t\t\t\tselectedType,\n+\t\t\t\t\tqueryItems,\n+\t\t\t\t\tfileSearchResults,\n+\t\t\t\t\tallModes,\n+\t\t\t\t)\n+\t\t\t\tconst selectedOption = options[selectedMenuIndex]\n+\t\t\t\tif (selectedOption && selectedOption.type !== ContextMenuOptionType.NoResults) {\n+\t\t\t\t\tlet announcement = \"\"\n+\t\t\t\t\tswitch (selectedOption.type) {\n+\t\t\t\t\t\tcase ContextMenuOptionType.File:\n+\t\t\t\t\t\tcase ContextMenuOptionType.OpenedFile:\n+\t\t\t\t\t\t\tannouncement = `File: ${selectedOption.value || selectedOption.label}, ${selectedMenuIndex + 1} of ${options.length}`",
        "comment_created_at": "2025-07-22T17:05:02+00:00",
        "comment_author": "daniel-lxs",
        "comment_body": "All these announcement strings need to be translated. Consider creating a helper function that uses the translation system:\n\n```typescript\nconst getAnnouncementText = (option: ContextMenuQueryItem, index: number, total: number) => {\n  const position = t(\"chat:contextMenu.position\", { current: index + 1, total });\n  \n  switch (option.type) {\n    case ContextMenuOptionType.File:\n    case ContextMenuOptionType.OpenedFile:\n      return t(\"chat:contextMenu.announceFile\", { \n        name: option.value || option.label, \n        position \n      });\n    // ... other cases\n  }\n};\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2223256491",
    "pr_number": 5918,
    "pr_file": "webview-ui/src/components/chat/ChatTextArea.tsx",
    "created_at": "2025-07-22T17:05:10+00:00",
    "commented_code": "</div>\n \t\t\t\t\t\t)}\n \n+\t\t\t\t\t\t{/* Live region for screen reader announcements */}\n+\t\t\t\t\t\t<div\n+\t\t\t\t\t\t\taria-live=\"polite\"\n+\t\t\t\t\t\t\taria-atomic=\"true\"\n+\t\t\t\t\t\t\tclassName=\"sr-only\"\n+\t\t\t\t\t\t\tstyle={{\n+\t\t\t\t\t\t\t\tposition: \"absolute\",\n+\t\t\t\t\t\t\t\tleft: \"-10000px\",\n+\t\t\t\t\t\t\t\twidth: \"1px\",\n+\t\t\t\t\t\t\t\theight: \"1px\",\n+\t\t\t\t\t\t\t\toverflow: \"hidden\",\n+\t\t\t\t\t\t\t}}>\n+\t\t\t\t\t\t\t{screenReaderAnnouncement}\n+\t\t\t\t\t\t</div>\n+\n+\t\t\t\t\t\t{/* Instructions for screen readers */}\n+\t\t\t\t\t\t<div id=\"context-menu-instructions\" className=\"sr-only\">\n+\t\t\t\t\t\t\tType @ to open file insertion menu. Use arrow keys to navigate, Enter to select, Escape to close.",
    "repo_full_name": "RooCodeInc/Roo-Code",
    "discussion_comments": [
      {
        "comment_id": "2223256491",
        "repo_full_name": "RooCodeInc/Roo-Code",
        "pr_number": 5918,
        "pr_file": "webview-ui/src/components/chat/ChatTextArea.tsx",
        "discussion_id": "2223256491",
        "commented_code": "@@ -1249,6 +1304,26 @@ const ChatTextArea = forwardRef<HTMLTextAreaElement, ChatTextAreaProps>(\n \t\t\t\t\t\t\t</div>\n \t\t\t\t\t\t)}\n \n+\t\t\t\t\t\t{/* Live region for screen reader announcements */}\n+\t\t\t\t\t\t<div\n+\t\t\t\t\t\t\taria-live=\"polite\"\n+\t\t\t\t\t\t\taria-atomic=\"true\"\n+\t\t\t\t\t\t\tclassName=\"sr-only\"\n+\t\t\t\t\t\t\tstyle={{\n+\t\t\t\t\t\t\t\tposition: \"absolute\",\n+\t\t\t\t\t\t\t\tleft: \"-10000px\",\n+\t\t\t\t\t\t\t\twidth: \"1px\",\n+\t\t\t\t\t\t\t\theight: \"1px\",\n+\t\t\t\t\t\t\t\toverflow: \"hidden\",\n+\t\t\t\t\t\t\t}}>\n+\t\t\t\t\t\t\t{screenReaderAnnouncement}\n+\t\t\t\t\t\t</div>\n+\n+\t\t\t\t\t\t{/* Instructions for screen readers */}\n+\t\t\t\t\t\t<div id=\"context-menu-instructions\" className=\"sr-only\">\n+\t\t\t\t\t\t\tType @ to open file insertion menu. Use arrow keys to navigate, Enter to select, Escape to close.",
        "comment_created_at": "2025-07-22T17:05:10+00:00",
        "comment_author": "daniel-lxs",
        "comment_body": "This instruction text should also be translated:\n\n```typescript\n<div id=\"context-menu-instructions\" className=\"sr-only\">\n  {t(\"chat:contextMenu.instructions\")}\n</div>\n```",
        "pr_file_module": null
      }
    ]
  }
]