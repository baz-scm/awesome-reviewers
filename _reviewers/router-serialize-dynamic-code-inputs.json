[
  {
    "discussion_id": "1922310198",
    "pr_number": 2698,
    "pr_file": "packages/react-router/src/router.ts",
    "created_at": "2025-01-20T12:12:17+00:00",
    "commented_code": "'Key has already been streamed: ' + key,\n     )\n \n-    this.streamedKeys.add(key)\n+    this.emit({ type: 'onStreamedValue', key })\n     this.injectScript(\n-      `__TSR__.streamedValues['${key}'] = { value: ${this.serializer?.(this.options.transformer.stringify(value))}}`,\n+      `__TSR__.streamedValues.push([${this.serializer?.(key)}, ${this.serializer?.(this.options.transformer.stringify(value))}])`,",
    "repo_full_name": "TanStack/router",
    "discussion_comments": [
      {
        "comment_id": "1922310198",
        "repo_full_name": "TanStack/router",
        "pr_number": 2698,
        "pr_file": "packages/react-router/src/router.ts",
        "discussion_id": "1922310198",
        "commented_code": "@@ -3145,9 +3166,9 @@ ${jsesc(script, { quotes: 'backtick' })}\\`)`\n       'Key has already been streamed: ' + key,\n     )\n \n-    this.streamedKeys.add(key)\n+    this.emit({ type: 'onStreamedValue', key })\n     this.injectScript(\n-      `__TSR__.streamedValues['${key}'] = { value: ${this.serializer?.(this.options.transformer.stringify(value))}}`,\n+      `__TSR__.streamedValues.push([${this.serializer?.(key)}, ${this.serializer?.(this.options.transformer.stringify(value))}])`,",
        "comment_created_at": "2025-01-20T12:12:17+00:00",
        "comment_author": "phryneas",
        "comment_body": "`key` was not serialized before, so keys containing `'` could actually cause JavaScript errors or code injection.",
        "pr_file_module": null
      }
    ]
  }
]