[
  {
    "discussion_id": "2222611100",
    "pr_number": 144305,
    "pr_file": ".github/workflows/ci.yml",
    "created_at": "2025-07-22T13:51:21+00:00",
    "commented_code": "echo \"$HOME/.cargo/bin\" >> $GITHUB_PATH\n           fi\n \n+      # Always print disk usage, even for jobs that don't free up disk space.\n+      - name: print disk usage\n+        run: |\n+          echo \"disk usage:\"\n+          df -h",
    "repo_full_name": "rust-lang/rust",
    "discussion_comments": [
      {
        "comment_id": "2222611100",
        "repo_full_name": "rust-lang/rust",
        "pr_number": 144305,
        "pr_file": ".github/workflows/ci.yml",
        "discussion_id": "2222611100",
        "commented_code": "@@ -109,6 +109,12 @@ jobs:\n             echo \"$HOME/.cargo/bin\" >> $GITHUB_PATH\n           fi\n \n+      # Always print disk usage, even for jobs that don't free up disk space.\n+      - name: print disk usage\n+        run: |\n+          echo \"disk usage:\"\n+          df -h",
        "comment_created_at": "2025-07-22T13:51:21+00:00",
        "comment_author": "marcoieni",
        "comment_body": "the same step is present at line 255.\nWhy do we need to duplicate it?",
        "pr_file_module": null
      },
      {
        "comment_id": "2222621050",
        "repo_full_name": "rust-lang/rust",
        "pr_number": 144305,
        "pr_file": ".github/workflows/ci.yml",
        "discussion_id": "2222611100",
        "commented_code": "@@ -109,6 +109,12 @@ jobs:\n             echo \"$HOME/.cargo/bin\" >> $GITHUB_PATH\n           fi\n \n+      # Always print disk usage, even for jobs that don't free up disk space.\n+      - name: print disk usage\n+        run: |\n+          echo \"disk usage:\"\n+          df -h",
        "comment_created_at": "2025-07-22T13:54:49+00:00",
        "comment_author": "ChrisDenton",
        "comment_body": "So we have a before and after comparison. One thing I encountered when first investigating this is that I didn't know how much of the space was used up by the OS and pre-installed software.",
        "pr_file_module": null
      },
      {
        "comment_id": "2222634111",
        "repo_full_name": "rust-lang/rust",
        "pr_number": 144305,
        "pr_file": ".github/workflows/ci.yml",
        "discussion_id": "2222611100",
        "commented_code": "@@ -109,6 +109,12 @@ jobs:\n             echo \"$HOME/.cargo/bin\" >> $GITHUB_PATH\n           fi\n \n+      # Always print disk usage, even for jobs that don't free up disk space.\n+      - name: print disk usage\n+        run: |\n+          echo \"disk usage:\"\n+          df -h",
        "comment_created_at": "2025-07-22T13:59:15+00:00",
        "comment_author": "marcoieni",
        "comment_body": "the linux runners print this info in the free disk step.\n\nWhat do you think about doing the same here? \ud83e\udd14 So that we avoid adding an extra step.\nI don't have a strong opinion here anyway\n\n<img width=\"2808\" height=\"2940\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f671a31a-88ac-465c-b75f-3ae03e7c2af4\" />",
        "pr_file_module": null
      },
      {
        "comment_id": "2222778171",
        "repo_full_name": "rust-lang/rust",
        "pr_number": 144305,
        "pr_file": ".github/workflows/ci.yml",
        "discussion_id": "2222611100",
        "commented_code": "@@ -109,6 +109,12 @@ jobs:\n             echo \"$HOME/.cargo/bin\" >> $GITHUB_PATH\n           fi\n \n+      # Always print disk usage, even for jobs that don't free up disk space.\n+      - name: print disk usage\n+        run: |\n+          echo \"disk usage:\"\n+          df -h",
        "comment_created_at": "2025-07-22T14:42:17+00:00",
        "comment_author": "ChrisDenton",
        "comment_body": "It is almost entirely redundant if the free disk space step runs but that is not run for all runners. We could have an `if: !matrix.free_disk` step that just prints the disk space.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2222616254",
    "pr_number": 144305,
    "pr_file": "src/ci/github-actions/jobs.yml",
    "created_at": "2025-07-22T13:53:02+00:00",
    "commented_code": "<<: *base-job\n \n   - &job-windows\n-    os: windows-2022\n+    os: windows-2025\n+    free_disk: true\n     <<: *base-job\n \n   # NOTE: windows-2025 has less disk space available than windows-2022,\n   # because the D drive is missing.\n   - &job-windows-25\n     os: windows-2025\n+    free_disk: true",
    "repo_full_name": "rust-lang/rust",
    "discussion_comments": [
      {
        "comment_id": "2222616254",
        "repo_full_name": "rust-lang/rust",
        "pr_number": 144305,
        "pr_file": "src/ci/github-actions/jobs.yml",
        "discussion_id": "2222616254",
        "commented_code": "@@ -31,13 +31,15 @@ runners:\n     <<: *base-job\n \n   - &job-windows\n-    os: windows-2022\n+    os: windows-2025\n+    free_disk: true\n     <<: *base-job\n \n   # NOTE: windows-2025 has less disk space available than windows-2022,\n   # because the D drive is missing.\n   - &job-windows-25\n     os: windows-2025\n+    free_disk: true",
        "comment_created_at": "2025-07-22T13:53:02+00:00",
        "comment_author": "marcoieni",
        "comment_body": "if `job-windows` switches to windows-2025, we can delete `job-windows-25` entirely.\nBut we need to test all the jobs in the try build.",
        "pr_file_module": null
      }
    ]
  }
]