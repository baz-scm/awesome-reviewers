[
  {
    "discussion_id": "2455917125",
    "pr_number": 1082,
    "pr_file": ".github/workflows/pr-size-labeler.yml",
    "created_at": "2025-10-23T16:28:57+00:00",
    "commented_code": "+name: PR Size Labeler\n+\n+on:\n+  pull_request_target:\n+    branches: main\n+\n+jobs:\n+  authorization-check:\n+    permissions: read-all\n+    runs-on: ubuntu-latest\n+    outputs:\n+      approval-env: ${{ steps.collab-check.outputs.result }}\n+    steps:\n+      - name: Collaborator Check\n+        uses: actions/github-script@v8\n+        id: collab-check\n+        with:\n+          result-encoding: string\n+          script: |\n+            try {\n+              const permissionResponse = await github.rest.repos.getCollaboratorPermissionLevel({\n+                owner: context.repo.owner,\n+                repo: context.repo.repo,\n+                username: context.payload.pull_request.user.login,\n+              });\n+              const permission = permissionResponse.data.permission;\n+              const hasWriteAccess = ['write', 'admin'].includes(permission);\n+              if (!hasWriteAccess) {\n+                console.log(`User ${context.payload.pull_request.user.login} does not have write access`);\n+                return \"manual-approval\"\n+              } else {\n+                console.log(`Verified ${context.payload.pull_request.user.login} has write access. Auto approving.`)\n+                return \"auto-approve\"\n+              }\n+            } catch (error) {\n+              console.log(`${context.payload.pull_request.user.login} does not have write access.`)\n+              return \"manual-approval\"\n+            }\n+\n+  size-label:\n+    runs-on: ubuntu-latest\n+    needs: authorization-check\n+    if: needs.authorization-check.outputs.approval-env == 'auto-approve'\n+    permissions:\n+      contents: read\n+      pull-requests: write\n+    steps:\n+      - uses: actions/checkout@v4\n+        with:\n+          fetch-depth: 0\n+      - name: Calculate PR size and apply label\n+        uses: actions/github-script@v8\n+        with:\n+          script: |\n+            const pr = context.payload.pull_request;\n+            const totalChanges = pr.additions + pr.deletions;\n+            \n+            let sizeLabel;\n+            if (totalChanges <= 20) sizeLabel = 'size/xs';\n+            else if (totalChanges <= 100) sizeLabel = 'size/s';\n+            else if (totalChanges <= 500) sizeLabel = 'size/m';\n+            else if (totalChanges <= 1000) sizeLabel = 'size/l';\n+            else {\n+              sizeLabel = 'size/xl';\n+              core.setFailed(`PR is too large (${totalChanges} lines). Please split into smaller PRs.`);",
    "repo_full_name": "strands-agents/sdk-python",
    "discussion_comments": [
      {
        "comment_id": "2455917125",
        "repo_full_name": "strands-agents/sdk-python",
        "pr_number": 1082,
        "pr_file": ".github/workflows/pr-size-labeler.yml",
        "discussion_id": "2455917125",
        "commented_code": "@@ -0,0 +1,73 @@\n+name: PR Size Labeler\n+\n+on:\n+  pull_request_target:\n+    branches: main\n+\n+jobs:\n+  authorization-check:\n+    permissions: read-all\n+    runs-on: ubuntu-latest\n+    outputs:\n+      approval-env: ${{ steps.collab-check.outputs.result }}\n+    steps:\n+      - name: Collaborator Check\n+        uses: actions/github-script@v8\n+        id: collab-check\n+        with:\n+          result-encoding: string\n+          script: |\n+            try {\n+              const permissionResponse = await github.rest.repos.getCollaboratorPermissionLevel({\n+                owner: context.repo.owner,\n+                repo: context.repo.repo,\n+                username: context.payload.pull_request.user.login,\n+              });\n+              const permission = permissionResponse.data.permission;\n+              const hasWriteAccess = ['write', 'admin'].includes(permission);\n+              if (!hasWriteAccess) {\n+                console.log(`User ${context.payload.pull_request.user.login} does not have write access`);\n+                return \"manual-approval\"\n+              } else {\n+                console.log(`Verified ${context.payload.pull_request.user.login} has write access. Auto approving.`)\n+                return \"auto-approve\"\n+              }\n+            } catch (error) {\n+              console.log(`${context.payload.pull_request.user.login} does not have write access.`)\n+              return \"manual-approval\"\n+            }\n+\n+  size-label:\n+    runs-on: ubuntu-latest\n+    needs: authorization-check\n+    if: needs.authorization-check.outputs.approval-env == 'auto-approve'\n+    permissions:\n+      contents: read\n+      pull-requests: write\n+    steps:\n+      - uses: actions/checkout@v4\n+        with:\n+          fetch-depth: 0\n+      - name: Calculate PR size and apply label\n+        uses: actions/github-script@v8\n+        with:\n+          script: |\n+            const pr = context.payload.pull_request;\n+            const totalChanges = pr.additions + pr.deletions;\n+            \n+            let sizeLabel;\n+            if (totalChanges <= 20) sizeLabel = 'size/xs';\n+            else if (totalChanges <= 100) sizeLabel = 'size/s';\n+            else if (totalChanges <= 500) sizeLabel = 'size/m';\n+            else if (totalChanges <= 1000) sizeLabel = 'size/l';\n+            else {\n+              sizeLabel = 'size/xl';\n+              core.setFailed(`PR is too large (${totalChanges} lines). Please split into smaller PRs.`);",
        "comment_created_at": "2025-10-23T16:28:57+00:00",
        "comment_author": "Unshure",
        "comment_body": "Lets not fail, but just put the label",
        "pr_file_module": null
      },
      {
        "comment_id": "2455930251",
        "repo_full_name": "strands-agents/sdk-python",
        "pr_number": 1082,
        "pr_file": ".github/workflows/pr-size-labeler.yml",
        "discussion_id": "2455917125",
        "commented_code": "@@ -0,0 +1,73 @@\n+name: PR Size Labeler\n+\n+on:\n+  pull_request_target:\n+    branches: main\n+\n+jobs:\n+  authorization-check:\n+    permissions: read-all\n+    runs-on: ubuntu-latest\n+    outputs:\n+      approval-env: ${{ steps.collab-check.outputs.result }}\n+    steps:\n+      - name: Collaborator Check\n+        uses: actions/github-script@v8\n+        id: collab-check\n+        with:\n+          result-encoding: string\n+          script: |\n+            try {\n+              const permissionResponse = await github.rest.repos.getCollaboratorPermissionLevel({\n+                owner: context.repo.owner,\n+                repo: context.repo.repo,\n+                username: context.payload.pull_request.user.login,\n+              });\n+              const permission = permissionResponse.data.permission;\n+              const hasWriteAccess = ['write', 'admin'].includes(permission);\n+              if (!hasWriteAccess) {\n+                console.log(`User ${context.payload.pull_request.user.login} does not have write access`);\n+                return \"manual-approval\"\n+              } else {\n+                console.log(`Verified ${context.payload.pull_request.user.login} has write access. Auto approving.`)\n+                return \"auto-approve\"\n+              }\n+            } catch (error) {\n+              console.log(`${context.payload.pull_request.user.login} does not have write access.`)\n+              return \"manual-approval\"\n+            }\n+\n+  size-label:\n+    runs-on: ubuntu-latest\n+    needs: authorization-check\n+    if: needs.authorization-check.outputs.approval-env == 'auto-approve'\n+    permissions:\n+      contents: read\n+      pull-requests: write\n+    steps:\n+      - uses: actions/checkout@v4\n+        with:\n+          fetch-depth: 0\n+      - name: Calculate PR size and apply label\n+        uses: actions/github-script@v8\n+        with:\n+          script: |\n+            const pr = context.payload.pull_request;\n+            const totalChanges = pr.additions + pr.deletions;\n+            \n+            let sizeLabel;\n+            if (totalChanges <= 20) sizeLabel = 'size/xs';\n+            else if (totalChanges <= 100) sizeLabel = 'size/s';\n+            else if (totalChanges <= 500) sizeLabel = 'size/m';\n+            else if (totalChanges <= 1000) sizeLabel = 'size/l';\n+            else {\n+              sizeLabel = 'size/xl';\n+              core.setFailed(`PR is too large (${totalChanges} lines). Please split into smaller PRs.`);",
        "comment_created_at": "2025-10-23T16:31:33+00:00",
        "comment_author": "dbschmigelski",
        "comment_body": "I don't think that is a strong enough signal to the author. \n\nWe should be merging large PRs in exceptional cases where an override is warranted",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2460629288",
    "pr_number": 1082,
    "pr_file": ".github/workflows/pr-size-labeler.yml",
    "created_at": "2025-10-24T13:58:56+00:00",
    "commented_code": "+name: PR Size Labeler\n+\n+on:\n+  pull_request_target:\n+    branches: main\n+\n+jobs:\n+  label-size:\n+    runs-on: ubuntu-latest\n+    permissions:\n+      pull-requests: write\n+      issues: write\n+    steps:\n+      - name: Calculate PR size and apply label\n+        uses: actions/github-script@v8\n+        with:\n+          script: |\n+            const pr = context.payload.pull_request;\n+            const totalChanges = pr.additions + pr.deletions;\n+            \n+            // Remove existing size labels\n+            const labels = await github.rest.issues.listLabelsOnIssue({\n+              owner: context.repo.owner,\n+              repo: context.repo.repo,\n+              issue_number: context.payload.pull_request.number\n+            });\n+            \n+            for (const label of labels.data) {\n+              if (label.name.startsWith('size/')) {\n+                await github.rest.issues.removeLabel({\n+                  owner: context.repo.owner,\n+                  repo: context.repo.repo,\n+                  issue_number: context.payload.pull_request.number,\n+                  name: label.name\n+                });\n+              }\n+            }\n+            \n+            // Determine and apply new size label\n+            let sizeLabel;\n+            if (totalChanges <= 20) sizeLabel = 'size/xs';\n+            else if (totalChanges <= 100) sizeLabel = 'size/s';\n+            else if (totalChanges <= 500) sizeLabel = 'size/m';\n+            else if (totalChanges <= 1000) sizeLabel = 'size/l';\n+            else {\n+              sizeLabel = 'size/xl';\n+            }\n+            \n+            await github.rest.issues.addLabels({\n+              owner: context.repo.owner,\n+              repo: context.repo.repo,\n+              issue_number: context.payload.pull_request.number,\n+              labels: [sizeLabel]\n+            });\n+\n+            if (sizeLabel === 'size/xl') {\n+              core.setFailed(`PR is too large (${totalChanges} lines). Please split into smaller PRs.`);",
    "repo_full_name": "strands-agents/sdk-python",
    "discussion_comments": [
      {
        "comment_id": "2460629288",
        "repo_full_name": "strands-agents/sdk-python",
        "pr_number": 1082,
        "pr_file": ".github/workflows/pr-size-labeler.yml",
        "discussion_id": "2460629288",
        "commented_code": "@@ -0,0 +1,58 @@\n+name: PR Size Labeler\n+\n+on:\n+  pull_request_target:\n+    branches: main\n+\n+jobs:\n+  label-size:\n+    runs-on: ubuntu-latest\n+    permissions:\n+      pull-requests: write\n+      issues: write\n+    steps:\n+      - name: Calculate PR size and apply label\n+        uses: actions/github-script@v8\n+        with:\n+          script: |\n+            const pr = context.payload.pull_request;\n+            const totalChanges = pr.additions + pr.deletions;\n+            \n+            // Remove existing size labels\n+            const labels = await github.rest.issues.listLabelsOnIssue({\n+              owner: context.repo.owner,\n+              repo: context.repo.repo,\n+              issue_number: context.payload.pull_request.number\n+            });\n+            \n+            for (const label of labels.data) {\n+              if (label.name.startsWith('size/')) {\n+                await github.rest.issues.removeLabel({\n+                  owner: context.repo.owner,\n+                  repo: context.repo.repo,\n+                  issue_number: context.payload.pull_request.number,\n+                  name: label.name\n+                });\n+              }\n+            }\n+            \n+            // Determine and apply new size label\n+            let sizeLabel;\n+            if (totalChanges <= 20) sizeLabel = 'size/xs';\n+            else if (totalChanges <= 100) sizeLabel = 'size/s';\n+            else if (totalChanges <= 500) sizeLabel = 'size/m';\n+            else if (totalChanges <= 1000) sizeLabel = 'size/l';\n+            else {\n+              sizeLabel = 'size/xl';\n+            }\n+            \n+            await github.rest.issues.addLabels({\n+              owner: context.repo.owner,\n+              repo: context.repo.repo,\n+              issue_number: context.payload.pull_request.number,\n+              labels: [sizeLabel]\n+            });\n+\n+            if (sizeLabel === 'size/xl') {\n+              core.setFailed(`PR is too large (${totalChanges} lines). Please split into smaller PRs.`);",
        "comment_created_at": "2025-10-24T13:58:56+00:00",
        "comment_author": "pgrayy",
        "comment_body": "I'm okay with this as long as we maintain the ability to override because I'm guessing we will want a smarter check before we always hard block. For example, I personally would say that docstrings don't carry as much weight as the code in terms of cognitive load and so would want them subtracted in some way from the line count.",
        "pr_file_module": null
      },
      {
        "comment_id": "2460669518",
        "repo_full_name": "strands-agents/sdk-python",
        "pr_number": 1082,
        "pr_file": ".github/workflows/pr-size-labeler.yml",
        "discussion_id": "2460629288",
        "commented_code": "@@ -0,0 +1,58 @@\n+name: PR Size Labeler\n+\n+on:\n+  pull_request_target:\n+    branches: main\n+\n+jobs:\n+  label-size:\n+    runs-on: ubuntu-latest\n+    permissions:\n+      pull-requests: write\n+      issues: write\n+    steps:\n+      - name: Calculate PR size and apply label\n+        uses: actions/github-script@v8\n+        with:\n+          script: |\n+            const pr = context.payload.pull_request;\n+            const totalChanges = pr.additions + pr.deletions;\n+            \n+            // Remove existing size labels\n+            const labels = await github.rest.issues.listLabelsOnIssue({\n+              owner: context.repo.owner,\n+              repo: context.repo.repo,\n+              issue_number: context.payload.pull_request.number\n+            });\n+            \n+            for (const label of labels.data) {\n+              if (label.name.startsWith('size/')) {\n+                await github.rest.issues.removeLabel({\n+                  owner: context.repo.owner,\n+                  repo: context.repo.repo,\n+                  issue_number: context.payload.pull_request.number,\n+                  name: label.name\n+                });\n+              }\n+            }\n+            \n+            // Determine and apply new size label\n+            let sizeLabel;\n+            if (totalChanges <= 20) sizeLabel = 'size/xs';\n+            else if (totalChanges <= 100) sizeLabel = 'size/s';\n+            else if (totalChanges <= 500) sizeLabel = 'size/m';\n+            else if (totalChanges <= 1000) sizeLabel = 'size/l';\n+            else {\n+              sizeLabel = 'size/xl';\n+            }\n+            \n+            await github.rest.issues.addLabels({\n+              owner: context.repo.owner,\n+              repo: context.repo.repo,\n+              issue_number: context.payload.pull_request.number,\n+              labels: [sizeLabel]\n+            });\n+\n+            if (sizeLabel === 'size/xl') {\n+              core.setFailed(`PR is too large (${totalChanges} lines). Please split into smaller PRs.`);",
        "comment_created_at": "2025-10-24T14:06:17+00:00",
        "comment_author": "dbschmigelski",
        "comment_body": "Yeah I think this will be a work in progress where we arrive at a good number. I mentioned this in Nick's comment\n\n> him: Lets not fail, but just put the label\n\n> me: I don't think that is a strong enough signal to the author.\n> We should be merging large PRs in exceptional cases where an override is warranted\n",
        "pr_file_module": null
      }
    ]
  }
]