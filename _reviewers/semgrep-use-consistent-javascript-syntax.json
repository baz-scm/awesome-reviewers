[
  {
    "discussion_id": "1581404720",
    "pr_number": 10172,
    "pr_file": "js/node_shared/XMLHttpRequest.js",
    "created_at": "2024-04-26T18:41:24+00:00",
    "commented_code": "headers[\"Content-Length\"] = 0;\n     }\n \n+    // get if HTTP_PROXY or HTTPS_PROXY is set\n+    var proxy = process.env[ssl ? \"HTTPS_PROXY\" : \"HTTP_PROXY\"];",
    "repo_full_name": "semgrep/semgrep",
    "discussion_comments": [
      {
        "comment_id": "1581404720",
        "repo_full_name": "semgrep/semgrep",
        "pr_number": 10172,
        "pr_file": "js/node_shared/XMLHttpRequest.js",
        "discussion_id": "1581404720",
        "commented_code": "@@ -385,6 +385,17 @@ XMLHttpRequest = function () {\n       headers[\"Content-Length\"] = 0;\n     }\n \n+    // get if HTTP_PROXY or HTTPS_PROXY is set\n+    var proxy = process.env[ssl ? \"HTTPS_PROXY\" : \"HTTP_PROXY\"];",
        "comment_created_at": "2024-04-26T18:41:24+00:00",
        "comment_author": "kopecs",
        "comment_body": "```suggestion\r\n    const proxy = process.env[ssl ? \"HTTPS_PROXY\" : \"HTTP_PROXY\"];\r\n```\r\n",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1425897664",
    "pr_number": 9422,
    "pr_file": "js/shared/core.js",
    "created_at": "2023-12-13T21:21:34+00:00",
    "commented_code": "is_wronly = true;\n   }\n \n+  let file;\n   /* inlined from caml_sys_open */\n-  var file = root.device.open(root.rest, f);\n+\n+  // Node is weird and doesn't like opening NUL on Windows\n+  // if its fs.openSync(\"NUL\", \"rs+\") call, so we have to\n+  // special case it and use \\\\\\\\.\\\nul instead.\n+  if (globalThis.process.platform === \"win32\" && path == \"NUL\") {",
    "repo_full_name": "semgrep/semgrep",
    "discussion_comments": [
      {
        "comment_id": "1425897664",
        "repo_full_name": "semgrep/semgrep",
        "pr_number": 9422,
        "pr_file": "js/shared/core.js",
        "discussion_id": "1425897664",
        "commented_code": "@@ -171,8 +188,21 @@ function unix_open(path, flags, perm) {\n     is_wronly = true;\n   }\n \n+  let file;\n   /* inlined from caml_sys_open */\n-  var file = root.device.open(root.rest, f);\n+\n+  // Node is weird and doesn't like opening NUL on Windows\n+  // if its fs.openSync(\"NUL\", \"rs+\") call, so we have to\n+  // special case it and use \\\\\\\\.\\\\nul instead.\n+  if (globalThis.process.platform === \"win32\" && path == \"NUL\") {",
        "comment_created_at": "2023-12-13T21:21:34+00:00",
        "comment_author": "kopecs",
        "comment_body": "```suggestion\r\n  if (globalThis.process.platform === \"win32\" && path === \"NUL\") {\r\n```",
        "pr_file_module": null
      }
    ]
  }
]