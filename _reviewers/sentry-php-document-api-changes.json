[
  {
    "discussion_id": "802028697",
    "pr_number": 1124,
    "pr_file": "CHANGELOG.md",
    "created_at": "2022-02-08T20:24:50+00:00",
    "commented_code": "- Add `toArray` public method in `PayloadSerializer` to be able to re-use Event serialization\n - The `withScope` methods now return the callback's return value (#1263)\n - Set the event extras by taking the data from the Monolog record's context (#1244)\n+- StacktraceBuilder is no longer marked @internal, and a new public method Client::getStacktraceBuilder() allows custom stacktraces to be built and added to events (#1124)",
    "repo_full_name": "getsentry/sentry-php",
    "discussion_comments": [
      {
        "comment_id": "802028697",
        "repo_full_name": "getsentry/sentry-php",
        "pr_number": 1124,
        "pr_file": "CHANGELOG.md",
        "discussion_id": "802028697",
        "commented_code": "@@ -6,6 +6,7 @@\n - Add `toArray` public method in `PayloadSerializer` to be able to re-use Event serialization\n - The `withScope` methods now return the callback's return value (#1263)\n - Set the event extras by taking the data from the Monolog record's context (#1244)\n+- StacktraceBuilder is no longer marked @internal, and a new public method Client::getStacktraceBuilder() allows custom stacktraces to be built and added to events (#1124)",
        "comment_created_at": "2022-02-08T20:24:50+00:00",
        "comment_author": "ste93cry",
        "comment_body": "```suggestion\r\n- Make the `StacktraceBuilder` class part of the public API and add the `Client::getStacktraceBuilder()` method to build custom stacktraces (#1124)\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "453323508",
    "pr_number": 1047,
    "pr_file": "UPGRADE-3.0.md",
    "created_at": "2020-07-12T14:29:17+00:00",
    "commented_code": "- The signature of the `Event::getId()` method changed to return an instance of the `EventId` class instead of a `string`\n - The signature of the `Options::getDsn()` method changed to always return an instance of the `Dsn` class instead of a `string`\n - Removed the `Options::getProjectId`, `Options::getPublicKey` and `Options::getSecretKey` methods, use `Options::getDsn()` instead.\n+- Removed the `Breadcrumb::LEVEL_CRITICAL` constant. Use `Breadcrumb::LEVEL_FATAL` instead\n+- Removed the `Breadcrumb::levelFromErrorException()` method\n+- Removedc the `PluggableHttpClientFactory` class\n+- Removed the `ClientBuilderInterface::setUriFactory()`, `ClientBuilderInterface::setMessageFactory()`, `ClientBuilderInterface::setTransport()`, `ClientBuilderInterface::setHttpClient()`, `ClientBuilderInterface::addHttpClientPlugin()` and `ClientBuilderInterface::removeHttpClientPlugin()` methods. Use `ClientBuilderInterface::setTransportFactory()` instead",
    "repo_full_name": "getsentry/sentry-php",
    "discussion_comments": [
      {
        "comment_id": "453323508",
        "repo_full_name": "getsentry/sentry-php",
        "pr_number": 1047,
        "pr_file": "UPGRADE-3.0.md",
        "discussion_id": "453323508",
        "commented_code": "@@ -15,3 +15,10 @@\n - The signature of the `Event::getId()` method changed to return an instance of the `EventId` class instead of a `string`\n - The signature of the `Options::getDsn()` method changed to always return an instance of the `Dsn` class instead of a `string`\n - Removed the `Options::getProjectId`, `Options::getPublicKey` and `Options::getSecretKey` methods, use `Options::getDsn()` instead.\n+- Removed the `Breadcrumb::LEVEL_CRITICAL` constant. Use `Breadcrumb::LEVEL_FATAL` instead\n+- Removed the `Breadcrumb::levelFromErrorException()` method\n+- Removedc the `PluggableHttpClientFactory` class\n+- Removed the `ClientBuilderInterface::setUriFactory()`, `ClientBuilderInterface::setMessageFactory()`, `ClientBuilderInterface::setTransport()`, `ClientBuilderInterface::setHttpClient()`, `ClientBuilderInterface::addHttpClientPlugin()` and `ClientBuilderInterface::removeHttpClientPlugin()` methods. Use `ClientBuilderInterface::setTransportFactory()` instead",
        "comment_created_at": "2020-07-12T14:29:17+00:00",
        "comment_author": "Jean85",
        "comment_body": "Can we rephrase this (and the others) with multiple methods like this? It's should be easier to scan:\r\n```suggestion\r\n- Removed the following methods from `ClientBuilderInterface`, use `ClientBuilderInterface::setTransportFactory()` instead: \r\n   - `ClientBuilderInterface::setUriFactory()`\r\n   - `ClientBuilderInterface::setMessageFactory()`\r\n   - `ClientBuilderInterface::setTransport()`\r\n   - `ClientBuilderInterface::setHttpClient()`\r\n   - `ClientBuilderInterface::addHttpClientPlugin()`\r\n   - `ClientBuilderInterface::removeHttpClientPlugin()`\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "449803886",
    "pr_number": 1036,
    "pr_file": "UPGRADE-3.0.md",
    "created_at": "2020-07-04T20:38:26+00:00",
    "commented_code": "+# Upgrade from 2.x to 3.0\n+\n+- The signature of the `captureMessage()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureException()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureEvent()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureLastError()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureMessage()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureException()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureEvent()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureLastError()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureMessage()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureException()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureEvent()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureLastError()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `Event::getId()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`",
    "repo_full_name": "getsentry/sentry-php",
    "discussion_comments": [
      {
        "comment_id": "449803886",
        "repo_full_name": "getsentry/sentry-php",
        "pr_number": 1036,
        "pr_file": "UPGRADE-3.0.md",
        "discussion_id": "449803886",
        "commented_code": "@@ -0,0 +1,15 @@\n+# Upgrade from 2.x to 3.0\n+\n+- The signature of the `captureMessage()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureException()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureEvent()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureLastError()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureMessage()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureException()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureEvent()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureLastError()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureMessage()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureException()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureEvent()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureLastError()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `Event::getId()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`",
        "comment_created_at": "2020-07-04T20:38:26+00:00",
        "comment_author": "Jean85",
        "comment_body": "Can we make this less verbose? Something like: \"The following functions now return `EventId` instead of `string`",
        "pr_file_module": null
      },
      {
        "comment_id": "450171817",
        "repo_full_name": "getsentry/sentry-php",
        "pr_number": 1036,
        "pr_file": "UPGRADE-3.0.md",
        "discussion_id": "449803886",
        "commented_code": "@@ -0,0 +1,15 @@\n+# Upgrade from 2.x to 3.0\n+\n+- The signature of the `captureMessage()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureException()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureEvent()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `captureLastError()` global function changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureMessage()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureException()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureEvent()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `ClientInterface::captureLastError()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureMessage()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureException()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureEvent()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `HubInterface::captureLastError()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`\n+- The signature of the `Event::getId()` method changed to return an instance of the `Sentry\\EventId` class instead of a `string`",
        "comment_created_at": "2020-07-06T11:59:00+00:00",
        "comment_author": "stayallive",
        "comment_body": "Might not be a bad plan to summarise all functions that changed to be explicit.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "248294212",
    "pr_number": 738,
    "pr_file": "CHANGELOG.md",
    "created_at": "2019-01-16T14:08:51+00:00",
    "commented_code": "- ...\n \n+## 2.0.0-beta-1 (2018-12-19)\n+\n+- Require PHP >= 7.1\n+- Refactorize the whole codebase to support the Unified API SDK specs",
    "repo_full_name": "getsentry/sentry-php",
    "discussion_comments": [
      {
        "comment_id": "248294212",
        "repo_full_name": "getsentry/sentry-php",
        "pr_number": 738,
        "pr_file": "CHANGELOG.md",
        "discussion_id": "248294212",
        "commented_code": "@@ -4,6 +4,28 @@\n \n - ...\n \n+## 2.0.0-beta-1 (2018-12-19)\n+\n+- Require PHP >= 7.1\n+- Refactorize the whole codebase to support the Unified API SDK specs",
        "comment_created_at": "2019-01-16T14:08:51+00:00",
        "comment_author": "Jean85",
        "comment_body": "```suggestion\r\n- Refactor the whole codebase to support the [Unified API SDK specs](https://docs.sentry.io/development/sdk-dev/unified-api/)\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "468699442",
    "pr_number": 1066,
    "pr_file": "UPGRADE-3.0.md",
    "created_at": "2020-08-11T16:12:25+00:00",
    "commented_code": "- `Options::setProjectRoot()`\n - Removed the `Context::CONTEXT_USER`, `Context::CONTEXT_RUNTIME`, `Context::CONTEXT_TAGS`, `Context::CONTEXT_EXTRA`, `Context::CONTEXT_SERVER_OS` constants\n - The signature of the `Scope::setUser()` method changed to not accept the `$merge` parameter anymore\n+- The signature of the `TransportInterface::send()` method changed to return a promise instead of the event ID\n+- The signature of the `HttpClientFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's ones\n+- The signature of the `DefaultTransportFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's onesd",
    "repo_full_name": "getsentry/sentry-php",
    "discussion_comments": [
      {
        "comment_id": "468699442",
        "repo_full_name": "getsentry/sentry-php",
        "pr_number": 1066,
        "pr_file": "UPGRADE-3.0.md",
        "discussion_id": "468699442",
        "commented_code": "@@ -33,3 +33,7 @@\n   - `Options::setProjectRoot()`\n - Removed the `Context::CONTEXT_USER`, `Context::CONTEXT_RUNTIME`, `Context::CONTEXT_TAGS`, `Context::CONTEXT_EXTRA`, `Context::CONTEXT_SERVER_OS` constants\n - The signature of the `Scope::setUser()` method changed to not accept the `$merge` parameter anymore\n+- The signature of the `TransportInterface::send()` method changed to return a promise instead of the event ID\n+- The signature of the `HttpClientFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's ones\n+- The signature of the `DefaultTransportFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's onesd",
        "comment_created_at": "2020-08-11T16:12:25+00:00",
        "comment_author": "Jean85",
        "comment_body": "```suggestion\r\n- The signature of the `DefaultTransportFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's ones\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "468699785",
        "repo_full_name": "getsentry/sentry-php",
        "pr_number": 1066,
        "pr_file": "UPGRADE-3.0.md",
        "discussion_id": "468699442",
        "commented_code": "@@ -33,3 +33,7 @@\n   - `Options::setProjectRoot()`\n - Removed the `Context::CONTEXT_USER`, `Context::CONTEXT_RUNTIME`, `Context::CONTEXT_TAGS`, `Context::CONTEXT_EXTRA`, `Context::CONTEXT_SERVER_OS` constants\n - The signature of the `Scope::setUser()` method changed to not accept the `$merge` parameter anymore\n+- The signature of the `TransportInterface::send()` method changed to return a promise instead of the event ID\n+- The signature of the `HttpClientFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's ones\n+- The signature of the `DefaultTransportFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's onesd",
        "comment_created_at": "2020-08-11T16:13:00+00:00",
        "comment_author": "Jean85",
        "comment_body": "Also, maybe we should add a note that newer HTTPlug classes are PSR-17 compatible?",
        "pr_file_module": null
      },
      {
        "comment_id": "473212159",
        "repo_full_name": "getsentry/sentry-php",
        "pr_number": 1066,
        "pr_file": "UPGRADE-3.0.md",
        "discussion_id": "468699442",
        "commented_code": "@@ -33,3 +33,7 @@\n   - `Options::setProjectRoot()`\n - Removed the `Context::CONTEXT_USER`, `Context::CONTEXT_RUNTIME`, `Context::CONTEXT_TAGS`, `Context::CONTEXT_EXTRA`, `Context::CONTEXT_SERVER_OS` constants\n - The signature of the `Scope::setUser()` method changed to not accept the `$merge` parameter anymore\n+- The signature of the `TransportInterface::send()` method changed to return a promise instead of the event ID\n+- The signature of the `HttpClientFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's ones\n+- The signature of the `DefaultTransportFactory::__construct()` method changed to accept instances of the PSR-17 factories in place of Httplug's onesd",
        "comment_created_at": "2020-08-19T17:42:52+00:00",
        "comment_author": "ste93cry",
        "comment_body": "I don't think we should as the intention of this PR is to move away from HTTPlug as much as possible, so suggesting to still use it is a countersense, isn't it?",
        "pr_file_module": null
      }
    ]
  }
]