[
  {
    "discussion_id": "2445105660",
    "pr_number": 39982,
    "pr_file": "python/servo/command_base.py",
    "created_at": "2025-10-20T13:57:34+00:00",
    "commented_code": "return self.kind == BuildType.Kind.RELEASE\n \n     def is_prod(self) -> bool:\n-        return self.kind == BuildType.Kind.CUSTOM and self.profile == \"production\"\n+        return self.is_custom() and (self.profile == \"production\" or self.profile == \"production-stripped\")",
    "repo_full_name": "servo/servo",
    "discussion_comments": [
      {
        "comment_id": "2445105660",
        "repo_full_name": "servo/servo",
        "pr_number": 39982,
        "pr_file": "python/servo/command_base.py",
        "discussion_id": "2445105660",
        "commented_code": "@@ -77,7 +77,7 @@ def is_release(self) -> bool:\n         return self.kind == BuildType.Kind.RELEASE\n \n     def is_prod(self) -> bool:\n-        return self.kind == BuildType.Kind.CUSTOM and self.profile == \"production\"\n+        return self.is_custom() and (self.profile == \"production\" or self.profile == \"production-stripped\")",
        "comment_created_at": "2025-10-20T13:57:34+00:00",
        "comment_author": "mukilan",
        "comment_body": "```suggestion\r\n        return self.is_custom() and (self.profile in [\"production\", \"production-stripped\"])\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2429142881",
    "pr_number": 39812,
    "pr_file": "python/servo/testing_commands.py",
    "created_at": "2025-10-14T13:17:45+00:00",
    "commented_code": "elif build_type.is_dev():\n             pass  # there is no argument for debug\n         else:\n-            args += [\"--profile\", build_type.profile]\n+            args += [\"--cargo-profile\", build_type.profile]",
    "repo_full_name": "servo/servo",
    "discussion_comments": [
      {
        "comment_id": "2429142881",
        "repo_full_name": "servo/servo",
        "pr_number": 39812,
        "pr_file": "python/servo/testing_commands.py",
        "discussion_id": "2429142881",
        "commented_code": "@@ -252,7 +252,7 @@ def test_unit(\n         elif build_type.is_dev():\n             pass  # there is no argument for debug\n         else:\n-            args += [\"--profile\", build_type.profile]\n+            args += [\"--cargo-profile\", build_type.profile]",
        "comment_created_at": "2025-10-14T13:17:45+00:00",
        "comment_author": "mukilan",
        "comment_body": "What is rationale for this change?",
        "pr_file_module": null
      },
      {
        "comment_id": "2429392614",
        "repo_full_name": "servo/servo",
        "pr_number": 39812,
        "pr_file": "python/servo/testing_commands.py",
        "discussion_id": "2429142881",
        "commented_code": "@@ -252,7 +252,7 @@ def test_unit(\n         elif build_type.is_dev():\n             pass  # there is no argument for debug\n         else:\n-            args += [\"--profile\", build_type.profile]\n+            args += [\"--cargo-profile\", build_type.profile]",
        "comment_created_at": "2025-10-14T14:22:01+00:00",
        "comment_author": "jschwe",
        "comment_body": "The `--profile` parameter for `nextest` is unfortunately not the same as a the `--profile` parameter for cargo. The nextest profile is for essentially choosing a test profile / configuration (e.g. `CI`). So when switching from `cargo test` to `cargo nextest` one needs to use `--cargo-profile` instead of `--profile`",
        "pr_file_module": null
      },
      {
        "comment_id": "2429400679",
        "repo_full_name": "servo/servo",
        "pr_number": 39812,
        "pr_file": "python/servo/testing_commands.py",
        "discussion_id": "2429142881",
        "commented_code": "@@ -252,7 +252,7 @@ def test_unit(\n         elif build_type.is_dev():\n             pass  # there is no argument for debug\n         else:\n-            args += [\"--profile\", build_type.profile]\n+            args += [\"--cargo-profile\", build_type.profile]",
        "comment_created_at": "2025-10-14T14:24:33+00:00",
        "comment_author": "jschwe",
        "comment_body": "I updated the PR description to mention these changes, since the commits will be squashed and the original commit messages lost. ",
        "pr_file_module": null
      }
    ]
  }
]