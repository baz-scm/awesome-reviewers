[
  {
    "discussion_id": "1850851808",
    "pr_number": 191,
    "pr_file": "lib/cache/BaseCache.ts",
    "created_at": "2024-11-20T19:14:00+00:00",
    "commented_code": "private readonly CACHE_MAX_AGE_MS = 7 * 24 * 60 * 60 * 1000; // 1 week in milliseconds\n   private readonly CLEANUP_PROBABILITY = 0.01; // 1% chance\n \n+  protected enableCaching: boolean;",
    "repo_full_name": "browserbase/stagehand",
    "discussion_comments": [
      {
        "comment_id": "1850851808",
        "repo_full_name": "browserbase/stagehand",
        "pr_number": 191,
        "pr_file": "lib/cache/BaseCache.ts",
        "discussion_id": "1850851808",
        "commented_code": "@@ -16,6 +16,7 @@ export class BaseCache<T extends CacheEntry> {\n   private readonly CACHE_MAX_AGE_MS = 7 * 24 * 60 * 60 * 1000; // 1 week in milliseconds\n   private readonly CLEANUP_PROBABILITY = 0.01; // 1% chance\n \n+  protected enableCaching: boolean;",
        "comment_created_at": "2024-11-20T19:14:00+00:00",
        "comment_author": "kamath",
        "comment_body": "It doesn't make sense to add this field here. Rather, we should just not init a cache if `enableCaching` is set to false in `LLMProvider` and `actHandler`. It makes more sense to make the cache default `undefined` in `LLMProvider` and `actHandler`, and before a cache operation there, check `enableCaching`.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1850853289",
    "pr_number": 191,
    "pr_file": "lib/cache/BaseCache.ts",
    "created_at": "2024-11-20T19:15:16+00:00",
    "commented_code": "}\n \n   protected ensureCacheDirectory(): void {\n-    if (!fs.existsSync(this.cacheDir)) {\n+    if (this.enableCaching && !fs.existsSync(this.cacheDir)) {",
    "repo_full_name": "browserbase/stagehand",
    "discussion_comments": [
      {
        "comment_id": "1850853289",
        "repo_full_name": "browserbase/stagehand",
        "pr_number": 191,
        "pr_file": "lib/cache/BaseCache.ts",
        "discussion_id": "1850853289",
        "commented_code": "@@ -71,7 +74,7 @@ export class BaseCache<T extends CacheEntry> {\n   }\n \n   protected ensureCacheDirectory(): void {\n-    if (!fs.existsSync(this.cacheDir)) {\n+    if (this.enableCaching && !fs.existsSync(this.cacheDir)) {",
        "comment_created_at": "2024-11-20T19:15:16+00:00",
        "comment_author": "kamath",
        "comment_body": "This is an antipattern. Since this method is `protected`, it can only be called from other cache objects. If we just don't init a cache, the directory won't be created",
        "pr_file_module": null
      }
    ]
  }
]