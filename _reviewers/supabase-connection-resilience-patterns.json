[
  {
    "discussion_id": "2075690023",
    "pr_number": 35331,
    "pr_file": "apps/studio/data/projects/project-detail-query.ts",
    "created_at": "2025-05-06T15:09:36+00:00",
    "commented_code": null,
    "repo_full_name": "supabase/supabase",
    "discussion_comments": [
      {
        "comment_id": "2075690023",
        "repo_full_name": "supabase/supabase",
        "pr_number": 35331,
        "pr_file": "apps/studio/data/projects/project-detail-query.ts",
        "discussion_id": "2075690023",
        "commented_code": null,
        "comment_created_at": "2025-05-06T15:09:36+00:00",
        "comment_author": "avallete",
        "comment_body": "**note**\r\n\r\nActual change, we now wait and retry until we get a valid connection string for the client.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2037171266",
    "pr_number": 33310,
    "pr_file": "apps/studio/data/reports/database-charts.ts",
    "created_at": "2025-04-10T11:53:09+00:00",
    "commented_code": "+export const getReportAttributes = (isFreePlan: boolean) => [\n+  { id: 'ram_usage', label: 'Memory usage', hide: false },\n+  { id: 'avg_cpu_usage', label: 'Average CPU usage', hide: false },\n+  { id: 'max_cpu_usage', label: 'Max CPU usage', hide: false },\n+  { id: 'disk_iops_write', label: 'Disk IOps write', hide: false },\n+  { id: 'disk_iops_read', label: 'Disk IOps read', hide: false },\n+  {\n+    id: 'pg_stat_database_num_backends',\n+    label: 'Pooler to database connections',\n+    hide: false,\n+  },\n+  {\n+    id: 'supavisor_connections_active',\n+    label: 'Client to Shared Pooler connections',\n+    hide: false,\n+  },\n+  {\n+    id: 'client_connections_pgbouncer',\n+    label: 'Client to Dedicated Pooler connections',\n+    hide: isFreePlan,\n+  },\n+]\n+\n+export const getReportAttributesV2 = (isFreePlan: boolean) => [\n+  {\n+    id: 'ram-usage',\n+    label: 'Memory usage',\n+    hide: false,\n+    showTooltip: true,\n+    showLegend: true,\n+    hideChartType: false,\n+    defaultChartStyle: 'line',\n+    showMaxValue: false,\n+    attributes: [\n+      {\n+        attribute: 'ram_usage_used',\n+        provider: 'infra-monitoring',\n+        label: 'Used',\n+        tooltip:\n+          'Total RAM currently in use by the system and applications. High usage may indicate memory pressure.',\n+      },\n+      {\n+        attribute: 'ram_usage_cache_and_buffers',\n+        provider: 'infra-monitoring',\n+        label: 'Cache + buffers',\n+        tooltip:\n+          'RAM used for caching and buffering disk operations. Higher values improve read performance.',\n+      },\n+      {\n+        attribute: 'ram_usage_free',\n+        provider: 'infra-monitoring',\n+        label: 'Free',\n+        tooltip:\n+          'Available unused RAM. Low values may lead to increased swapping and slower performance.',\n+      },\n+      {\n+        attribute: 'ram_usage_swap',\n+        provider: 'infra-monitoring',\n+        label: 'Swap',\n+        tooltip:\n+          'Memory swapped to disk when RAM is full. High values indicate memory exhaustion, potentially causing slowdowns.',\n+      },\n+    ],\n+  },\n+  {\n+    id: 'cpu-usage',\n+    label: 'CPU usage',\n+    format: '%',\n+    valuePrecision: 2,\n+    hide: false,\n+    showTooltip: true,\n+    showLegend: true,\n+    showMaxValue: false,\n+    hideChartType: false,\n+    defaultChartStyle: 'line',\n+    attributes: [\n+      {\n+        attribute: 'cpu_usage_busy_system',\n+        provider: 'infra-monitoring',\n+        label: 'System',\n+        format: '%',\n+        tooltip:\n+          'CPU time spent on kernel operations (e.g., process scheduling, memory management). High values may indicate system overhead.',",
    "repo_full_name": "supabase/supabase",
    "discussion_comments": [
      {
        "comment_id": "2037171266",
        "repo_full_name": "supabase/supabase",
        "pr_number": 33310,
        "pr_file": "apps/studio/data/reports/database-charts.ts",
        "discussion_id": "2037171266",
        "commented_code": "@@ -0,0 +1,199 @@\n+export const getReportAttributes = (isFreePlan: boolean) => [\n+  { id: 'ram_usage', label: 'Memory usage', hide: false },\n+  { id: 'avg_cpu_usage', label: 'Average CPU usage', hide: false },\n+  { id: 'max_cpu_usage', label: 'Max CPU usage', hide: false },\n+  { id: 'disk_iops_write', label: 'Disk IOps write', hide: false },\n+  { id: 'disk_iops_read', label: 'Disk IOps read', hide: false },\n+  {\n+    id: 'pg_stat_database_num_backends',\n+    label: 'Pooler to database connections',\n+    hide: false,\n+  },\n+  {\n+    id: 'supavisor_connections_active',\n+    label: 'Client to Shared Pooler connections',\n+    hide: false,\n+  },\n+  {\n+    id: 'client_connections_pgbouncer',\n+    label: 'Client to Dedicated Pooler connections',\n+    hide: isFreePlan,\n+  },\n+]\n+\n+export const getReportAttributesV2 = (isFreePlan: boolean) => [\n+  {\n+    id: 'ram-usage',\n+    label: 'Memory usage',\n+    hide: false,\n+    showTooltip: true,\n+    showLegend: true,\n+    hideChartType: false,\n+    defaultChartStyle: 'line',\n+    showMaxValue: false,\n+    attributes: [\n+      {\n+        attribute: 'ram_usage_used',\n+        provider: 'infra-monitoring',\n+        label: 'Used',\n+        tooltip:\n+          'Total RAM currently in use by the system and applications. High usage may indicate memory pressure.',\n+      },\n+      {\n+        attribute: 'ram_usage_cache_and_buffers',\n+        provider: 'infra-monitoring',\n+        label: 'Cache + buffers',\n+        tooltip:\n+          'RAM used for caching and buffering disk operations. Higher values improve read performance.',\n+      },\n+      {\n+        attribute: 'ram_usage_free',\n+        provider: 'infra-monitoring',\n+        label: 'Free',\n+        tooltip:\n+          'Available unused RAM. Low values may lead to increased swapping and slower performance.',\n+      },\n+      {\n+        attribute: 'ram_usage_swap',\n+        provider: 'infra-monitoring',\n+        label: 'Swap',\n+        tooltip:\n+          'Memory swapped to disk when RAM is full. High values indicate memory exhaustion, potentially causing slowdowns.',\n+      },\n+    ],\n+  },\n+  {\n+    id: 'cpu-usage',\n+    label: 'CPU usage',\n+    format: '%',\n+    valuePrecision: 2,\n+    hide: false,\n+    showTooltip: true,\n+    showLegend: true,\n+    showMaxValue: false,\n+    hideChartType: false,\n+    defaultChartStyle: 'line',\n+    attributes: [\n+      {\n+        attribute: 'cpu_usage_busy_system',\n+        provider: 'infra-monitoring',\n+        label: 'System',\n+        format: '%',\n+        tooltip:\n+          'CPU time spent on kernel operations (e.g., process scheduling, memory management). High values may indicate system overhead.',",
        "comment_created_at": "2025-04-10T11:53:09+00:00",
        "comment_author": "fsansalvadore",
        "comment_body": "@TheOtherBrian1  ",
        "pr_file_module": null
      },
      {
        "comment_id": "2038768166",
        "repo_full_name": "supabase/supabase",
        "pr_number": 33310,
        "pr_file": "apps/studio/data/reports/database-charts.ts",
        "discussion_id": "2037171266",
        "commented_code": "@@ -0,0 +1,199 @@\n+export const getReportAttributes = (isFreePlan: boolean) => [\n+  { id: 'ram_usage', label: 'Memory usage', hide: false },\n+  { id: 'avg_cpu_usage', label: 'Average CPU usage', hide: false },\n+  { id: 'max_cpu_usage', label: 'Max CPU usage', hide: false },\n+  { id: 'disk_iops_write', label: 'Disk IOps write', hide: false },\n+  { id: 'disk_iops_read', label: 'Disk IOps read', hide: false },\n+  {\n+    id: 'pg_stat_database_num_backends',\n+    label: 'Pooler to database connections',\n+    hide: false,\n+  },\n+  {\n+    id: 'supavisor_connections_active',\n+    label: 'Client to Shared Pooler connections',\n+    hide: false,\n+  },\n+  {\n+    id: 'client_connections_pgbouncer',\n+    label: 'Client to Dedicated Pooler connections',\n+    hide: isFreePlan,\n+  },\n+]\n+\n+export const getReportAttributesV2 = (isFreePlan: boolean) => [\n+  {\n+    id: 'ram-usage',\n+    label: 'Memory usage',\n+    hide: false,\n+    showTooltip: true,\n+    showLegend: true,\n+    hideChartType: false,\n+    defaultChartStyle: 'line',\n+    showMaxValue: false,\n+    attributes: [\n+      {\n+        attribute: 'ram_usage_used',\n+        provider: 'infra-monitoring',\n+        label: 'Used',\n+        tooltip:\n+          'Total RAM currently in use by the system and applications. High usage may indicate memory pressure.',\n+      },\n+      {\n+        attribute: 'ram_usage_cache_and_buffers',\n+        provider: 'infra-monitoring',\n+        label: 'Cache + buffers',\n+        tooltip:\n+          'RAM used for caching and buffering disk operations. Higher values improve read performance.',\n+      },\n+      {\n+        attribute: 'ram_usage_free',\n+        provider: 'infra-monitoring',\n+        label: 'Free',\n+        tooltip:\n+          'Available unused RAM. Low values may lead to increased swapping and slower performance.',\n+      },\n+      {\n+        attribute: 'ram_usage_swap',\n+        provider: 'infra-monitoring',\n+        label: 'Swap',\n+        tooltip:\n+          'Memory swapped to disk when RAM is full. High values indicate memory exhaustion, potentially causing slowdowns.',\n+      },\n+    ],\n+  },\n+  {\n+    id: 'cpu-usage',\n+    label: 'CPU usage',\n+    format: '%',\n+    valuePrecision: 2,\n+    hide: false,\n+    showTooltip: true,\n+    showLegend: true,\n+    showMaxValue: false,\n+    hideChartType: false,\n+    defaultChartStyle: 'line',\n+    attributes: [\n+      {\n+        attribute: 'cpu_usage_busy_system',\n+        provider: 'infra-monitoring',\n+        label: 'System',\n+        format: '%',\n+        tooltip:\n+          'CPU time spent on kernel operations (e.g., process scheduling, memory management). High values may indicate system overhead.',",
        "comment_created_at": "2025-04-11T04:10:58+00:00",
        "comment_author": "TheOtherBrian1",
        "comment_body": "This is fine. \r\n\r\nIn practice, the most common kernel operations that cause issues are connection management (process scheduling) and PG extensions spamming kernel APIs. ",
        "pr_file_module": null
      }
    ]
  }
]