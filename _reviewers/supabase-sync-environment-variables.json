[
  {
    "discussion_id": "1852289618",
    "pr_number": 30010,
    "pr_file": "docker/docker-compose.yml",
    "created_at": "2024-11-21T14:52:13+00:00",
    "commented_code": "- POSTGRES_PORT=${POSTGRES_PORT}\n       - POSTGRES_DB=${POSTGRES_DB}\n       - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n-      - DATABASE_URL=ecto://postgres:${POSTGRES_PASSWORD}@db:${POSTGRES_PORT}/_supabase\n+      - DATABASE_URL=ecto://postgres:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/_supabase\n       - CLUSTER_POSTGRES=true\n-      - SECRET_KEY_BASE=UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq\n-      - VAULT_ENC_KEY=your-encryption-key-32-chars-min\n+      - SECRET_KEY_BASE=${POOLER_SECRET_KEY_BASE}\n+      - VAULT_ENC_KEY=${POOLER_VAULT_ENC_KEY}",
    "repo_full_name": "supabase/supabase",
    "discussion_comments": [
      {
        "comment_id": "1852289618",
        "repo_full_name": "supabase/supabase",
        "pr_number": 30010,
        "pr_file": "docker/docker-compose.yml",
        "discussion_id": "1852289618",
        "commented_code": "@@ -467,10 +467,10 @@ services:\n       - POSTGRES_PORT=${POSTGRES_PORT}\n       - POSTGRES_DB=${POSTGRES_DB}\n       - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n-      - DATABASE_URL=ecto://postgres:${POSTGRES_PASSWORD}@db:${POSTGRES_PORT}/_supabase\n+      - DATABASE_URL=ecto://postgres:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/_supabase\n       - CLUSTER_POSTGRES=true\n-      - SECRET_KEY_BASE=UpNVntn3cDxHJpq99YMc1T1AQgQpc8kfYTuRgBiYa15BLrx8etQoXz3gZv1/u2oq\n-      - VAULT_ENC_KEY=your-encryption-key-32-chars-min\n+      - SECRET_KEY_BASE=${POOLER_SECRET_KEY_BASE}\n+      - VAULT_ENC_KEY=${POOLER_VAULT_ENC_KEY}",
        "comment_created_at": "2024-11-21T14:52:13+00:00",
        "comment_author": "avallete",
        "comment_body": "**issue**\r\n\r\nThose two values aren't available in the `.env.example` we'll need to add them in it with their default value so the `cp .env.example .env && docker-compose up` can start the stack with default settings. ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2161498582",
    "pr_number": 36572,
    "pr_file": "docker/docker-compose.yml",
    "created_at": "2025-06-23T12:24:56+00:00",
    "commented_code": "POSTGRES_PORT: ${POSTGRES_PORT}\n       POSTGRES_DB: ${POSTGRES_DB}\n       POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}\n-      DATABASE_URL: ecto://supabase_admin:${POSTGRES_PASSWORD}@db:${POSTGRES_PORT}/_supabase\n+      DATABASE_URL: ecto://supabase_admin:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/_supabase",
    "repo_full_name": "supabase/supabase",
    "discussion_comments": [
      {
        "comment_id": "2161498582",
        "repo_full_name": "supabase/supabase",
        "pr_number": 36572,
        "pr_file": "docker/docker-compose.yml",
        "discussion_id": "2161498582",
        "commented_code": "@@ -506,7 +506,7 @@ services:\n       POSTGRES_PORT: ${POSTGRES_PORT}\n       POSTGRES_DB: ${POSTGRES_DB}\n       POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}\n-      DATABASE_URL: ecto://supabase_admin:${POSTGRES_PASSWORD}@db:${POSTGRES_PORT}/_supabase\n+      DATABASE_URL: ecto://supabase_admin:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/_supabase",
        "comment_created_at": "2025-06-23T12:24:56+00:00",
        "comment_author": "sweatybridge",
        "comment_body": "This won't work for those who use the provided db service in compose file because `POSTGRES_HOST` refers to the external hostname. The default value should be the service name instead.",
        "pr_file_module": null
      },
      {
        "comment_id": "2161509321",
        "repo_full_name": "supabase/supabase",
        "pr_number": 36572,
        "pr_file": "docker/docker-compose.yml",
        "discussion_id": "2161498582",
        "commented_code": "@@ -506,7 +506,7 @@ services:\n       POSTGRES_PORT: ${POSTGRES_PORT}\n       POSTGRES_DB: ${POSTGRES_DB}\n       POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}\n-      DATABASE_URL: ecto://supabase_admin:${POSTGRES_PASSWORD}@db:${POSTGRES_PORT}/_supabase\n+      DATABASE_URL: ecto://supabase_admin:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/_supabase",
        "comment_created_at": "2025-06-23T12:30:42+00:00",
        "comment_author": "sweatybridge",
        "comment_body": "Ok it seems like our dotenv example has been updated to use db as the default hostname. So this change is fine https://github.com/supabase/supabase/blob/master/docker/.env.example",
        "pr_file_module": null
      }
    ]
  }
]