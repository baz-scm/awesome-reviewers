[
  {
    "discussion_id": "1852809417",
    "pr_number": 14397,
    "pr_file": "packages/svelte/src/internal/server/blocks/svelte-html.js",
    "created_at": "2024-11-21T20:15:09+00:00",
    "commented_code": "+/** @import { Payload } from '#server' */\n+\n+import { escape } from '..';",
    "repo_full_name": "sveltejs/svelte",
    "discussion_comments": [
      {
        "comment_id": "1852809417",
        "repo_full_name": "sveltejs/svelte",
        "pr_number": 14397,
        "pr_file": "packages/svelte/src/internal/server/blocks/svelte-html.js",
        "discussion_id": "1852809417",
        "commented_code": "@@ -0,0 +1,13 @@\n+/** @import { Payload } from '#server' */\n+\n+import { escape } from '..';",
        "comment_created_at": "2024-11-21T20:15:09+00:00",
        "comment_author": "dummdidumm",
        "comment_body": "```suggestion\r\nimport { escape_html } from '../../../escaping.js';\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1841335602",
    "pr_number": 14269,
    "pr_file": "packages/svelte/src/compiler/phases/3-transform/client/visitors/shared/utils.js",
    "created_at": "2024-11-13T23:52:20+00:00",
    "commented_code": "return { states, calls };\n }\n \n+/**\n+ * Escape the html in every quasi in the template literal\n+ * @param {SvelteNode} template\n+ * @param {boolean} [is_attr]\n+ */\n+export function escape_template_quasis(template, is_attr) {\n+\twalk(\n+\t\ttemplate,\n+\t\t{},\n+\t\t{\n+\t\t\tTemplateLiteral(node, { next }) {\n+\t\t\t\tfor (let quasi of node.quasis) {\n+\t\t\t\t\tquasi.value.raw = escape_html(quasi.value.raw, is_attr);\n+\t\t\t\t}\n+\t\t\t\tnext();\n+\t\t\t},\n+\t\t\tLiteral(node, { next }) {\n+\t\t\t\tif (node.raw != null) {\n+\t\t\t\t\tnode.raw = escape_html(node.raw, is_attr);\n+\t\t\t\t} else {\n+\t\t\t\t\tnode.value = escape_html(node.value, is_attr);\n+\t\t\t\t}\n+\t\t\t\tnext();\n+\t\t\t}",
    "repo_full_name": "sveltejs/svelte",
    "discussion_comments": [
      {
        "comment_id": "1841335602",
        "repo_full_name": "sveltejs/svelte",
        "pr_number": 14269,
        "pr_file": "packages/svelte/src/compiler/phases/3-transform/client/visitors/shared/utils.js",
        "discussion_id": "1841335602",
        "commented_code": "@@ -32,6 +33,34 @@ export function get_states_and_calls(values) {\n \treturn { states, calls };\n }\n \n+/**\n+ * Escape the html in every quasi in the template literal\n+ * @param {SvelteNode} template\n+ * @param {boolean} [is_attr]\n+ */\n+export function escape_template_quasis(template, is_attr) {\n+\twalk(\n+\t\ttemplate,\n+\t\t{},\n+\t\t{\n+\t\t\tTemplateLiteral(node, { next }) {\n+\t\t\t\tfor (let quasi of node.quasis) {\n+\t\t\t\t\tquasi.value.raw = escape_html(quasi.value.raw, is_attr);\n+\t\t\t\t}\n+\t\t\t\tnext();\n+\t\t\t},\n+\t\t\tLiteral(node, { next }) {\n+\t\t\t\tif (node.raw != null) {\n+\t\t\t\t\tnode.raw = escape_html(node.raw, is_attr);\n+\t\t\t\t} else {\n+\t\t\t\t\tnode.value = escape_html(node.value, is_attr);\n+\t\t\t\t}\n+\t\t\t\tnext();\n+\t\t\t}",
        "comment_created_at": "2024-11-13T23:52:20+00:00",
        "comment_author": "Rich-Harris",
        "comment_body": "The escaping [needs to happen at runtime](https://svelte.dev/playground/hello-world?version=pr-14269#H4sIAAAAAAAAE23NMQ7CMAwF0KtEXrogupc0EucgDKU1IlLqRIlbgaLcnRgY2ayn7_8L0LQiDBBCzHCAu_OYYbgU4FcUF2j-S51jPOYdPYvdpoz_fA7ESNxqQOc5ucjqQ08eLaxh2TxaMJYsN86sZFqNqtOPZLqTJd1_vyRCenG7KRKpupfbUpuQMhg4bViv9Q3ti_IKxAAAAA==), not here",
        "pr_file_module": null
      }
    ]
  }
]