[
  {
    "discussion_id": "277920794",
    "pr_number": 2516,
    "pr_file": "src/compile/index.ts",
    "created_at": "2019-04-24T00:41:22+00:00",
    "commented_code": "}\n \n export default function compile(source: string, options: CompileOptions = {}) {\n-\toptions = assign({ generate: 'dom', dev: false }, options);\n+\toptions = assign({ generate: 'dom', dev: false, shadowDom: options.customElement }, options);",
    "repo_full_name": "sveltejs/svelte",
    "discussion_comments": [
      {
        "comment_id": "277920794",
        "repo_full_name": "sveltejs/svelte",
        "pr_number": 2516,
        "pr_file": "src/compile/index.ts",
        "discussion_id": "277920794",
        "commented_code": "@@ -74,7 +79,7 @@ function get_name(filename) {\n }\n \n export default function compile(source: string, options: CompileOptions = {}) {\n-\toptions = assign({ generate: 'dom', dev: false }, options);\n+\toptions = assign({ generate: 'dom', dev: false, shadowDom: options.customElement }, options);",
        "comment_created_at": "2019-04-24T00:41:22+00:00",
        "comment_author": "zephraph",
        "comment_body": "This defaults `shadowDom` to whatever `customElement` may be set to. So if it's `true`, `shadowDom` will be `true` by default (which is the behavior we want for backwards compatibility). ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "277920906",
    "pr_number": 2516,
    "pr_file": "src/compile/index.ts",
    "created_at": "2019-04-24T00:42:06+00:00",
    "commented_code": "toString: () => message,\n \t\t});\n \t}\n+\n+\tif (!customElement && shadowDom) {\n+\t\tthrow new Error(`options.shadowDom cannot be true if options.customElement is false`)",
    "repo_full_name": "sveltejs/svelte",
    "discussion_comments": [
      {
        "comment_id": "277920906",
        "repo_full_name": "sveltejs/svelte",
        "pr_number": 2516,
        "pr_file": "src/compile/index.ts",
        "discussion_id": "277920906",
        "commented_code": "@@ -53,6 +54,10 @@ function validate_options(options: CompileOptions, warnings: Warning[]) {\n \t\t\ttoString: () => message,\n \t\t});\n \t}\n+\n+\tif (!customElement && shadowDom) {\n+\t\tthrow new Error(`options.shadowDom cannot be true if options.customElement is false`)",
        "comment_created_at": "2019-04-24T00:42:06+00:00",
        "comment_author": "zephraph",
        "comment_body": "Just a little sanity check to save us from an invalid state. ",
        "pr_file_module": null
      }
    ]
  }
]