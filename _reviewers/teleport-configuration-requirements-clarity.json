[
  {
    "discussion_id": "2320379816",
    "pr_number": 58667,
    "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
    "created_at": "2025-09-03T22:36:11+00:00",
    "commented_code": "external identity source.\n </Admonition>\n \n+<Admonition type=\"info\" title=\"SAML IdP RBAC\">\n+In this step, Teleport creates a `saml_idp_service_provider` resource for the \n+AWS IAM Identity Center. \n+\n+Starting with Teleport version 18 and role version 8, the SAML IdP service provider \n+resources are gated behind `app_labels` label matchers. If you are using Teleport \n+role version 8 to manage access, you must update the role to grant access to this \n+service provider resource with `app_labels` matching `teleport.dev/origin: aws-identity-center` label.\n+```yaml\n+  allow:\n+    app_labels:\n+      'teleport.dev/origin': 'aws-identity-center'",
    "repo_full_name": "gravitational/teleport",
    "discussion_comments": [
      {
        "comment_id": "2320379816",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2320379816",
        "commented_code": "@@ -113,6 +115,21 @@ the same [IdP](../../zero-trust-access/sso/sso.mdx) as your current Identity Cen\n external identity source.\n </Admonition>\n \n+<Admonition type=\"info\" title=\"SAML IdP RBAC\">\n+In this step, Teleport creates a `saml_idp_service_provider` resource for the \n+AWS IAM Identity Center. \n+\n+Starting with Teleport version 18 and role version 8, the SAML IdP service provider \n+resources are gated behind `app_labels` label matchers. If you are using Teleport \n+role version 8 to manage access, you must update the role to grant access to this \n+service provider resource with `app_labels` matching `teleport.dev/origin: aws-identity-center` label.\n+```yaml\n+  allow:\n+    app_labels:\n+      'teleport.dev/origin': 'aws-identity-center'",
        "comment_created_at": "2025-09-03T22:36:11+00:00",
        "comment_author": "r0mant",
        "comment_body": "This is pretty unintuitive, and definitely should be a part of the guide, not just a note. In addition, I think we should update the [custom role example](https://goteleport.com/docs/identity-governance/aws-iam-identity-center/guide/#creating-custom-identity-center-roles) to use role v8 and set proper app label as well.",
        "pr_file_module": null
      },
      {
        "comment_id": "2320381999",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2320379816",
        "commented_code": "@@ -113,6 +115,21 @@ the same [IdP](../../zero-trust-access/sso/sso.mdx) as your current Identity Cen\n external identity source.\n </Admonition>\n \n+<Admonition type=\"info\" title=\"SAML IdP RBAC\">\n+In this step, Teleport creates a `saml_idp_service_provider` resource for the \n+AWS IAM Identity Center. \n+\n+Starting with Teleport version 18 and role version 8, the SAML IdP service provider \n+resources are gated behind `app_labels` label matchers. If you are using Teleport \n+role version 8 to manage access, you must update the role to grant access to this \n+service provider resource with `app_labels` matching `teleport.dev/origin: aws-identity-center` label.\n+```yaml\n+  allow:\n+    app_labels:\n+      'teleport.dev/origin': 'aws-identity-center'",
        "comment_created_at": "2025-09-03T22:37:13+00:00",
        "comment_author": "r0mant",
        "comment_body": "Also, we don't have to do it now but I wonder if we should have a preset \"aws-identity-center\" role that includes this app label.",
        "pr_file_module": null
      },
      {
        "comment_id": "2320621708",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2320379816",
        "commented_code": "@@ -113,6 +115,21 @@ the same [IdP](../../zero-trust-access/sso/sso.mdx) as your current Identity Cen\n external identity source.\n </Admonition>\n \n+<Admonition type=\"info\" title=\"SAML IdP RBAC\">\n+In this step, Teleport creates a `saml_idp_service_provider` resource for the \n+AWS IAM Identity Center. \n+\n+Starting with Teleport version 18 and role version 8, the SAML IdP service provider \n+resources are gated behind `app_labels` label matchers. If you are using Teleport \n+role version 8 to manage access, you must update the role to grant access to this \n+service provider resource with `app_labels` matching `teleport.dev/origin: aws-identity-center` label.\n+```yaml\n+  allow:\n+    app_labels:\n+      'teleport.dev/origin': 'aws-identity-center'",
        "comment_created_at": "2025-09-04T01:59:59+00:00",
        "comment_author": "flyinghermit",
        "comment_body": "Agree. I do not like this either. Also suggesting origin label for RBAC does not sit right with me. Long term, I plan to add a new label when the SAML app is created for the identity center and reference that here. Ideally, create a \"preset\" kind of role and reference that.  @smallinsky and I have been discussing similar ideas to simplify this. \r\n\r\nGood point on updating [custom role example](https://goteleport.com/docs/identity-governance/aws-iam-identity-center/guide/#creating-custom-identity-center-roles) instead. I will do that. ",
        "pr_file_module": null
      },
      {
        "comment_id": "2325129721",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2320379816",
        "commented_code": "@@ -113,6 +115,21 @@ the same [IdP](../../zero-trust-access/sso/sso.mdx) as your current Identity Cen\n external identity source.\n </Admonition>\n \n+<Admonition type=\"info\" title=\"SAML IdP RBAC\">\n+In this step, Teleport creates a `saml_idp_service_provider` resource for the \n+AWS IAM Identity Center. \n+\n+Starting with Teleport version 18 and role version 8, the SAML IdP service provider \n+resources are gated behind `app_labels` label matchers. If you are using Teleport \n+role version 8 to manage access, you must update the role to grant access to this \n+service provider resource with `app_labels` matching `teleport.dev/origin: aws-identity-center` label.\n+```yaml\n+  allow:\n+    app_labels:\n+      'teleport.dev/origin': 'aws-identity-center'",
        "comment_created_at": "2025-09-05T13:37:57+00:00",
        "comment_author": "flyinghermit",
        "comment_body": "I have updated this in a new commit: https://github.com/gravitational/teleport/pull/58667/commits/372ad0181c88c7d99129bf86c8439795af42aa47\r\n- The app label reference is added to the pre-requisite and in the [custom role example](https://goteleport.com/docs/identity-governance/aws-iam-identity-center/guide/#creating-custom-identity-center-roles)\r\n- Remove admonition but kept a short description for the step to mention saml service provider is being configured",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2325453253",
    "pr_number": 58667,
    "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
    "created_at": "2025-09-05T15:49:36+00:00",
    "commented_code": "- Teleport Enterprise or Teleport Enterprise Cloud cluster version 17.0 or higher.\n - Administrative access to AWS IAM Identity Center.\n+- Teleport preset `editor` role or equivalent to configure plugin resource, integration \n+  resource and SAML IdP service provider resource. If you are using [role version 8](../../reference/access-controls/roles.mdx#role-versions) \n+  to manage access (which is the default role version since Teleport version 18.0), \n+  ensure that your role allows `app_labels` for the AWS IAM Identity Center \n+  resource `'teleport.dev/origin': 'aws-identity-center'`.",
    "repo_full_name": "gravitational/teleport",
    "discussion_comments": [
      {
        "comment_id": "2325453253",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2325453253",
        "commented_code": "@@ -24,6 +24,11 @@ Teleport to push user and group changes.\n \n - Teleport Enterprise or Teleport Enterprise Cloud cluster version 17.0 or higher.\n - Administrative access to AWS IAM Identity Center.\n+- Teleport preset `editor` role or equivalent to configure plugin resource, integration \n+  resource and SAML IdP service provider resource. If you are using [role version 8](../../reference/access-controls/roles.mdx#role-versions) \n+  to manage access (which is the default role version since Teleport version 18.0), \n+  ensure that your role allows `app_labels` for the AWS IAM Identity Center \n+  resource `'teleport.dev/origin': 'aws-identity-center'`.",
        "comment_created_at": "2025-09-05T15:49:36+00:00",
        "comment_author": "r0mant",
        "comment_body": "Sorry to keep coming back to this but I still think that even adding this to prerequisites is easy to miss and people will be tripping over access configuration. Like I mentioned before, I think this should be an explicit step of the guide.\r\n\r\nWhat do you think about the following: have an explicit step (say, before the current step 6 \"Connect to AWS\"), something like \"Step x/y. Configure access\". In this step, you will explain that users need to have access to SAML app created by Teleport, show an example of a role with this label, and then also include an example of a custom role that we have below as well.",
        "pr_file_module": null
      },
      {
        "comment_id": "2325456706",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2325453253",
        "commented_code": "@@ -24,6 +24,11 @@ Teleport to push user and group changes.\n \n - Teleport Enterprise or Teleport Enterprise Cloud cluster version 17.0 or higher.\n - Administrative access to AWS IAM Identity Center.\n+- Teleport preset `editor` role or equivalent to configure plugin resource, integration \n+  resource and SAML IdP service provider resource. If you are using [role version 8](../../reference/access-controls/roles.mdx#role-versions) \n+  to manage access (which is the default role version since Teleport version 18.0), \n+  ensure that your role allows `app_labels` for the AWS IAM Identity Center \n+  resource `'teleport.dev/origin': 'aws-identity-center'`.",
        "comment_created_at": "2025-09-05T15:51:10+00:00",
        "comment_author": "r0mant",
        "comment_body": "Also, when importing AWSIC profiles, we create roles for them by default right? Do they have this app label assigned? Can we just assign it to them so they don't need to create a separate role just for the SAML app part?",
        "pr_file_module": null
      },
      {
        "comment_id": "2325471158",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2325453253",
        "commented_code": "@@ -24,6 +24,11 @@ Teleport to push user and group changes.\n \n - Teleport Enterprise or Teleport Enterprise Cloud cluster version 17.0 or higher.\n - Administrative access to AWS IAM Identity Center.\n+- Teleport preset `editor` role or equivalent to configure plugin resource, integration \n+  resource and SAML IdP service provider resource. If you are using [role version 8](../../reference/access-controls/roles.mdx#role-versions) \n+  to manage access (which is the default role version since Teleport version 18.0), \n+  ensure that your role allows `app_labels` for the AWS IAM Identity Center \n+  resource `'teleport.dev/origin': 'aws-identity-center'`.",
        "comment_created_at": "2025-09-05T15:56:55+00:00",
        "comment_author": "flyinghermit",
        "comment_body": "The `app_labels` needs to match for the admin too, because rbac for all the resources that gets created during plugin installation is checked against user's (admin's) context. That's why I put this in  pre-requisite.",
        "pr_file_module": null
      },
      {
        "comment_id": "2325475589",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2325453253",
        "commented_code": "@@ -24,6 +24,11 @@ Teleport to push user and group changes.\n \n - Teleport Enterprise or Teleport Enterprise Cloud cluster version 17.0 or higher.\n - Administrative access to AWS IAM Identity Center.\n+- Teleport preset `editor` role or equivalent to configure plugin resource, integration \n+  resource and SAML IdP service provider resource. If you are using [role version 8](../../reference/access-controls/roles.mdx#role-versions) \n+  to manage access (which is the default role version since Teleport version 18.0), \n+  ensure that your role allows `app_labels` for the AWS IAM Identity Center \n+  resource `'teleport.dev/origin': 'aws-identity-center'`.",
        "comment_created_at": "2025-09-05T15:58:30+00:00",
        "comment_author": "flyinghermit",
        "comment_body": "The imported roles are pinned to role v7 so no need to assign them `app_labels`, until we plan to upgrade that version.  ",
        "pr_file_module": null
      },
      {
        "comment_id": "2325941341",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58667,
        "pr_file": "docs/pages/identity-governance/aws-iam-identity-center/guide.mdx",
        "discussion_id": "2325453253",
        "commented_code": "@@ -24,6 +24,11 @@ Teleport to push user and group changes.\n \n - Teleport Enterprise or Teleport Enterprise Cloud cluster version 17.0 or higher.\n - Administrative access to AWS IAM Identity Center.\n+- Teleport preset `editor` role or equivalent to configure plugin resource, integration \n+  resource and SAML IdP service provider resource. If you are using [role version 8](../../reference/access-controls/roles.mdx#role-versions) \n+  to manage access (which is the default role version since Teleport version 18.0), \n+  ensure that your role allows `app_labels` for the AWS IAM Identity Center \n+  resource `'teleport.dev/origin': 'aws-identity-center'`.",
        "comment_created_at": "2025-09-05T20:03:34+00:00",
        "comment_author": "flyinghermit",
        "comment_body": "Added a new \"configure access\" section https://github.com/gravitational/teleport/pull/58667/commits/bd97e2da7bbf4920304659c0aea9a9df58a08307\r\n\r\n",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2178330795",
    "pr_number": 55986,
    "pr_file": "docs/pages/enroll-resources/kubernetes-access/rancher-integration.mdx",
    "created_at": "2025-07-01T18:52:22+00:00",
    "commented_code": "+---\n+title: \"Secure and Simplify RedHat Rancher RBAC with Teleport\"\n+description: \"Comprehensive guide to integrating Teleport with Rancher for centralized, secure access control and audit logging\"\n+---\n+\n+# Rancher RBAC Integration with Teleport\n+\n+Teleport provides seamless integration with Rancher to centralize and secure access to Rancher clusters.\n+This integration enables:\n+\n+- **Centralized Access Control**: Manage permissions across all Rancher clusters from Teleport\n+- **Enhanced Security**: Enforce identity-based access with Teleport's RBAC\n+- **Simplified Management**: Reduce complexity of managing multiple RBAC systems\n+- **Comprehensive Auditing**: Maintain detailed logs of all access attempts\n+\n+In this guide, we will demonstrate how to integrate Teleport Kubernetes RBAC with Rancher RBAC to centralize and secure\n+access control for Rancher clusters. It demonstrates how to configure Teleport RBAC to grant Rancher's built-in Cluster Member role.\n+\n+## Prerequisites\n+\n+(!docs/pages/includes/edition-prereqs-tabs.mdx!)\n+\n+- (!docs/pages/includes/tctl.mdx!)\n+- Access to a Rancher UI Cluster with admin privileges\n+- Existing cluster(s) managed through Rancher\n+- (Optional) Rancher authentication configured with external auth providers\n+\n+Within Rancher, cluster and project roles are implemented on top of [Kubernetes RBAC](https://kubernetes.io/docs/reference/access-authn-authz/rbac/).\n+Therefore, enforcement of permissions and roles is performed by Kubernetes.\n+\n+## Step 1: Configure Rancher Access",
    "repo_full_name": "gravitational/teleport",
    "discussion_comments": [
      {
        "comment_id": "2178330795",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 55986,
        "pr_file": "docs/pages/enroll-resources/kubernetes-access/rancher-integration.mdx",
        "discussion_id": "2178330795",
        "commented_code": "@@ -0,0 +1,265 @@\n+---\n+title: \"Secure and Simplify RedHat Rancher RBAC with Teleport\"\n+description: \"Comprehensive guide to integrating Teleport with Rancher for centralized, secure access control and audit logging\"\n+---\n+\n+# Rancher RBAC Integration with Teleport\n+\n+Teleport provides seamless integration with Rancher to centralize and secure access to Rancher clusters.\n+This integration enables:\n+\n+- **Centralized Access Control**: Manage permissions across all Rancher clusters from Teleport\n+- **Enhanced Security**: Enforce identity-based access with Teleport's RBAC\n+- **Simplified Management**: Reduce complexity of managing multiple RBAC systems\n+- **Comprehensive Auditing**: Maintain detailed logs of all access attempts\n+\n+In this guide, we will demonstrate how to integrate Teleport Kubernetes RBAC with Rancher RBAC to centralize and secure\n+access control for Rancher clusters. It demonstrates how to configure Teleport RBAC to grant Rancher's built-in Cluster Member role.\n+\n+## Prerequisites\n+\n+(!docs/pages/includes/edition-prereqs-tabs.mdx!)\n+\n+- (!docs/pages/includes/tctl.mdx!)\n+- Access to a Rancher UI Cluster with admin privileges\n+- Existing cluster(s) managed through Rancher\n+- (Optional) Rancher authentication configured with external auth providers\n+\n+Within Rancher, cluster and project roles are implemented on top of [Kubernetes RBAC](https://kubernetes.io/docs/reference/access-authn-authz/rbac/).\n+Therefore, enforcement of permissions and roles is performed by Kubernetes.\n+\n+## Step 1: Configure Rancher Access",
        "comment_created_at": "2025-07-01T18:52:22+00:00",
        "comment_author": "ptgott",
        "comment_body": "I would add a paragraph that briefly describes the objective of this H2 section. Are we configuring RBAC in Rancher to allow the Teleport Kubernetes Service to access Rancher?",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2315691457",
    "pr_number": 58572,
    "pr_file": "docs/pages/identity-security/session-summaries.mdx",
    "created_at": "2025-09-02T10:41:21+00:00",
    "commented_code": "+---\n+title: Session Recording Summaries\n+description: Describes how to generate and view session recording summaries using a language model.\n+labels:\n+  - conceptual\n+  - identity-security\n+---\n+\n+Teleport Identity Security allows you to generate and view session recording\n+summaries for shell and database sessions. This allows you to see at a glance\n+what your users do and estimate legitimacy of their actions before digging\n+deeper and reviewing the entire recording.\n+\n+<Admonition type=\"warning\">\n+This feature is powered by AI, and as such, its accuracy may vary.\n+\n+Teleport doesn't currently support any spend controls; controlling the LLM\n+token budget is your responsibility.\n+</Admonition>\n+\n+## Prerequisites\n+\n+- A running Teleport Enterprise cluster v18.2.0 or later with Identity Security\n+  enabled.\n+- Access to OpenAI or OpenAI-compatible inference API, either public or\n+  self-hosted.\n+\n+## How session recording summarization works\n+\n+There are three fundamental concepts to that underpin session summarization:",
    "repo_full_name": "gravitational/teleport",
    "discussion_comments": [
      {
        "comment_id": "2315691457",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58572,
        "pr_file": "docs/pages/identity-security/session-summaries.mdx",
        "discussion_id": "2315691457",
        "commented_code": "@@ -0,0 +1,299 @@\n+---\n+title: Session Recording Summaries\n+description: Describes how to generate and view session recording summaries using a language model.\n+labels:\n+  - conceptual\n+  - identity-security\n+---\n+\n+Teleport Identity Security allows you to generate and view session recording\n+summaries for shell and database sessions. This allows you to see at a glance\n+what your users do and estimate legitimacy of their actions before digging\n+deeper and reviewing the entire recording.\n+\n+<Admonition type=\"warning\">\n+This feature is powered by AI, and as such, its accuracy may vary.\n+\n+Teleport doesn't currently support any spend controls; controlling the LLM\n+token budget is your responsibility.\n+</Admonition>\n+\n+## Prerequisites\n+\n+- A running Teleport Enterprise cluster v18.2.0 or later with Identity Security\n+  enabled.\n+- Access to OpenAI or OpenAI-compatible inference API, either public or\n+  self-hosted.\n+\n+## How session recording summarization works\n+\n+There are three fundamental concepts to that underpin session summarization:",
        "comment_created_at": "2025-09-02T10:41:21+00:00",
        "comment_author": "tigrato",
        "comment_body": "Before diving into the objects, could we first explain how the overall system works?\n\nI\u2019d like to see:\n- Which sessions are eligible for summarization - specifically recorded interactive sessions.\n- How we apply a session filter based on resource labels or creator user attributes such as traits and roles.\n- If the filter condition is met, we proceed to generate a summary of the raw session.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2291059010",
    "pr_number": 56325,
    "pr_file": "docs/pages/reference/architecture/session-recording.mdx",
    "created_at": "2025-08-21T13:24:43+00:00",
    "commented_code": "</Admonition>\n \n+### Encryption\n+\n+Teleport supports at-rest encryption of session recordings for all 4 recording\n+modes. It can be enabled through the `teleport.yaml` configuration or\n+dynamically through the `session_recording_config` resource. Any required\n+encryption keys are provisioned using the CA key storage backend which is\n+configured by setting `ca_key_params` in the `auth_service` section of the\n+`teleport.yaml`. Similar to CAs, when no `ca_key_params` are provided then the\n+encryption keys will be software generated and saved in Teleport's storage\n+backend.",
    "repo_full_name": "gravitational/teleport",
    "discussion_comments": [
      {
        "comment_id": "2291059010",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 56325,
        "pr_file": "docs/pages/reference/architecture/session-recording.mdx",
        "discussion_id": "2291059010",
        "commented_code": "@@ -81,6 +81,43 @@ and `proxy-sync` identically (perform synchronous recording).\n \n </Admonition>\n \n+### Encryption\n+\n+Teleport supports at-rest encryption of session recordings for all 4 recording\n+modes. It can be enabled through the `teleport.yaml` configuration or\n+dynamically through the `session_recording_config` resource. Any required\n+encryption keys are provisioned using the CA key storage backend which is\n+configured by setting `ca_key_params` in the `auth_service` section of the\n+`teleport.yaml`. Similar to CAs, when no `ca_key_params` are provided then the\n+encryption keys will be software generated and saved in Teleport's storage\n+backend.",
        "comment_created_at": "2025-08-21T13:24:43+00:00",
        "comment_author": "ptgott",
        "comment_body": "I would blend this text with the configuration snippets below. Otherwise, since I don't know anything about the placement of these fields in a YAML data structure or their expected values, the names of these fields don't mean anything to me.",
        "pr_file_module": null
      }
    ]
  }
]