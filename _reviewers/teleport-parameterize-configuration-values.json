[
  {
    "discussion_id": "2314559961",
    "pr_number": 58558,
    "pr_file": "docs/pages/includes/config-reference/desktop-config.yaml",
    "created_at": "2025-09-01T20:51:50+00:00",
    "commented_code": "# (optional) interval at which to run desktop discovery\n   discovery_interval: 10m\n \n+  # (optional) interval at which to publish CRLs\n+  publish_crl_interval: 10m",
    "repo_full_name": "gravitational/teleport",
    "discussion_comments": [
      {
        "comment_id": "2314559961",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58558,
        "pr_file": "docs/pages/includes/config-reference/desktop-config.yaml",
        "discussion_id": "2314559961",
        "commented_code": "@@ -119,6 +119,9 @@ windows_desktop_service:\n   # (optional) interval at which to run desktop discovery\n   discovery_interval: 10m\n \n+  # (optional) interval at which to publish CRLs\n+  publish_crl_interval: 10m",
        "comment_created_at": "2025-09-01T20:51:50+00:00",
        "comment_author": "probakowski",
        "comment_body": "I wonder if we need this to be configurable at all, is there a scenario where user would like to change that?\r\nI think discovery interval is different as it exchanges much more data (100s of desktops potentially)",
        "pr_file_module": null
      },
      {
        "comment_id": "2315594316",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58558,
        "pr_file": "docs/pages/includes/config-reference/desktop-config.yaml",
        "discussion_id": "2314559961",
        "commented_code": "@@ -119,6 +119,9 @@ windows_desktop_service:\n   # (optional) interval at which to run desktop discovery\n   discovery_interval: 10m\n \n+  # (optional) interval at which to publish CRLs\n+  publish_crl_interval: 10m",
        "comment_created_at": "2025-09-02T10:03:46+00:00",
        "comment_author": "danielashare",
        "comment_body": "I was 50/50 on whether this should be configurable, you present a good argument for not. I wonder if the default should be 5 minutes as that is the same as the discovery interval and if the CRL fails the first time, it should retry just before discovery happens again (if it has also been left as default). What do you think?",
        "pr_file_module": null
      },
      {
        "comment_id": "2316279811",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58558,
        "pr_file": "docs/pages/includes/config-reference/desktop-config.yaml",
        "discussion_id": "2314559961",
        "commented_code": "@@ -119,6 +119,9 @@ windows_desktop_service:\n   # (optional) interval at which to run desktop discovery\n   discovery_interval: 10m\n \n+  # (optional) interval at which to publish CRLs\n+  publish_crl_interval: 10m",
        "comment_created_at": "2025-09-02T14:31:16+00:00",
        "comment_author": "zmb3",
        "comment_body": "I don't mind making it configurable. Most people won't override the default, but those who want to will be able to.",
        "pr_file_module": null
      },
      {
        "comment_id": "2318555520",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58558,
        "pr_file": "docs/pages/includes/config-reference/desktop-config.yaml",
        "discussion_id": "2314559961",
        "commented_code": "@@ -119,6 +119,9 @@ windows_desktop_service:\n   # (optional) interval at which to run desktop discovery\n   discovery_interval: 10m\n \n+  # (optional) interval at which to publish CRLs\n+  publish_crl_interval: 10m",
        "comment_created_at": "2025-09-03T10:36:52+00:00",
        "comment_author": "danielashare",
        "comment_body": "Hard to think of a default that is good for everyone, so will put the configuration back in \ud83d\ude42 ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2316072164",
    "pr_number": 58579,
    "pr_file": "assets/loadtest/helm/resources/templates/tbot.yaml",
    "created_at": "2025-09-02T13:18:16+00:00",
    "commented_code": "+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: tbot\n+  namespace: {{ .Release.Namespace }}\n+spec:\n+  replicas: 1\n+  strategy:\n+    type: Recreate\n+  selector:\n+    matchLabels:\n+      app.kubernetes.io/name: tbot\n+  template:\n+    metadata:\n+      labels:\n+        app.kubernetes.io/name: tbot\n+    spec:\n+      containers:\n+        - name: tbot\n+          image: public.ecr.aws/gravitational/tbot-distroless:{{ default $.Chart.AppVersion $.Values.image.tag }}\n+          args:\n+            - start\n+            - -c\n+            - /config/tbot.yaml\n+          env:\n+            - name: POD_NAMESPACE\n+              valueFrom:\n+                fieldRef:\n+                  fieldPath: metadata.namespace\n+            - name: KUBERNETES_TOKEN_PATH\n+              value: /var/run/secrets/tokens/join-sa-token\n+            - name: TELEPORT_ANONYMOUS_TELEMETRY\n+              value: \"1\"\n+          volumeMounts:\n+            - mountPath: /config\n+              name: config\n+            - mountPath: /var/run/secrets/tokens\n+              name: join-sa-token\n+      serviceAccountName: tbot\n+      volumes:\n+        - name: config\n+          configMap:\n+            name: tbot-config\n+        - name: join-sa-token\n+          projected:\n+            sources:\n+              - serviceAccountToken:\n+                  path: join-sa-token\n+                  expirationSeconds: 600\n+                  audience: {{ .Values.clusterName }}\n+---\n+apiVersion: v1\n+kind: ConfigMap\n+metadata:\n+  name: tbot-config\n+  namespace: {{ .Release.Namespace }}\n+data:\n+  tbot.yaml: |\n+    version: v2\n+    onboarding:\n+      join_method: kubernetes\n+      token: tbot-token\n+    storage:\n+      type: memory\n+    proxy_server: lukeo.teleport-test.com:443",
    "repo_full_name": "gravitational/teleport",
    "discussion_comments": [
      {
        "comment_id": "2316072164",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58579,
        "pr_file": "assets/loadtest/helm/resources/templates/tbot.yaml",
        "discussion_id": "2316072164",
        "commented_code": "@@ -0,0 +1,99 @@\n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: tbot\n+  namespace: {{ .Release.Namespace }}\n+spec:\n+  replicas: 1\n+  strategy:\n+    type: Recreate\n+  selector:\n+    matchLabels:\n+      app.kubernetes.io/name: tbot\n+  template:\n+    metadata:\n+      labels:\n+        app.kubernetes.io/name: tbot\n+    spec:\n+      containers:\n+        - name: tbot\n+          image: public.ecr.aws/gravitational/tbot-distroless:{{ default $.Chart.AppVersion $.Values.image.tag }}\n+          args:\n+            - start\n+            - -c\n+            - /config/tbot.yaml\n+          env:\n+            - name: POD_NAMESPACE\n+              valueFrom:\n+                fieldRef:\n+                  fieldPath: metadata.namespace\n+            - name: KUBERNETES_TOKEN_PATH\n+              value: /var/run/secrets/tokens/join-sa-token\n+            - name: TELEPORT_ANONYMOUS_TELEMETRY\n+              value: \"1\"\n+          volumeMounts:\n+            - mountPath: /config\n+              name: config\n+            - mountPath: /var/run/secrets/tokens\n+              name: join-sa-token\n+      serviceAccountName: tbot\n+      volumes:\n+        - name: config\n+          configMap:\n+            name: tbot-config\n+        - name: join-sa-token\n+          projected:\n+            sources:\n+              - serviceAccountToken:\n+                  path: join-sa-token\n+                  expirationSeconds: 600\n+                  audience: {{ .Values.clusterName }}\n+---\n+apiVersion: v1\n+kind: ConfigMap\n+metadata:\n+  name: tbot-config\n+  namespace: {{ .Release.Namespace }}\n+data:\n+  tbot.yaml: |\n+    version: v2\n+    onboarding:\n+      join_method: kubernetes\n+      token: tbot-token\n+    storage:\n+      type: memory\n+    proxy_server: lukeo.teleport-test.com:443",
        "comment_created_at": "2025-09-02T13:18:16+00:00",
        "comment_author": "rosstimothy",
        "comment_body": "\ud83e\uddd0 \r\n```suggestion\r\n    proxy_server: example.teleport-test.com:443\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "2316240925",
        "repo_full_name": "gravitational/teleport",
        "pr_number": 58579,
        "pr_file": "assets/loadtest/helm/resources/templates/tbot.yaml",
        "discussion_id": "2316072164",
        "commented_code": "@@ -0,0 +1,99 @@\n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: tbot\n+  namespace: {{ .Release.Namespace }}\n+spec:\n+  replicas: 1\n+  strategy:\n+    type: Recreate\n+  selector:\n+    matchLabels:\n+      app.kubernetes.io/name: tbot\n+  template:\n+    metadata:\n+      labels:\n+        app.kubernetes.io/name: tbot\n+    spec:\n+      containers:\n+        - name: tbot\n+          image: public.ecr.aws/gravitational/tbot-distroless:{{ default $.Chart.AppVersion $.Values.image.tag }}\n+          args:\n+            - start\n+            - -c\n+            - /config/tbot.yaml\n+          env:\n+            - name: POD_NAMESPACE\n+              valueFrom:\n+                fieldRef:\n+                  fieldPath: metadata.namespace\n+            - name: KUBERNETES_TOKEN_PATH\n+              value: /var/run/secrets/tokens/join-sa-token\n+            - name: TELEPORT_ANONYMOUS_TELEMETRY\n+              value: \"1\"\n+          volumeMounts:\n+            - mountPath: /config\n+              name: config\n+            - mountPath: /var/run/secrets/tokens\n+              name: join-sa-token\n+      serviceAccountName: tbot\n+      volumes:\n+        - name: config\n+          configMap:\n+            name: tbot-config\n+        - name: join-sa-token\n+          projected:\n+            sources:\n+              - serviceAccountToken:\n+                  path: join-sa-token\n+                  expirationSeconds: 600\n+                  audience: {{ .Values.clusterName }}\n+---\n+apiVersion: v1\n+kind: ConfigMap\n+metadata:\n+  name: tbot-config\n+  namespace: {{ .Release.Namespace }}\n+data:\n+  tbot.yaml: |\n+    version: v2\n+    onboarding:\n+      join_method: kubernetes\n+      token: tbot-token\n+    storage:\n+      type: memory\n+    proxy_server: lukeo.teleport-test.com:443",
        "comment_created_at": "2025-09-02T14:17:19+00:00",
        "comment_author": "okraport",
        "comment_body": "Missed this when parametizing, fixed, thank you!",
        "pr_file_module": null
      }
    ]
  }
]