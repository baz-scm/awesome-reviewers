[
  {
    "discussion_id": "1954487094",
    "pr_number": 36499,
    "pr_file": ".github/workflows/changelog.yml",
    "created_at": "2025-02-13T13:18:46+00:00",
    "commented_code": "// Nothing to complain about, so delete any existing comment\n             await createOrUpdateChangelogComment(\"\", true);\n+      - name: Checkout changie config\n+        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
    "repo_full_name": "hashicorp/terraform",
    "discussion_comments": [
      {
        "comment_id": "1954487094",
        "repo_full_name": "hashicorp/terraform",
        "pr_number": 36499,
        "pr_file": ".github/workflows/changelog.yml",
        "discussion_id": "1954487094",
        "commented_code": "@@ -163,6 +163,8 @@ jobs:\n \n             // Nothing to complain about, so delete any existing comment\n             await createOrUpdateChangelogComment(\"\", true);\n+      - name: Checkout changie config\n+        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
        "comment_created_at": "2025-02-13T13:18:46+00:00",
        "comment_author": "DanielMSchmidt",
        "comment_body": "I think you would need to use \r\n```\r\nwith:\r\n  ref: github.head_ref\r\n```\r\n\r\nhere. Since this is a `pull_request_target` workflow the ref that would be used by default is the target branch of the PR, so in our case e.g. main and not the branch under test (see comment in the beginning of this file).\r\n\r\nAnother way to solve this would be to create a different workflow for this validation altogether",
        "pr_file_module": null
      },
      {
        "comment_id": "1954494675",
        "repo_full_name": "hashicorp/terraform",
        "pr_number": 36499,
        "pr_file": ".github/workflows/changelog.yml",
        "discussion_id": "1954487094",
        "commented_code": "@@ -163,6 +163,8 @@ jobs:\n \n             // Nothing to complain about, so delete any existing comment\n             await createOrUpdateChangelogComment(\"\", true);\n+      - name: Checkout changie config\n+        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
        "comment_created_at": "2025-02-13T13:23:20+00:00",
        "comment_author": "radeksimko",
        "comment_body": "I see, fair point and good catch - thanks, I'll make the change",
        "pr_file_module": null
      },
      {
        "comment_id": "1954496034",
        "repo_full_name": "hashicorp/terraform",
        "pr_number": 36499,
        "pr_file": ".github/workflows/changelog.yml",
        "discussion_id": "1954487094",
        "commented_code": "@@ -163,6 +163,8 @@ jobs:\n \n             // Nothing to complain about, so delete any existing comment\n             await createOrUpdateChangelogComment(\"\", true);\n+      - name: Checkout changie config\n+        uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
        "comment_created_at": "2025-02-13T13:24:15+00:00",
        "comment_author": "radeksimko",
        "comment_body": "Addressed in [21eb9ae](https://github.com/hashicorp/terraform/pull/36499/commits/21eb9aeeef5cbdbd60c9e7ca799a791062a41523)",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1954531672",
    "pr_number": 36499,
    "pr_file": ".github/workflows/changelog.yml",
    "created_at": "2025-02-13T13:47:11+00:00",
    "commented_code": "await createOrUpdateChangelogComment(\"\", true);\n       - name: Checkout changie config\n         uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
    "repo_full_name": "hashicorp/terraform",
    "discussion_comments": [
      {
        "comment_id": "1954531672",
        "repo_full_name": "hashicorp/terraform",
        "pr_number": 36499,
        "pr_file": ".github/workflows/changelog.yml",
        "discussion_id": "1954531672",
        "commented_code": "@@ -165,6 +165,8 @@ jobs:\n             await createOrUpdateChangelogComment(\"\", true);\n       - name: Checkout changie config\n         uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
        "comment_created_at": "2025-02-13T13:47:11+00:00",
        "comment_author": "SarahFrench",
        "comment_body": "An option here could be to selectively check out the change files/`.changes` folder. I think the `filter` argument for the checkout action can be used for this.\r\n\r\nThat could help protect against this workflow being extended in future to run the code from the external PR (which would then be running with some write permissions).",
        "pr_file_module": null
      },
      {
        "comment_id": "1954631579",
        "repo_full_name": "hashicorp/terraform",
        "pr_number": 36499,
        "pr_file": ".github/workflows/changelog.yml",
        "discussion_id": "1954531672",
        "commented_code": "@@ -165,6 +165,8 @@ jobs:\n             await createOrUpdateChangelogComment(\"\", true);\n       - name: Checkout changie config\n         uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
        "comment_created_at": "2025-02-13T14:42:54+00:00",
        "comment_author": "DanielMSchmidt",
        "comment_body": "I like the idea üëç ",
        "pr_file_module": null
      },
      {
        "comment_id": "1954650511",
        "repo_full_name": "hashicorp/terraform",
        "pr_number": 36499,
        "pr_file": ".github/workflows/changelog.yml",
        "discussion_id": "1954531672",
        "commented_code": "@@ -165,6 +165,8 @@ jobs:\n             await createOrUpdateChangelogComment(\"\", true);\n       - name: Checkout changie config\n         uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
        "comment_created_at": "2025-02-13T14:53:21+00:00",
        "comment_author": "radeksimko",
        "comment_body": "I will use `sparse-checkout` instead as I cannot work out what the pattern syntax is supposed to be for `filter` as there does not seem to be any docs or examples sadly.",
        "pr_file_module": null
      },
      {
        "comment_id": "1954659080",
        "repo_full_name": "hashicorp/terraform",
        "pr_number": 36499,
        "pr_file": ".github/workflows/changelog.yml",
        "discussion_id": "1954531672",
        "commented_code": "@@ -165,6 +165,8 @@ jobs:\n             await createOrUpdateChangelogComment(\"\", true);\n       - name: Checkout changie config\n         uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2",
        "comment_created_at": "2025-02-13T14:56:45+00:00",
        "comment_author": "radeksimko",
        "comment_body": "Addressed in [a54d852](https://github.com/hashicorp/terraform/pull/36499/commits/a54d8526503c05c7ae248d47e842e0aab3dc0e13)\r\n\r\nI followed example at https://github.com/actions/checkout/blob/main/README.md#fetch-only-a-single-file",
        "pr_file_module": null
      }
    ]
  }
]