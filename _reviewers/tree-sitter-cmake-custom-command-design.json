[
  {
    "discussion_id": "1769541757",
    "pr_number": 3608,
    "pr_file": "cli/src/generate/templates/cmakelists.txt",
    "created_at": "2024-09-21T11:38:36+00:00",
    "commented_code": "+cmake_minimum_required(VERSION 3.13)\n+\n+project(tree-sitter-PARSER_NAME\n+        VERSION \"0.0.1\"\n+        DESCRIPTION \"CAMEL_PARSER_NAME grammar for tree-sitter\"\n+        HOMEPAGE_URL \"https://github.com/tree-sitter/tree-sitter-PARSER_NAME\"\n+        LANGUAGES C)\n+\n+option(BUILD_SHARED_LIBS \"Build using shared libraries\" ON)\n+\n+set(TREE_SITTER_ABI_VERSION ABI_VERSION_MAX CACHE STRING \"Tree-sitter ABI version\")\n+if(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+    unset(TREE_SITTER_ABI_VERSION CACHE)\n+    message(FATAL_ERROR \"TREE_SITTER_ABI_VERSION must be an integer\")\n+endif(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+\n+find_program(TREE_SITTER_CLI tree-sitter DOC \"Tree-sitter CLI\")\n+\n+add_custom_target(generate DEPENDS src/parser.c)",
    "repo_full_name": "tree-sitter/tree-sitter",
    "discussion_comments": [
      {
        "comment_id": "1769541757",
        "repo_full_name": "tree-sitter/tree-sitter",
        "pr_number": 3608,
        "pr_file": "cli/src/generate/templates/cmakelists.txt",
        "discussion_id": "1769541757",
        "commented_code": "@@ -0,0 +1,53 @@\n+cmake_minimum_required(VERSION 3.13)\n+\n+project(tree-sitter-PARSER_NAME\n+        VERSION \"0.0.1\"\n+        DESCRIPTION \"CAMEL_PARSER_NAME grammar for tree-sitter\"\n+        HOMEPAGE_URL \"https://github.com/tree-sitter/tree-sitter-PARSER_NAME\"\n+        LANGUAGES C)\n+\n+option(BUILD_SHARED_LIBS \"Build using shared libraries\" ON)\n+\n+set(TREE_SITTER_ABI_VERSION ABI_VERSION_MAX CACHE STRING \"Tree-sitter ABI version\")\n+if(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+    unset(TREE_SITTER_ABI_VERSION CACHE)\n+    message(FATAL_ERROR \"TREE_SITTER_ABI_VERSION must be an integer\")\n+endif(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+\n+find_program(TREE_SITTER_CLI tree-sitter DOC \"Tree-sitter CLI\")\n+\n+add_custom_target(generate DEPENDS src/parser.c)",
        "comment_created_at": "2024-09-21T11:38:36+00:00",
        "comment_author": "dundargoc",
        "comment_body": "I don't fully understand this. I can't see where this target is used. Is this meant to be invoked manually/as a standalone target?",
        "pr_file_module": null
      },
      {
        "comment_id": "1769549394",
        "repo_full_name": "tree-sitter/tree-sitter",
        "pr_number": 3608,
        "pr_file": "cli/src/generate/templates/cmakelists.txt",
        "discussion_id": "1769541757",
        "commented_code": "@@ -0,0 +1,53 @@\n+cmake_minimum_required(VERSION 3.13)\n+\n+project(tree-sitter-PARSER_NAME\n+        VERSION \"0.0.1\"\n+        DESCRIPTION \"CAMEL_PARSER_NAME grammar for tree-sitter\"\n+        HOMEPAGE_URL \"https://github.com/tree-sitter/tree-sitter-PARSER_NAME\"\n+        LANGUAGES C)\n+\n+option(BUILD_SHARED_LIBS \"Build using shared libraries\" ON)\n+\n+set(TREE_SITTER_ABI_VERSION ABI_VERSION_MAX CACHE STRING \"Tree-sitter ABI version\")\n+if(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+    unset(TREE_SITTER_ABI_VERSION CACHE)\n+    message(FATAL_ERROR \"TREE_SITTER_ABI_VERSION must be an integer\")\n+endif(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+\n+find_program(TREE_SITTER_CLI tree-sitter DOC \"Tree-sitter CLI\")\n+\n+add_custom_target(generate DEPENDS src/parser.c)",
        "comment_created_at": "2024-09-21T12:34:12+00:00",
        "comment_author": "ObserverOfTime",
        "comment_body": "The main target depends on `src/parser.c` and will call this target if and only if it is missing.",
        "pr_file_module": null
      },
      {
        "comment_id": "1769613131",
        "repo_full_name": "tree-sitter/tree-sitter",
        "pr_number": 3608,
        "pr_file": "cli/src/generate/templates/cmakelists.txt",
        "discussion_id": "1769541757",
        "commented_code": "@@ -0,0 +1,53 @@\n+cmake_minimum_required(VERSION 3.13)\n+\n+project(tree-sitter-PARSER_NAME\n+        VERSION \"0.0.1\"\n+        DESCRIPTION \"CAMEL_PARSER_NAME grammar for tree-sitter\"\n+        HOMEPAGE_URL \"https://github.com/tree-sitter/tree-sitter-PARSER_NAME\"\n+        LANGUAGES C)\n+\n+option(BUILD_SHARED_LIBS \"Build using shared libraries\" ON)\n+\n+set(TREE_SITTER_ABI_VERSION ABI_VERSION_MAX CACHE STRING \"Tree-sitter ABI version\")\n+if(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+    unset(TREE_SITTER_ABI_VERSION CACHE)\n+    message(FATAL_ERROR \"TREE_SITTER_ABI_VERSION must be an integer\")\n+endif(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+\n+find_program(TREE_SITTER_CLI tree-sitter DOC \"Tree-sitter CLI\")\n+\n+add_custom_target(generate DEPENDS src/parser.c)",
        "comment_created_at": "2024-09-21T16:40:19+00:00",
        "comment_author": "dundargoc",
        "comment_body": "I still suspect the target `generate` isn't needed and that only `add_custom_command` is required but I don't know how to test this.",
        "pr_file_module": null
      },
      {
        "comment_id": "1769614997",
        "repo_full_name": "tree-sitter/tree-sitter",
        "pr_number": 3608,
        "pr_file": "cli/src/generate/templates/cmakelists.txt",
        "discussion_id": "1769541757",
        "commented_code": "@@ -0,0 +1,53 @@\n+cmake_minimum_required(VERSION 3.13)\n+\n+project(tree-sitter-PARSER_NAME\n+        VERSION \"0.0.1\"\n+        DESCRIPTION \"CAMEL_PARSER_NAME grammar for tree-sitter\"\n+        HOMEPAGE_URL \"https://github.com/tree-sitter/tree-sitter-PARSER_NAME\"\n+        LANGUAGES C)\n+\n+option(BUILD_SHARED_LIBS \"Build using shared libraries\" ON)\n+\n+set(TREE_SITTER_ABI_VERSION ABI_VERSION_MAX CACHE STRING \"Tree-sitter ABI version\")\n+if(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+    unset(TREE_SITTER_ABI_VERSION CACHE)\n+    message(FATAL_ERROR \"TREE_SITTER_ABI_VERSION must be an integer\")\n+endif(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+\n+find_program(TREE_SITTER_CLI tree-sitter DOC \"Tree-sitter CLI\")\n+\n+add_custom_target(generate DEPENDS src/parser.c)",
        "comment_created_at": "2024-09-21T16:54:34+00:00",
        "comment_author": "ObserverOfTime",
        "comment_body": "Maybe, but this allows users to run it manually.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1780002234",
    "pr_number": 3608,
    "pr_file": "cli/src/templates/cmakelists.txt",
    "created_at": "2024-09-29T09:51:38+00:00",
    "commented_code": "+cmake_minimum_required(VERSION 3.13)\n+\n+project(tree-sitter-PARSER_NAME\n+        VERSION \"0.0.1\"\n+        DESCRIPTION \"CAMEL_PARSER_NAME grammar for tree-sitter\"\n+        HOMEPAGE_URL \"https://github.com/tree-sitter/tree-sitter-PARSER_NAME\"\n+        LANGUAGES C)\n+\n+option(BUILD_SHARED_LIBS \"Build using shared libraries\" ON)\n+\n+set(TREE_SITTER_ABI_VERSION ABI_VERSION_MAX CACHE STRING \"Tree-sitter ABI version\")\n+if(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+    unset(TREE_SITTER_ABI_VERSION CACHE)\n+    message(FATAL_ERROR \"TREE_SITTER_ABI_VERSION must be an integer\")\n+endif()\n+\n+find_program(TREE_SITTER_CLI tree-sitter DOC \"Tree-sitter CLI\")\n+\n+add_custom_command(OUTPUT \"${CMAKE_CURRENT_SOURCE_DIR}/src/parser.c\"\n+                   DEPENDS \"${CMAKE_CURRENT_SOURCE_DIR}/src/grammar.json\"\n+                   COMMAND \"${TREE_SITTER_CLI}\" generate src/grammar.json\n+                            --abi=${TREE_SITTER_ABI_VERSION}\n+                   WORKING_DIRECTORY \"${CMAKE_CURRENT_SOURCE_DIR}\"\n+                   COMMENT \"Generating parser.c\")",
    "repo_full_name": "tree-sitter/tree-sitter",
    "discussion_comments": [
      {
        "comment_id": "1780002234",
        "repo_full_name": "tree-sitter/tree-sitter",
        "pr_number": 3608,
        "pr_file": "cli/src/templates/cmakelists.txt",
        "discussion_id": "1780002234",
        "commented_code": "@@ -0,0 +1,54 @@\n+cmake_minimum_required(VERSION 3.13)\n+\n+project(tree-sitter-PARSER_NAME\n+        VERSION \"0.0.1\"\n+        DESCRIPTION \"CAMEL_PARSER_NAME grammar for tree-sitter\"\n+        HOMEPAGE_URL \"https://github.com/tree-sitter/tree-sitter-PARSER_NAME\"\n+        LANGUAGES C)\n+\n+option(BUILD_SHARED_LIBS \"Build using shared libraries\" ON)\n+\n+set(TREE_SITTER_ABI_VERSION ABI_VERSION_MAX CACHE STRING \"Tree-sitter ABI version\")\n+if(NOT ${TREE_SITTER_ABI_VERSION} MATCHES \"^[0-9]+$\")\n+    unset(TREE_SITTER_ABI_VERSION CACHE)\n+    message(FATAL_ERROR \"TREE_SITTER_ABI_VERSION must be an integer\")\n+endif()\n+\n+find_program(TREE_SITTER_CLI tree-sitter DOC \"Tree-sitter CLI\")\n+\n+add_custom_command(OUTPUT \"${CMAKE_CURRENT_SOURCE_DIR}/src/parser.c\"\n+                   DEPENDS \"${CMAKE_CURRENT_SOURCE_DIR}/src/grammar.json\"\n+                   COMMAND \"${TREE_SITTER_CLI}\" generate src/grammar.json\n+                            --abi=${TREE_SITTER_ABI_VERSION}\n+                   WORKING_DIRECTORY \"${CMAKE_CURRENT_SOURCE_DIR}\"\n+                   COMMENT \"Generating parser.c\")",
        "comment_created_at": "2024-09-29T09:51:38+00:00",
        "comment_author": "ObserverOfTime",
        "comment_body": "With a `--no-parser` flag for `generate` we could add another intermediate target for `src/grammar.json`.",
        "pr_file_module": null
      }
    ]
  }
]