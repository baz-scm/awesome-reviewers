[
  {
    "discussion_id": "1902719085",
    "pr_number": 4068,
    "pr_file": "Package.swift",
    "created_at": "2025-01-04T07:37:32+00:00",
    "commented_code": "targets: [\n         .target(name: \"TreeSitter\",\n                 path: \"lib\",\n-                sources: [\"src/lib.c\"],\n+                exclude: [\n+                  \"src/wasm\",\n+                  \"src/unicode/ICU_SHA\",\n+                  \"src/unicode/README.md\",\n+                  \"src/unicode/LICENSE\",",
    "repo_full_name": "tree-sitter/tree-sitter",
    "discussion_comments": [
      {
        "comment_id": "1902719085",
        "repo_full_name": "tree-sitter/tree-sitter",
        "pr_number": 4068,
        "pr_file": "Package.swift",
        "discussion_id": "1902719085",
        "commented_code": "@@ -14,12 +14,21 @@ let package = Package(\n     targets: [\n         .target(name: \"TreeSitter\",\n                 path: \"lib\",\n-                sources: [\"src/lib.c\"],\n+                exclude: [\n+                  \"src/wasm\",\n+                  \"src/unicode/ICU_SHA\",\n+                  \"src/unicode/README.md\",\n+                  \"src/unicode/LICENSE\",",
        "comment_created_at": "2025-01-04T07:37:32+00:00",
        "comment_author": "ObserverOfTime",
        "comment_body": "Don't exclude the wasm folder, in case wasm is supported in the future.\r\nAnd don't exclude the vendored unicode files (particularly the license).",
        "pr_file_module": null
      },
      {
        "comment_id": "1903085775",
        "repo_full_name": "tree-sitter/tree-sitter",
        "pr_number": 4068,
        "pr_file": "Package.swift",
        "discussion_id": "1902719085",
        "commented_code": "@@ -14,12 +14,21 @@ let package = Package(\n     targets: [\n         .target(name: \"TreeSitter\",\n                 path: \"lib\",\n-                sources: [\"src/lib.c\"],\n+                exclude: [\n+                  \"src/wasm\",\n+                  \"src/unicode/ICU_SHA\",\n+                  \"src/unicode/README.md\",\n+                  \"src/unicode/LICENSE\",",
        "comment_created_at": "2025-01-04T11:41:53+00:00",
        "comment_author": "0xLucasMarcal",
        "comment_body": "Done.\r\nWe have to exclude ICU_SHA, README.md and LICENSE because they're are not source code files, including these generates `No rule to process file` warning for client builds:\r\n\r\n<img width=\"434\" alt=\"Screenshot 2025-01-04 at 8 31 47\u202fAM\" src=\"https://github.com/user-attachments/assets/c5257899-d73a-49d5-903d-e50a1b798ae9\" />\r\n\r\nThe exclude flag just omits those files from the compilation phase, but they are still preserved in the downloaded repo:\r\n\r\n<img width=\"426\" alt=\"Screenshot 2025-01-04 at 8 36 10\u202fAM\" src=\"https://github.com/user-attachments/assets/8ecdefbf-15f7-4d55-ba2b-0711b2e77ccf\" />\r\n\r\n",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1305428729",
    "pr_number": 2438,
    "pr_file": "cli/src/generate/templates/Package.swift",
    "created_at": "2023-08-25T09:32:01+00:00",
    "commented_code": "+// swift-tools-version:5.3\n+import PackageDescription\n+\n+let package = Package(\n+    name: \"TreeSitterCAMEL_PARSER_NAME\",\n+    platforms: [.macOS(.v10_13), .iOS(.v11)],\n+    products: [\n+        .library(name: \"TreeSitterCAMEL_PARSER_NAME\", targets: [\"TreeSitterCAMEL_PARSER_NAME\"]),\n+    ],\n+    dependencies: [],\n+    targets: [\n+        .target(name: \"TreeSitterCAMEL_PARSER_NAME\",\n+                path: \".\",\n+                exclude: [\n+                    \"binding.gyp\",\n+                    \"bindings\",\n+                    \"Cargo.toml\",\n+                    \"corpus\",\n+                    \"examples\",\n+                    \"test\",\n+                    \"grammar.js\",\n+                    \"LICENSE\",\n+                    \"Makefile\",\n+                    \"package.json\",\n+                    \"README.md\",\n+                    \"script\",\n+                    \"src/grammar.json\",\n+                    \"src/node-types.json\",\n+                    \"*.wasm\",",
    "repo_full_name": "tree-sitter/tree-sitter",
    "discussion_comments": [
      {
        "comment_id": "1305428729",
        "repo_full_name": "tree-sitter/tree-sitter",
        "pr_number": 2438,
        "pr_file": "cli/src/generate/templates/Package.swift",
        "discussion_id": "1305428729",
        "commented_code": "@@ -0,0 +1,42 @@\n+// swift-tools-version:5.3\n+import PackageDescription\n+\n+let package = Package(\n+    name: \"TreeSitterCAMEL_PARSER_NAME\",\n+    platforms: [.macOS(.v10_13), .iOS(.v11)],\n+    products: [\n+        .library(name: \"TreeSitterCAMEL_PARSER_NAME\", targets: [\"TreeSitterCAMEL_PARSER_NAME\"]),\n+    ],\n+    dependencies: [],\n+    targets: [\n+        .target(name: \"TreeSitterCAMEL_PARSER_NAME\",\n+                path: \".\",\n+                exclude: [\n+                    \"binding.gyp\",\n+                    \"bindings\",\n+                    \"Cargo.toml\",\n+                    \"corpus\",\n+                    \"examples\",\n+                    \"test\",\n+                    \"grammar.js\",\n+                    \"LICENSE\",\n+                    \"Makefile\",\n+                    \"package.json\",\n+                    \"README.md\",\n+                    \"script\",\n+                    \"src/grammar.json\",\n+                    \"src/node-types.json\",\n+                    \"*.wasm\",",
        "comment_created_at": "2023-08-25T09:32:01+00:00",
        "comment_author": "mattmassicotte",
        "comment_body": "An exclude list is unnecessary for recent Swift versions. It is safe to just leave this array empty.",
        "pr_file_module": null
      }
    ]
  }
]