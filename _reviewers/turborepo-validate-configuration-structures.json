[
  {
    "discussion_id": "2177693179",
    "pr_number": 10619,
    "pr_file": "packages/turbo-utils/src/getTurboConfigs.ts",
    "created_at": "2025-07-01T14:03:11+00:00",
    "commented_code": "const isWorkspaceRoot = workspacePath === turboRoot;\n \n         // Try and get turbo.json or turbo.jsonc\n-        const turboJsonPath = path.join(workspacePath, \"turbo.json\");\n-        const turboJsoncPath = path.join(workspacePath, \"turbo.jsonc\");\n-\n-        // Check if both files exist\n-        const turboJsonExists = fs.existsSync(turboJsonPath);\n-        const turboJsoncExists = fs.existsSync(turboJsoncPath);\n-\n-        if (turboJsonExists && turboJsoncExists) {\n-          const errorMessage = `Found both turbo.json and turbo.jsonc in the same directory: ${workspacePath}\nPlease use either turbo.json or turbo.jsonc, but not both.`;\n-          logger.error(errorMessage);\n-          throw new Error(errorMessage);\n-        }\n+        const { configPath: turboConfigPath, configExists, error } = resolveTurboConfigPath(workspacePath);\n \n         let rawTurboJson = null;\n         let turboConfig: SchemaV1 | undefined;\n \n         try {\n-          if (turboJsonExists) {\n-            rawTurboJson = fs.readFileSync(turboJsonPath, \"utf8\");\n-          } else if (turboJsoncExists) {\n-            rawTurboJson = fs.readFileSync(turboJsoncPath, \"utf8\");\n+          // Handle the case where both files exist (reproducing original behavior)",
    "repo_full_name": "vercel/turborepo",
    "discussion_comments": [
      {
        "comment_id": "2177693179",
        "repo_full_name": "vercel/turborepo",
        "pr_number": 10619,
        "pr_file": "packages/turbo-utils/src/getTurboConfigs.ts",
        "discussion_id": "2177693179",
        "commented_code": "@@ -189,27 +221,20 @@ export function getWorkspaceConfigs(\n         const isWorkspaceRoot = workspacePath === turboRoot;\n \n         // Try and get turbo.json or turbo.jsonc\n-        const turboJsonPath = path.join(workspacePath, \"turbo.json\");\n-        const turboJsoncPath = path.join(workspacePath, \"turbo.jsonc\");\n-\n-        // Check if both files exist\n-        const turboJsonExists = fs.existsSync(turboJsonPath);\n-        const turboJsoncExists = fs.existsSync(turboJsoncPath);\n-\n-        if (turboJsonExists && turboJsoncExists) {\n-          const errorMessage = `Found both turbo.json and turbo.jsonc in the same directory: ${workspacePath}\\nPlease use either turbo.json or turbo.jsonc, but not both.`;\n-          logger.error(errorMessage);\n-          throw new Error(errorMessage);\n-        }\n+        const { configPath: turboConfigPath, configExists, error } = resolveTurboConfigPath(workspacePath);\n \n         let rawTurboJson = null;\n         let turboConfig: SchemaV1 | undefined;\n \n         try {\n-          if (turboJsonExists) {\n-            rawTurboJson = fs.readFileSync(turboJsonPath, \"utf8\");\n-          } else if (turboJsoncExists) {\n-            rawTurboJson = fs.readFileSync(turboJsoncPath, \"utf8\");\n+          // Handle the case where both files exist (reproducing original behavior)",
        "comment_created_at": "2025-07-01T14:03:11+00:00",
        "comment_author": "anthonyshew",
        "comment_body": "```suggestion\r\n          // TODO: Our code was allowing both config files to exist. This is a bug, needs to be fixed.\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1974406494",
    "pr_number": 9978,
    "pr_file": "packages/eslint-config-turbo/src/index.ts",
    "created_at": "2025-02-27T22:11:08+00:00",
    "commented_code": null,
    "repo_full_name": "vercel/turborepo",
    "discussion_comments": [
      {
        "comment_id": "1974406494",
        "repo_full_name": "vercel/turborepo",
        "pr_number": 9978,
        "pr_file": "packages/eslint-config-turbo/src/index.ts",
        "discussion_id": "1974406494",
        "commented_code": null,
        "comment_created_at": "2025-02-27T22:11:08+00:00",
        "comment_author": "tony-cocco",
        "comment_body": "Sorry if this is the wrong spot for this, but it helped resolve an issue. When I upgraded from turbo@2.4.2 to 2.4.4 my eslint config broke while following [the listed docs for legacy usage](https://github.com/vercel/turborepo/blob/main/packages/eslint-config-turbo/README.md#usage-legacy-eslintrc).\r\n\r\nI updated to use this files `extends` and my eslint config was resolved.\r\n\r\n\r\nOld:\r\n\r\n```\r\nextends: [\"turbo\"]\r\n```\r\n\r\nResulted in:\r\n\r\n```\r\neslint-config-turbo is invalid:\r\n  - Unexpected top-level property \"default\".\r\n ```\r\n\r\nShould the docs be updated to suggest using this instead?\r\n\r\nNew:\r\n```\r\nextends: [\"plugin:turbo/recommended\"]\r\n```\r\n",
        "pr_file_module": null
      },
      {
        "comment_id": "1980865256",
        "repo_full_name": "vercel/turborepo",
        "pr_number": 9978,
        "pr_file": "packages/eslint-config-turbo/src/index.ts",
        "discussion_id": "1974406494",
        "commented_code": null,
        "comment_created_at": "2025-03-05T07:47:52+00:00",
        "comment_author": "mamlzy",
        "comment_body": "sorry for tagging @anthonyshew, because this is important for people that not using eslint flat config",
        "pr_file_module": null
      },
      {
        "comment_id": "1981550952",
        "repo_full_name": "vercel/turborepo",
        "pr_number": 9978,
        "pr_file": "packages/eslint-config-turbo/src/index.ts",
        "discussion_id": "1974406494",
        "commented_code": null,
        "comment_created_at": "2025-03-05T14:47:44+00:00",
        "comment_author": "anthonyshew",
        "comment_body": "No worries. Thanks for the tag. Will fix.",
        "pr_file_module": null
      },
      {
        "comment_id": "1982279299",
        "repo_full_name": "vercel/turborepo",
        "pr_number": 9978,
        "pr_file": "packages/eslint-config-turbo/src/index.ts",
        "discussion_id": "1974406494",
        "commented_code": null,
        "comment_created_at": "2025-03-05T22:30:02+00:00",
        "comment_author": "anthonyshew",
        "comment_body": "Here's the fix: https://github.com/vercel/turborepo/pull/10105\r\n\r\nSorry about that!",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1717471385",
    "pr_number": 9011,
    "pr_file": "packages/turbo-types/src/types/config.ts",
    "created_at": "2024-08-14T19:46:38+00:00",
    "commented_code": "* Documentation: https://turbo.build/repo/docs/reference/configuration#interactive\n    */\n   interactive?: boolean;\n+\n+  /**\n+   * Specify the filesystem cache directory.\n+   *\n+   * Documentation: https://turbo.build/repo/docs/reference/configuration#tasks\n+   *\n+   * @defaultValue `\"\".turbo/cache\"`\n+   */\n+  cacheDir?: RelativeUnixPath;\n+\n+  /**\n+   * Turbo can run a background process to pre-calculate values used for determining work that needs to be done. This standalone process (daemon) is an optimization, and not required for proper functioning of turbo.\n+   *\n+   * Documentation: https://turbo.build/repo/docs/reference/configuration#daemon\n+   *\n+   * @defaultValue `false`\n+   */\n+  daemon?: boolean;",
    "repo_full_name": "vercel/turborepo",
    "discussion_comments": [
      {
        "comment_id": "1717471385",
        "repo_full_name": "vercel/turborepo",
        "pr_number": 9011,
        "pr_file": "packages/turbo-types/src/types/config.ts",
        "discussion_id": "1717471385",
        "commented_code": "@@ -280,6 +280,36 @@ export interface Pipeline {\n    * Documentation: https://turbo.build/repo/docs/reference/configuration#interactive\n    */\n   interactive?: boolean;\n+\n+  /**\n+   * Specify the filesystem cache directory.\n+   *\n+   * Documentation: https://turbo.build/repo/docs/reference/configuration#tasks\n+   *\n+   * @defaultValue `\"\".turbo/cache\"`\n+   */\n+  cacheDir?: RelativeUnixPath;\n+\n+  /**\n+   * Turbo can run a background process to pre-calculate values used for determining work that needs to be done. This standalone process (daemon) is an optimization, and not required for proper functioning of turbo.\n+   *\n+   * Documentation: https://turbo.build/repo/docs/reference/configuration#daemon\n+   *\n+   * @defaultValue `false`\n+   */\n+  daemon?: boolean;",
        "comment_created_at": "2024-08-14T19:46:38+00:00",
        "comment_author": "tknickman",
        "comment_body": "Shouldn't these two be at the root, and not on the task?",
        "pr_file_module": null
      },
      {
        "comment_id": "1717480561",
        "repo_full_name": "vercel/turborepo",
        "pr_number": 9011,
        "pr_file": "packages/turbo-types/src/types/config.ts",
        "discussion_id": "1717471385",
        "commented_code": "@@ -280,6 +280,36 @@ export interface Pipeline {\n    * Documentation: https://turbo.build/repo/docs/reference/configuration#interactive\n    */\n   interactive?: boolean;\n+\n+  /**\n+   * Specify the filesystem cache directory.\n+   *\n+   * Documentation: https://turbo.build/repo/docs/reference/configuration#tasks\n+   *\n+   * @defaultValue `\"\".turbo/cache\"`\n+   */\n+  cacheDir?: RelativeUnixPath;\n+\n+  /**\n+   * Turbo can run a background process to pre-calculate values used for determining work that needs to be done. This standalone process (daemon) is an optimization, and not required for proper functioning of turbo.\n+   *\n+   * Documentation: https://turbo.build/repo/docs/reference/configuration#daemon\n+   *\n+   * @defaultValue `false`\n+   */\n+  daemon?: boolean;",
        "comment_created_at": "2024-08-14T19:56:14+00:00",
        "comment_author": "dimitropoulos",
        "comment_body": "GREAT catch.  they in fact are all on the root schema (as far as I understand, at least! gonna be quite the shock if I'm wrong about that considering I implemented all three, but please do feel free to check!)\r\n\r\nfixed in e1bbdd809977e0746240cd41bcd9e8872189a7c5",
        "pr_file_module": null
      },
      {
        "comment_id": "1717484365",
        "repo_full_name": "vercel/turborepo",
        "pr_number": 9011,
        "pr_file": "packages/turbo-types/src/types/config.ts",
        "discussion_id": "1717471385",
        "commented_code": "@@ -280,6 +280,36 @@ export interface Pipeline {\n    * Documentation: https://turbo.build/repo/docs/reference/configuration#interactive\n    */\n   interactive?: boolean;\n+\n+  /**\n+   * Specify the filesystem cache directory.\n+   *\n+   * Documentation: https://turbo.build/repo/docs/reference/configuration#tasks\n+   *\n+   * @defaultValue `\"\".turbo/cache\"`\n+   */\n+  cacheDir?: RelativeUnixPath;\n+\n+  /**\n+   * Turbo can run a background process to pre-calculate values used for determining work that needs to be done. This standalone process (daemon) is an optimization, and not required for proper functioning of turbo.\n+   *\n+   * Documentation: https://turbo.build/repo/docs/reference/configuration#daemon\n+   *\n+   * @defaultValue `false`\n+   */\n+  daemon?: boolean;",
        "comment_created_at": "2024-08-14T20:00:04+00:00",
        "comment_author": "tknickman",
        "comment_body": "Nice, I could see an argument for envMode being per task, but the others should definitely be global. ",
        "pr_file_module": null
      }
    ]
  }
]