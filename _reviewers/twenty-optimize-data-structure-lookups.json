[
  {
    "discussion_id": "2349095711",
    "pr_number": 14507,
    "pr_file": "packages/twenty-front/src/modules/page-layout/widgets/graph/graphWidgetLineChart/hooks/useLineChartData.ts",
    "created_at": "2025-09-15T14:03:39+00:00",
    "commented_code": "+import { type LineChartEnrichedSeries } from '@/page-layout/widgets/graph/graphWidgetLineChart/types/LineChartEnrichedSeries';\n+import { type LineChartSeries } from '@/page-layout/widgets/graph/graphWidgetLineChart/types/LineChartSeries';\n+import { type GraphColorRegistry } from '@/page-layout/widgets/graph/types/GraphColorRegistry';\n+import { createGradientDef } from '@/page-layout/widgets/graph/utils/createGradientDef';\n+import { getColorScheme } from '@/page-layout/widgets/graph/utils/getColorScheme';\n+import {\n+  formatGraphValue,\n+  type GraphValueFormatOptions,\n+} from '@/page-layout/widgets/graph/utils/graphFormatters';\n+import { type LineSeries } from '@nivo/line';\n+import { useMemo } from 'react';\n+import { isDefined } from 'twenty-shared/utils';\n+import { type ThemeType } from 'twenty-ui/theme';\n+\n+type UseLineChartDataProps = {\n+  data: LineChartSeries[];\n+  colorRegistry: GraphColorRegistry;\n+  id: string;\n+  instanceId: string;\n+  enableArea: boolean;\n+  theme: ThemeType;\n+  formatOptions: GraphValueFormatOptions;\n+};\n+\n+export const useLineChartData = ({\n+  data,\n+  colorRegistry,\n+  id,\n+  instanceId,\n+  enableArea,\n+  theme,\n+  formatOptions,\n+}: UseLineChartDataProps) => {\n+  const dataMap: Record<string, LineChartSeries> = {};\n+  for (const series of data) {\n+    dataMap[series.id] = series;\n+  }",
    "repo_full_name": "twentyhq/twenty",
    "discussion_comments": [
      {
        "comment_id": "2349119102",
        "repo_full_name": "twentyhq/twenty",
        "pr_number": 14507,
        "pr_file": "packages/twenty-front/src/modules/page-layout/widgets/graph/graphWidgetLineChart/hooks/useLineChartData.ts",
        "discussion_id": "2349095711",
        "commented_code": "@@ -0,0 +1,108 @@\n+import { type LineChartEnrichedSeries } from '@/page-layout/widgets/graph/graphWidgetLineChart/types/LineChartEnrichedSeries';\n+import { type LineChartSeries } from '@/page-layout/widgets/graph/graphWidgetLineChart/types/LineChartSeries';\n+import { type GraphColorRegistry } from '@/page-layout/widgets/graph/types/GraphColorRegistry';\n+import { createGradientDef } from '@/page-layout/widgets/graph/utils/createGradientDef';\n+import { getColorScheme } from '@/page-layout/widgets/graph/utils/getColorScheme';\n+import {\n+  formatGraphValue,\n+  type GraphValueFormatOptions,\n+} from '@/page-layout/widgets/graph/utils/graphFormatters';\n+import { type LineSeries } from '@nivo/line';\n+import { useMemo } from 'react';\n+import { isDefined } from 'twenty-shared/utils';\n+import { type ThemeType } from 'twenty-ui/theme';\n+\n+type UseLineChartDataProps = {\n+  data: LineChartSeries[];\n+  colorRegistry: GraphColorRegistry;\n+  id: string;\n+  instanceId: string;\n+  enableArea: boolean;\n+  theme: ThemeType;\n+  formatOptions: GraphValueFormatOptions;\n+};\n+\n+export const useLineChartData = ({\n+  data,\n+  colorRegistry,\n+  id,\n+  instanceId,\n+  enableArea,\n+  theme,\n+  formatOptions,\n+}: UseLineChartDataProps) => {\n+  const dataMap: Record<string, LineChartSeries> = {};\n+  for (const series of data) {\n+    dataMap[series.id] = series;\n+  }",
        "comment_created_at": "2025-09-15T14:03:39+00:00",
        "comment_author": "bosiraphael",
        "comment_body": "```suggestion\n   const dataMap = new Map<string, LineChartSeries>(\n    data.map((series) => [series.id, series]),\n  );\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2349134577",
    "pr_number": 14507,
    "pr_file": "packages/twenty-front/src/modules/page-layout/widgets/graph/graphWidgetLineChart/hooks/useLineChartTooltip.ts",
    "created_at": "2025-09-15T14:08:28+00:00",
    "commented_code": "+import { type LineChartEnrichedSeries } from '@/page-layout/widgets/graph/graphWidgetLineChart/types/LineChartEnrichedSeries';\n+import { type LineChartSeries } from '@/page-layout/widgets/graph/graphWidgetLineChart/types/LineChartSeries';\n+import {\n+  formatGraphValue,\n+  type GraphValueFormatOptions,\n+} from '@/page-layout/widgets/graph/utils/graphFormatters';\n+import {\n+  type LineSeries,\n+  type Point,\n+  type SliceTooltipProps,\n+} from '@nivo/line';\n+import { isDefined } from 'twenty-shared/utils';\n+\n+type UseLineChartTooltipProps = {\n+  dataMap: Record<string, LineChartSeries>;\n+  enrichedSeries: LineChartEnrichedSeries[];\n+  formatOptions: GraphValueFormatOptions;\n+};\n+\n+export const useLineChartTooltip = ({\n+  dataMap,\n+  enrichedSeries,\n+  formatOptions,\n+}: UseLineChartTooltipProps) => {\n+  const createSliceTooltipData = ({ slice }: SliceTooltipProps<LineSeries>) => {\n+    const tooltipItems = slice.points\n+      .map((point) => {\n+        const enrichedSeriesItem = enrichedSeries.find(",
    "repo_full_name": "twentyhq/twenty",
    "discussion_comments": [
      {
        "comment_id": "2349134577",
        "repo_full_name": "twentyhq/twenty",
        "pr_number": 14507,
        "pr_file": "packages/twenty-front/src/modules/page-layout/widgets/graph/graphWidgetLineChart/hooks/useLineChartTooltip.ts",
        "discussion_id": "2349134577",
        "commented_code": "@@ -0,0 +1,87 @@\n+import { type LineChartEnrichedSeries } from '@/page-layout/widgets/graph/graphWidgetLineChart/types/LineChartEnrichedSeries';\n+import { type LineChartSeries } from '@/page-layout/widgets/graph/graphWidgetLineChart/types/LineChartSeries';\n+import {\n+  formatGraphValue,\n+  type GraphValueFormatOptions,\n+} from '@/page-layout/widgets/graph/utils/graphFormatters';\n+import {\n+  type LineSeries,\n+  type Point,\n+  type SliceTooltipProps,\n+} from '@nivo/line';\n+import { isDefined } from 'twenty-shared/utils';\n+\n+type UseLineChartTooltipProps = {\n+  dataMap: Record<string, LineChartSeries>;\n+  enrichedSeries: LineChartEnrichedSeries[];\n+  formatOptions: GraphValueFormatOptions;\n+};\n+\n+export const useLineChartTooltip = ({\n+  dataMap,\n+  enrichedSeries,\n+  formatOptions,\n+}: UseLineChartTooltipProps) => {\n+  const createSliceTooltipData = ({ slice }: SliceTooltipProps<LineSeries>) => {\n+    const tooltipItems = slice.points\n+      .map((point) => {\n+        const enrichedSeriesItem = enrichedSeries.find(",
        "comment_created_at": "2025-09-15T14:08:28+00:00",
        "comment_author": "bosiraphael",
        "comment_body": "Use a map that you define above, here you are doing a find inside a map which is computationally expensive",
        "pr_file_module": null
      }
    ]
  }
]