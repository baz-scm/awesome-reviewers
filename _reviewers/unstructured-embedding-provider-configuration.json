[
  {
    "discussion_id": "1538489245",
    "pr_number": 2693,
    "pr_file": "test_unstructured_ingest/dest/pinecone.sh",
    "created_at": "2024-03-26T01:54:59+00:00",
    "commented_code": "--work-dir \"$WORK_DIR\" \\\n   --chunk-elements \\\n   --chunk-combine-text-under-n-chars 200 --chunk-new-after-n-chars 2500 --chunk-max-characters 38000 --chunk-multipage-sections \\\n-  --embedding-provider \"langchain-huggingface\" \\\n+  --embedding-provider \"langchain-vertexai\" \\",
    "repo_full_name": "Unstructured-IO/unstructured",
    "discussion_comments": [
      {
        "comment_id": "1538489245",
        "repo_full_name": "Unstructured-IO/unstructured",
        "pr_number": 2693,
        "pr_file": "test_unstructured_ingest/dest/pinecone.sh",
        "discussion_id": "1538489245",
        "commented_code": "@@ -93,7 +93,7 @@ PYTHONPATH=. ./unstructured/ingest/main.py \\\n   --work-dir \"$WORK_DIR\" \\\n   --chunk-elements \\\n   --chunk-combine-text-under-n-chars 200 --chunk-new-after-n-chars 2500 --chunk-max-characters 38000 --chunk-multipage-sections \\\n-  --embedding-provider \"langchain-huggingface\" \\\n+  --embedding-provider \"langchain-vertexai\" \\",
        "comment_created_at": "2024-03-26T01:54:59+00:00",
        "comment_author": "potter-potter",
        "comment_body": "might be better to leave this one as huggingface and do the embedding test like \r\n`test_unstructured_ingest/src/local-embed-bedrock.sh` \r\nThoughts?",
        "pr_file_module": null
      },
      {
        "comment_id": "1538505408",
        "repo_full_name": "Unstructured-IO/unstructured",
        "pr_number": 2693,
        "pr_file": "test_unstructured_ingest/dest/pinecone.sh",
        "discussion_id": "1538489245",
        "commented_code": "@@ -93,7 +93,7 @@ PYTHONPATH=. ./unstructured/ingest/main.py \\\n   --work-dir \"$WORK_DIR\" \\\n   --chunk-elements \\\n   --chunk-combine-text-under-n-chars 200 --chunk-new-after-n-chars 2500 --chunk-max-characters 38000 --chunk-multipage-sections \\\n-  --embedding-provider \"langchain-huggingface\" \\\n+  --embedding-provider \"langchain-vertexai\" \\",
        "comment_created_at": "2024-03-26T02:23:00+00:00",
        "comment_author": "ahmetmeleq",
        "comment_body": "Was going to revert after a job tests this, that was my way of showing the test results basically :) \r\n\r\nNow added the tests with [add vertexai integration test](https://github.com/Unstructured-IO/unstructured/pull/2693/commits/43bcdfc705a9ee442994bfcbcfee4d1f551c36ef) and [add octoai test](https://github.com/Unstructured-IO/unstructured/pull/2693/commits/66f1a2c8bb7f3889c536f0bdb7320bee65855e3e)",
        "pr_file_module": null
      },
      {
        "comment_id": "1538512061",
        "repo_full_name": "Unstructured-IO/unstructured",
        "pr_number": 2693,
        "pr_file": "test_unstructured_ingest/dest/pinecone.sh",
        "discussion_id": "1538489245",
        "commented_code": "@@ -93,7 +93,7 @@ PYTHONPATH=. ./unstructured/ingest/main.py \\\n   --work-dir \"$WORK_DIR\" \\\n   --chunk-elements \\\n   --chunk-combine-text-under-n-chars 200 --chunk-new-after-n-chars 2500 --chunk-max-characters 38000 --chunk-multipage-sections \\\n-  --embedding-provider \"langchain-huggingface\" \\\n+  --embedding-provider \"langchain-vertexai\" \\",
        "comment_created_at": "2024-03-26T02:35:10+00:00",
        "comment_author": "potter-potter",
        "comment_body": "Awesome! Thanks for doing the octoai :) Was on my list of todos...",
        "pr_file_module": null
      },
      {
        "comment_id": "1538519845",
        "repo_full_name": "Unstructured-IO/unstructured",
        "pr_number": 2693,
        "pr_file": "test_unstructured_ingest/dest/pinecone.sh",
        "discussion_id": "1538489245",
        "commented_code": "@@ -93,7 +93,7 @@ PYTHONPATH=. ./unstructured/ingest/main.py \\\n   --work-dir \"$WORK_DIR\" \\\n   --chunk-elements \\\n   --chunk-combine-text-under-n-chars 200 --chunk-new-after-n-chars 2500 --chunk-max-characters 38000 --chunk-multipage-sections \\\n-  --embedding-provider \"langchain-huggingface\" \\\n+  --embedding-provider \"langchain-vertexai\" \\",
        "comment_created_at": "2024-03-26T02:49:36+00:00",
        "comment_author": "ahmetmeleq",
        "comment_body": "Sure thing \ud83d\udcaa \ud83d\ude80 ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1489669611",
    "pr_number": 2529,
    "pr_file": "test_unstructured_ingest/dest/astra.sh",
    "created_at": "2024-02-14T15:30:14+00:00",
    "commented_code": "+#!/usr/bin/env bash\n+\n+set -e\n+\n+SRC_PATH=$(dirname \"$(realpath \"$0\")\")\n+SCRIPT_DIR=$(dirname \"$SRC_PATH\")\n+cd \"$SCRIPT_DIR\"/.. || exit 1\n+OUTPUT_FOLDER_NAME=astra-dest\n+OUTPUT_DIR=$SCRIPT_DIR/structured-output/$OUTPUT_FOLDER_NAME\n+WORK_DIR=$SCRIPT_DIR/workdir/$OUTPUT_FOLDER_NAME\n+DOWNLOAD_DIR=$SCRIPT_DIR/download/$OUTPUT_FOLDER_NAME\n+DESTINATION_PATH=$SCRIPT_DIR/astra-dest\n+max_processes=${MAX_PROCESSES:=$(python3 -c \"import os; print(os.cpu_count())\")}\n+\n+if [ -z \"$ASTRA_DB_APPLICATION_TOKEN\" ]; then\n+  echo \"Skipping Astra DB ingest test because ASTRA_DB_APPLICATION_TOKEN env var is not set.\"\n+  exit 0\n+fi\n+\n+if [ -z \"$ASTRA_DB_API_ENDPOINT\" ]; then\n+  echo \"Skipping Astra DB ingest test because ASTRA_DB_API_ENDPOINT env var is not set.\"\n+  exit 0\n+fi\n+\n+RANDOM_SUFFIX=$((RANDOM % 100000 + 1))\n+COLLECTION_NAME=\"astra-test-output-$RANDOM_SUFFIX\"\n+\n+# shellcheck disable=SC1091\n+source \"$SCRIPT_DIR\"/cleanup.sh\n+\n+function cleanup() {\n+  cleanup_dir \"$DESTINATION_PATH\"\n+  cleanup_dir \"$OUTPUT_DIR\"\n+  cleanup_dir \"$WORK_DIR\"\n+  cleanup_dir \"$DOWNLOAD_DIR\"\n+}\n+\n+trap cleanup EXIT\n+\n+PYTHONPATH=. ./unstructured/ingest/main.py \\\n+  local \\\n+  --num-processes \"$max_processes\" \\\n+  --output-dir \"$OUTPUT_DIR\" \\\n+  --strategy fast \\\n+  --verbose \\\n+  --input-path example-docs/book-war-and-peace-1p.txt \\\n+  --work-dir \"$WORK_DIR\" \\\n+  --chunk-elements \\\n+  --chunk-max-characters 1500 \\\n+  --chunk-multipage-sections \\\n+  --embedding-provider \"langchain-huggingface\" \\\n+  astra \\\n+  --token \"$ASTRA_DB_APPLICATION_TOKEN\" \\\n+  --api-endpoint \"$ASTRA_DB_API_ENDPOINT\" \\\n+  --collection-name \"$COLLECTION_NAME\"",
    "repo_full_name": "Unstructured-IO/unstructured",
    "discussion_comments": [
      {
        "comment_id": "1489669611",
        "repo_full_name": "Unstructured-IO/unstructured",
        "pr_number": 2529,
        "pr_file": "test_unstructured_ingest/dest/astra.sh",
        "discussion_id": "1489669611",
        "commented_code": "@@ -0,0 +1,57 @@\n+#!/usr/bin/env bash\n+\n+set -e\n+\n+SRC_PATH=$(dirname \"$(realpath \"$0\")\")\n+SCRIPT_DIR=$(dirname \"$SRC_PATH\")\n+cd \"$SCRIPT_DIR\"/.. || exit 1\n+OUTPUT_FOLDER_NAME=astra-dest\n+OUTPUT_DIR=$SCRIPT_DIR/structured-output/$OUTPUT_FOLDER_NAME\n+WORK_DIR=$SCRIPT_DIR/workdir/$OUTPUT_FOLDER_NAME\n+DOWNLOAD_DIR=$SCRIPT_DIR/download/$OUTPUT_FOLDER_NAME\n+DESTINATION_PATH=$SCRIPT_DIR/astra-dest\n+max_processes=${MAX_PROCESSES:=$(python3 -c \"import os; print(os.cpu_count())\")}\n+\n+if [ -z \"$ASTRA_DB_APPLICATION_TOKEN\" ]; then\n+  echo \"Skipping Astra DB ingest test because ASTRA_DB_APPLICATION_TOKEN env var is not set.\"\n+  exit 0\n+fi\n+\n+if [ -z \"$ASTRA_DB_API_ENDPOINT\" ]; then\n+  echo \"Skipping Astra DB ingest test because ASTRA_DB_API_ENDPOINT env var is not set.\"\n+  exit 0\n+fi\n+\n+RANDOM_SUFFIX=$((RANDOM % 100000 + 1))\n+COLLECTION_NAME=\"astra-test-output-$RANDOM_SUFFIX\"\n+\n+# shellcheck disable=SC1091\n+source \"$SCRIPT_DIR\"/cleanup.sh\n+\n+function cleanup() {\n+  cleanup_dir \"$DESTINATION_PATH\"\n+  cleanup_dir \"$OUTPUT_DIR\"\n+  cleanup_dir \"$WORK_DIR\"\n+  cleanup_dir \"$DOWNLOAD_DIR\"\n+}\n+\n+trap cleanup EXIT\n+\n+PYTHONPATH=. ./unstructured/ingest/main.py \\\n+  local \\\n+  --num-processes \"$max_processes\" \\\n+  --output-dir \"$OUTPUT_DIR\" \\\n+  --strategy fast \\\n+  --verbose \\\n+  --input-path example-docs/book-war-and-peace-1p.txt \\\n+  --work-dir \"$WORK_DIR\" \\\n+  --chunk-elements \\\n+  --chunk-max-characters 1500 \\\n+  --chunk-multipage-sections \\\n+  --embedding-provider \"langchain-huggingface\" \\\n+  astra \\\n+  --token \"$ASTRA_DB_APPLICATION_TOKEN\" \\\n+  --api-endpoint \"$ASTRA_DB_API_ENDPOINT\" \\\n+  --collection-name \"$COLLECTION_NAME\"",
        "comment_created_at": "2024-02-14T15:30:14+00:00",
        "comment_author": "potter-potter",
        "comment_body": "add --embedding-dimension 384 (obviously add the \\ to the collection name line) and then create the command line flag in cmds\r\n\r\n384 is the dimension for our default huggingface embedder",
        "pr_file_module": null
      }
    ]
  }
]