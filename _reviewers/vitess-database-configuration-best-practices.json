[
  {
    "discussion_id": "1878353465",
    "pr_number": 17295,
    "pr_file": "changelog/22.0/22.0.0/summary.md",
    "created_at": "2024-12-10T15:49:33+00:00",
    "commented_code": "To upgrade to the newer version of the configuration file, first switch to using the flags in your current deployment before upgrading. Then you can switch to using the configuration file in the newer release.\n \n+### <a id=\"last_insert_id\"/>Added support for LAST_INSERT_ID(expr)\n+\n+Added support for LAST_INSERT_ID(expr) to align with MySQL behavior, enabling session-level assignment of the last insert ID via query expressions.",
    "repo_full_name": "vitessio/vitess",
    "discussion_comments": [
      {
        "comment_id": "1878353465",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17295,
        "pr_file": "changelog/22.0/22.0.0/summary.md",
        "discussion_id": "1878353465",
        "commented_code": "@@ -59,6 +61,9 @@ The following fields can be dynamically changed -\n \n To upgrade to the newer version of the configuration file, first switch to using the flags in your current deployment before upgrading. Then you can switch to using the configuration file in the newer release.\n \n+### <a id=\"last_insert_id\"/>Added support for LAST_INSERT_ID(expr)\n+\n+Added support for LAST_INSERT_ID(expr) to align with MySQL behavior, enabling session-level assignment of the last insert ID via query expressions.",
        "comment_created_at": "2024-12-10T15:49:33+00:00",
        "comment_author": "frouioui",
        "comment_body": "It would be good to link to the PR and/or Issue so there is more context for those wanting to learn more.\r\n\r\n```suggestion\r\n### <a id=\"last_insert_id\"/>Added support for LAST_INSERT_ID(expr)\r\n\r\nAdded support for `LAST_INSERT_ID(expr)` to align with MySQL behavior, enabling session-level assignment of the last insert ID via query expressions. For more information about this change see [#17295](https://github.com/vitessio/vitess/pull/17295).\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1857008747",
    "pr_number": 17279,
    "pr_file": "changelog/22.0/22.0.0/summary.md",
    "created_at": "2024-11-25T17:28:58+00:00",
    "commented_code": "1. `GetTransactionInfo` RPC has been added to both `VtctldServer`, and `TabletManagerClient` interface. These RPCs are used to fecilitate the users in reading the state of an unresolved distributed transaction. This can be useful in debugging what went wrong and how to fix the problem.\n \n+### <a id=\"deprecations-and-deletions\"/>Deprecations and Deletions</a>\n+\n+#### <a id=\"vttablet-flags\"/>Deprecated VTTablet Flags</a>\n+\n+- `twopc_enable` flag is deprecated, `twopc_abandonage` flag if set will be used to determine if 2PC is enabled or not.",
    "repo_full_name": "vitessio/vitess",
    "discussion_comments": [
      {
        "comment_id": "1857008747",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17279,
        "pr_file": "changelog/22.0/22.0.0/summary.md",
        "discussion_id": "1857008747",
        "commented_code": "@@ -15,6 +17,12 @@ These are the RPC changes made in this release -\n \n 1. `GetTransactionInfo` RPC has been added to both `VtctldServer`, and `TabletManagerClient` interface. These RPCs are used to fecilitate the users in reading the state of an unresolved distributed transaction. This can be useful in debugging what went wrong and how to fix the problem.\n \n+### <a id=\"deprecations-and-deletions\"/>Deprecations and Deletions</a>\n+\n+#### <a id=\"vttablet-flags\"/>Deprecated VTTablet Flags</a>\n+\n+- `twopc_enable` flag is deprecated, `twopc_abandonage` flag if set will be used to determine if 2PC is enabled or not.",
        "comment_created_at": "2024-11-25T17:28:58+00:00",
        "comment_author": "deepthi",
        "comment_body": "Are we really determining whether to allow 2PC based on `twopc_abandonage`? Ideally it should be controlled solely by `transaction_mode` on vtgate, and vttablets should be able to participate.\r\nMy suggestion would be to pick a reasonable default for `twopc_abandonage` and use that. Also we should be changing that to a `Duration` field instead of `float` which I assume is being interpreted as seconds.",
        "pr_file_module": null
      },
      {
        "comment_id": "1861518730",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17279,
        "pr_file": "changelog/22.0/22.0.0/summary.md",
        "discussion_id": "1857008747",
        "commented_code": "@@ -15,6 +17,12 @@ These are the RPC changes made in this release -\n \n 1. `GetTransactionInfo` RPC has been added to both `VtctldServer`, and `TabletManagerClient` interface. These RPCs are used to fecilitate the users in reading the state of an unresolved distributed transaction. This can be useful in debugging what went wrong and how to fix the problem.\n \n+### <a id=\"deprecations-and-deletions\"/>Deprecations and Deletions</a>\n+\n+#### <a id=\"vttablet-flags\"/>Deprecated VTTablet Flags</a>\n+\n+- `twopc_enable` flag is deprecated, `twopc_abandonage` flag if set will be used to determine if 2PC is enabled or not.",
        "comment_created_at": "2024-11-28T05:16:19+00:00",
        "comment_author": "GuptaManan100",
        "comment_body": "I agree with Deepthi. There is no reason to say explicitly whether twopc is enabled or not. If the transaction mode is twopc then we run it, otherwise not.",
        "pr_file_module": null
      },
      {
        "comment_id": "1862200060",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17279,
        "pr_file": "changelog/22.0/22.0.0/summary.md",
        "discussion_id": "1857008747",
        "commented_code": "@@ -15,6 +17,12 @@ These are the RPC changes made in this release -\n \n 1. `GetTransactionInfo` RPC has been added to both `VtctldServer`, and `TabletManagerClient` interface. These RPCs are used to fecilitate the users in reading the state of an unresolved distributed transaction. This can be useful in debugging what went wrong and how to fix the problem.\n \n+### <a id=\"deprecations-and-deletions\"/>Deprecations and Deletions</a>\n+\n+#### <a id=\"vttablet-flags\"/>Deprecated VTTablet Flags</a>\n+\n+- `twopc_enable` flag is deprecated, `twopc_abandonage` flag if set will be used to determine if 2PC is enabled or not.",
        "comment_created_at": "2024-11-28T13:27:49+00:00",
        "comment_author": "harshit-gangal",
        "comment_body": "For first part - I am aligned with it. Just did not do it in one go.\r\n\r\nChanging from seconds to Duration, this would mean a breaking change otherwise would have to add a new flag. ",
        "pr_file_module": null
      },
      {
        "comment_id": "1870091189",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17279,
        "pr_file": "changelog/22.0/22.0.0/summary.md",
        "discussion_id": "1857008747",
        "commented_code": "@@ -15,6 +17,12 @@ These are the RPC changes made in this release -\n \n 1. `GetTransactionInfo` RPC has been added to both `VtctldServer`, and `TabletManagerClient` interface. These RPCs are used to fecilitate the users in reading the state of an unresolved distributed transaction. This can be useful in debugging what went wrong and how to fix the problem.\n \n+### <a id=\"deprecations-and-deletions\"/>Deprecations and Deletions</a>\n+\n+#### <a id=\"vttablet-flags\"/>Deprecated VTTablet Flags</a>\n+\n+- `twopc_enable` flag is deprecated, `twopc_abandonage` flag if set will be used to determine if 2PC is enabled or not.",
        "comment_created_at": "2024-12-04T18:35:42+00:00",
        "comment_author": "deepthi",
        "comment_body": "there's some prior art on how to change this over 2 releases without changing the flag name. you should be able to find the relevant PRs in GH history.",
        "pr_file_module": null
      },
      {
        "comment_id": "1875667530",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17279,
        "pr_file": "changelog/22.0/22.0.0/summary.md",
        "discussion_id": "1857008747",
        "commented_code": "@@ -15,6 +17,12 @@ These are the RPC changes made in this release -\n \n 1. `GetTransactionInfo` RPC has been added to both `VtctldServer`, and `TabletManagerClient` interface. These RPCs are used to fecilitate the users in reading the state of an unresolved distributed transaction. This can be useful in debugging what went wrong and how to fix the problem.\n \n+### <a id=\"deprecations-and-deletions\"/>Deprecations and Deletions</a>\n+\n+#### <a id=\"vttablet-flags\"/>Deprecated VTTablet Flags</a>\n+\n+- `twopc_enable` flag is deprecated, `twopc_abandonage` flag if set will be used to determine if 2PC is enabled or not.",
        "comment_created_at": "2024-12-09T09:42:16+00:00",
        "comment_author": "harshit-gangal",
        "comment_body": "done [dfcd94c](https://github.com/vitessio/vitess/pull/17279/commits/dfcd94c763d1a9d553188b45c09b441bd32f36bc)",
        "pr_file_module": null
      }
    ]
  }
]