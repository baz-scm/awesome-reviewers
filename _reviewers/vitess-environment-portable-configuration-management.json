[
  {
    "discussion_id": "1916944214",
    "pr_number": 17529,
    "pr_file": "docker/bootstrap/Dockerfile.mysql84",
    "created_at": "2025-01-15T16:12:24+00:00",
    "commented_code": "+ARG bootstrap_version\n+ARG image=\"vitess/bootstrap:${bootstrap_version}-common\"\n+\n+FROM --platform=linux/amd64 \"${image}\"\n+\n+USER root\n+\n+# Install MySQL 8.4\n+RUN for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com 8C718D3B5072E1F5 && break; done && \\\n+    for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com A8D3785C && break; done && \\\n+    add-apt-repository 'deb http://repo.mysql.com/apt/debian/ bullseye mysql-8.4' && \\",
    "repo_full_name": "vitessio/vitess",
    "discussion_comments": [
      {
        "comment_id": "1916944214",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17529,
        "pr_file": "docker/bootstrap/Dockerfile.mysql84",
        "discussion_id": "1916944214",
        "commented_code": "@@ -0,0 +1,23 @@\n+ARG bootstrap_version\n+ARG image=\"vitess/bootstrap:${bootstrap_version}-common\"\n+\n+FROM --platform=linux/amd64 \"${image}\"\n+\n+USER root\n+\n+# Install MySQL 8.4\n+RUN for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com 8C718D3B5072E1F5 && break; done && \\\n+    for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com A8D3785C && break; done && \\\n+    add-apt-repository 'deb http://repo.mysql.com/apt/debian/ bullseye mysql-8.4' && \\",
        "comment_created_at": "2025-01-15T16:12:24+00:00",
        "comment_author": "dbussink",
        "comment_body": "@frouioui Do we have any blockers on upgrading to bookworm? We should get things onto that since `bullseye` is already in the LTS phase. ",
        "pr_file_module": null
      },
      {
        "comment_id": "1917381625",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17529,
        "pr_file": "docker/bootstrap/Dockerfile.mysql84",
        "discussion_id": "1916944214",
        "commented_code": "@@ -0,0 +1,23 @@\n+ARG bootstrap_version\n+ARG image=\"vitess/bootstrap:${bootstrap_version}-common\"\n+\n+FROM --platform=linux/amd64 \"${image}\"\n+\n+USER root\n+\n+# Install MySQL 8.4\n+RUN for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com 8C718D3B5072E1F5 && break; done && \\\n+    for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com A8D3785C && break; done && \\\n+    add-apt-repository 'deb http://repo.mysql.com/apt/debian/ bullseye mysql-8.4' && \\",
        "comment_created_at": "2025-01-15T21:51:22+00:00",
        "comment_author": "frouioui",
        "comment_body": "I don't think we would have any blocker. As discussed offline, we should keep the bullseye builds, move to bookworm as the default, and bump MySQL to 8.0.40 so we can use bookworm. \r\n\r\nhttps://github.com/vitessio/vitess/pull/17539",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1917383486",
    "pr_number": 17529,
    "pr_file": "docker/bootstrap/Dockerfile.mysql84",
    "created_at": "2025-01-15T21:53:21+00:00",
    "commented_code": "+ARG bootstrap_version\n+ARG image=\"vitess/bootstrap:${bootstrap_version}-common\"\n+\n+FROM --platform=linux/amd64 \"${image}\"\n+\n+USER root\n+\n+# Install MySQL 8.4\n+RUN for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com 8C718D3B5072E1F5 && break; done && \\\n+    for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com A8D3785C && break; done && \\\n+    add-apt-repository 'deb http://repo.mysql.com/apt/debian/ bullseye mysql-8.4-lts' && \\",
    "repo_full_name": "vitessio/vitess",
    "discussion_comments": [
      {
        "comment_id": "1917383486",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17529,
        "pr_file": "docker/bootstrap/Dockerfile.mysql84",
        "discussion_id": "1917383486",
        "commented_code": "@@ -0,0 +1,23 @@\n+ARG bootstrap_version\n+ARG image=\"vitess/bootstrap:${bootstrap_version}-common\"\n+\n+FROM --platform=linux/amd64 \"${image}\"\n+\n+USER root\n+\n+# Install MySQL 8.4\n+RUN for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com 8C718D3B5072E1F5 && break; done && \\\n+    for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com A8D3785C && break; done && \\\n+    add-apt-repository 'deb http://repo.mysql.com/apt/debian/ bullseye mysql-8.4-lts' && \\",
        "comment_created_at": "2025-01-15T21:53:21+00:00",
        "comment_author": "frouioui",
        "comment_body": "Any reason for using `mysql-8.4-lts` and not `mysql-8.4` like in the mysql80 Dockerfile where we don't have `-lts`?",
        "pr_file_module": null
      },
      {
        "comment_id": "1917389951",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17529,
        "pr_file": "docker/bootstrap/Dockerfile.mysql84",
        "discussion_id": "1917383486",
        "commented_code": "@@ -0,0 +1,23 @@\n+ARG bootstrap_version\n+ARG image=\"vitess/bootstrap:${bootstrap_version}-common\"\n+\n+FROM --platform=linux/amd64 \"${image}\"\n+\n+USER root\n+\n+# Install MySQL 8.4\n+RUN for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com 8C718D3B5072E1F5 && break; done && \\\n+    for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com A8D3785C && break; done && \\\n+    add-apt-repository 'deb http://repo.mysql.com/apt/debian/ bullseye mysql-8.4-lts' && \\",
        "comment_created_at": "2025-01-15T21:59:22+00:00",
        "comment_author": "L3o-pold",
        "comment_body": "Yeah it seems the way mysql names it in their deb repo :/",
        "pr_file_module": null
      },
      {
        "comment_id": "1923416754",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17529,
        "pr_file": "docker/bootstrap/Dockerfile.mysql84",
        "discussion_id": "1917383486",
        "commented_code": "@@ -0,0 +1,23 @@\n+ARG bootstrap_version\n+ARG image=\"vitess/bootstrap:${bootstrap_version}-common\"\n+\n+FROM --platform=linux/amd64 \"${image}\"\n+\n+USER root\n+\n+# Install MySQL 8.4\n+RUN for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com 8C718D3B5072E1F5 && break; done && \\\n+    for i in $(seq 1 10); do apt-key adv --no-tty --recv-keys --keyserver keyserver.ubuntu.com A8D3785C && break; done && \\\n+    add-apt-repository 'deb http://repo.mysql.com/apt/debian/ bullseye mysql-8.4-lts' && \\",
        "comment_created_at": "2025-01-21T10:02:12+00:00",
        "comment_author": "dbussink",
        "comment_body": "@L3o-pold See also https://github.com/vitessio/vitess/pull/17552, but we changed there how this is set up. We shouldn't use `add-apt-repository` (anymore) as it seems busted on Bookworm. We can instead write a source file then. ",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1917931623",
    "pr_number": 17539,
    "pr_file": "docker/bootstrap/Dockerfile.common",
    "created_at": "2025-01-16T08:18:26+00:00",
    "commented_code": "-FROM --platform=linux/amd64 golang:1.23.4-bullseye\n+FROM --platform=linux/amd64 golang:1.23.4-bookworm\n \n # Install Vitess build dependencies\n RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \\",
    "repo_full_name": "vitessio/vitess",
    "discussion_comments": [
      {
        "comment_id": "1917931623",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17539,
        "pr_file": "docker/bootstrap/Dockerfile.common",
        "discussion_id": "1917931623",
        "commented_code": "@@ -1,4 +1,4 @@\n-FROM --platform=linux/amd64 golang:1.23.4-bullseye\n+FROM --platform=linux/amd64 golang:1.23.4-bookworm\n \n # Install Vitess build dependencies\n RUN apt-get update && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends \\",
        "comment_created_at": "2025-01-16T08:18:26+00:00",
        "comment_author": "L3o-pold",
        "comment_body": "`etcd` package do not longer exists in bookworm if I am not mistaken. Should be replaced with `etcd-client` and `etcd-server`",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "1899543622",
    "pr_number": 17371,
    "pr_file": "go/test/endtoend/vreplication/r",
    "created_at": "2024-12-30T13:26:47+00:00",
    "commented_code": "+cleanup() {\n+    rm -rf /Users/rohit/vtdataroot/*",
    "repo_full_name": "vitessio/vitess",
    "discussion_comments": [
      {
        "comment_id": "1899543622",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17371,
        "pr_file": "go/test/endtoend/vreplication/r",
        "discussion_id": "1899543622",
        "commented_code": "@@ -0,0 +1,50 @@\n+cleanup() {\n+    rm -rf /Users/rohit/vtdataroot/*",
        "comment_created_at": "2024-12-30T13:26:47+00:00",
        "comment_author": "GuptaManan100",
        "comment_body": "This looks wrong. Do we want to use an env variable `$VTDATAROOT` instead.",
        "pr_file_module": null
      },
      {
        "comment_id": "1899652755",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17371,
        "pr_file": "go/test/endtoend/vreplication/r",
        "discussion_id": "1899543622",
        "commented_code": "@@ -0,0 +1,50 @@\n+cleanup() {\n+    rm -rf /Users/rohit/vtdataroot/*",
        "comment_created_at": "2024-12-30T16:18:44+00:00",
        "comment_author": "rohit-nayak-ps",
        "comment_body": "Mistakenly added my local test scripts. Removed.",
        "pr_file_module": null
      }
    ]
  }
]