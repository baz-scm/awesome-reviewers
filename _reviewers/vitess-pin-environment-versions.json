[
  {
    "discussion_id": "1843651600",
    "pr_number": 17237,
    "pr_file": ".github/workflows/cluster_endtoend_onlineddl_vrepl.yml",
    "created_at": "2024-11-15T11:49:36+00:00",
    "commented_code": "jobs:\n   build:\n     name: Run endtoend tests on Cluster (onlineddl_vrepl)\n-    runs-on: gh-hosted-runners-16cores-1\n+    runs-on: ${{ github.repository_owner == 'vitessio' && 'gh-hosted-runners-16cores-1' || 'ubuntu-latest' }}",
    "repo_full_name": "vitessio/vitess",
    "discussion_comments": [
      {
        "comment_id": "1843651600",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17237,
        "pr_file": ".github/workflows/cluster_endtoend_onlineddl_vrepl.yml",
        "discussion_id": "1843651600",
        "commented_code": "@@ -16,7 +16,7 @@ env:\n jobs:\n   build:\n     name: Run endtoend tests on Cluster (onlineddl_vrepl)\n-    runs-on: gh-hosted-runners-16cores-1\n+    runs-on: ${{ github.repository_owner == 'vitessio' && 'gh-hosted-runners-16cores-1' || 'ubuntu-latest' }}",
        "comment_created_at": "2024-11-15T11:49:36+00:00",
        "comment_author": "dbussink",
        "comment_body": "I thunk we should pin a to a specific known working ubuntu version and not `latest`. That we do that in other jobs in a mistake imho, we explicitly pinned it in the past to avoid having to scramble when it gets updated. ",
        "pr_file_module": null
      },
      {
        "comment_id": "1843762028",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17237,
        "pr_file": ".github/workflows/cluster_endtoend_onlineddl_vrepl.yml",
        "discussion_id": "1843651600",
        "commented_code": "@@ -16,7 +16,7 @@ env:\n jobs:\n   build:\n     name: Run endtoend tests on Cluster (onlineddl_vrepl)\n-    runs-on: gh-hosted-runners-16cores-1\n+    runs-on: ${{ github.repository_owner == 'vitessio' && 'gh-hosted-runners-16cores-1' || 'ubuntu-latest' }}",
        "comment_created_at": "2024-11-15T13:21:42+00:00",
        "comment_author": "arthurschreiber",
        "comment_body": "I'm okay with that, but I think that should probably go into a separate PR, right? \ud83e\udd14 ",
        "pr_file_module": null
      },
      {
        "comment_id": "1857148932",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17237,
        "pr_file": ".github/workflows/cluster_endtoend_onlineddl_vrepl.yml",
        "discussion_id": "1843651600",
        "commented_code": "@@ -16,7 +16,7 @@ env:\n jobs:\n   build:\n     name: Run endtoend tests on Cluster (onlineddl_vrepl)\n-    runs-on: gh-hosted-runners-16cores-1\n+    runs-on: ${{ github.repository_owner == 'vitessio' && 'gh-hosted-runners-16cores-1' || 'ubuntu-latest' }}",
        "comment_created_at": "2024-11-25T18:20:26+00:00",
        "comment_author": "deepthi",
        "comment_body": "Agree with @dbussink on this. we should not be overriding the vitessio org runner with `ubuntu-latest`, it should be pinned to the actual latest version.",
        "pr_file_module": null
      },
      {
        "comment_id": "1857178815",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17237,
        "pr_file": ".github/workflows/cluster_endtoend_onlineddl_vrepl.yml",
        "discussion_id": "1843651600",
        "commented_code": "@@ -16,7 +16,7 @@ env:\n jobs:\n   build:\n     name: Run endtoend tests on Cluster (onlineddl_vrepl)\n-    runs-on: gh-hosted-runners-16cores-1\n+    runs-on: ${{ github.repository_owner == 'vitessio' && 'gh-hosted-runners-16cores-1' || 'ubuntu-latest' }}",
        "comment_created_at": "2024-11-25T18:44:33+00:00",
        "comment_author": "arthurschreiber",
        "comment_body": "Thanks for the heads up. Will upgrade this tomorrow",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2003719077",
    "pr_number": 17943,
    "pr_file": ".github/workflows/upgrade_downgrade_test_semi_sync.yml",
    "created_at": "2025-03-19T16:05:14+00:00",
    "commented_code": "upgrade_downgrade_test_e2e:\n     timeout-minutes: 60\n     name: Run Semi Sync Upgrade Downgrade Test\n-    runs-on: gh-hosted-runners-16cores-1-24.04\n+    runs-on: oracle-16cpu-64gb-x86-64",
    "repo_full_name": "vitessio/vitess",
    "discussion_comments": [
      {
        "comment_id": "2003719077",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17943,
        "pr_file": ".github/workflows/upgrade_downgrade_test_semi_sync.yml",
        "discussion_id": "2003719077",
        "commented_code": "@@ -13,7 +13,7 @@ jobs:\n   upgrade_downgrade_test_e2e:\n     timeout-minutes: 60\n     name: Run Semi Sync Upgrade Downgrade Test\n-    runs-on: gh-hosted-runners-16cores-1-24.04\n+    runs-on: oracle-16cpu-64gb-x86-64",
        "comment_created_at": "2025-03-19T16:05:14+00:00",
        "comment_author": "dbussink",
        "comment_body": "Is there an alias that also guarantees a specific distro / version? We've been bitten many times before by floating names when they upgraded and we had to immediately rush and drop everything else to fix CI. \r\n\r\nWe had explicit distro versions before so we could upgrade at a specific moment of our choice and now when these runner pools are updated. It also allows for updating in a separate PR while not being blocked anywhere else. ",
        "pr_file_module": null
      },
      {
        "comment_id": "2003725776",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17943,
        "pr_file": ".github/workflows/upgrade_downgrade_test_semi_sync.yml",
        "discussion_id": "2003719077",
        "commented_code": "@@ -13,7 +13,7 @@ jobs:\n   upgrade_downgrade_test_e2e:\n     timeout-minutes: 60\n     name: Run Semi Sync Upgrade Downgrade Test\n-    runs-on: gh-hosted-runners-16cores-1-24.04\n+    runs-on: oracle-16cpu-64gb-x86-64",
        "comment_created_at": "2025-03-19T16:08:25+00:00",
        "comment_author": "jeefy",
        "comment_body": "We didn't set up a specific alias for distro, but our intent is for this to ONLY mirror `ubuntu-latest` unless/until we hit a specific instance of needing an older ubuntu distro.\r\n\r\nThe runner image used is defined here: https://github.com/cncf/automation/tree/main/ci/gha-runner-image",
        "pr_file_module": null
      },
      {
        "comment_id": "2003734882",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17943,
        "pr_file": ".github/workflows/upgrade_downgrade_test_semi_sync.yml",
        "discussion_id": "2003719077",
        "commented_code": "@@ -13,7 +13,7 @@ jobs:\n   upgrade_downgrade_test_e2e:\n     timeout-minutes: 60\n     name: Run Semi Sync Upgrade Downgrade Test\n-    runs-on: gh-hosted-runners-16cores-1-24.04\n+    runs-on: oracle-16cpu-64gb-x86-64",
        "comment_created_at": "2025-03-19T16:11:58+00:00",
        "comment_author": "dbussink",
        "comment_body": "> We didn't set up a specific alias for distro, but our intent is for this to ONLY mirror `ubuntu-latest` unless/until we hit a specific instance of needing an older ubuntu distro.\r\n\r\nRight, but that's what explicitly caused us pain every time it was updated in the past. The biggest problem is not even that we don't want to upgrade, it's that it blocks us from even pro-actively upgrading to avoid the problems in the first place. So we have no way to deal with it and are forced to let things break and then have to rush to fix it \ud83d\ude22. \r\n\r\nSo it's not that we need an older distro, it's that we need the explicit version so that we can control when to upgrade (which is often *before* `-latest` would change). ",
        "pr_file_module": null
      },
      {
        "comment_id": "2003758367",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17943,
        "pr_file": ".github/workflows/upgrade_downgrade_test_semi_sync.yml",
        "discussion_id": "2003719077",
        "commented_code": "@@ -13,7 +13,7 @@ jobs:\n   upgrade_downgrade_test_e2e:\n     timeout-minutes: 60\n     name: Run Semi Sync Upgrade Downgrade Test\n-    runs-on: gh-hosted-runners-16cores-1-24.04\n+    runs-on: oracle-16cpu-64gb-x86-64",
        "comment_created_at": "2025-03-19T16:22:29+00:00",
        "comment_author": "dbussink",
        "comment_body": "@jeefy I don't want to hard block on this btw, but it's something that ideally we do have some solution for at some point. If that's more when Ubuntu 26.04 would be out next year that's also good but ideally there's something before then :smile:. ",
        "pr_file_module": null
      },
      {
        "comment_id": "2003763840",
        "repo_full_name": "vitessio/vitess",
        "pr_number": 17943,
        "pr_file": ".github/workflows/upgrade_downgrade_test_semi_sync.yml",
        "discussion_id": "2003719077",
        "commented_code": "@@ -13,7 +13,7 @@ jobs:\n   upgrade_downgrade_test_e2e:\n     timeout-minutes: 60\n     name: Run Semi Sync Upgrade Downgrade Test\n-    runs-on: gh-hosted-runners-16cores-1-24.04\n+    runs-on: oracle-16cpu-64gb-x86-64",
        "comment_created_at": "2025-03-19T16:25:09+00:00",
        "comment_author": "jeefy",
        "comment_body": "I'll update our container builds/tags to ensure the runners can be pinned to specific os/versions. That'll come with a follow-up PR, probably post-KubeCon. \r\n\r\nSpit-balling, it'll probably be `oracle-16cpu-64gb-x86-64-24.04` vs `oracle-16cpu-64gb-x86-64`",
        "pr_file_module": null
      }
    ]
  }
]