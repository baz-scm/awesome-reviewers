[
  {
    "discussion_id": "2190246149",
    "pr_number": 17112,
    "pr_file": "vllm/model_executor/layers/quantization/kernels/mixed_precision/__init__.py",
    "created_at": "2025-07-07T14:17:26+00:00",
    "commented_code": "if current_platform is None:\n             raise ValueError(\"Cannot determine compute capability\")\n         _cc = current_platform.get_device_capability()\n-        compute_capability = _cc[0] * 10 + _cc[1]\n+        if _cc is not None:",
    "repo_full_name": "vllm-project/vllm",
    "discussion_comments": [
      {
        "comment_id": "2190246149",
        "repo_full_name": "vllm-project/vllm",
        "pr_number": 17112,
        "pr_file": "vllm/model_executor/layers/quantization/kernels/mixed_precision/__init__.py",
        "discussion_id": "2190246149",
        "commented_code": "@@ -52,20 +56,21 @@ def choose_mp_linear_kernel(\n         if current_platform is None:\n             raise ValueError(\"Cannot determine compute capability\")\n         _cc = current_platform.get_device_capability()\n-        compute_capability = _cc[0] * 10 + _cc[1]\n+        if _cc is not None:",
        "comment_created_at": "2025-07-07T14:17:26+00:00",
        "comment_author": "mgoin",
        "comment_body": "Why did you add capability for cc to be None but not use it in your new quant methods? Is this change needed anymore?",
        "pr_file_module": null
      },
      {
        "comment_id": "2190356106",
        "repo_full_name": "vllm-project/vllm",
        "pr_number": 17112,
        "pr_file": "vllm/model_executor/layers/quantization/kernels/mixed_precision/__init__.py",
        "discussion_id": "2190246149",
        "commented_code": "@@ -52,20 +56,21 @@ def choose_mp_linear_kernel(\n         if current_platform is None:\n             raise ValueError(\"Cannot determine compute capability\")\n         _cc = current_platform.get_device_capability()\n-        compute_capability = _cc[0] * 10 + _cc[1]\n+        if _cc is not None:",
        "comment_created_at": "2025-07-07T15:04:53+00:00",
        "comment_author": "nikhil-arm",
        "comment_body": "current_platform.get_device_capability() returns None on Aarch64 Platform, compute_capability was calculated unconditionally by dereferencing _cc indices.\r\nI added conditional check for platforms where _cc is None\r\nJust like its done in existing code here : https://github.com/nikhil-arm/vllm/blob/67309a1cb55f865f745b36501707f9f73bb023cc/vllm/model_executor/layers/quantization/kernels/scaled_mm/__init__.py#L52",
        "pr_file_module": null
      }
    ]
  }
]