[
  {
    "discussion_id": "2205171230",
    "pr_number": 4523,
    "pr_file": "src/node/internal/events.ts",
    "created_at": "2025-07-14T15:05:45+00:00",
    "commented_code": "}\n \n EventEmitter.prototype.eventNames = function eventNames() {\n-  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n+  return this._eventsCount > 0 && this._events !== undefined\n+    ? Reflect.ownKeys(this._events)\n+    : [];",
    "repo_full_name": "cloudflare/workerd",
    "discussion_comments": [
      {
        "comment_id": "2205171230",
        "repo_full_name": "cloudflare/workerd",
        "pr_number": 4523,
        "pr_file": "src/node/internal/events.ts",
        "discussion_id": "2205171230",
        "commented_code": "@@ -745,7 +760,9 @@ export function listenerCount(emitter: any, type: string | symbol) {\n }\n \n EventEmitter.prototype.eventNames = function eventNames() {\n-  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n+  return this._eventsCount > 0 && this._events !== undefined\n+    ? Reflect.ownKeys(this._events)\n+    : [];",
        "comment_created_at": "2025-07-14T15:05:45+00:00",
        "comment_author": "jasnell",
        "comment_body": "Nit: I believe you could simplify this a bit with...\r\n\r\n```suggestion\r\n  return this._eventsCount > 0 \r\n    ? Reflect.ownKeys(this._events || {})\r\n    : [];\r\n```",
        "pr_file_module": null
      },
      {
        "comment_id": "2205180311",
        "repo_full_name": "cloudflare/workerd",
        "pr_number": 4523,
        "pr_file": "src/node/internal/events.ts",
        "discussion_id": "2205171230",
        "commented_code": "@@ -745,7 +760,9 @@ export function listenerCount(emitter: any, type: string | symbol) {\n }\n \n EventEmitter.prototype.eventNames = function eventNames() {\n-  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n+  return this._eventsCount > 0 && this._events !== undefined\n+    ? Reflect.ownKeys(this._events)\n+    : [];",
        "comment_created_at": "2025-07-14T15:10:06+00:00",
        "comment_author": "anonrig",
        "comment_body": "Agreed",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2205186274",
    "pr_number": 4523,
    "pr_file": "src/node/internal/events.ts",
    "created_at": "2025-07-14T15:12:59+00:00",
    "commented_code": "}\n \n EventEmitter.prototype.eventNames = function eventNames() {\n-  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n+  return this._eventsCount > 0 \n+    ? Reflect.ownKeys(this._events || {})\n+    : [];",
    "repo_full_name": "cloudflare/workerd",
    "discussion_comments": [
      {
        "comment_id": "2205186274",
        "repo_full_name": "cloudflare/workerd",
        "pr_number": 4523,
        "pr_file": "src/node/internal/events.ts",
        "discussion_id": "2205186274",
        "commented_code": "@@ -745,7 +760,9 @@ export function listenerCount(emitter: any, type: string | symbol) {\n }\n \n EventEmitter.prototype.eventNames = function eventNames() {\n-  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n+  return this._eventsCount > 0 \n+    ? Reflect.ownKeys(this._events || {})\n+    : [];",
        "comment_created_at": "2025-07-14T15:12:59+00:00",
        "comment_author": "anonrig",
        "comment_body": "```suggestion\r\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events || {}) : [];\r\n```",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "2180631098",
    "pr_number": 4446,
    "pr_file": "src/node/internal/internal_errors.ts",
    "created_at": "2025-07-02T17:41:21+00:00",
    "commented_code": "}\n }\n \n+export class ERR_EPERM extends NodeSyscallError {\n+  constructor(options: { syscall: string; errno?: number }) {\n+    super('EPERM', 'Operation not permitted', options.syscall);\n+    this.errno = options.errno || 1; // EPERM",
    "repo_full_name": "cloudflare/workerd",
    "discussion_comments": [
      {
        "comment_id": "2180631098",
        "repo_full_name": "cloudflare/workerd",
        "pr_number": 4446,
        "pr_file": "src/node/internal/internal_errors.ts",
        "discussion_id": "2180631098",
        "commented_code": "@@ -862,6 +862,13 @@ export class ERR_EEXIST extends NodeSyscallError {\n   }\n }\n \n+export class ERR_EPERM extends NodeSyscallError {\n+  constructor(options: { syscall: string; errno?: number }) {\n+    super('EPERM', 'Operation not permitted', options.syscall);\n+    this.errno = options.errno || 1; // EPERM",
        "comment_created_at": "2025-07-02T17:41:21+00:00",
        "comment_author": "anonrig",
        "comment_body": "```suggestion\r\n    this.errno = options.errno ?? 1; // EPERM\r\n```",
        "pr_file_module": null
      }
    ]
  }
]