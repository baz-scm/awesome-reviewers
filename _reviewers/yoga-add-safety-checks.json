[
  {
    "discussion_id": "205405831",
    "pr_number": 509,
    "pr_file": "YogaKit/Source/YGLayout.m",
    "created_at": "2018-07-26T10:24:05+00:00",
    "commented_code": "{\n   return (YGValue) { .value = value, .unit = YGUnitPoint };\n }\n-\n YGValue YGPercentValue(CGFloat value)\n {\n   return (YGValue) { .value = value, .unit = YGUnitPercent };\n }\n \n static YGConfigRef globalConfig;\n \n-@interface YGLayout ()\n-\n-@property (nonatomic, weak, readonly) UIView *view;\n-\n-@end\n-\n-@implementation YGLayout\n+@implementation YGLayout {\n+    @public\n+    YGNodeRef _node;\n+    id<YGLayoutEntity> _entity;",
    "repo_full_name": "facebook/yoga",
    "discussion_comments": [
      {
        "comment_id": "205405831",
        "repo_full_name": "facebook/yoga",
        "pr_number": 509,
        "pr_file": "YogaKit/Source/YGLayout.m",
        "discussion_id": "205405831",
        "commented_code": "@@ -91,25 +91,21 @@ YGValue YGPointValue(CGFloat value)\n {\n   return (YGValue) { .value = value, .unit = YGUnitPoint };\n }\n-\n YGValue YGPercentValue(CGFloat value)\n {\n   return (YGValue) { .value = value, .unit = YGUnitPercent };\n }\n \n static YGConfigRef globalConfig;\n \n-@interface YGLayout ()\n-\n-@property (nonatomic, weak, readonly) UIView *view;\n-\n-@end\n-\n-@implementation YGLayout\n+@implementation YGLayout {\n+    @public\n+    YGNodeRef _node;\n+    id<YGLayoutEntity> _entity;",
        "comment_created_at": "2018-07-26T10:24:05+00:00",
        "comment_author": "timaktimak",
        "comment_body": "Looks like `_entity` needs to be weak to avoid a cycle between the entity and the layout",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "163811875",
    "pr_number": 610,
    "pr_file": "YogaKit/Source/YGLayout.m",
    "created_at": "2018-01-25T11:06:49+00:00",
    "commented_code": "YGNodeSetContext(_node, (__bridge void *) view);\n     _isEnabled = NO;\n     _isIncludedInLayout = YES;\n+    _isUIView = [view isMemberOfClass:[UIView class]];",
    "repo_full_name": "facebook/yoga",
    "discussion_comments": [
      {
        "comment_id": "163811875",
        "repo_full_name": "facebook/yoga",
        "pr_number": 610,
        "pr_file": "YogaKit/Source/YGLayout.m",
        "discussion_id": "163811875",
        "commented_code": "@@ -126,6 +127,7 @@ - (instancetype)initWithView:(UIView*)view\n     YGNodeSetContext(_node, (__bridge void *) view);\n     _isEnabled = NO;\n     _isIncludedInLayout = YES;\n+    _isUIView = [view isMemberOfClass:[UIView class]];",
        "comment_created_at": "2018-01-25T11:06:49+00:00",
        "comment_author": "priteshrnandgaonkar",
        "comment_body": "Here the `view` passed in the initialiser is of type `UIView`. Why do we need to have a bool with `[view isMemberOfClass:[UIView class]]` variable? ",
        "pr_file_module": null
      },
      {
        "comment_id": "163821271",
        "repo_full_name": "facebook/yoga",
        "pr_number": 610,
        "pr_file": "YogaKit/Source/YGLayout.m",
        "discussion_id": "163811875",
        "commented_code": "@@ -126,6 +127,7 @@ - (instancetype)initWithView:(UIView*)view\n     YGNodeSetContext(_node, (__bridge void *) view);\n     _isEnabled = NO;\n     _isIncludedInLayout = YES;\n+    _isUIView = [view isMemberOfClass:[UIView class]];",
        "comment_created_at": "2018-01-25T11:50:57+00:00",
        "comment_author": "kovpas",
        "comment_body": "Because it could also be a `UILabel`, `UIButton` and any other subclass of `UIView`. `isMemberOfClass:` makes sure that the `view` parameter is exactly `UIView`, not a subclass.",
        "pr_file_module": null
      }
    ]
  },
  {
    "discussion_id": "163817865",
    "pr_number": 610,
    "pr_file": "YogaKit/Source/YGLayout.m",
    "created_at": "2018-01-25T11:34:52+00:00",
    "commented_code": "const CGFloat constrainedHeight = (heightMode == YGMeasureModeUndefined) ? CGFLOAT_MAX: height;\n \n   UIView *view = (__bridge UIView*) YGNodeGetContext(node);\n-  const CGSize sizeThatFits = [view sizeThatFits:(CGSize) {\n-    .width = constrainedWidth,\n-    .height = constrainedHeight,\n-  }];\n+  CGSize sizeThatFits = CGSizeZero;\n+\n+  // Fix for https://github.com/facebook/yoga/issues/606\n+  if (!view.yoga.isUIView || [view.subviews count] > 0) {",
    "repo_full_name": "facebook/yoga",
    "discussion_comments": [
      {
        "comment_id": "163817865",
        "repo_full_name": "facebook/yoga",
        "pr_number": 610,
        "pr_file": "YogaKit/Source/YGLayout.m",
        "discussion_id": "163817865",
        "commented_code": "@@ -304,10 +306,15 @@ static YGSize YGMeasureView(\n   const CGFloat constrainedHeight = (heightMode == YGMeasureModeUndefined) ? CGFLOAT_MAX: height;\n \n   UIView *view = (__bridge UIView*) YGNodeGetContext(node);\n-  const CGSize sizeThatFits = [view sizeThatFits:(CGSize) {\n-    .width = constrainedWidth,\n-    .height = constrainedHeight,\n-  }];\n+  CGSize sizeThatFits = CGSizeZero;\n+\n+  // Fix for https://github.com/facebook/yoga/issues/606\n+  if (!view.yoga.isUIView || [view.subviews count] > 0) {",
        "comment_created_at": "2018-01-25T11:34:52+00:00",
        "comment_author": "priteshrnandgaonkar",
        "comment_body": "I think `!view.yoga.isUIView` this check is not required. Happy to hear about your inputs",
        "pr_file_module": null
      },
      {
        "comment_id": "163822068",
        "repo_full_name": "facebook/yoga",
        "pr_number": 610,
        "pr_file": "YogaKit/Source/YGLayout.m",
        "discussion_id": "163817865",
        "commented_code": "@@ -304,10 +306,15 @@ static YGSize YGMeasureView(\n   const CGFloat constrainedHeight = (heightMode == YGMeasureModeUndefined) ? CGFLOAT_MAX: height;\n \n   UIView *view = (__bridge UIView*) YGNodeGetContext(node);\n-  const CGSize sizeThatFits = [view sizeThatFits:(CGSize) {\n-    .width = constrainedWidth,\n-    .height = constrainedHeight,\n-  }];\n+  CGSize sizeThatFits = CGSizeZero;\n+\n+  // Fix for https://github.com/facebook/yoga/issues/606\n+  if (!view.yoga.isUIView || [view.subviews count] > 0) {",
        "comment_created_at": "2018-01-25T11:54:45+00:00",
        "comment_author": "kovpas",
        "comment_body": "this condition practically says \"we want to invoke `sizeThatFits` only in case if the measured view is not a `UIView` instance or it's a `UIView`, but has got children\". The check is needed because we do want to invoke `sizeThatFits` for a UILabel (for example) that has got no subviews, but returns a correct value as a result of invocation of `sizeThatFits`",
        "pr_file_module": null
      },
      {
        "comment_id": "163823002",
        "repo_full_name": "facebook/yoga",
        "pr_number": 610,
        "pr_file": "YogaKit/Source/YGLayout.m",
        "discussion_id": "163817865",
        "commented_code": "@@ -304,10 +306,15 @@ static YGSize YGMeasureView(\n   const CGFloat constrainedHeight = (heightMode == YGMeasureModeUndefined) ? CGFLOAT_MAX: height;\n \n   UIView *view = (__bridge UIView*) YGNodeGetContext(node);\n-  const CGSize sizeThatFits = [view sizeThatFits:(CGSize) {\n-    .width = constrainedWidth,\n-    .height = constrainedHeight,\n-  }];\n+  CGSize sizeThatFits = CGSizeZero;\n+\n+  // Fix for https://github.com/facebook/yoga/issues/606\n+  if (!view.yoga.isUIView || [view.subviews count] > 0) {",
        "comment_created_at": "2018-01-25T11:59:10+00:00",
        "comment_author": "priteshrnandgaonkar",
        "comment_body": "Aah Got it. Can you add a comment(in brief) explaining this before the condition?",
        "pr_file_module": null
      },
      {
        "comment_id": "163823693",
        "repo_full_name": "facebook/yoga",
        "pr_number": 610,
        "pr_file": "YogaKit/Source/YGLayout.m",
        "discussion_id": "163817865",
        "commented_code": "@@ -304,10 +306,15 @@ static YGSize YGMeasureView(\n   const CGFloat constrainedHeight = (heightMode == YGMeasureModeUndefined) ? CGFLOAT_MAX: height;\n \n   UIView *view = (__bridge UIView*) YGNodeGetContext(node);\n-  const CGSize sizeThatFits = [view sizeThatFits:(CGSize) {\n-    .width = constrainedWidth,\n-    .height = constrainedHeight,\n-  }];\n+  CGSize sizeThatFits = CGSizeZero;\n+\n+  // Fix for https://github.com/facebook/yoga/issues/606\n+  if (!view.yoga.isUIView || [view.subviews count] > 0) {",
        "comment_created_at": "2018-01-25T12:02:34+00:00",
        "comment_author": "kovpas",
        "comment_body": "Done",
        "pr_file_module": null
      }
    ]
  }
]