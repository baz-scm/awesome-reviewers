---
layout: default
title: Leaderboard
description: Top contributors powering Awesome Reviewers
---

<section class="hero leaderboard-hero">
  <div class="container">
    <a href="/" class="back-link">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
      </svg>
      Back to all reviewers
    </a>
    <h1>Leaderboard</h1>
    <p>Top contributors behind the Awesome Reviewers prompts.</p>
  </div>
</section>

<section class="library-header">
  <div class="container">
    <h2>Contributors (<span id="leader-count">{{ site.data.leaderboard | size }}</span>)</h2>
  </div>
</section>

<section class="leaderboard">
  <div class="container">
    <table id="leaderboard-table" class="leaderboard-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Reviewers</th>
          <th>Repositories</th>
          <th>Last Contribution</th>
        </tr>
      </thead>
      <tbody>
        {% for user in site.data.leaderboard %}
        <tr data-contributor="{{ user.name }}">
          <td>{{ forloop.index }}</td>
          <td>
            {% if forloop.index == 1 %}ðŸ¥‡ {% elsif forloop.index == 2 %}ðŸ¥ˆ {% elsif forloop.index == 3 %}ðŸ¥‰ {% endif %}
            <a href="https://github.com/{{ user.name }}" target="_blank" rel="noopener noreferrer">{{ user.name }}</a>
          </td>
          <td data-sort="{{ user.reviewers_count }}">{{ user.reviewers_count }}</td>
          <td data-sort="{{ user.repos_count }}">{{ user.repos_count }}</td>
          <td data-sort="{{ user.last_contribution }}">{{ user.last_contribution | date: '%Y-%m-%d' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

<div id="drawer" class="drawer">
  <div class="drawer-overlay" onclick="closeDrawer()"></div>
  <div class="drawer-panel">
    <div class="drawer-header">
      <button class="drawer-close" onclick="closeDrawer()">&times;</button>
    </div>
    <div id="drawer-content"></div>
  </div>
</div>

<script>
function sortTable(col) {
  const table = document.getElementById('leaderboard-table');
  const tbody = table.tBodies[0];
  const rows = Array.from(tbody.rows);
  const asc = table.dataset.sortCol == col && table.dataset.sortDir === 'asc' ? false : true;
  rows.sort(function(a, b) {
    let aVal = a.cells[col].dataset.sort || a.cells[col].innerText;
    let bVal = b.cells[col].dataset.sort || b.cells[col].innerText;
    const numA = parseFloat(aVal); const numB = parseFloat(bVal);
    if(!isNaN(numA) && !isNaN(numB)) {
      return asc ? numA - numB : numB - numA;
    }
    return asc ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
  });
  rows.forEach(r => tbody.appendChild(r));
  table.dataset.sortCol = col;
  table.dataset.sortDir = asc ? 'asc' : 'desc';
}

document.querySelectorAll('#leaderboard-table th').forEach((th, i) => {
  th.addEventListener('click', () => sortTable(i));
});

let contributors = {};

fetch('{{ "/assets/data/contributors.json" | relative_url }}')
  .then(res => res.json())
  .then(data => {
    contributors = data;
    attachContributorEvents();
    const hash = location.hash.slice(1);
    if (hash && contributors[hash]) {
      openContributorDrawer(hash);
    }
  });

function attachContributorEvents() {
  document.querySelectorAll('tr[data-contributor]').forEach(row => {
    row.addEventListener('click', e => {
      if (e.target.tagName.toLowerCase() === 'a') return;
      const user = row.dataset.contributor;
      openContributorDrawer(user);
    });
  });
}

function openContributorDrawer(user) {
  const info = contributors[user];
  if (!info) return;
  const drawer = document.getElementById('drawer');
  const content = document.getElementById('drawer-content');
  content.innerHTML = '';

  const header = document.createElement('div');
  header.className = 'contrib-header';
  const avatar = document.createElement('img');
  avatar.className = 'contrib-avatar';
  avatar.src = `https://github.com/${user}.png?size=80`;
  avatar.alt = `${user} avatar`;
  header.appendChild(avatar);
  const infoBox = document.createElement('div');
  const nameEl = document.createElement('div');
  nameEl.className = 'contrib-name';
  nameEl.textContent = user;
  infoBox.appendChild(nameEl);
  const userLink = document.createElement('a');
  userLink.href = `https://github.com/${user}`;
  userLink.target = '_blank';
  userLink.rel = 'noopener noreferrer';
  userLink.className = 'contrib-username';
  userLink.textContent = '@' + user;
  infoBox.appendChild(userLink);

  const stats = document.createElement('div');
  stats.className = 'contrib-stats';
  const totalComments = Object.values(info.comments).reduce((a,b) => a + b.length, 0);
  stats.innerHTML = `
    <div class="contrib-stat"><span class="contrib-stat-value">${info.repos.length}</span>Repos</div>
    <div class="contrib-stat"><span class="contrib-stat-value">${info.entries.length}</span>Entries</div>
    <div class="contrib-stat"><span class="contrib-stat-value">${totalComments}</span>Comments</div>
  `;
  infoBox.appendChild(stats);
  header.appendChild(infoBox);
  content.appendChild(header);

  function createSection(title, count) {
    const details = document.createElement('details');
    details.className = 'contrib-section';
    const summary = document.createElement('summary');
    summary.textContent = `${title} (${count})`;
    details.appendChild(summary);
    return details;
  }

  const reposDetails = createSection('Repositories', info.repos.length);
  const repoList = document.createElement('ul');
  info.repos.forEach(r => {
    const li = document.createElement('li');
    const a = document.createElement('a');
    a.href = `/?repo=${encodeURIComponent(r)}`;
    a.target = '_blank';
    a.rel = 'noopener noreferrer';
    a.textContent = r;
    li.appendChild(a);
    repoList.appendChild(li);
  });
  reposDetails.appendChild(repoList);
  content.appendChild(reposDetails);

  const entriesDetails = createSection('Reviewer Entries', info.entries.length);
  const entriesList = document.createElement('ul');
  info.entries.forEach(e => {
    const li = document.createElement('li');
    const a = document.createElement('a');
    a.href = `/reviewers/${e.slug}/`;
    a.target = '_blank';
    a.rel = 'noopener noreferrer';
    a.textContent = e.title;
    li.appendChild(a);
    entriesList.appendChild(li);
  });
  entriesDetails.appendChild(entriesList);
  content.appendChild(entriesDetails);

  const commentsDetails = createSection('Comments', Object.keys(info.comments).length);
  Object.keys(info.comments).forEach(slug => {
    const group = document.createElement('details');
    const sum = document.createElement('summary');
    sum.textContent = `${slug} (${info.comments[slug].length})`;
    group.appendChild(sum);
    const list = document.createElement('ul');
    info.comments[slug].forEach(text => {
      const li = document.createElement('li');
      li.textContent = text;
      list.appendChild(li);
    });
    group.appendChild(list);
    commentsDetails.appendChild(group);
  });
  content.appendChild(commentsDetails);

  drawer.classList.add('open');
  history.replaceState(null, '', `#${user}`);
}

window.addEventListener('hashchange', () => {
  const h = location.hash.slice(1);
  if (!h) {
    closeDrawer();
  } else if (contributors[h]) {
    openContributorDrawer(h);
  }
});
</script>
